"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[1312],{38954:(t,e,n)=>{n.d(e,{A:()=>h,B:()=>c,C:()=>M,D:()=>P,E:()=>_,F:()=>q,G:()=>O,H:()=>Z,a:()=>U,b:()=>o,c:()=>y,d:()=>s,e:()=>u,f:()=>w,g:()=>S,h:()=>a,i:()=>l,j:()=>g,l:()=>R,m:()=>L,n:()=>v,o:()=>b,p:()=>E,q:()=>x,r:()=>I,s:()=>A,t:()=>T,u:()=>d,v:()=>G,w:()=>j,x:()=>p,y:()=>m,z:()=>f});var i=n(51850),r=n(34304);function o(t){const e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function u(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function d(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function f(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function p(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function y(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function M(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}function A(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function _(t){const e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function x(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function b(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function v(t,e){const n=e[0],i=e[1],r=e[2];let o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function S(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function w(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],l=n[2];return t[0]=r*l-o*a,t[1]=o*s-i*l,t[2]=i*a-r*s,t}function R(t,e,n,i){const r=e[0],o=e[1],s=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t}function E(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12],t[1]=n[1]*i+n[5]*r+n[9]*o+n[13],t[2]=n[2]*i+n[6]*r+n[10]*o+n[14],t}function T(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function I(t,e,n){const i=n[0],r=n[1],o=n[2],s=n[3],a=e[0],l=e[1],u=e[2],h=r*u-o*l,c=o*a-i*u,d=i*l-r*a,f=r*d-o*c,m=o*h-i*d,p=i*c-r*h,g=2*s;return t[0]=a+h*g+2*f,t[1]=l+c*g+2*m,t[2]=u+d*g+2*p,t}const k=(0,i.vt)(),C=(0,i.vt)();function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function q(t,e){if(t===e)return!0;const n=t[0],i=t[1],o=t[2],s=e[0],a=e[1],l=e[2],u=(0,r.FD)();return Math.abs(n-s)<=u*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=u*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(o-l)<=u*Math.max(1,Math.abs(o),Math.abs(l))}function P(t,e,n){const i=n[0]-e[0],r=n[1]-e[1],o=n[2]-e[2];let s=i*i+r*r+o*o;return s>0?(s=1/Math.sqrt(s),t[0]=i*s,t[1]=r*s,t[2]=o*s,t):(t[0]=0,t[1]=0,t[2]=0,t)}const U=u,D=h,N=c,O=M,G=A,Z=o,j=_;Object.freeze(Object.defineProperty({__proto__:null,abs:d,add:l,angle:function(t,e){v(k,t),v(C,e);const n=S(k,C);return n>1?0:n<-1?Math.PI:Math.acos(n)},bezier:function(t,e,n,i,r,o){const s=1-o,a=s*s,l=o*o,u=a*s,h=3*o*a,c=3*l*s,d=l*o;return t[0]=e[0]*u+n[0]*h+i[0]*c+r[0]*d,t[1]=e[1]*u+n[1]*h+i[1]*c+r[1]*d,t[2]=e[2]*u+n[2]*h+i[2]*c+r[2]*d,t},ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},clamp:function(t,e=0,n=1){return t[0]=Math.min(Math.max(t[0],e),n),t[1]=Math.min(Math.max(t[1],e),n),t[2]=Math.min(Math.max(t[2],e),n),t},copy:s,cross:w,crossAndNormalize:function(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],l=n[2],u=r*l-o*a,h=o*s-i*l,c=i*a-r*s,d=Math.sqrt(u*u+h*h+c*c);return t[0]=u/d,t[1]=h/d,t[2]=c/d,t},direction:P,dist:O,distance:M,div:N,divide:c,dot:S,equals:q,exactEquals:L,floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},hermite:function(t,e,n,i,r,o){const s=o*o,a=s*(2*o-3)+1,l=s*(o-2)+o,u=s*(o-1),h=s*(3-2*o);return t[0]=e[0]*a+n[0]*l+i[0]*u+r[0]*h,t[1]=e[1]*a+n[1]*l+i[1]*u+r[1]*h,t[2]=e[2]*a+n[2]*l+i[2]*u+r[2]*h,t},inverse:b,len:Z,length:o,lerp:R,max:p,min:m,mul:D,multiply:h,negate:x,normalize:v,random:function(t,e=1){const n=r.Ov,i=2*n()*Math.PI,o=2*n()-1,s=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t[2]=o*e,t},rotateX:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},rotateY:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},rotateZ:function(t,e,n,i){const r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:g,scaleAndAdd:y,set:a,sign:f,sqrDist:G,sqrLen:j,squaredDistance:A,squaredLength:_,str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},sub:U,subtract:u,transformMat3:T,transformMat4:E,transformQuat:I},Symbol.toStringTag,{value:"Module"}))},61528:(t,e,n)=>{n.r(e),n.d(e,{default:()=>C});var i=n(31635),r=n(11254),o=n(49186),s=n(44208),a=n(53966),l=n(25728),u=n(74887),h=n(36708),c=n(91429),d=n(87024),f=n(5443),m=n(16930),p=n(4146),g=n(52136),y=n(18768),M=n(69208),A=n(16131),_=n(8303),x=n(25036),b=n(10873),v=n(58325),S=n(88546),w=n(20655),R=n(56776),E=n(97159),T=n(16215),I=n(36005);let k=class extends((0,y.b)((0,A.q)((0,_.A)((0,x.j)((0,l.P)((0,M.d)((0,g.p)(p.A)))))))){readModifications(t,e,n){this._modificationsSource={url:(0,E.f)(t,n),context:n}}initialize(){this.addHandles((0,h.on)(()=>this.modifications,"after-changes",()=>this.modifications=this.modifications,h.OH))}constructor(t){super(t),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.modifications=null,this._modificationsSource=null,this.spatialReference=new m.A({wkid:4326,vcsWkid:115700}),this.fullExtent=new f.A(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0,this._rootTilesetJSON=null,this._rootTileset=null,this._key=null,this._session=null,this._rootRequestPromise=null}set elevationInfo(t){null!=t&&"absolute-height"!==t.mode||this._set("elevationInfo",t),this._validateElevationInfo(t)}async load(t){return this.addResolvingPromise(this._doLoad(t)),this}get rootTilesetJSON(){return this._rootTilesetJSON}get rootTileset(){return this._rootTileset}get key(){return this._key}get session(){return this._session}_findSessionParameter(t){const e=[t];for(;e?.length>0;){const t=e.pop();if(!t)return;for(const[n,i]of Object.entries(t)){if("uri"===n)try{const t=new URL("https://tmp"+i).searchParams.get("session");if(t)return t}catch(t){}"object"==typeof i&&null!==i&&e.push(i)}}return null}async requestRootAndSession(t){const e=(t,e)=>new o.A("3dtiles-init:"+t,e);return this._rootRequestPromise||(this._rootRequestPromise=new Promise((n,i)=>{this.url||i(e("url-missing","Layer url missing")),this._key=this.customParameters?this.customParameters.key:null,new Promise((t,n)=>{if(this.replacesTerrain&&!this._key){const i=this.portalItem?.portal||this.parent?.portalItem?.portal||w.A.getDefault();i.signIn().then(()=>{i.g3dTilesEnabled?(0,r.A)(i.restUrl+"/portals/self/modules/g3dtiles",{responseType:"json",query:{f:"json"}}).then(e=>{this._key=e.data.keyString,t()},()=>n(e("g3dtiles-key-error","Error fetching Google 3D Tiles key from portal"))):n(e("g3dTilesEnabled-false","Google 3D Tiles are not enabled on Portal "+i.url))},()=>n(e("sign-in-failed","Error signing in to Portal")))}else t()}).then(()=>{(0,r.A)(this.url,{query:this._key?{key:this._key,token:this.apiKey}:{token:this.apiKey},responseType:"array-buffer",signal:t}).then(t=>{try{this._rootTilesetJSON=JSON.parse((new TextDecoder).decode(t.data))}catch(t){return void i(e("root-parse-failed","Error parsing root tile, details: "+t))}this._rootTilesetJSON?(this._session=this._findSessionParameter(this._rootTilesetJSON),this._rootTileset=t.data,this.fullExtent=(0,S.uB)(this._rootTilesetJSON),n(),this._rootRequestPromise=null):i(e("root-is-null","Root tile is null."))},t=>{(0,u.QP)(t),i(e("root-load-failed","Error loading root tile")),this._rootRequestPromise=null,a.A.getLogger("IntegratedMesh3DTilesLayer").error("Layer loading failed",t)})},t=>i(t))})),this._rootRequestPromise}async _doLoad(t){const e=null!=t?t.signal:null;if(this.isUsedAsGroundLayer&&!(0,s.A)("enable-feature:basemap-groundlayers"))throw new o.A("3dtiles-init:not-supported-in-groundlayers","Layer is not supported in basemap.");try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:t=>{if(t.typeKeywords?.includes("IntegratedMesh"))return!0;throw new o.A("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},t)}catch(t){(0,u.QP)(t)}if(null!=this._modificationsSource){const e=await v.A.fromUrl(this._modificationsSource.url,this.spatialReference,t);this.setAtOrigin("modifications",e,this._modificationsSource.context.origin),this._modificationsSource=null}await this.requestRootAndSession(e)}beforeSave(){if(null!=this._modificationsSource)return this.load().then(()=>{},()=>{})}get hasAttributionData(){return!1}_validateElevationInfo(t){const e="Integrated mesh 3d tiles layers";(0,R.XF)(a.A.getLogger(this),(0,R.B)(e,"absolute-height",t)),(0,R.XF)(a.A.getLogger(this),(0,R.tW)(e,t))}get replacesTerrain(){return!!(0,s.A)("enable-feature:basemap-groundlayers")&&this.hasGoogleUrl&&this.isUsedAsGroundLayer}get isUsedAsGroundLayer(){return(0,T.S)(this.parent)}get hasGoogleUrl(){return!!this.url?.match(/.+\.googleapis.com/)}};(0,i.Cg)([(0,c.MZ)({type:["IntegratedMesh3DTilesLayer"]})],k.prototype,"operationalLayerType",void 0),(0,i.Cg)([(0,c.MZ)({type:v.A,clonable:t=>t.clone()}),(0,d.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],k.prototype,"modifications",void 0),(0,i.Cg)([(0,I.w)(["web-scene","portal-item"],"modifications")],k.prototype,"readModifications",null),(0,i.Cg)([(0,c.MZ)({type:m.A})],k.prototype,"spatialReference",void 0),(0,i.Cg)([(0,c.MZ)({type:f.A})],k.prototype,"fullExtent",void 0),(0,i.Cg)([(0,c.MZ)(b.Yj)],k.prototype,"elevationInfo",null),(0,i.Cg)([(0,c.MZ)({type:["show","hide"]})],k.prototype,"listMode",void 0),(0,i.Cg)([(0,c.MZ)(b.OZ)],k.prototype,"url",void 0),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],k.prototype,"type",void 0),(0,i.Cg)([(0,c.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],k.prototype,"path",void 0),(0,i.Cg)([(0,c.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],k.prototype,"minScale",void 0),(0,i.Cg)([(0,c.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],k.prototype,"maxScale",void 0),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],k.prototype,"hasAttributionData",null),(0,i.Cg)([(0,c.MZ)()],k.prototype,"replacesTerrain",null),(0,i.Cg)([(0,c.MZ)()],k.prototype,"isUsedAsGroundLayer",null),(0,i.Cg)([(0,c.MZ)()],k.prototype,"hasGoogleUrl",null),k=(0,i.Cg)([(0,c.$K)("esri.layers.IntegratedMesh3DTilesLayer")],k);const C=k},76553:(t,e,n)=>{function i(t){return t&&"getAtOrigin"in t&&"originOf"in t}n.d(e,{H:()=>i})},88546:(t,e,n)=>{n.d(e,{_8:()=>m,uB:()=>p});var i=n(34727),r=n(38954),o=n(51850),s=n(73941),a=n(5443),l=n(54239),u=n(16930),h=n(9762);function c(t,e){if(!Array.isArray(t)||t.length<e)return!1;for(const e of t)if("number"!=typeof e)return!1;return!0}const d=7645211,f={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850};function m(t){return!(!(t.extensions?.ESRI_crs?.wkid||t.extensions?.ESRI_crs?.latestWkid||t.extensions?.ESRI_crs?.wkt)||!t.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!t.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function p(t,e=!1){let n=new u.A({wkid:4326,vcsWkid:115700}),l=t.root?.boundingVolume,m=!1,p=t?.root?.transform;if(e&&(t.extensions?.ESRI_crs?.wkid||t.extensions?.ESRI_crs?.latestWkid||t.extensions?.ESRI_crs?.wkt)&&(t.root?.extensions?.ESRI_crs?.boundingVolume?.box||t.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))n=new u.A(t.extensions?.ESRI_crs),l=t.root?.extensions?.ESRI_crs?.boundingVolume,p=t.root?.transform,m=!0;else if(!l)return new a.A(-180,-90,180,90,n);if(l.box){const t=l?.box;if(t[3]>d&&t[7]>d&&t[11]>d)return new a.A({...f,spatialReference:n})}const g=(0,o.vt)();if(!m&&l.region&&c(l.region,6)){const t=l.region,e=(0,i.KJ)(t[0]),r=(0,i.KJ)(t[1]),o=t[4],s=(0,i.KJ)(t[2]),u=(0,i.KJ)(t[3]),h=t[5];return new a.A({xmin:e,ymin:r,zmin:o,xmax:s,ymax:u,zmax:h,spatialReference:n})}if(l.sphere&&c(l.sphere,4)){const t=l.sphere,e=(0,o.fA)(t[0],t[1],t[2]),i=t[3]/Math.sqrt(3),d=(0,o.vt)();(0,r.e)(d,e,(0,o.fA)(i,i,i));const f=(0,o.vt)();if((0,r.i)(f,e,(0,o.fA)(i,i,i)),p&&c(p,16)){const t=p;(0,r.p)(g,d,t),(0,r.d)(d,g),(0,r.p)(g,f,t),(0,r.d)(f,g)}m||((0,h.projectBuffer)(d,s.Ro,0,d,u.A.WGS84,0),(0,h.projectBuffer)(f,s.Ro,0,f,u.A.WGS84,0));const y=(0,o.vt)(),M=(0,o.vt)();return(0,r.y)(y,d,f),(0,r.x)(M,d,f),new a.A({xmin:y[0],ymin:y[1],zmin:y[2],xmax:M[0],ymax:M[1],zmax:M[2],spatialReference:n})}if(l.box&&c(l.box,12)){const t=l.box,e=(0,o.fA)(t[0],t[1],t[2]),i=(0,o.fA)(t[3],t[4],t[5]),d=(0,o.fA)(t[6],t[7],t[8]),f=(0,o.fA)(t[9],t[10],t[11]),g=[];for(let t=0;t<8;++t)g.push((0,o.vt)());if((0,r.i)(g[0],e,i),(0,r.i)(g[0],g[0],d),(0,r.i)(g[0],g[0],f),(0,r.a)(g[1],e,i),(0,r.i)(g[1],g[1],d),(0,r.i)(g[1],g[1],f),(0,r.i)(g[2],e,i),(0,r.a)(g[2],g[2],d),(0,r.i)(g[2],g[2],f),(0,r.a)(g[3],e,i),(0,r.a)(g[3],g[3],d),(0,r.i)(g[3],g[3],f),(0,r.i)(g[4],e,i),(0,r.i)(g[4],g[4],d),(0,r.a)(g[4],g[4],f),(0,r.a)(g[5],e,i),(0,r.i)(g[5],g[5],d),(0,r.a)(g[5],g[5],f),(0,r.i)(g[6],e,i),(0,r.a)(g[6],g[6],d),(0,r.a)(g[6],g[6],f),(0,r.a)(g[7],e,i),(0,r.a)(g[7],g[7],d),(0,r.a)(g[7],g[7],f),p&&c(p,16)){const t=p;for(let e=0;e<8;++e)(0,r.p)(g[e],g[e],t)}const y=(0,o.fA)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),M=(0,o.fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let t=0;t<8;++t)m||(0,h.projectBuffer)(g[t],s.Ro,0,g[t],u.A.WGS84,0),(0,r.y)(M,M,g[t]),(0,r.x)(y,y,g[t]);return new a.A({xmin:M[0],ymin:M[1],zmin:M[2],xmax:y[0],ymax:y[1],zmax:y[2],spatialReference:n})}return new a.A(-180,-90,180,90,n)}new Map([[5773,new l.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"})],[3855,new l.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"})],[115700,new l.A({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"})],[115701,new l.A({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"})],[6360,new l.A({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"})],[7837,new l.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "})]])}}]);
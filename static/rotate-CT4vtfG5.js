const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-C_bK48d2.js","./index-DxLSJ8yk.css","./index-eMjuwXia.js","./customElement-BKApPBmV.js","./index-YrgJQEeE.js","./index-BHivy5Pu.js","./resources7-BeUU2AIC.js","./index-D4SQPsjK.js"])))=>i.map(i=>d[i]);
import{dr as ue,dt as pe,sY as he,aM as fe,ae as Kt,fc as Dt,a as Q,fd as ve,sZ as O,aJ as r,aK as c,aL as p,lH as R,ly as a,co as F,i6 as Nt,lD as st,iR as S,s_ as A,oc as $,oJ as me,lx as Et,_ as b,lZ as Mt,aO as _e,sk as ge,aD as ye,s$ as jt,t0 as $e,t1 as be,t2 as we,s5 as At,ap as M,f2 as xe,eV as ke,fz as Ot,t3 as Ce,eW as Pt,fx as St,t4 as Ee,f8 as Te,hg as Ie,t5 as Lt,iS as Gt,jc as De,bL as Wt,b3 as Zt,jf as K,b6 as Me,iI as Ae,gn as Oe,ie as Vt,iM as Pe,eZ as Rt,ce as Se,bo as Le,ij as tt,iZ as Ve,db as Re,i5 as Fe,kT as ze,jW as L}from"./index-C_bK48d2.js";import{i as j,c as qt,s as Jt,v as He}from"./quantity-wpyqwS5w.js";import{A as Be}from"./MeshTransform-auT0YL_N.js";import{t as Qt}from"./meshVertexSpaceUtils-CDdm4woH.js";import{t as Ye}from"./elevationInfoUtils-C7MilKvD.js";import{g as Ue}from"./unitFormatUtils-Ckw47jIR.js";import{e as Ft}from"./getDefaultUnitForView-DghHjrRa.js";import{G as Xe,k as zt,z as Ke,B as Ne,E as je,S as Tt}from"./quantityFormatUtils-BygWVGS0.js";import{U as rt,V as Ge}from"./angularMeasurementUtils-CjfVhRr8.js";function W(){return pe()}function Ht(){return ue()}function V(e,n){const t=qe(n),i=e.replaceAll(/[\u00B0\u00BA]/g,"^").replaceAll("′","'").replaceAll("″",'"'),o=[];return he.dmsToGeog(t,1,[i],o)?new fe(o[0][0],o[0][1],Kt.WGS84):null}function We(e){var n,t;return e&&W()?O(e)??((n=V(`0° 0' 0" N | ${e}`))==null?void 0:n.longitude)??((t=V(`0 N | ${e}`))==null?void 0:t.longitude)??null:null}function Ze(e){var n,t;return e&&W()?O(e)??((n=V(`${e} | 0° 0' 0" E`))==null?void 0:n.latitude)??((t=V(`${e} | 0 E`))==null?void 0:t.latitude)??null:null}function qe(e){if(e??(e=Kt.WGS84),e.wkid){const t=Dt.geogcs(e.wkid);if(!t)throw new Q("coordinate-formatter:invalid-spatial-reference","wkid is not valid");return t}const n=e.wkt2??e.wkt;if(n){const t=Dt.fromString(ve.PE_TYPE_GEOGCS,n);if(!t)throw new Q("coordinate-formatter:invalid-spatial-reference","wkt is not valid");return t}throw new Q("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing")}const m="esri-tooltip",Je=`${m}-content`,Qe=`${m}-content--input`,tn=`${m}-content__header`,en=`${m}-content__header__spacer`,Bt=`${m}-content__header__actions`,te=`${m}-draw-header-actions`,nn=`${m}-table`,on=`${m}-help-message`,sn=`${m}-help-message__text`,rn=`${m}-help-message__icon`,Y=`${m}-field`,U={base:Y,inputMode:`${Y}--input`,title:`${Y}__title`,value:`${Y}__value`};let f=class extends R{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return a("div",{class:this.classes({[U.base]:!0,[U.inputMode]:this.mode==="input"})},a("div",{class:U.title,key:"title"},this.title),a("div",{class:U.value,key:"value"},this.value))}};r([c()],f.prototype,"hidden",void 0),r([c()],f.prototype,"mode",void 0),r([c()],f.prototype,"title",void 0),r([c()],f.prototype,"value",void 0),f=r([p("esri.views.interactive.tooltip.components.TooltipField")],f);const ln={base:`${m}-value-by-value`};let x=class extends R{constructor(){super(...arguments),this.divider="×"}render(){return a("div",{class:ln.base},a("span",null,this.left),a("span",null,this.divider),a("span",null,this.right))}};r([c()],x.prototype,"left",void 0),r([c()],x.prototype,"divider",void 0),r([c()],x.prototype,"right",void 0),x=r([p("esri.views.interactive.tooltip.components.ValueByValue")],x);const Z=1,ee=6;function an(e,n){return{angleRelative:cn,direction:dn,directionRelative:un,directionRelativeBilateral:pn,latitudeDecimalDegrees:fn,longitudeDecimalDegrees:hn,area:(t,i)=>Xe(e,t,i??n.area),length:(t,i,o)=>zt(e,t,i??n.length,o),lengthRelative:(t,i)=>Ke(e,t,i??n.length),totalLength:(t,i)=>zt(e,t,i??n.length),verticalLength:(t,i)=>Ne(e,t,i??n.verticalLength),verticalLengthRelative:(t,i)=>je(e,t,i??n.verticalLength),percentage:vn,scalar:oe,scale:mn}}function cn(e){return F(e,{signDisplay:"exceptZero",...It(Z)})}function dn(e){return Tt(e,e.rotationType,Z)}function un(e){const n=rt(e);return F(n,{style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:n>0?"never":"exceptZero",...It(Z)})}function pn(e){return Tt(e,e.rotationType,Z)}function hn(e){return ne(e,re)}function fn(e){return ne(e,le)}function Wn(e){return ie(e,re)}function Zn(e){return ie(e,le)}function ne(e,n){return Tt(Jt(e,"degrees"),"geographic",ee,n,!1)}function ie(e,n){const i=n.normalize(Jt(e,"degrees").value,void 0,!1);return oe(j(i),ee)}function vn(e){return F(e.value,{style:"percent"})}function mn(e){return F(e,{style:"percent",maximumFractionDigits:0})}function oe(e,n){return F(e.value,It(n))}function It(e){return{minimumFractionDigits:e,maximumFractionDigits:e}}function qn({createQuantity:e,sanitize:n}){return(t,i)=>{if(t==null)return null;n&&(t=n(t));const o=O(t);return o==null?null:e(o,i)}}function Jn(e){return e.replaceAll(/[*^~°º]/g,"")}const _n=e=>{let n=`[-+]?[0-9${e.thousands}]+`;return e.decimal!==""&&(n+=`${e.decimal}[0-9]+`),new RegExp(`^(${n}\\s*)${e.separator}(\\s*${n})$`,"i")},gn=" ",se=[];for(const e of[",","\\|","\\s+"])for(const n of["\\.",",",""])for(const t of["",",","\\.",gn,"\\s+"])e!==n&&e!==t&&n!==t&&se.push({separator:e,decimal:n,thousands:t,pattern:_n({decimal:n,thousands:t,separator:e})});function yn(e){for(const{decimal:n,thousands:t,pattern:i}of se){i.lastIndex=0;const o=e.match(i);if(!o)continue;const s=O(Yt(o[1],n,t)),l=O(Yt(o[2],n,t));if(s!=null&&l!=null)return{x:j(s),y:j(l)}}return null}function Yt(e,n,t){let i=e.replaceAll(/[\s+]/g,"");return t!==""&&(i=i.replaceAll(t,"")),n!==""&&(i=i.replaceAll(n,".")),i}function $n(e){if(!e||O(e)!=null||!W())return null;const n=V(e),t=G(n==null?void 0:n.latitude),i=G(n==null?void 0:n.longitude);return i!=null&&t!=null?{latitude:t,longitude:i}:null}function Qn(e){return G(We(e))}function ti(e){return G(Ze(e))}function G(e){return e!=null?qt(e,"degrees","geographic"):null}const re=new Nt(-180,180),le=new Nt(-90,90),et=Symbol("dragHandles");let u=class extends R{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transitionInfo=null,this._mode="feedback",this._getFormatters=Ye(an),this._onHeaderPointerDown=e=>{var t;const n=e.target;n instanceof HTMLElement&&((t=n==null?void 0:n.tagName)==null?void 0:t.toLowerCase())!=="calcite-button"&&(this.removeHandles(et),e.preventDefault(),e.stopPropagation(),n.setPointerCapture(e.pointerId),this.tooltip.onDragStart(e.clientX,e.clientY),this.addHandles([S(n,"pointermove",({clientX:i,clientY:o})=>{this.tooltip.onDrag(i,o)}),S(n,["pointerup","pointercancel"],i=>{this.removeHandles(et),n.releasePointerCapture(e.pointerId),this.tooltip.onDragEnd()}),S(n,"touchstart",i=>i.preventDefault())],et))},this._onDiscard=()=>{this.destroyed||(this.tooltip.emit("discard"),this.info.clearInputValues(),this.exitInputMode())},this._onCommit=(e,n)=>{if(this.destroyed)return;if(this.tooltip.emit("commit",{type:n}),n==="commit-and-exit")return void this.exitInputMode();if(n==="commit-on-blur")return;const t=this._getFocusableElements(),i=t.length,o=t.indexOf(e);if(o===-1)return void this.exitInputMode();const s=((o+(n==="commit-and-next"?1:-1))%i+i)%i;X(t.at(s))},this._onKeyDown=e=>{switch(e.code){case A.next:return this._onNextKey(e);case A.discard:return e.stopPropagation(),this._onDiscard()}}}get mode(){return this._mode}get _displayUnits(){const{displayUnits:e}=this.info.sketchOptions.values,n=Ft(this.tooltip.view);return{length:e.length??n,verticalLength:e.verticalLength??n,area:e.area??n}}get _inputUnitInfos(){const e=this._messagesUnits,n=d=>({unit:d,abbreviation:Ue(e,d,"abbr")}),{inputUnits:t}=this.info.sketchOptions.values,i=Ft(this.tooltip.view),o=t.length??i,s=t.verticalLength??i,l=t.area??i;return{length:n($e(o)),verticalLength:n(be(s)),area:n(we(l)),angle:n("degrees")}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){const{visibleElements:e}=this.info.sketchOptions.tooltips,n=this._renderedContent,t=this._renderedActions,i=this._renderedHelpMessage,o=n.length>0,s=o||!!i,l=this.mode==="input";return a("div",{class:me(Je,l&&Qe),onkeydown:this._onKeyDown,tabIndex:-1},l&&s&&e.header?a("div",{class:tn,"data-testid":"tooltip-header",key:"header",onpointerdown:this._onHeaderPointerDown},a("calcite-button",{appearance:"transparent","data-testid":"tooltip-back-button",iconFlipRtl:"both",iconStart:"chevron-left",key:"discard-button",kind:"neutral",onclick:this._onDiscard,scale:"s",tabIndex:-1}),t.length>0?a($,null,a("div",{class:en,key:"spacer"}),a("div",{class:Bt,key:"actions"},t)):null):null,o?a("div",{class:nn,key:"content"},...n):null,i)}destroy(){var e;this._focusAbortController.abort(),(e=this._transitionInfo)==null||e.transition.skipTransition()}_renderActions(){return null}loadDependencies(){return Et({button:()=>b(()=>import("./index-C_bK48d2.js").then(e=>e.xb),__vite__mapDeps([0,1]),import.meta.url),icon:()=>b(()=>import("./index-C_bK48d2.js").then(e=>e.x6),__vite__mapDeps([0,1]),import.meta.url),input:()=>b(()=>import("./index-eMjuwXia.js"),__vite__mapDeps([2,0,1,3]),import.meta.url)})}async enterInputMode(e,n){try{await this._transitionTo("input",n),await this._focusField(e)}catch(t){Mt(t)}}async exitInputMode({focusOnView:e=!0}={}){var n;try{const{container:t,info:i}=this;i.clearInputValues();const o=e?(n=t==null?void 0:t.closest(".esri-view"))==null?void 0:n.querySelector(".esri-view-surface"):null;await this._transitionTo("feedback"),o instanceof HTMLElement&&o.focus()}catch(t){Mt(t)}}_onNextKey(e){const n=this._getFocusableElements(),t=n.at(0),i=n.at(-1);t&&i&&(e.shiftKey?document.activeElement===t&&(e.preventDefault(),e.stopPropagation(),X(i)):document.activeElement===i&&(e.preventDefault(),e.stopPropagation(),X(t)))}get _renderedContent(){return Ut(this._renderContent())}get _renderedActions(){return Ut(this._renderActions())}get _renderedHelpMessage(){const{sketchOptions:e,visibleElements:n}=this.info;if(!n.helpMessage)return null;const t=e.tooltips.helpMessage??this._defaultHelpMessage;if(!t)return null;const i=e.tooltips.helpMessageIcon??"information";return a("div",{class:on,key:"help-message"},i?a("calcite-icon",{class:rn,icon:i,scale:"s"}):null,a("div",{class:sn},t))}get _defaultHelpMessage(){var i,o,s;const{helpMessage:e,viewType:n}=this.info;if(e==null)return null;const t=n==="3d"?"helpMessages3d":"helpMessages2d";return(s=(o=(i=this._messagesTooltip)==null?void 0:i.sketch)==null?void 0:o[t])==null?void 0:s[e]}async _focusField(e){var o;(o=this._focusAbortController)==null||o.abort(),this._focusAbortController=new AbortController;const{signal:n}=this._focusAbortController;await this._waitForInputs(),_e(n);const t=this._getFocusableInputs(),i=e?t.find(s=>s.getAttribute("data-field-name")===e):t.at(0);await X(i)}async _transitionTo(e,n){var o,s,l;if(this._mode===e&&!this._transitionInfo)return;if(((o=this._transitionInfo)==null?void 0:o.mode)===e)return this._transitionInfo.transition.finished;(s=this._transitionInfo)==null||s.transition.skipTransition();const t=async()=>{this.destroyed||(this._mode=e,await At(),this.destroyed||(this.renderNow(),await At(),this.destroyed||(n==null||n())))};if(!((l=this.domNode)!=null&&l.firstChild)||!document.startViewTransition||ge())return void await t();this.autoRenderingEnabled=!1;const i=this._transitionInfo={transition:document.startViewTransition(async()=>{this.destroyed||i!==this._transitionInfo||(this.autoRenderingEnabled=!0,await t())}),mode:e};try{await i.transition.finished}finally{i===this._transitionInfo&&(this._transitionInfo=null)}}async _waitForInputs(){const e=()=>{var n;return Array.from(((n=this.domNode)==null?void 0:n.querySelectorAll("calcite-input"))??[])};for(;e().length===0;)await ye(bn);await jt()}_getFocusableInputs(){var e;return Array.from(((e=this.domNode)==null?void 0:e.querySelectorAll("calcite-input:not([read-only]):not([disabled])"))??[])}_getFocusableElements(){var n;const e=(n=this.domNode)==null?void 0:n.querySelector(`.${te}`);return[...Array.from((e==null?void 0:e.querySelectorAll(`.${Bt} calcite-button:not([disabled])`))??[]),...this._getFocusableInputs()]}};async function X(e){await(e==null?void 0:e.setFocus())}function Ut(e){return(Array.isArray(e)?e:[e]).flat(10).filter(n=>!!n)}r([st("esri/core/t9n/Units"),c()],u.prototype,"_messagesUnits",void 0),r([st("esri/views/interactive/tooltip/t9n/Tooltip"),c()],u.prototype,"_messagesTooltip",void 0),r([c()],u.prototype,"info",void 0),r([c()],u.prototype,"tooltip",void 0),r([c()],u.prototype,"_mode",void 0),r([c()],u.prototype,"mode",null),r([c()],u.prototype,"_displayUnits",null),r([c()],u.prototype,"_inputUnitInfos",null),r([c()],u.prototype,"_formatters",null),r([c()],u.prototype,"fieldContext",null),r([c()],u.prototype,"_renderedContent",null),r([c()],u.prototype,"_renderedActions",null),r([c()],u.prototype,"_renderedHelpMessage",null),r([c()],u.prototype,"_defaultHelpMessage",null),u=r([p("esri.views.interactive.tooltip.content.TooltipContent")],u);const bn=20;let lt=class extends u{_renderContent(){const{area:n,radius:t,xSize:i,ySize:o,visibleElements:s}=this.info,l=this._messagesTooltip.sketch,d=this._formatters;return a($,null,s.radius&&t!=null?a(f,{title:l.radius,value:d.length(t)}):null,s.size&&i!=null&&o!=null?a(f,{title:l.size,value:a(x,{left:d.length(i),right:d.length(o)})}):null,s.area?a(f,{title:l.area,value:d.area(n)}):null)}};lt=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],lt);const g=`${m}-editable-field`,_={base:g,inputMode:`${g}--input`,feedbackMode:`${g}--feedback`,readOnly:`${g}--read-only`,locked:`${g}--locked`,title:`${g}__title`,value:`${g}__value`,valueContent:`${g}__value__content`,valueContentReadOnly:`${g}__value__content--read-only`,lockIcon:`${g}__lock-icon`,input:`${g}__input`,inputWrapper:`${g}__input-wrapper`,inputMessage:`${g}__input-message`,inputSuffix:`${g}__input-suffix`,button:`${g}__button`},nt={lock:"lock",unlock:"unlock"};let y=class extends R{constructor(){super(...arguments),this._input=null,this._lock=null,this._onLockClick=()=>{this.field.toggleLock(this.context)},this._onLockAfterCreate=e=>{this._lock=e},this._onLockAfterRemoved=()=>{this._lock=null},this._onKeyDown=e=>{e.key===A.discard&&this.mode==="input"&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=e=>{const n=this._input;if(n)switch(e.key){case A.commit:return this.field.onCommit("commit-and-exit",n,this.context);case A.next:{e.preventDefault(),e.stopPropagation();const t=e.shiftKey?"commit-and-previous":"commit-and-next";return this.field.onCommit(t,n,this.context)}}},this._onInput=e=>{this.field.onInput(e.currentTarget.value)},this._onInputBlur=e=>{const n=this._input;n&&e.relatedTarget!==this._lock&&this.field.onCommit("commit-on-blur",n,this.context)},this._selectText=()=>{const e=()=>{var n;this._input===document.activeElement&&((n=this._input)==null||n.selectText())};e(),jt().then(e)},this._onAfterCreate=e=>{this._input=e,e.addEventListener("paste",this._onPaste),e.addEventListener("beforeinput",this._onBeforeInput)},this._onAfterRemoved=e=>{e.removeEventListener("paste",this._onPaste),e.removeEventListener("beforeinput",this._onBeforeInput)},this._onPaste=e=>{var t;const n=(t=e.clipboardData)==null?void 0:t.getData("text");n&&this.field.parse(n,this.context)!=null&&(e.stopPropagation(),this.field.onInput(n))},this._onBeforeInput=e=>{(e.inputType==="historyUndo"||e.inputType==="historyRedo")&&!this.field.dirty&&e.preventDefault()}}initialize(){this.addHandles(M(()=>this._rawDisplayValue,()=>{const{committed:e,inputValue:n}=this.field;e||n||this._input!==document.activeElement||this._selectText()}))}loadDependencies(){return Et({button:()=>b(()=>import("./index-C_bK48d2.js").then(e=>e.xb),__vite__mapDeps([0,1]),import.meta.url),icon:()=>b(()=>import("./index-C_bK48d2.js").then(e=>e.x6),__vite__mapDeps([0,1]),import.meta.url),input:()=>b(()=>import("./index-eMjuwXia.js"),__vite__mapDeps([2,0,1,3]),import.meta.url),"input-message":()=>b(()=>import("./index-C_bK48d2.js").then(e=>e.xc),__vite__mapDeps([0,1]),import.meta.url)})}render(){const{field:e,mode:n}=this,t=n==="input",{locked:i,readOnly:o}=e;return a("div",{class:this.classes({[_.base]:!0,[_.feedbackMode]:n==="feedback",[_.inputMode]:n==="input",[_.locked]:i,[_.readOnly]:o})},a("div",{class:_.title,key:"title"},this._title),a("div",{class:_.value,key:"value",onkeydown:this._onKeyDown},t?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||Xt}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){const{title:e}=this.field;return typeof e=="string"?e:e(this.context)}get _messages(){var e;return((e=this.context)==null?void 0:e.messages.sketch)??{}}_renderValueFeedbackMode(){return a($,null,a("div",{class:_.valueContent,key:"value-feedback"},this._formattedValue),this.field.locked&&this.mode!=="input"?a("calcite-icon",{class:_.lockIcon,icon:nt.lock,key:"icon",scale:"s"}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return a("div",{class:this.classes(_.valueContent,_.valueContentReadOnly),key:"value-read-only"},this._formattedValue)}_renderValueWritable(){const{field:e}=this,n=this._messages,{name:t,invalid:i}=e;return a($,null,a("div",{class:_.inputWrapper,key:"value-input"},a("calcite-input",{afterCreate:this._onAfterCreate,afterRemoved:this._onAfterRemoved,class:_.input,"data-field-name":t,"data-testid":`tooltip-field-${t}`,key:"input",onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:"s",status:i?"invalid":"idle",type:"text",value:this._rawDisplayValue??Xt,onCalciteInputInput:this._onInput}),i?a("calcite-input-message",{class:_.inputMessage,scale:"s",status:"invalid"},n.invalidValue):null),a("div",{class:_.inputSuffix,key:"suffix"},this._suffix),this._renderedLockButton)}get _renderedLockButton(){const{disabled:e,locked:n,lockable:t,name:i}=this.field;if(!t)return a("div",{key:"no-lock-button"});const o=this._messages,s=n?o.unlockConstraint:o.lockConstraint;return a("calcite-button",{afterCreate:this._onLockAfterCreate,afterRemoved:this._onLockAfterRemoved,alignment:"center",appearance:"transparent",class:_.button,"data-testid":`tooltip-field-${i}-lock`,disabled:e,iconStart:n?nt.lock:nt.unlock,key:"lock-button",kind:"neutral",label:s,onclick:this._onLockClick,scale:"s",tabIndex:-1,title:s})}};r([c()],y.prototype,"field",void 0),r([c()],y.prototype,"context",void 0),r([c()],y.prototype,"mode",void 0),r([c()],y.prototype,"_input",void 0),r([c()],y.prototype,"_lock",void 0),r([c()],y.prototype,"_formattedValue",null),r([c()],y.prototype,"_rawDisplayValue",null),r([c()],y.prototype,"_suffix",null),r([c()],y.prototype,"_title",null),r([c()],y.prototype,"_messages",null),r([c()],y.prototype,"_renderedLockButton",null),y=r([p("esri.views.interactive.tooltip.components.TooltipEditableField")],y);const Xt="—";function w(e){const n=e.fields.filter(t=>(t==null?void 0:t.visible)===!0);return n.length===0?null:a($,null,n.map(t=>a(y,{context:e.context,field:t,key:t.id,mode:e.mode})))}let at=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{visibleElements:o}=t;return a(w,{context:n,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0,o.orientation?t.orientation:void 0,o.scale?t.scale:void 0],mode:i})}};at=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],at);let ct=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{elevation:o,visibleElements:s}=t;return a(w,{context:n,fields:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0,s.elevation?o:void 0],mode:i})}};ct=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],ct);const it={absolute:"absolute-direction",relative:"relative-direction"};let C=class extends R{constructor(e){super(e),this.visibleElements={}}render(){return a("div",{class:te},this._isElementVisible("direction")?a(wn,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return Et({button:()=>b(()=>import("./index-C_bK48d2.js").then(e=>e.xb),__vite__mapDeps([0,1]),import.meta.url),dropdown:()=>b(()=>import("./index-YrgJQEeE.js"),__vite__mapDeps([4,0,1]),import.meta.url),"dropdown-item":()=>b(()=>import("./index-BHivy5Pu.js"),__vite__mapDeps([5,0,1,6]),import.meta.url),"dropdown-group":()=>b(()=>import("./index-D4SQPsjK.js"),__vite__mapDeps([7,0,1,6]),import.meta.url)})}_isElementVisible(e){var n;return((n=this.visibleElements)==null?void 0:n[e])??this.sketchOptions.tooltips.visibleElements[e]}};function wn(e){var l,d,v,E;const{directionMode:n}=e.sketchOptions.values,t=(l=e.messages)==null?void 0:l.sketch,i=(d=t==null?void 0:t.directionModeSelect)==null?void 0:d.title,o="absolute",s="relative";return a("calcite-dropdown",{key:"direction-mode",placement:"bottom-end",scale:"s",widthScale:"s",onCalciteDropdownSelect:I=>{var T,z;const D=(z=(T=I.currentTarget.selectedItems)==null?void 0:T[0])==null?void 0:z.getAttribute("data-mode");e.sketchOptions.values.directionMode=D??"absolute"}},a("calcite-button",{alignment:"end",appearance:"transparent",iconStart:it[n],kind:"neutral",label:i,scale:"s",slot:"trigger",title:i}),a("calcite-dropdown-group",{selectionMode:"single"},a("calcite-dropdown-item",{"data-mode":s,"data-testid":"tooltip-direction-mode-relative",iconStart:it.relative,key:"relative",selected:n===s},(v=t==null?void 0:t.directionModeSelect)==null?void 0:v.relative),a("calcite-dropdown-item",{"data-mode":o,"data-testid":"tooltip-direction-mode-absolute",iconStart:it.absolute,key:"absolute",selected:n===o},(E=t==null?void 0:t.directionModeSelect)==null?void 0:E.absolute)))}r([st("esri/views/interactive/tooltip/t9n/Tooltip"),c()],C.prototype,"messages",void 0),r([c()],C.prototype,"sketchOptions",void 0),r([c()],C.prototype,"visibleElements",void 0),C=r([p("esri.views.interactive.tooltip.components.DrawHeaderActions")],C);let dt=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{xyMode:o,visibleElements:s}=t;return a(w,{context:n,fields:[...o==="direction-distance"?[s.direction?t.direction:void 0,s.distance?t.distance:void 0]:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0],s.elevation?t.elevation:void 0,s.area?t.area:void 0],mode:i})}_renderActions(){const{xyMode:n,sketchOptions:t}=this.info;return a(C,{sketchOptions:t,visibleElements:{direction:n==="direction-distance"}})}};dt=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],dt);let ut=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{xyMode:o,visibleElements:s}=t;return a(w,{context:n,fields:[...o==="direction-distance"?[s.direction?t.direction:void 0,s.distance?t.distance:void 0]:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0],s.elevation?t.elevation:void 0,s.totalLength?t.totalLength:void 0],mode:i})}_renderActions(){const{xyMode:n,sketchOptions:t}=this.info;return a(C,{sketchOptions:t,visibleElements:{direction:n==="direction-distance"}})}};ut=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],ut);let pt=class extends u{_renderContent(){const{area:n,xSize:t,ySize:i,visibleElements:o}=this.info,s=this._messagesTooltip.sketch,l=this._formatters;return a($,null,o.size&&t!=null&&i!=null?a(f,{title:s.size,value:a(x,{left:l.length(t),right:l.length(i)})}):null,o.area?a(f,{title:s.area,value:l.area(n)}):null)}};pt=r([p("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],pt);let ht=class extends u{_renderContent(){const{fieldContext:e,info:n,mode:t}=this;return a(w,{context:e,fields:n.allFields,mode:t})}_renderActions(){const{xyMode:e,sketchOptions:n}=this.info,t=this.info.allFields.some(i=>i.name==="direction");return a(C,{sketchOptions:n,visibleElements:{direction:e==="direction-distance"&&t}})}};ht=r([p("esri.views.interactive.tooltip.content.TooltipContentDynamic")],ht);let ft=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{visibleElements:o}=t;return a(w,{context:n,fields:[o.elevation?t.elevation:void 0],mode:i})}};ft=r([p("esri.views.interactive.tooltip.content.TooltipContentElevation")],ft);let vt=class extends u{_renderContent(){const{angle:n,visibleElements:t}=this.info,i=this._messagesTooltip.sketch;return a($,null,t.rotation?a(f,{title:i.rotation,value:this._formatters.angleRelative(n)}):null)}};vt=r([p("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],vt);let mt=class extends u{_renderContent(){const n=this.info,{visibleElements:t}=n,i=this._messagesTooltip.sketch,o=this._formatters;return a($,null,t.size?a(f,{title:i.size,value:a(x,{left:o.length(n.xSize),right:o.length(n.ySize)})}):null,t.scale?a(f,{title:i.scale,value:a(x,{left:o.scale(n.xScale),right:o.scale(n.yScale)})}):null)}};mt=r([p("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],mt);let _t=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{visibleElements:o}=t;return a(w,{context:n,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0],mode:i})}};_t=r([p("esri.views.interactive.tooltip.content.TooltipContentMovePoint")],_t);let gt=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{visibleElements:o}=t;return a(w,{context:n,fields:[o.distance?t.distance:void 0,o.area?t.area:void 0,o.totalLength?t.totalLength:void 0],mode:i})}};gt=r([p("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],gt);let yt=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{visibleElements:o}=t;return a(w,{context:n,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0,o.area&&t.geometryType==="polygon"?t.area:null,o.totalLength&&t.geometryType==="polyline"?t.totalLength:null],mode:i})}};yt=r([p("esri.views.interactive.tooltip.content.TooltipContentSelectedVertex")],yt);let $t=class extends u{_renderContent(){const{fieldContext:e,info:n,mode:t}=this,{visibleElements:i}=n;return a(w,{context:e,fields:[i.coordinates?n.effectiveX:void 0,i.coordinates?n.effectiveY:void 0,i.elevation?n.elevation:void 0,i.orientation?n.orientation:void 0,i.scale?n.scale:void 0],mode:t})}};$t=r([p("esri.views.interactive.tooltip.content.TooltipContentTransformMesh")],$t);let bt=class extends u{_renderContent(){const{fieldContext:n,info:t,mode:i}=this,{visibleElements:o}=t;return a(w,{context:n,fields:[o.coordinates?t.effectiveX:void 0,o.coordinates?t.effectiveY:void 0,o.elevation?t.elevation:void 0,o.orientation?t.orientation:void 0,o.size?t.size:void 0],mode:i})}};bt=r([p("esri.views.interactive.tooltip.content.TooltipContentTransformPoint")],bt);let wt=class extends u{_renderContent(){const{info:n}=this,{visibleElements:t}=n,i=this._messagesTooltip.sketch,o=this._formatters;return a($,null,t.distance?a(f,{title:i.distance,value:o.length(n.distance)}):null)}};wt=r([p("esri.views.interactive.tooltip.content.TooltipContentTranslate")],wt);let xt=class extends u{_renderContent(){const{distance:e,elevation:n,area:t,totalLength:i,visibleElements:o}=this.info,s=this._messagesTooltip.sketch,l=this._formatters;return a($,null,o.distance?a(f,{title:s.distance,value:l.length(e)}):null,o.elevation&&(n==null?void 0:n.actual)!=null?a(f,{title:s.elevation,value:l.verticalLength(n.actual)}):null,o.area&&t!=null?a(f,{title:s.area,value:l.area(t)}):null,o.totalLength&&i!=null?a(f,{title:s.totalLength,value:l.length(i)}):null)}};xt=r([p("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],xt);let kt=class extends u{_renderContent(){const{info:n}=this,{visibleElements:t}=n,i=this._messagesTooltip.sketch,o=this._formatters;return a($,null,t.distance?a(f,{title:i.distance,value:o.length(n.distance)}):null)}};kt=r([p("esri.views.interactive.tooltip.content.TooltipContentTranslateXY")],kt);let Ct=class extends u{_renderContent(){const{info:n}=this,{visibleElements:t}=n,i=this._messagesTooltip.sketch;return a($,null,t.distance?a(f,{title:i.distance,value:this._formatters.verticalLengthRelative(n.distance)}):null)}};Ct=r([p("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],Ct);function xn(e,n){if(n==null)return null;const t=document.createElement("div");switch(n.type){case"dynamic":return new ht({tooltip:e,info:n,container:t});case"draw-point":case"draw-multipoint":return new ct({tooltip:e,info:n,container:t});case"draw-polygon":return new dt({tooltip:e,info:n,container:t});case"draw-polyline":return new ut({tooltip:e,info:n,container:t});case"draw-mesh":return new at({tooltip:e,info:n,container:t});case"draw-rectangle":return new pt({tooltip:e,info:n,container:t});case"draw-circle":return new lt({tooltip:e,info:n,container:t});case"elevation":return new ft({tooltip:e,info:n,container:t});case"extent-rotate":return new vt({tooltip:e,info:n,container:t});case"extent-scale":return new mt({tooltip:e,info:n,container:t});case"move-point":return new _t({tooltip:e,info:n,container:t});case"selected-vertex":return new yt({tooltip:e,info:n,container:t});case"transform-point":return new bt({tooltip:e,info:n,container:t});case"transform-mesh":return new $t({tooltip:e,info:n,container:t});case"translate":return new wt({tooltip:e,info:n,container:t});case"translate-vertex":return new xt({tooltip:e,info:n,container:t});case"translate-z":return new Ct({tooltip:e,info:n,container:t});case"translate-xy":return new kt({tooltip:e,info:n,container:t});case"reshape-edge-offset":return new gt({tooltip:e,info:n,container:t})}}const P={base:`${m}`,ltr:`${m}--ltr`,rtl:`${m}--rtl`,debug:`${m}--debug`},kn=20,Cn=16,En="bottom-end";let h=class extends xe{constructor(n){super(n),this.info=null,this.options=null,this.position=null,this.content=null,this._focused=!1,this.outerContainer=document.createElement("div"),this.debug=!1,this._updatingHandles=new ke,this._lastPosition=null,this._rtl=!1,this._prevXY=[0,0]}initialize(){const{outerContainer:n}=this;this.addHandles([M(()=>{var t;return(t=this.view.overlay)==null?void 0:t.surface},t=>{n.remove(),t==null||t.appendChild(n),this._rtl=Ce(t)},Ot),M(()=>this.info,(t,i)=>{if(this.content!=null&&t!=null&&i!=null&&t.type===i.type)this.content.info=t;else{Pt(this.content);const o=xn(this,t);o?(this.content=o,o.container&&n.appendChild(o.container),this.exitInputMode()):this.content=null}},Ot),M(()=>({container:this.outerContainer,style:this._outerContainerStyle}),({container:t,style:i})=>{Object.assign(t.style,i)},St),M(()=>({outerContainer:this.outerContainer,placement:this.effectivePlacement,effectiveOffset:this._effectiveOffset,rtl:this._rtl,debug:this.debug}),({outerContainer:t,placement:i,effectiveOffset:o,rtl:s,debug:l})=>{const{classList:d}=t;d.add(P.base),d.toggle(P.rtl,s),d.toggle(P.ltr,!s),d.toggle(P.debug,l),this.outerContainer.style.setProperty("--offset",`${o}px`),Ee(t),Dn(t,i)},St),Te(()=>this.mode==="feedback",()=>{this.position=null,this._clearOverride("effectivePlacement")},Ie),S(this.outerContainer,"paste",t=>{this.emit("paste",t)}),S(this.outerContainer,["focusin","focusout"],()=>{var t,i;this._focused=((i=(t=this.content)==null?void 0:t.container)==null?void 0:i.contains(document.activeElement))??!1})])}destroy(){this.info=null,this.content=Pt(this.content),this.outerContainer.remove(),this._updatingHandles.destroy()}get mode(){var n;return((n=this.content)==null?void 0:n.mode)??"feedback"}get focused(){return this._focused}get visible(){return this._outerContainerStyle.display!=="none"}get contentContainer(){var n;return(n=this.content)==null?void 0:n.container}get effectivePlacement(){var t;const n=(t=this.options)==null?void 0:t.placement;return n==="auto"?"bottom-end":n??En}get updating(){return this._updatingHandles.updating}get _screenPoint(){var t;const{inputManager:n}=this.view;return n!=null&&n.multiTouchActive?null:(t=n==null?void 0:n.latestPointerInfo)==null?void 0:t.location}get _effectiveOffset(){var n;return((n=this.options)==null?void 0:n.offset)??kn}get _outerContainerStyle(){const n=this.position??this._screenPoint;return this._lastPosition=Lt(n),n!=null&&this.content!=null?{display:"block",transform:`translate(${Math.round(n.x)}px, ${Math.round(n.y)}px)`}:{display:"none",transform:"none"}}clear(){this.info=null}async enterInputMode(n){var l;const t=this.position??this._lastPosition??this._screenPoint,i=this.position=Lt(t),{effectivePlacement:o}=this;this._override("effectivePlacement",o);const s=()=>{i&&(this.position=Tn(this.contentContainer,i,this._effectiveOffset,this.view),Object.assign(this.outerContainer.style,this._outerContainerStyle))};await this._updatingHandles.addPromise((l=this.content)==null?void 0:l.enterInputMode(n,s))}async exitInputMode(n){var t;await this._updatingHandles.addPromise((t=this.content)==null?void 0:t.exitInputMode(n))}onDragStart(n,t){this._prevXY=[n,t]}onDrag(n,t){const i=n-this._prevXY[0],o=t-this._prevXY[1];this._prevXY=[n,t];const{position:s}=this;if(s){const{view:l}=this,d=n-l.position[0],v=t-l.position[1];if(d<0||d>l.width||v<0||v>l.height-Cn)return;this.position=Gt(s.x+i,s.y+o)}}onDragEnd(){this._prevXY=[0,0]}};function Tn(e,n,t,i){if(!e||!i.container)return n;const o=e.getBoundingClientRect(),{left:s,top:l}=i.container.getBoundingClientRect();let{x:d,y:v}=n;const E=o.left-s-t;E<0&&(d-=E);const I=o.right-s+t-i.width;I>0&&(d-=I);const D=o.top-l-t;D<0&&(v-=D);const T=o.bottom-l+t-i.height;return T>0&&(v-=T),Gt(d,v)}r([c({nonNullable:!0})],h.prototype,"view",void 0),r([c()],h.prototype,"info",void 0),r([c()],h.prototype,"options",void 0),r([c()],h.prototype,"position",void 0),r([c()],h.prototype,"content",void 0),r([c({readOnly:!0})],h.prototype,"mode",null),r([c()],h.prototype,"_focused",void 0),r([c({readOnly:!0})],h.prototype,"focused",null),r([c({readOnly:!0})],h.prototype,"outerContainer",void 0),r([c({readOnly:!0})],h.prototype,"contentContainer",null),r([c({readOnly:!0})],h.prototype,"effectivePlacement",null),r([c()],h.prototype,"debug",void 0),r([c()],h.prototype,"updating",null),r([c()],h.prototype,"_lastPosition",void 0),r([c()],h.prototype,"_screenPoint",null),r([c()],h.prototype,"_rtl",void 0),r([c()],h.prototype,"_effectiveOffset",null),r([c()],h.prototype,"_outerContainerStyle",null),h=r([p("esri.views.interactive.Tooltip")],h);const In=["top","bottom","leading","trailing"].flatMap(e=>[N(`${e}-start`),N(e),N(`${e}-end`)]);function N(e){return`${P.base}--${e}`}function Dn({classList:e},n){In.forEach(t=>e.remove(t)),e.add(N(n))}const Mn=h;function gi(e){const n=new Mn(e());return n.addHandles(M(()=>e(),({view:t,options:i,info:o})=>{n.view=t,i!==void 0&&(n.options=i),o!==void 0&&(n.info=o)})),n}function yi(e,n){const t=Qt(n.vertexSpace),{scale:i,orientation:o}=e,{transform:s}=n,l=Sn(s);t&&l!=null?(o.actual=qt(l,"degrees","arithmetic"),o.visible=!0):(o.actual=null,o.visible=!1),t?(i.actual=j(ce(s)),i.visible=!0):(i.actual=null,i.visible=!1)}function $i(e,n,t){if(!n||!Qt(n.vertexSpace))return;const i=n.transform??(n.transform=new Be);An(e,i,t),On(e,i,t)}function An(e,n,t){const i=Ge(e.orientation.actual),o=ae(n.rotationAxis);if(i==null||o==null)return;const s=i-90,l=n.rotationAngle,d=s*o,v=d-l;K(l,d)||(t==null||t.onRotateStart(0),n.rotationAngle=d,t==null||t.onRotate(v),t==null||t.onRotateStop(v))}function On(e,n,t){var d;const i=(d=e.scale.actual)==null?void 0:d.value,o=ce(n);if(i==null||i===o)return;const{scale:s}=n;let l;if(o===0)l=Me(Ae);else{const v=i/o;l=Oe(Zt(),s,v)}t==null||t.onScaleStart(s[0],s[1],s[2]),n.scale=l,t==null||t.onScale(l[0],l[1],l[2]),t==null||t.onScaleStop(l[0],l[1],l[2])}function bi(e,n){const{x:t,y:i,z:o}=n,{x:s,y:l,z:d}=Pn(e,n.spatialReference);return{dx:s==null||K(s,t)?0:s-t,dy:l==null||K(l,i)?0:l-i,dz:d==null||o==null||K(d,o)?0:d-o}}function Pn(e,n){var l,d;let t,i;e.geographic?(t=rt(e.longitude.actual),i=rt(e.latitude.actual),Le(n)&&(t!=null&&i!=null?[t,i]=tt(t,i,ot):t!=null?t=tt(t,0,ot)[0]:i!=null&&(i=tt(0,i,ot)[1]))):(t=(l=e.x.actual)==null?void 0:l.value,i=(d=e.y.actual)==null?void 0:d.value);const o=e.elevation.actual,s=Ve(n);return{x:t,y:i,z:s!=null&&o!=null?He(o,s):void 0}}const ot=[0,0];function Sn(e){if(!e)return 90;const t=ae(e.rotationAxis)??1;return t!=null?90+t*e.rotationAngle:null}function ae(e){return Vt(e,Wt)?1:Vt(e,Ln)?-1:null}const Ln=De(Zt(),Wt);function ce(e){return e?Math.max(...e.scale):1}function wi(e,n){return!(e.type!=="key-down"||e.key!==A.enterInputMode||!n||!Vn(n.info))&&(n.enterInputMode(),e.preventDefault(),e.stopPropagation(),!0)}function Vn(e){const n=e==null?void 0:e.sketchOptions;if(!n)return!1;const{inputEnabled:t,visibleElements:i}=n.tooltips;return t&&e.editableFields.some(({name:o})=>o==="x"||o==="y"?i.coordinates:i[o])===!0}function xi(e,n){let t=null;return Pe([e.on("paste",i=>{t==null||t.abort(),t=Rt(async()=>{W()||await Ht(),Rn(i,e.info,n)})}),Rt(()=>Ht()),Se(()=>t==null?void 0:t.abort())])}function Rn(e,n,t){var s;if(!n||!("geographic"in n))return;const i=(s=e.clipboardData)==null?void 0:s.getData("text");if(!i)return;const o=l=>{e.stopPropagation(),e.preventDefault(),t==null||t.onBeforePaste(),l(),t==null||t.onAfterPaste()};if(n.geographic){const l=$n(i);l&&o(()=>{n.longitude.applyValue(l.longitude),n.latitude.applyValue(l.latitude)})}else{const l=yn(i);l&&o(()=>{n.x.applyValue(l.x),n.y.applyValue(l.y)})}}let k=class extends Re{constructor(n){super(n),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter(n=>n.visible&&!n.readOnly)}clearInputValues(){this.allFields.forEach(n=>n.clearInputValue())}};r([c()],k.prototype,"sketchOptions",void 0),r([c()],k.prototype,"visibleElements",null),r([c()],k.prototype,"helpMessage",void 0),r([c()],k.prototype,"viewType",void 0),r([c()],k.prototype,"allFields",null),r([c()],k.prototype,"editableFields",null),k=r([p("esri.views.interactive.tooltip.infos.SketchTooltipInfo")],k);function Ci(e,n,t,i){const[o,s,l,d,v,E,I]=n.a,D=v??0,T=E??Math.hypot(o[0]-s[0],o[1]-s[1]),z=I??1,H=Math.cos(i),B=Math.sin(i),[q,J]=t,de=ze(H,B,0,-B,H,0,q-H*q+B*J,J-B*q-H*J,1);return Fe(e,{a:[o,s,l,d,D,T,z]},de)}function Ei(e,n,t){const[i,o,s]=e.b,l=[...i],d=[...o],v=[...s];return L(l,l,n,t),L(d,d,n,t),L(v,v,n,t),{b:[l,d,v]}}function Ti(e,n,t){const[i,o]=e.c,s=[...i],l=[...o];return L(s,s,n,t),L(l,l,n,t),{c:[s,l]}}export{Zn as A,qn as B,Jn as C,Ht as E,xi as G,Qn as H,ti as J,G as K,wi as O,bi as P,gi as R,yi as V,Ei as a,Rn as b,Ci as c,k as i,Ti as n,Wn as w,$i as z};

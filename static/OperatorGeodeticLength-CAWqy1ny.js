import{g1 as h,g2 as x}from"./index-C_bK48d2.js";import{P,j as G,a as y,f as E,x as T}from"./Point2D-CHGoJJR2.js";import{w as v}from"./OperatorShapePreservingLength-DnlEri6A.js";import{a7 as w,Q as C,n as D,F as _,a8 as X,H as q,G as L,N as Y,S as b,a5 as j}from"./ProjectionTransformation-yTMc8p-1.js";import"./Envelope2D-K-BIX8ba.js";import"./Transformation2D-CsY48lRi.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";class Q{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,m){return!1}canAccelerateGeometry(t){return!1}execute(t,r,m,a){if(m===4)return new v().execute(t,r,a);if(r.getCoordinateSystemType()===0&&P(""),G(t),t.isEmpty()||t.getDimension()<1)return 0;const s=r.getGCS(),n=j();s.querySpheroidData(n);const c=n.majorSemiAxis,l=n.e2,u=s.getUnit().getUnitToBaseFactor();let e;const o=t.getGeometryType();if(o===y.enumPolygon?e=t.getBoundary():o===y.enumEnvelope?e=w(t):E(o)?(e=new C({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new D().execute(e,0,r.getTolerance(0),0,a)),s!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=_(e,r),o===y.enumPolyline&&e===t&&(e=t.clone());const S=new T;r.getPannableExtent().queryIntervalX(S);for(let g=0,f=e.getPointCount();g<f;g++){const p=e.getXY(g);p.x=X(p.x,S),e.setXY(g,p)}}const d=e.createInstance();e=q(i,e,d,a)?d:new L().execute(e,i,a)}return this._ExecuteMultiPathGeodeticLength(e,m,c,l,u)}_ExecuteMultiPathGeodeticLength(t,r,m,a,s){const n={stack:[],error:void 0,hasError:!1};try{const c=h(n,new Y,!1);let l=0;const u=t.querySegmentIterator();for(;u.nextPath();)for(;u.hasNextSegment();){const e=u.nextSegment(),o=e.getStartXY(),i=e.getEndXY();o.scale(s),i.scale(s),b.geodeticDistance(m,a,o.x,o.y,i.x,i.y,c,null,null,r),l+=c.val}return l}catch(c){n.error=c,n.hasError=!0}finally{x(n)}}}export{Q as OperatorGeodeticLength};

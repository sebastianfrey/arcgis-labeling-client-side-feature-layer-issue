const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./previewWebStyleSymbol-CwlK2ddD.js","./index-C_bK48d2.js","./index-DxLSJ8yk.css","./webStyleAcceptedFormats-CG7ZQ6BV.js","./previewSymbol3D-DIrMSlZb.js","./colorUtils-CLNuAJnC.js","./utils-B2fTWpox.js","./cimSymbolUtils-kUrI6vhQ.js","./previewUtils-B8Y4tA-6.js","./webStyleSymbolUtils-DZP4PQg-.js","./devEnvironmentUtils-CnNDiFMM.js","./previewSymbol2D-DS_c3AuR.js","./fontUtils-WtN6_M4S.js","./quantizationUtils-DpuTGthe.js","./densifyCurvedGeometry-7KKcR85x.js","./previewCIMSymbol-CPxcotx6.js","./CIMSymbolHelper-BdzJMZqf.js","./BidiEngine-DbjCV6G7.js","./labelPoint-Btea-Ya0.js","./OptimizedGeometry-KE6YknPZ.js","./memoryEstimations-w0EAmzVg.js","./GeometryUtils-CROhaqZP.js","./rasterizingUtils-JV4ZHDNN.js","./Rect-CUzevAry.js","./BoundingBox-hPKJQmqA.js","./CIMSymbolRasterizer-CxZOCRQl.js","./CIMResourceManager-DEewzKlt.js","./OverrideHelper-C80mPzpW.js","./callExpressionWithFeature-Yw0RK2Jm.js"])))=>i.map(i=>d[i]);
import{aq as G,ly as x,bZ as D,d3 as N,lQ as U,lR as L,lS as fe,lT as O,lU as ue,lV as de,da as X,lW as J,lX as ye,a8 as pe,a7 as ge,a as me,_ as I,ct as xe,eq as we}from"./index-C_bK48d2.js";import{g as be,y as ke,L as z,M as $e,N as ve}from"./utils-B2fTWpox.js";import{B as K,U as Se}from"./colorUtils-CLNuAJnC.js";let Me=0;function Ee(){return Me++}let Re=0;function _e(){return Re++}let Ae=0;function Le(){return Ae++}const Ie="http://www.w3.org/2000/svg",T=G("android"),Fe=G("chrome")||T&&T>=4?"auto":"optimizeLegibility",Ve={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},je=/([A-DF-Za-df-z])|([-+]?\d*\.?\d+(?:[eE][-+]?\d+)?)/g;let w={},p={};const Ce=Math.PI;function E(t,e){const i=t*(Ce/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function ee(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function te(t,e,i,n,o){if(t){if(t.type==="circle")return x("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return x("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return x("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return x("image",{alt:o||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const r=typeof t.path!="string"?ee(t.path):t.path;return x("path",{d:r,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return D(n),x("text",{"dominant-baseline":n.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":n.font.family,"font-size":n.font.size,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,kerning:n.kerning,rotate:n.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":n.align,"text-decoration":n.decoration,"text-rendering":Fe,x:t.x,y:t.y},t.text)}return null}function ie(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new N(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${Ee()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${_e()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new N(i.color).toString()}))}}}function ne(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new N(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=be(t).join(",")||"none")),e}function re(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const n=t.alignBaseline,o=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;i.align=t.align,i.dominantBaseline=o,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",D(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function ze(t){const{pattern:e,linearGradient:i}=t;if(e)return x("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},x("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const n=i.stops.map((o,r)=>x("stop",{key:`${r}-stop`,offset:o.offset,"stop-color":o.color}));return x("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},n)}return null}function Ne(t,e){if(!t||t.length===0)return null;const i=[];for(const n of t){const{shape:o,fill:r,stroke:l,font:s}=n,c=ie(r),u=ne(l),d=o.type==="text"?re(o,s):null,f=te(o,c.fill,u,d);f&&i.push(f)}return x("mask",{id:e,maskUnits:"userSpaceOnUse"},x("g",null,i))}function P(t,e,i){return fe(t,O(t),[e,i])}function q(t,e,i,n,o){return ue(t,O(t),[e,i]),t[4]=t[4]*e-n*e+n,t[5]=t[5]*i-o*i+o,t}function Ge(t,e,i,n){const o=e%360*Math.PI/180;de(t,O(t),o);const r=Math.cos(o),l=Math.sin(o),s=t[4],c=t[5];return t[4]=s*r-c*l+n*l-i*r+i,t[5]=c*r+s*l-i*l-n*r+n,t}function M(t,e){w&&"left"in w?(w.left!=null&&w.left>t&&(w.left=t),(w.right==null||w.right<t)&&(w.right=t),(w.top==null||w.top>e)&&(w.top=e),(w.bottom==null||w.bottom<e)&&(w.bottom=e)):w={left:t,bottom:e,right:t,top:e}}function W(t){const e=t.args,i=e.length;let n;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<i;n+=2)M(e[n],e[n+1]);p.x=e[i-2],p.y=e[i-1];break;case"H":for(n=0;n<i;++n)M(e[n],p.y);p.x=e[i-1];break;case"V":for(n=0;n<i;++n)M(p.x,e[n]);p.y=e[i-1];break;case"m":{let o=0;for(("x"in p)||(M(p.x=e[0],p.y=e[1]),o=2),n=o;n<i;n+=2)M(p.x+=e[n],p.y+=e[n+1]);break}case"l":case"t":for(n=0;n<i;n+=2)M(p.x+=e[n],p.y+=e[n+1]);break;case"h":for(n=0;n<i;++n)M(p.x+=e[n],p.y);break;case"v":for(n=0;n<i;++n)M(p.x,p.y+=e[n]);break;case"c":for(n=0;n<i;n+=6)M(p.x+e[n],p.y+e[n+1]),M(p.x+e[n+2],p.y+e[n+3]),M(p.x+=e[n+4],p.y+=e[n+5]);break;case"s":case"q":for(n=0;n<i;n+=4)M(p.x+e[n],p.y+e[n+1]),M(p.x+=e[n+2],p.y+=e[n+3]);break;case"A":for(n=0;n<i;n+=7)M(e[n+5],e[n+6]);p.x=e[i-2],p.y=e[i-1];break;case"a":for(n=0;n<i;n+=7)M(p.x+=e[n+5],p.y+=e[n+6])}}function Q(t,e,i){const n=Ve[t.toLowerCase()];let o;typeof n=="number"&&(n?e.length>=n&&(o={action:t,args:e.slice(0,e.length-e.length%n)},i.push(o),W(o)):(o={action:t,args:[]},i.push(o),W(o)))}function De(t){const e=(typeof t.path!="string"?ee(t.path):t.path).match(je),i=[];if(w={},p={},!e)return null;let n="",o=[];const r=e.length;for(let s=0;s<r;++s){const c=e[s],u=parseFloat(c);isNaN(u)?(n&&Q(n,o,i),o=[],n=c):o.push(u)}Q(n,o,i);const l={x:0,y:0,width:0,height:0};return w&&"left"in w&&(l.x=w.left,l.y=w.top,l.width=w.right-w.left,l.height=w.bottom-w.top),l}function Oe(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=De(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function Be(t){const e={x:0,y:0,width:0,height:0};let i=null,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(const r of t)i?(i.x=Math.min(i.x,r.x),i.y=Math.min(i.y,r.y),n=Math.max(n,r.x+r.width),o=Math.max(o,r.y+r.height)):(i=e,i.x=r.x,i.y=r.y,n=r.x+r.width,o=r.y+r.height);return i&&(i.width=n-i.x,i.height=o-i.y),i}function Ue(t,e,i,n,o,r,l,s,c){let u=(l&&r?E(r,e):e)/2,d=(l&&r?E(r,i):i)/2;if(c){const k=c[0],b=c[1];u=(l&&r?E(r,k):k)/2,d=(l&&r?E(r,b):b)/2}const f=t.width+n,h=t.height+n,g=U(),a=U();let m=!1;if(o&&f!==0&&h!==0){const k=e!==i?e/i:f/h,b=e>i?e:i;let S=1,y=1;isNaN(b)||(k>1?(S=b/f,y=b/k/h):(y=b/h,S=b*k/f)),L(a,a,q(g,S,y,u,d)),m=!0}const $=t.x+(f-n)/2,v=t.y+(h-n)/2;if(L(a,a,P(g,u-$,d-v)),!m&&(f>e||h>i)){const k=f/e>h/i,b=(k?e:i)/(k?f:h);L(a,a,q(g,b,b,$,v))}return s&&L(a,a,P(g,s[0],s[1])),r&&L(a,a,Ge(g,r,$,v)),`matrix(${a[0]},${a[1]},${a[2]},${a[3]},${a[4]},${a[5]})`}function oe(t){const e=t==null?void 0:t.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/i);if(!e)return null;const[,i,n,o]=e;return{strength:Number(i),radius:X(J(n)),threshold:Number(o)}}function Te(t,e,i){const n=oe(t);if(!n)return null;const{strength:o,radius:r}=n,l=o>0?r:0,s=(o+l)*e,c=4*o+1;return x("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},x("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(o+.5*l)*(5**(e/100)*(.4+e/100)),result:"dilate"}),x("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:s/25}),x("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:s/50}),x("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},x("feFuncR",{slope:c,type:"linear"}),x("feFuncG",{slope:c,type:"linear"}),x("feFuncB",{slope:c,type:"linear"})),x("feMerge",null,x("feMergeNode",{in:"intensityBlur"}),x("feMergeNode",{in:"intensityBrightness"}),x("feGaussianBlur",{stdDeviation:o/10})))}function Pe(t,e,i,n={}){var h,g;const o=[],r=[],l=Le(),s=Te(n.cssEffectFilter,e,l);let c=null;if(s){const a=oe(n.cssEffectFilter),m=n.clipBloomEffect||!(a!=null&&a.strength)?0:(a.strength+a.radius/2)/3,$=e+e*m,v=i+i*m;c=[Math.max($,10),Math.max(v,10)]}let u=e,d=i;if(n.useRotationSize)for(let a=0;a<t.length;a++){const m=((h=n.rotations)==null?void 0:h[a])??0;u=Math.max(E(m,e),u),d=Math.max(E(m,i),d)}for(let a=0;a<t.length;a++){const m=t[a],$=[],v=[];let k=0,b=0,S=0;for(const F of m){const{shape:R,fill:le,stroke:V,font:se,offset:C}=F;n.ignoreStrokeWidth||R.type==="text"||(k+=(V==null?void 0:V.width)||0);const B=ie(le),ce=ne(V),he=R.type==="text"?re(R,se):null;o.push(ze(B)),$.push(te(R,B.fill,ce,he,n.ariaLabel)),v.push(Oe(R)),C&&(b+=C[0],S+=C[1])}const y=((g=n.rotations)==null?void 0:g[a])??0;n.useRotationSize&&(b+=(u-E(y,e))/2,S+=(d-E(y,i))/2);const _=Ue(Be(v),e,i,k,n.scale??!1,y,n.useRotationSize??!1,[b,S],c);let j=null;if(n.masking){const F=`mask-${a}`,R=n.masking[a];o.push(Ne(R,F)),j=`url(#${F})`}r.push(j?x("g",{mask:j},x("g",{transform:_},$)):x("g",{transform:_},$))}return s&&(D(c),u=c[0],d=c[1]),x("svg",{"aria-label":n.ariaLabel,focusable:!1,height:d,role:"img",style:"display: block;",width:u,xmlns:Ie},s,x("defs",null,o),s?x("g",{filter:`url(#bloom${l})`},r):r)}const Y=ye();function qe(t,e){Y.append(t,e),Y.detach(e)}function We(t,e,i){const n=Math.ceil(e[0]),o=Math.ceil(e[1]);if(!t.some(l=>!!l.length))return null;const r=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(r.style.opacity=i.opacity.toString()),i.cssEffectFilter!=null&&(r.style.filter=i.cssEffectFilter),qe(r,()=>Pe(t,n,o,i)),r}function Qe(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const n=i.getContext("2d");return n.clearRect(0,0,t,e),n}function Ye(t,e,i){return t?ge(t,{responseType:"image"}).then(n=>{const o=n.data,r=o.width,l=o.height,s=r/l;let c=e;if(i){const u=Math.max(r,l);c=Math.min(c,u)}return{image:o,width:s<=1?Math.ceil(c*s):c,height:s<=1?c:Math.ceil(c/s)}}):Promise.reject(new me("renderUtils: imageDataSize","href not provided."))}function Ze(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function He(t,e,i,n,o){switch(o){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const r=K({r:t[e],g:t[e+1],b:t[e+2]});r.h=n.h,r.s=n.s,r.v=r.v/100*n.v;const l=Se(r);t[e]=l.r,t[e+1]=l.g,t[e+2]=l.b,t[e+3]*=i[3];break}}}function ot(t,e,i,n,o){return Ye(t,e,o).then(r=>{var c;const l=r.width??e,s=r.height??e;if(r.image&&Ze(i,n)){let u=r.image.width,d=r.image.height;G("edge")&&/\.svg$/i.test(t)&&(u-=1,d-=1);const f=Qe(l,s);f.drawImage(r.image,0,0,u,d,0,0,l,s);const h=f.getImageData(0,0,l,s),g=[i.r/255,i.g/255,i.b/255,i.a],a=K(i);for(let m=0;m<h.data.length;m+=4)He(h.data,m,g,a,n);f.putImageData(h,0,0),t=f.canvas.toDataURL("image/png")}else{const u=(c=pe)==null?void 0:c.findCredential(t);if(u!=null&&u.token){const d=t.includes("?")?"&":"?";t=`${t}${d}token=${u.token}`}}return{url:t,width:l,height:s}}).catch(()=>({url:t,width:e,height:e}))}let A=null;const Z=[255,255,255];function H(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function at(t,e,i){const{backgroundColor:n,outline:o,dotSize:r}=t,l=22,s=.8,c=Math.round(l*l/Math.max(r,.5)**2*s),u=window.devicePixelRatio,d=document.createElement("canvas"),f=l*u;d.width=f,d.height=f,d.style.width=d.width/u+"px",d.style.height=d.height/u+"px";const h=d.getContext("2d");if(n&&(h.fillStyle=n.toCss(!0),h.fillRect(0,0,f,f),h.fill()),h.fillStyle=(e==null?void 0:e.toCss(!0))??"",A&&A.length/2===c)for(let a=0;a<2*c;a+=2){const m=A[a],$=A[a+1];h.fillRect(m,$,r*u,r*u),h.fill()}else{A=[];for(let a=0;a<2*c;a+=2){const m=H(0,f),$=H(0,f);A.push(m,$),h.fillRect(m,$,r*u,r*u),h.fill()}}o&&(o.color&&(h.strokeStyle=o.color.toCss(!0)),h.lineWidth=o.width,h.strokeRect(0,0,f,f));const g=new Image(l,l);return g.src=d.toDataURL(),g.ariaLabel=null,g.alt="",g}function lt(t,e={}){const i=e.radius||40,n=2*Math.PI*i,o=t.length,r=n/o,l=[],s=ke(e.outline);(s==null?void 0:s.width)!=null&&(s.width*=2),(s||e.backgroundColor)&&l.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:s,offset:[0,0]});const c=e.values,u=(c==null?void 0:c.length)===o&&c.reduce((a,m)=>a+m,0)===100,d=[0];for(let a=0;a<o;a++){let m=null;u&&(m=c[a]*n/100,d.push(m+d[a])),l.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(m??r)/2} ${n}`,dashoffset:"-"+(u?d[a]/2:a*(r/2)),color:t[a]},offset:[0,0]})}let f=null;const h=2*i+((s==null?void 0:s.width)||0),g=e.holePercentage;if(g){s&&l.push({shape:{type:"circle",cx:i,cy:i,r:i*g},fill:null,stroke:s,offset:[0,0]});const a=h/2;f=[[{shape:{type:"circle",cx:a,cy:a,r:a},fill:Z,stroke:s?{...s,color:Z}:null,offset:[0,0]},{shape:{type:"circle",cx:a,cy:a,r:i*g},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return We([l],[h,h],{cssEffectFilter:e.cssEffectFilter,ignoreStrokeWidth:!0,masking:f,rotations:[-90],ariaLabel:e.ariaLabel})}function st(t,e={}){const o=e.align==="horizontal",r=o?75:24,l=o?24:75,s=e.width??r,c=e.height??l,u=e.gradient??!0,d=window.devicePixelRatio,f=s*d,h=c*d,g=document.createElement("canvas");g.width=f,g.height=h,g.ariaLabel=e.ariaLabel??null,g.style.width=`${s}px`,g.style.height=`${c}px`;const a=g.getContext("2d"),m=o?f:0,$=o?0:h;if(u){const k=a.createLinearGradient(0,0,m,$),b=t.length,S=b===1?0:1/(b-1);t.forEach((y,_)=>k.addColorStop(_*S,y.toString())),a.fillStyle=k,a.fillRect(0,0,f,h)}else{const k=o?f/t.length:f,b=o?h:h/t.length;let S=0,y=0;for(const _ of t)a.fillStyle=_.toString(),a.fillRect(S,y,k,b),S=o?S+k:0,y=o?0:y+b}const v=document.createElement("div");return v.style.width=`${s}px`,v.style.height=`${c}px`,Je(v,e==null?void 0:e.cssEffectFilter),v.appendChild(g),v}function Xe(t){const e=t.match(/drop-shadow\(\s*([^\s]+)\s+[^\s]+\s+[^\s]+\s+.+?\)/);return e?e[1]:null}function Je(t,e){if(!e)return;t.style.filter=e;const i=Xe(e);if(i){const n=X(J(i));n<0?t.style.marginLeft=`${Math.abs(n)}px`:t.style.marginRight=`${n}px`}}async function Ke(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await I(()=>import("./previewWebStyleSymbol-CwlK2ddD.js"),__vite__mapDeps([0,1,2,3]),import.meta.url);return i(t,Ke,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await I(()=>import("./previewSymbol3D-DIrMSlZb.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,3]),import.meta.url);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await I(()=>import("./previewSymbol2D-DS_c3AuR.js"),__vite__mapDeps([11,1,2,5,12,13,14,6,7,8]),import.meta.url);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await I(()=>import("./previewCIMSymbol-CPxcotx6.js"),__vite__mapDeps([15,1,2,16,17,18,19,20,21,12,22,23,24,25,26,27,5,28,13,6,7]),import.meta.url);return i(t,e)}default:return}}function ae(t){return t&&t.opacity!==void 0?t.opacity*("parent"in t?ae(t.parent):1):1}async function ct(t,e){var S;if(!t)return;const i=t.sourceLayer,n=(e!=null&&e.useSourceLayer?i:t.layer)??i,o=e!=null&&e.ignoreOpacity?1:ae(n);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const y=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):t.symbol.clone();return z(y,null,{add:o}),y}const r=(e==null?void 0:e.renderer)??tt(n);let l=r&&"getSymbolAsync"in r?await r.getSymbolAsync(t,e):null;if(!l)return;if(l=l.type==="web-style"?await l.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):l.clone(),!(r&&"visualVariables"in r&&((S=r.visualVariables)!=null&&S.length)&&et(l)))return z(l,null,{add:o}),l;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const y={...e};y.arcade=await xe(),e=y}const{getColor:s,getOpacity:c,getAllSizes:u,getRotationAngle:d}=await I(()=>import("./index-C_bK48d2.js").then(y=>y.xg),__vite__mapDeps([1,2]),import.meta.url),f=[],h=[],g=[],a=[];for(const y of r.visualVariables)switch(y.type){case"color":f.push(y);break;case"opacity":h.push(y);break;case"rotation":a.push(y);break;case"size":y.target||g.push(y)}const m=!!f.length&&f[f.length-1],$=m?s(m,t,e):null,v=!!(e!=null&&e.ignoreOpacity),k=!!h.length&&h[h.length-1],b=k?c(k,t,e):null;if(z(l,$,v?void 0:{override:b,add:o}),g.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const y=u(g,t,e);await $e(l,y)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const y of a)ve(l,d(y,t,e),y.axis);return l}function et(t){var e;return!we(t)||((e=t.symbolLayers.at(0))==null?void 0:e.type)!=="water"}function tt(t){if(t)return"renderer"in t?t.renderer:void 0}export{ie as $,ne as A,Ue as C,ct as F,Oe as L,ze as N,Be as R,te as S,st as V,lt as a,Ke as b,ot as d,We as l,Pe as q,at as w};

import{ex as r,ey as e}from"./index-C_bK48d2.js";class n{constructor(t){this._observable=new r,this._notifyPending=!1,this._batchDepth=0,this._set=new Set(t)}get size(){return e(this._observable),this._set.size}add(t){const s=this._set.size;return this._set.add(t),this._set.size!==s&&this._notify(),this}batch(t){try{this._batchDepth++,t()}finally{this._batchDepth--,this._notifyPending&&this._batchDepth===0&&(this._notifyPending=!1,this._notify())}}clear(){this._set.size>0&&(this._set.clear(),this._notify())}delete(t){const s=this._set.delete(t);return s&&this._notify(),s}entries(){return e(this._observable),this._set.entries()}forEach(t,s){e(this._observable),this._set.forEach((i,h)=>t.call(s,i,h,this),s)}has(t){return e(this._observable),this._set.has(t)}keys(){return e(this._observable),this._set.keys()}values(){return e(this._observable),this._set.values()}[Symbol.iterator](){return e(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}_notify(){this._batchDepth>0?this._notifyPending=!0:this._observable.notify()}}export{n as e};

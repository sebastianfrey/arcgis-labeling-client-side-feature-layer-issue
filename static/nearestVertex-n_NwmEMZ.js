import{s}from"./ProjectionTransformation-yTMc8p-1.js";import{m as c}from"./OperatorProximity-CyqO8ZOd.js";import{fromGeometry as d,fromPoint as p,toPoint as a,getSpatialReference as m}from"./apiConverter-CdLHvLkb.js";import"./Point2D-CHGoJJR2.js";import"./Envelope2D-K-BIX8ba.js";import"./Transformation2D-CsY48lRi.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./index-C_bK48d2.js";import"./OperatorDefinitions-DP7_WWTp.js";import"./jsonConverter-E47-BQ_b.js";function f(e,o,r){const n=(o.x-e.x)*(r.y-e.y)-(r.x-e.x)*(o.y-e.y);return n>0?"left":n<0?"right":"straddle"}function u(e,o,r){if(e.getPointCount()<=0)return"left";const n=e.querySegmentIteratorAtVertex(r),t=n.hasPreviousSegment()?n.previousSegment():n.nextSegment();return f(t.getStartXY(),t.getEndXY(),o)}const l=new c;function I(e,o){const r=d(e),n=p(o).getXY(),t=l.getNearestVertex(r,n);if(t.isEmpty())return null;switch(e.type){case"point":return{coordinate:e,distance:t.m_distance,sideOfLine:t.m_distance===0?"straddle":"left"};case"multipoint":{const i=new s;return r.getPointByVal(t.m_vertexIndex,i),{coordinate:a(i,m(e)),distance:t.m_distance,sideOfLine:t.m_distance===0?"straddle":"left"}}case"polyline":case"polygon":{const i=new s;return r.getPointByVal(t.m_vertexIndex,i),{coordinate:a(i,m(e)),distance:t.m_distance,sideOfLine:u(r,n,t.m_vertexIndex)}}default:throw new Error(`Unsupported geometry type: ${e.type}`)}}export{I as executeNearestVertex};

import{eU as b,ce as m,aJ as t,aK as s,aL as g,f2 as S,cD as V,N as f,be as C,cG as d,kL as y,aO as I,cK as $}from"./index-C_bK48d2.js";let e=class extends b(S){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(i){this._userInteractive=i}get updating(){return!1}get visible(){var i;return(((i=this.parent)==null?void 0:i.visible)&&!this.parent.suspended)??!0}set visible(i){this._overrideIfSome("visible",i)}forceInteractive(){return this._interactiveViewModelCount++,m(()=>this._interactiveViewModelCount--)}};t([s({constructOnly:!0})],e.prototype,"parent",void 0),t([s({constructOnly:!0})],e.prototype,"view",void 0),t([s({type:Boolean})],e.prototype,"interactive",null),t([s()],e.prototype,"_userInteractive",void 0),t([s({readOnly:!0})],e.prototype,"updating",null),t([s()],e.prototype,"visible",null),t([s()],e.prototype,"_interactiveViewModelCount",void 0),e=t([g("esri.views.analysis.AnalysisView")],e);let _=class extends e{};_=t([g("esri.views.2d.analysis.AnalysisView2D")],_);class A{constructor(){this._currentOperationSignal=V(null)}get currentOperationType(){var r;return((r=this._currentOperationSignal.value)==null?void 0:r.type)??null}destroy(){this.stop()}async start(r,w,c){const a=this._currentOperationSignal.value;a==null||a.stop();const u=new AbortController,v=c==null?void 0:c.signal,p=AbortSignal.any([u.signal,v].filter(f)),l=C();let o=!1;const h=()=>{o||(o=!0,l.reject($()))},n={type:r,resolve:O=>{o||(o=!0,l.resolve(O))},reject:h,promise:l.promise,stop:()=>u.abort(),handles:[]};this._currentOperationSignal.value=n,n.handles.push(d(v,()=>{u.abort()}),d(p,()=>{y(n.handles),o||h()}));try{return a&&(await a.promise.catch(()=>{}),I(p)),await w(n,p),await l.promise}finally{y(n.handles),this._currentOperationSignal.value===n&&(this._currentOperationSignal.value=null)}}stop(){var r;(r=this._currentOperationSignal.value)==null||r.stop()}}export{_ as o,A as s};

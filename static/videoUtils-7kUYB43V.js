import{b2 as T,aJ as a,aK as u,aL as w,bb as F,aM as c,dl as E,dk as O,c9 as I,e1 as N}from"./index-C_bK48d2.js";import{k as $}from"./cimSymbolUtils-kUrI6vhQ.js";import{L as P}from"./utils-B2fTWpox.js";const p={type:Boolean,json:{write:!0}};let m=class extends T(F){constructor(t){super(t),this.frame=!1,this.frameCenter=!1,this.frameOutline=!0,this.lineOfSight=!0,this.sensorLocation=!0,this.sensorTrail=!0}};a([u(p)],m.prototype,"frame",void 0),a([u(p)],m.prototype,"frameCenter",void 0),a([u(p)],m.prototype,"frameOutline",void 0),a([u(p)],m.prototype,"lineOfSight",void 0),a([u(p)],m.prototype,"sensorLocation",void 0),a([u(p)],m.prototype,"sensorTrail",void 0),m=a([w("esri.layers.support.TelemetryDisplay")],m);let g=class extends T(F){constructor(e){super(e),this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};a([u({type:c})],g.prototype,"frameCenter",void 0),a([u({type:E})],g.prototype,"frameOutline",void 0),a([u({type:O})],g.prototype,"lineOfSight",void 0),a([u({type:c})],g.prototype,"sensorLocation",void 0),a([u({type:O})],g.prototype,"sensorTrail",void 0),g=a([w("esri.layers.support.TelemetryData")],g);let d=class extends T(F){constructor(t){super(t),this.duration=null,this.end=null,this.start=null,this.timezone="UTC"}readEnd(t,n){return n.end!=null?new Date(n.end):null}writeEnd(t,n){n.end=t?t.getTime():null}readStart(t,n){return n.start!=null?new Date(n.start):null}writeStart(t,n){n.start=t?t.getTime():null}};a([u({type:Number,json:{write:{allowNull:!0}}})],d.prototype,"duration",void 0),a([u({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),a([I("end")],d.prototype,"readEnd",null),a([N("end")],d.prototype,"writeEnd",null),a([u({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),a([I("start")],d.prototype,"readStart",null),a([N("start")],d.prototype,"writeStart",null),a([u({type:String})],d.prototype,"timezone",void 0),d=a([w("esri.layers.support.VideoTimeExtent")],d);const M=d,S="application/x-mpegURL",R="video/mp4",G="video/webm",r={UASDatalinkLocalSet:1e4,PrecisionTimeStamp:10002,MissionId:10003,PlatformTailNumber:10004,PlatformHeadingAngle:10005,PlatformPitchAngle:10006,PlatformRollAngle:10007,PlatformTrueAirspeed:10008,PlatformIndicatedAirspeed:10009,PlatformDesignation:10010,ImageSourceSensor:10011,ImageCoordinateSystem:10012,SensorLatitude:10013,SensorLongitude:10014,SensorTrueAltitude:10015,SensorHorizontalFOV:10016,SensorVerticalFOV:10017,SensorAzimuthAngle:10018,SensorElevationAngle:10019,SensorRollAngle:10020,PlatformSlantRange:10021,TargetWidth:10022,FrameCenterLatitude:10023,FrameCenterLongitude:10024,FrameCenterElevation:10025,OffsetCorner1Latitude:10026,OffsetCorner1Longitude:10027,OffsetCorner2Latitude:10028,OffsetCorner2Longitude:10029,OffsetCorner3Latitude:10030,OffsetCorner3Longitude:10031,OffsetCorner4Latitude:10032,OffsetCorner4Longitude:10033,TargetLocationLatitude:10040,TargetLocationLongitude:10041,TargetLocationElevation:10042,TargetTrackGateWidth:10043,TargetTrackGateHeight:10044,TargetErrorEstimateHorizontal:10045,TargetErrorEstimateLateral:10046,GenericFlagData:10047,PlatformGroundSpeed:10056,PlatformGroundRange:10057,PlatformRemainingFuel:10058,PlatformCallSign:10059,SensorFOVName:10063,PlatformMagneticHeading:10064,LDSVersionNumber:10065,AlternatePlatformName:10070,EventStartTimeUTC:10072,VMTIDataSet:10074,SensorEllipsoidHeight:10075,OperationalMode:10077,FrameCenterAboveEllipsoid:10078,CornerLatitudePoint1:10082,CornerLongitudePoint1:10083,CornerLatitudePoint2:10084,CornerLongitudePoint2:10085,CornerLatitudePoint3:10086,CornerLongitudePoint3:10087,CornerLatitudePoint4:10088,CornerLongitudePoint4:10089,SARMotionImageryMetadata:10095,SecurityClassification:20001,SecurityClassifyingAuthority:20002,SecurityClassifyingCountry:20003,SecuritySCI:20004,SecurityCaveats:20005,SecurityReleaseInstructions:20006,SecurityLDSVersion:20022,EsriVideoWidth:90001,EsriVideoHeight:90002,EsriFrameCenterLatitude:90050,EsriFrameCenterLongitude:90051,EsriCornerLatitudePt1:90052,EsriCornerLongitudePt1:90053,EsriCornerLatitudePt2:90054,EsriCornerLongitudePt2:90055,EsriCornerLatitudePt3:90056,EsriCornerLongitudePt3:90057,EsriCornerLatitudePt4:90058,EsriCornerLongitudePt4:90059,EsriFrameOutline:90060,EsriSensorPosition:90061,EsriHorizonPixelPack:90063,EsriGroundControlPoints:90064};function te(e,t=1e4){if(!e||!e.length)return[];let n=[],o=[];for(let s=0;s<e.length;s++){const l=e[s],f=l!=null&&l.text?JSON.parse(l.text):null;(f==null?void 0:f.source)==="EsriVideoServer"&&(n=[...f.data])}const i=n.find(s=>s.tagId===t);return Array.isArray(i==null?void 0:i.value)&&(o=[...i.value]),o}function re(e){const{duration:t,end:n,start:o,timezone:i="UTC"}=e||{};return typeof t!="number"?null:new M({duration:t||null,end:typeof n=="number"?new Date(n):null,start:typeof o=="number"?new Date(o):null,timezone:i})}function ne(e,t){const n=[...t],o=n.findIndex(i=>i.equals(e));return o>-1&&n.splice(o),n.push(e),n}function oe(e){if(!(e!=null&&e.size))return new g;const t=K(e),n=U(e),o=W(e),i=B(t,n);return new g({frameCenter:n,frameOutline:o,lineOfSight:i,sensorLocation:t})}function ie(e){var t;return e!=null&&e.size?((t=e.get(r.EsriGroundControlPoints))==null?void 0:t.value)??null??null:null}function ae(e){var t;return e!=null&&e.size?((t=e.get(r.EsriHorizonPixelPack))==null?void 0:t.value)??null:null}function U(e){return j(e)??J(e)}function se(e){if(!e)return S;const t=e.match(/\.(\w{3,4})(?:$|\?)/i);if(!t)return S;switch(t[1].toLowerCase()){case"mp4":return R;case"webm":return G;default:return S}}function ue(e){const t=e==null?void 0:e.layers;return t!=null&&t.length?t.map(n=>({layerId:n.id,posterUrl:n.poster,sourceType:n.serviceType,title:n.name,type:n.type||"Video Layer"})):[]}function le(e,t,n){var i;if(!e)return null;const o=e.clone();switch(o.type){case"simple-fill":P(o,n),o.outline.color=t;break;case"simple-line":P(o,t);break;case"simple-marker":P(o,t),(i=o==null?void 0:o.outline)!=null&&i.color&&(o.outline.color=t);break;case"cim":$(o,t)}return o}function de(e){const{cameraAzimuth:t,platformHeading:n,source:o=null,symbolOffset:i=0}=e||{};let s=0;if(!o)return s;s=o==="platformHeading"?n+i:n+t+i;const l=s>360?s-360:s;return Math.round(Math.abs(l))}function j(e){var t,n;return e&&e.has(r.EsriFrameCenterLatitude)&&e.has(r.EsriFrameCenterLongitude)?new c({x:e.get(r.EsriFrameCenterLongitude).value,y:e.get(r.EsriFrameCenterLatitude).value,z:((t=e.get(r.FrameCenterAboveEllipsoid))==null?void 0:t.value)??((n=e.get(r.FrameCenterElevation))==null?void 0:n.value)}):null}function J(e){var t,n,o;return e&&e.has(r.FrameCenterLatitude)&&e.has(r.FrameCenterLongitude)?new c({x:(t=e.get(r.FrameCenterLongitude))==null?void 0:t.value,y:(n=e.get(r.FrameCenterLatitude))==null?void 0:n.value,z:(o=e.get(r.FrameCenterElevation))==null?void 0:o.value}):null}function W(e){var n;if(!e)return null;const t=(n=e.get(r.EsriFrameOutline))==null?void 0:n.value;return t?E.fromJSON(t.geometry):_(e)??q(e)}function _(e){var s,l,f,y,h,v,L,C;if(!(e.has(r.EsriCornerLatitudePt1)&&e.has(r.EsriCornerLongitudePt1)&&e.has(r.EsriCornerLatitudePt2)&&e.has(r.EsriCornerLongitudePt2)&&e.has(r.EsriCornerLatitudePt3)&&e.has(r.EsriCornerLongitudePt3)&&e.has(r.EsriCornerLatitudePt4)&&e.has(r.EsriCornerLongitudePt4)))return null;const t=[(s=e.get(r.EsriCornerLongitudePt1))==null?void 0:s.value,(l=e.get(r.EsriCornerLatitudePt1))==null?void 0:l.value],n=[(f=e.get(r.EsriCornerLongitudePt2))==null?void 0:f.value,(y=e.get(r.EsriCornerLatitudePt2))==null?void 0:y.value],o=[(h=e.get(r.EsriCornerLongitudePt3))==null?void 0:h.value,(v=e.get(r.EsriCornerLatitudePt3))==null?void 0:v.value],i=[(L=e.get(r.EsriCornerLongitudePt4))==null?void 0:L.value,(C=e.get(r.EsriCornerLatitudePt4))==null?void 0:C.value];return new E({rings:[[t,n,o,i]]})}function q(e){var L,C,A,b,z,x,D,V,k,H;if(!(e.has(r.OffsetCorner1Latitude)&&e.has(r.OffsetCorner1Longitude)&&e.has(r.OffsetCorner2Latitude)&&e.has(r.OffsetCorner2Longitude)&&e.has(r.OffsetCorner3Latitude)&&e.has(r.OffsetCorner3Longitude)&&e.has(r.OffsetCorner4Latitude)&&e.has(r.OffsetCorner4Longitude)&&e.has(r.FrameCenterLatitude)&&e.has(r.FrameCenterLongitude)))return null;const t=(L=e.get(r.FrameCenterLatitude))==null?void 0:L.value,n=(C=e.get(r.FrameCenterLongitude))==null?void 0:C.value,o=t+((A=e.get(r.OffsetCorner1Latitude))==null?void 0:A.value),i=n+((b=e.get(r.OffsetCorner1Longitude))==null?void 0:b.value),s=t+((z=e.get(r.OffsetCorner2Latitude))==null?void 0:z.value),l=n+((x=e.get(r.OffsetCorner2Longitude))==null?void 0:x.value),f=t+((D=e.get(r.OffsetCorner3Latitude))==null?void 0:D.value),y=n+((V=e.get(r.OffsetCorner3Longitude))==null?void 0:V.value),h=t+((k=e.get(r.OffsetCorner4Latitude))==null?void 0:k.value),v=n+((H=e.get(r.OffsetCorner4Longitude))==null?void 0:H.value);return new E({rings:[[[i,o],[l,s],[y,f],[v,h]]]})}function B(e,t){if(!e||!t)return null;const n=[e.x,e.y,e.z??0],o=[t.x,t.y,t.z??0];return new O({paths:[[n,o]]})}function K(e){var t,n,o,i;if(!(e!=null&&e.size))return null;if(e.has(r.EsriSensorPosition)){const s=(t=e.get(r.EsriSensorPosition))==null?void 0:t.value;if(s)return c.fromJSON(s.geometry)}return e.has(r.SensorLongitude)&&e.has(r.SensorLatitude)?new c({x:(n=e.get(r.SensorLongitude))==null?void 0:n.value,y:(o=e.get(r.SensorLatitude))==null?void 0:o.value,z:(i=e.get(r.SensorTrueAltitude))==null?void 0:i.value}):null}export{oe as C,se as E,ie as L,ue as a,M as b,ae as c,r as d,te as f,re as g,de as h,ne as m,g as n,m as p,le as v};

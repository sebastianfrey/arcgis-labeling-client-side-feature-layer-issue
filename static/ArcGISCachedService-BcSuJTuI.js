import{aJ as t,aK as o,c9 as m,ae as x,ca as h,aL as I}from"./index-C_bK48d2.js";import{e as L}from"./TileInfoTilemapCache-1PAwY9Z4.js";import{T as O}from"./TilemapCache-DsVNIepH.js";const M=y=>{const f=y;let l=class extends f{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){var a,e;(e=(a=this.tilemapCache)==null?void 0:a.destroy)==null||e.call(a)}readMinScale(a,e){return e.minLOD!=null&&e.maxLOD!=null?a:0}readMaxScale(a,e){return e.minLOD!=null&&e.maxLOD!=null?a:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(a,e,v){var u;const S=(u=e.capabilities)==null?void 0:u.includes("Tilemap");let{minLOD:r,maxLOD:n,minScale:c,maxScale:p}=e;if(r==null&&n==null&&(c!==0||p!==0)){const i=s=>Math.round(1e4*s)/1e4;c=i(c||e.tileInfo.lods[0].scale),p=i(p||e.tileInfo.lods[e.tileInfo.lods.length-1].scale);for(const s of e.tileInfo.lods){const d=i(s.scale);r=d>=c?s.level:r,n=d>=p?s.level:n}}if(S)return new O({layer:this,minLOD:r,maxLOD:n});if(e.tileInfo){const i=new h;return i.read(e.tileInfo,v),new L(i,r,n)}return null}};return t([o({json:{read:{source:"copyrightText"}}})],l.prototype,"copyright",void 0),t([o()],l.prototype,"minScale",void 0),t([m("service","minScale")],l.prototype,"readMinScale",null),t([o()],l.prototype,"maxScale",void 0),t([m("service","maxScale")],l.prototype,"readMaxScale",null),t([o({type:x})],l.prototype,"spatialReference",void 0),t([o({readOnly:!0})],l.prototype,"supportsBlankTile",null),t([o({type:h})],l.prototype,"tileInfo",void 0),t([o()],l.prototype,"tilemapCache",void 0),t([m("service","tilemapCache",["capabilities","tileInfo"])],l.prototype,"readTilemapCache",null),t([o()],l.prototype,"version",void 0),l=t([I("esri.layers.mixins.ArcGISCachedService")],l),l};export{M as s};

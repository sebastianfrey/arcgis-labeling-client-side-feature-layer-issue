const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WhereClauseCache-Bg00WU4t.js","./WhereClause-BTKovlsq.js","./arcadeUtils-Y4r_h9jI.js","./arcade-DzAn-uHG.js","./arcadeEnvironment-DXZ5oSsm.js","./Dictionary-BQHLIVF1.js","./ImmutableArray-BPVd6ESQ.js","./shared-CCxkzcop.js","./number-B6x4HXNH.js","./Feature-IMCzHRW9.js","./featureConversionUtils-Di1UhLmY.js","./OptimizedFeatureSet-BZnZXZq6.js","./memoryEstimations-w0EAmzVg.js","./OptimizedGeometry-KE6YknPZ.js","./aiServices-nbIINXcF.js","./commonProperties-DHiB1uzW.js","./streamLayerUtils-DFlbJ4P1.js","./unitConversion-BJ0HkwFy.js","./isImageryGraphicOrigin-Ccuhb4eK.js","./isImageryTileGraphicOrigin-ZR-gBf9D.js","./rasterFieldUtils-Dunpj7JV.js","./batchExec-QNVzSxZ_.js","./QueueProcessor-7WLZ5z5V.js","./ElevationLayer-BpZ-RCW9.js","./ArcGISCachedService-BcSuJTuI.js","./TileInfoTilemapCache-1PAwY9Z4.js","./TilemapCache-DsVNIepH.js","./WorkerHandle-D-D5zuq5.js","./webStyleSymbolUtils-DZP4PQg-.js","./devEnvironmentUtils-CnNDiFMM.js","./webStyleAcceptedFormats-CG7ZQ6BV.js","./portalLayers-BV6vp3dY.js","./associatedFeatureServiceUtils-DFDiB54v.js","./fetchService-NjjbB1Cv.js","./loadUtils-DJTdVdqC.js","./lazyLayerLoader-T_sot5e7.js","./arcgisLayers-gz_PD-bp.js","./projectOperator-GjeZoSlA.js","./operatorProject-DDNXv7o7.js","./SimpleGeometryCursor-B92kdZ15.js","./projectOperator-B-bjN70O.js","./layersLoader-X5WNrsxC.js","./CSVSourceWorker-BcFYus3A.js","./date-DLgTylpo.js","./FeatureStore-aqcGTsJW.js","./BoundsStore-DKjGiOhP.js","./PooledRBush-Dq_6mwF9.js","./timeSupport-CKl_T9CO.js","./queryUtils-CqfgZPYW.js","./optimizedFeatureQueryEngineAdapter-DEOBfILt.js","./QueryEngine-DN0KvbO9.js","./QueryEngineCapabilities-zq1XKmMU.js","./quantizationUtils-DpuTGthe.js","./utils-FyH5DJme.js","./utils-qlOu9s_F.js","./utils-CMB00zbv.js","./ClassBreaksDefinition-C5eqXtrO.js","./SnappingCandidate-Bp4AgyW0.js","./FixedIntervalBinParameters-DSGmyRFU.js","./locationUtils-CajirHGA.js","./clientSideDefaults-C_rk6q2f.js","./EdgeProcessingWorker-D5zRSkCc.js","./workerHelper-I6JOpnd2.js","./InterleavedLayout-DFvKIHDS.js","./BufferView-CruTDoyp.js","./types-BKo2foNY.js","./VertexElementDescriptor-2_ON7b9t.js","./VertexAttributeLocations-BSIMTgtd.js","./edgeProcessing-CFw-a8Be.js","./deduplicate-Z43o2PF3.js","./Indices-BnCWM-r-.js","./TextureBackedBufferLayout-Bu_3CpJU.js","./Normals-4KUYifO5.js","./ElevationSamplerWorker-nyczb6-2.js","./MeshLocalVertexSpace-D2aWm81U.js","./vertexSpaceConversion-BIaXk5Vb.js","./spatialReferenceEllipsoidUtils-DtI6yob-.js","./computeTranslationToOriginAndRotation-BdfVN0tn.js","./projectPointToVector-oWOZnQKe.js","./meshVertexSpaceUtils-CDdm4woH.js","./vec3-DaPyUuf5.js","./vec4-BQsyhewI.js","./Feature3DPipelineWorker-BtaDMvIc.js","./HUDMaterial.glsl-p70B5G9C.js","./projectVectorToVector-IRvjF_FZ.js","./hydratedFeatures-dJZG-d3P.js","./vec3f32-WCVSSNPR.js","./OutputColorHighlightOLID.glsl-sxs6Kjna.js","./triangle-Bs-n1Sd1.js","./ray-DFDOQn-4.js","./vectorStacks-CpRnv_41.js","./quatf64-aQ5IuZRd.js","./sphere-Dx28BAGo.js","./plane-CYaN818s.js","./renderState-CtcAbezy.js","./glsl-B5bJgrnA.js","./frustum-BtvbAxAw.js","./orientedBoundingBox-QSEKbinM.js","./quat-BPAPKRxq.js","./ShaderBuilder-DMt-f1fI.js","./placementUtils-BnDrUYq9.js","./sdfPrimitives-DLG4KC99.js","./ManagedTexture-B9Ayb5dV.js","./videoUtils-DSNBJ20F.js","./image-CVbVCSUp.js","./RealisticTree.glsl-Jq3TBRMx.js","./DefaultMaterial-B2uHExbq.js","./VertexBuffer-CJAj1yU0.js","./BufferObject--KeRTd-9.js","./query-BrxajYUG.js","./urlUtils-BlxBVR77.js","./pbfQueryUtils-CX8BKSeH.js","./pbf-CBn1Vo1A.js","./boundedPlane-C07RSIqX.js","./FeaturePipelineWorker-DlEJHBsB.js","./AttributeStore-BqHib2-M.js","./Utils-DV4XWvXG.js","./BoundingBox-hPKJQmqA.js","./UpdateTracking2D-Bq3nf4xq.js","./FeatureStoreQueryAdapter-BD087zpc.js","./labelPoint-Btea-Ya0.js","./constants-BBnGEY1d.js","./MeshWriterRegistry-BGB0_jhv.js","./rasterizingUtils-JV4ZHDNN.js","./CIMSymbolHelper-BdzJMZqf.js","./BidiEngine-DbjCV6G7.js","./GeometryUtils-CROhaqZP.js","./fontUtils-WtN6_M4S.js","./Rect-CUzevAry.js","./TexturedLineMeshWriter-BbJoDcvh.js","./TurboLine-D3Tw_eod.js","./grouping-xC_2J4Cw.js","./FeatureMetadata-DO3i0w-D.js","./SourceChunkStore-ovv5d1M2.js","./parquet-i5YPt5lh.js","./operatorGeodeticDensify-CFr7rJxP.js","./geodeticCurveType-CirnHLSB.js","./normalizeUtilsSync-GiuznMuB.js","./FeatureIdInfo-BPnJarLb.js","./ogcFeatureUtils-CVJvouR6.js","./geojson-D9Cjlr5N.js","./sourceUtils-CbyE67Oz.js","./CircularArray-CujHzHWW.js","./createConnection-zUtVbPKR.js","./FeatureServiceSnappingSourceWorker-B71N03oB.js","./symbologySnappingCandidates-Cx3h9sXm.js","./FlowWorker-DEFSBbGG.js","./dataUtils-BsH8cfJg.js","./GeoJSONSourceWorker-BZC89XLZ.js","./MemorySourceWorker-BX_WmL_e.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-qe8VXiU0.js","./dehydratedFeatures-Bo4X9GGt.js","./PanoramicMeshWorker-JNYo2KWF.js","./PixelBlock-CE63rTmP.js","./pixelRangeUtils-BjN-b_zG.js","./ParquetSourceWorker-BN6iBbP8.js","./parquetUtils-Dubk0vym.js","./PointCloudWorker-Bw7p0faD.js","./PointCloudUniqueValueRenderer-D0tX1AgY.js","./I3SBinaryReader-DRvUm2DT.js","./RasterWorker-BIuRfbao.js","./RasterSymbolizer-D_kc921t.js","./_commonjsHelpers-DCkdB7M8.js","./vectorFieldUtils-rpoioFtp.js","./colorUtils-CLNuAJnC.js","./rasterFunctionHelper-BFv537F1.js","./clipUtils-oY08WdMl.js","./rasterProjectionHelper-DaGB8Ymv.js","./PolynomialTransform-DX_aYQrr.js","./SceneLayerSnappingSourceWorker-DxKr_MM7.js","./Octree-Dmg0kHEk.js","./SceneLayerWorker-BwwT3Iht.js","./WFSSourceWorker-Bq-_lGBX.js","./wfsUtils-X5lk-JwV.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-BTWRNQ5q.js","./constants-BHYAGdRm.js","./config-MDUrh2eL.js","./SourceLayerData-uvcLs9qy.js","./StyleRepository-o2HbIiWj.js","./earcut-Lltz9D9k.js","./statsWorker-8BVGx3MC.js","./Popup-DOCasKs_.js","./throttle-DW2UfT9W.js","./unitFormatUtils-Ckw47jIR.js","./quantity-wpyqwS5w.js","./AttachmentInfo-CY-_1X_S.js","./featureUtils-yar331Yx.js","./utils-DoRURDhn.js","./utils-B2fTWpox.js","./cimSymbolUtils-kUrI6vhQ.js","./executeQueryJSON-B3mQDcOE.js","./ReactiveSet-Dh87lN3P.js","./symbolUtils-C-02jwAZ.js","./layerViewUtils-B_qaHejE.js","./layersCreator-BcyvXSRx.js","./ElevationQuery-DnMx7XpN.js","./GeometryDescriptor-D-cFU3O0.js","./webglDeps-CAL2qiiZ.js","./FramebufferObject-C4D9djRW.js","./ProgramTemplate-ESmcnuBB.js","./VertexArrayObject-DXnl-4Rl.js","./mapViewDeps-C32Ez157.js","./FeatureCommandQueue-1kuC54WM.js","./GraphShaderModule-BblaVFql.js","./utils-EG3Lc9jF.js","./WGLContainer-Ddz6wajQ.js","./Container-DDZeWUS3.js","./EffectView-P_O1XbEJ.js","./SDFHelper-vR6Tjh9e.js","./OverrideHelper-C80mPzpW.js","./callExpressionWithFeature-Yw0RK2Jm.js","./GridShader-Ddh9grEG.js","./testSVGPremultipliedAlpha-Crux7pwJ.js","./SymbolFader-D5K7MEni.js","./RenderingContext-Dvzt9Sim.js","./CIMResourceManager-DEewzKlt.js","./utils-DWorIfCN.js","./utils-DDjZAYSk.js","./GraphicsView2D-svD5me2n.js","./densifyCurvedGeometry-7KKcR85x.js","./GraphicContainer-DSXmHo29.js","./AGraphicContainer-Bby_8yaU.js","./TechniqueInstance-r9CEEVjg.js","./TileContainer-B59g0qvJ.js","./gridUtils-ZnziHA1q.js","./geodesicUtils-CTZo9mb6.js","./TileLayerView2D-RmSCDkCX.js","./imageUtils-Ch8tKeOJ.js","./BitmapTechnique-Cf_Rj-eq.js","./bitmapUtils-gwbw2c-H.js","./LayerView2D-DzSo3x-t.js","./HighlightGraphicContainer-CRem17pZ.js","./LayerView-BIRCz2lH.js","./RefreshableLayerView-C4x13X1v.js","./MapServiceLayerViewHelper-DcdxVymB.js","./floorFilterUtils-DZ5C6FQv.js","./drapedUtils-lizrtG85.js","./sublayerUtils-CPElnPvy.js","./popupUtils-xKNFEs4a.js","./highlightOptionsUtils-DXd9_sA-.js","./FeatureLayerView2D-gW-q8XEm.js","./timeSupport-CyzlmYj-.js","./AttributeBinsFeatureSet-BhMEWpce.js","./AttributeBinsQuery-jV_zI3Ms.js","./featureReductionUtils-Caulfaw_.js","./constants-SxxbBSOD.js","./BaseDynamicLayerView2D-BHD6VSo5.js","./BitmapContainer-D0WdIOuz.js","./ExportStrategy-PqtR85Wx.js","./CatalogLayerView2D-D3892SuJ.js","./CatalogDynamicGroupLayerView2D-BIhZvDPX.js","./CatalogFootprintLayerView2D-BJ7VEips.js","./HighlightLayerViewMixin-_gYaN-IJ.js","./GeoRSSLayerView2D-t97B6-w5.js","./GraphicsLayerView2D-Bc81ZSEP.js","./GroupLayerView2D-D4qOnQOx.js","./ImageryLayerView2D-Ctm0WXDw.js","./RasterVFDisplayObject-BYpmeKEO.js","./ImageryTileLayerView2D-BZIHE8aY.js","./datasetUtils-Cmlo5xfm.js","./rasterUtils-7WtlE8K6.js","./RawBlockCache-CHGqbnWp.js","./KMLLayerView2D-CnMiCyzN.js","./kmlUtils-sVEDyfVw.js","./KnowledgeGraphLayerView2D-DYyzr4zo.js","./MapImageLayerView2D-CdIIZXH8.js","./ExportImageParameters-Dhssjcte.js","./MapNotesLayerView2D-B7qIGQr-.js","./MediaLayerView2D-j_V99vl0.js","./mediaLayerUtils-DntfIZoP.js","./OverlayContainer-CLA5xfyf.js","./OGCFeatureLayerView2D-p9EY46uk.js","./RouteLayerView2D-Dhr4aXpz.js","./Stop-DjYDsPQB.js","./networkEnums-BSO0mlrW.js","./StreamLayerView2D-CnUk6lsg.js","./SubtypeGroupLayerView2D-DC8SbX2N.js","./VectorTileLayerView2D-D8c_Ityy.js","./VideoLayerView2D-B0B01waV.js","./GraphicsLayer-CFgfYbpT.js","./videoUtils-7kUYB43V.js","./ControlPoint-bXz9Cvrt.js","./WMSLayerView2D-Cza3HT0s.js","./WMTSLayerView2D-DlzwzBef.js","./AreaMeasurementAnalysisView2D-BNsDH_2Y.js","./getDefaultUnitForView-DghHjrRa.js","./ExclusiveOperationManager-DAhuHQJU.js","./quantityFormatUtils-BygWVGS0.js","./areaOperator-CNzFZrK_.js","./Point2D-CHGoJJR2.js","./Envelope2D-K-BIX8ba.js","./ProjectionTransformation-yTMc8p-1.js","./Transformation2D-CsY48lRi.js","./OperatorDefinitions-DP7_WWTp.js","./jsonConverter-E47-BQ_b.js","./apiConverter-CdLHvLkb.js","./geodeticAreaOperator-D2z_GCTf.js","./geodeticDensifyOperator-vNwHtiui.js","./geodeticLengthOperator-BhsSOjnG.js","./lengthOperator-J6a_F19i.js","./simplifyOperator-DCwRzIwh.js","./operatorSimplify-CaWHRVp7.js","./SketchViewModel-BpdG2zzZ.js","./hitTestSelectUtils-xrNddzEE.js","./elevationInfoUtils-C7MilKvD.js","./DistanceMeasurementAnalysisView2D-C_YOlA5z.js","./ElevationProfileAnalysisView2D-0nDjDwk5.js","./mapCollectionUtils-BgJ6gPaM.js","./createUtils-BtrZ1zkK.js","./distanceOperator-Dulc5dHh.js","./Distance2DCalculator-CXhBP-8I-BUsGD9ex.js","./apng-o7myWmR3.js","./webdocSaveUtils-D3V8hiZX.js","./originUtils-CznO0Rkw.js","./basemapUtils-FsMZ7l8w.js","./resourceUtils-DbQVAtgY.js","./resourceUtils-Bi9jDoOu.js","./saveUtils-CDlDFCN0.js","./featureLayerUtils-BwiPGThT.js","./utils-DIyBB1GW.js","./FeatureLayerSource-BaYpvi7F.js","./External-BWS8d1Ku.js","./applyEditsUtils-Dj1IuBr5.js","./MeshTransform-auT0YL_N.js","./axisAngleDegrees-DpGZEdI4.js","./editingSupport-CuBBnPhC.js","./QueryTask-9_kfRTXO.js","./executeForIds-CbCn4frw.js","./queryAssociations-BNZsSvYd.js","./Association-7T_5CKHS.js","./synthesizeAssociationGeometries-dPvUzHfu.js","./index-CKvIWSMV.js","./index-YrgJQEeE.js","./index-BHivy5Pu.js","./resources7-BeUU2AIC.js","./index-D4SQPsjK.js","./utils2-B8CAB0No.js","./resources5-B8vQCAMP.js","./index-3_D1eKb0.js","./customElement-BKApPBmV.js","./index-eMjuwXia.js","./Legend-rjl1oZhh.js","./rendererConversion-CPgb1dWp.js","./previewSymbol3D-DIrMSlZb.js","./previewUtils-B8Y4tA-6.js","./previewCIMSymbol-CPxcotx6.js","./CIMSymbolRasterizer-CxZOCRQl.js"])))=>i.map(i=>d[i]);
var mte=Object.getPrototypeOf;var gte=Reflect.get;var MN=t=>{throw TypeError(t)};var oE=(t,e,i)=>e.has(t)||MN("Cannot "+i);var G=(t,e,i)=>(oE(t,e,"read from private field"),i?i.call(t):e.get(t)),Le=(t,e,i)=>e.has(t)?MN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),ke=(t,e,i,r)=>(oE(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),nr=(t,e,i)=>(oE(t,e,"access private method"),i);var aE=(t,e,i)=>gte(mte(t),i,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();const di=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},mM=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},jP=Symbol.for("controller"),yte=t=>typeof t=="object"&&t!==null&&(jP in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),vte=t=>typeof(t==null?void 0:t.then)=="function";let ev;const Mm=t=>{ev!==t&&(ev=t,queueMicrotask(()=>ev===t?ev=void 0:0))},hk=t=>ev;let Fd=[];const X8=t=>{if(t===void 0){Fd=[];return}const e=Fd.indexOf(t);Fd=e===-1?[...Fd,t]:Fd.slice(0,e+1),queueMicrotask(()=>Fd=[])},eU=()=>Fd;let Am;const bte=t=>{Am!==t&&(Am=t,queueMicrotask(()=>Am===t?Am=void 0:0))},wte=()=>{const t=Am;return Am=void 0,t},_te=async(t,e)=>{const i=VP(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},xte=async t=>{const e=VP(t);return await e.ready,e},VP=t=>{const i=hk().manager.X(t);if(i!==void 0)return i;if(yte(t))return t;const r=wte();if(r!==void 0)return r};let gM=!1;const Ste=t=>{gM=!0;try{return t()}finally{gM=!1}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dx=globalThis,UP=dx.ShadowRoot&&(dx.ShadyCSS===void 0||dx.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,qP=Symbol(),AN=new WeakMap;let tU=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==qP)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(UP&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=AN.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&AN.set(i,e))}return e}toString(){return this.cssText}};const $te=t=>new tU(typeof t=="string"?t:t+"",void 0,qP),Ht=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new tU(i,t,qP)},Tte=(t,e)=>{if(UP)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),n=dx.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},CN=UP?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return $te(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:kte,defineProperty:Ite,getOwnPropertyDescriptor:Ete,getOwnPropertyNames:Mte,getOwnPropertySymbols:Ate,getPrototypeOf:Cte}=Object,zu=globalThis,ON=zu.trustedTypes,Ote=ON?ON.emptyScript:"",lE=zu.reactiveElementPolyfillSupport,tb=(t,e)=>t,yM={toAttribute(t,e){switch(e){case Boolean:t=t?Ote:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},fk=(t,e)=>!kte(t,e),PN={attribute:!0,type:String,converter:yM,reflect:!1,useDefault:!1,hasChanged:fk};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),zu.litPropertyMetadata??(zu.litPropertyMetadata=new WeakMap);let kf=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=PN){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&Ite(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=Ete(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:n,set(o){const a=n==null?void 0:n.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??PN}static _$Ei(){if(this.hasOwnProperty(tb("elementProperties")))return;const e=Cte(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(tb("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(tb("properties"))){const i=this.properties,r=[...Mte(i),...Ate(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(CN(n))}else e!==void 0&&i.push(CN(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(i=>i(this))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Tte(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){var s;const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:yM).toAttribute(i,r.type);this._$Em=e,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(e,i){var s,o;const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const a=r.getPropertyOptions(n),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:yM;this._$Em=n;const d=c.fromAttribute(i,a.type);this[n]=d??((o=this._$Ej)==null?void 0:o.get(n))??d,this._$Em=null}}requestUpdate(e,i,r){var n;if(e!==void 0){const s=this.constructor,o=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??fk)(o,i)||r.useDefault&&r.reflect&&o===((n=this._$Ej)==null?void 0:n.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:n,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??i??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),n===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n){const{wrapped:a}=o,c=this[s];a!==!0||this._$AL.has(s)||c===void 0||this.C(s,void 0,o,c)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(i)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach(r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(i=>this._$ET(i,this[i]))),this._$EM()}updated(e){}firstUpdated(e){}};kf.elementStyles=[],kf.shadowRootOptions={mode:"open"},kf[tb("elementProperties")]=new Map,kf[tb("finalized")]=new Map,lE==null||lE({ReactiveElement:kf}),(zu.reactiveElementVersions??(zu.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ib=globalThis,YS=ib.trustedTypes,RN=YS?YS.createPolicy("lit-html",{createHTML:t=>t}):void 0,BP="$lit$",uc=`lit$${Math.random().toFixed(9).slice(2)}$`,GP="?"+uc,Pte=`<${GP}>`,ah=document,qb=()=>ah.createComment(""),Bb=t=>t===null||typeof t!="object"&&typeof t!="function",HP=Array.isArray,iU=t=>HP(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",cE=`[ 	
\f\r]`,$0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,LN=/-->/g,FN=/>/g,kd=RegExp(`>|${cE}(?:([^\\s"'>=/]+)(${cE}*=${cE}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),NN=/'/g,DN=/"/g,rU=/^(?:script|style|textarea|title)$/i,nU=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),te=nU(1),Ln=nU(2),Qu=Symbol.for("lit-noChange"),Je=Symbol.for("lit-nothing"),zN=new WeakMap,xp=ah.createTreeWalker(ah,129);function sU(t,e){if(!HP(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return RN!==void 0?RN.createHTML(e):e}const oU=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",o=$0;for(let a=0;a<i;a++){const c=t[a];let d,h,f=-1,m=0;for(;m<c.length&&(o.lastIndex=m,h=o.exec(c),h!==null);)m=o.lastIndex,o===$0?h[1]==="!--"?o=LN:h[1]!==void 0?o=FN:h[2]!==void 0?(rU.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=kd):h[3]!==void 0&&(o=kd):o===kd?h[0]===">"?(o=n??$0,f=-1):h[1]===void 0?f=-2:(f=o.lastIndex-h[2].length,d=h[1],o=h[3]===void 0?kd:h[3]==='"'?DN:NN):o===DN||o===NN?o=kd:o===LN||o===FN?o=$0:(o=kd,n=void 0);const v=o===kd&&t[a+1].startsWith("/>")?" ":"";s+=o===$0?c+Pte:f>=0?(r.push(d),c.slice(0,f)+BP+c.slice(f)+uc+v):c+uc+(f===-2?a:v)}return[sU(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let vM=class aU{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[d,h]=oU(e,i);if(this.el=aU.createElement(d,r),xp.currentNode=this.el.content,i===2||i===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(n=xp.nextNode())!==null&&c.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const f of n.getAttributeNames())if(f.endsWith(BP)){const m=h[o++],v=n.getAttribute(f).split(uc),w=/([.?@])?(.*)/.exec(m);c.push({type:1,index:s,name:w[2],strings:v,ctor:w[1]==="."?uU:w[1]==="?"?dU:w[1]==="@"?pU:Vw}),n.removeAttribute(f)}else f.startsWith(uc)&&(c.push({type:6,index:s}),n.removeAttribute(f));if(rU.test(n.tagName)){const f=n.textContent.split(uc),m=f.length-1;if(m>0){n.textContent=YS?YS.emptyScript:"";for(let v=0;v<m;v++)n.append(f[v],qb()),xp.nextNode(),c.push({type:2,index:++s});n.append(f[m],qb())}}}else if(n.nodeType===8)if(n.data===GP)c.push({type:2,index:s});else{let f=-1;for(;(f=n.data.indexOf(uc,f+1))!==-1;)c.push({type:7,index:s}),f+=uc.length-1}s++}}static createElement(e,i){const r=ah.createElement("template");return r.innerHTML=e,r}};function lh(t,e,i=t,r){var o,a;if(e===Qu)return e;let n=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const s=Bb(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=n:i._$Cl=n),n!==void 0&&(e=lh(t,n._$AS(t,e.values),n,r)),e}let lU=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??ah).importNode(i,!0);xp.currentNode=n;let s=xp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let d;c.type===2?d=new mk(s,s.nextSibling,this,e):c.type===1?d=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(d=new hU(s,this,e)),this._$AV.push(d),c=r[++a]}o!==(c==null?void 0:c.index)&&(s=xp.nextNode(),o++)}return xp.currentNode=ah,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},mk=class cU{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=Je,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=lh(this,e,i),Bb(e)?e===Je||e==null||e===""?(this._$AH!==Je&&this._$AR(),this._$AH=Je):e!==this._$AH&&e!==Qu&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):iU(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Je&&Bb(this._$AH)?this._$AA.nextSibling.data=e:this.T(ah.createTextNode(e)),this._$AH=e}$(e){var s;const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=vM.createElement(sU(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(i);else{const o=new lU(n,this),a=o.u(this.options);o.p(i),this.T(a),this._$AH=o}}_$AC(e){let i=zN.get(e.strings);return i===void 0&&zN.set(e.strings,i=new vM(e)),i}k(e){HP(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new cU(this.O(qb()),this.O(qb()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}},Vw=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=Je,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Je}_$AI(e,i=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=lh(this,e,i,0),o=!Bb(e)||e!==this._$AH&&e!==Qu,o&&(this._$AH=e);else{const a=e;let c,d;for(e=s[0],c=0;c<s.length-1;c++)d=lh(this,a[r+c],i,c),d===Qu&&(d=this._$AH[c]),o||(o=!Bb(d)||d!==this._$AH[c]),d===Je?e=Je:e!==Je&&(e+=(d??"")+s[c+1]),this._$AH[c]=d}o&&!n&&this.j(e)}j(e){e===Je?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},uU=class extends Vw{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Je?void 0:e}},dU=class extends Vw{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Je)}},pU=class extends Vw{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=lh(this,e,i,0)??Je)===Qu)return;const r=this._$AH,n=e===Je&&r!==Je||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Je&&(r===Je||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}},hU=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){lh(this,e)}};const Rte={M:BP,P:uc,A:GP,C:1,L:oU,R:lU,D:iU,V:lh,I:mk,H:Vw,N:dU,U:pU,B:uU,F:hU},uE=ib.litHtmlPolyfillSupport;uE==null||uE(vM,mk),(ib.litHtmlVersions??(ib.litHtmlVersions=[])).push("3.3.1");const Lte=(t,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(i==null?void 0:i.renderBefore)??null;r._$litPart$=n=new mk(e.insertBefore(qb(),s),s,void 0,i??{})}return n._$AI(t),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jp=globalThis;let ju=class extends kf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Lte(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Qu}};var U8;ju._$litElement$=!0,ju.finalized=!0,(U8=jp.litElementHydrateSupport)==null||U8.call(jp,{LitElement:ju});const dE=jp.litElementPolyfillSupport;dE==null||dE({LitElement:ju});(jp.litElementVersions??(jp.litElementVersions=[])).push("4.2.1");let Gb=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};const Fte=(t,e)=>{const i=e/Nte;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},Nte=4,Dte=(t,e,i)=>{const r=Object.keys(t),n=r.length;Iu===void 0&&queueMicrotask(gk),Iu??(Iu=new Map);let s=Iu.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},Iu.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=d=>di(e,null,d),c=o[n];c===void 0?a(void 0):t[c]===i?a(c):a(void 0)}),i};let Iu;const gk=()=>{Iu==null||Iu.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Iu=void 0},zte=(t,e,i)=>{const r=t.manager;return r.V!==Je&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>di(e,void 0,i===s?n:void 0)),i},fU=(t=[hk(),...eU()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>Dte(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){zte(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},jte=(t="",e={},i=hk())=>{const r={emit:n=>{t===""&&gk();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&fU(void 0,n=>t=n.key,r),r},dt=jte.bind(null,"");var mU;mU=jP;var cg,ug,Cp,dg,pg,hg,fg,mg,$u,Op,Cn,Pa,nc,gg,px,q8;let WP=(q8=class{constructor(e){Le(this,gg);Le(this,cg);Le(this,ug);Le(this,Cp);Le(this,dg);Le(this,pg);Le(this,hg);Le(this,fg);Le(this,mg);Le(this,$u);Le(this,Op);Le(this,Cn);Le(this,Pa);Le(this,nc);ke(this,cg,[]),ke(this,ug,[]),ke(this,Cp,[]),ke(this,dg,[]),ke(this,pg,[]),ke(this,hg,[]),ke(this,fg,[]),ke(this,mg,[]),ke(this,$u,[]),ke(this,Op,!1),this.P=new Gb,this.connectedCalled=!1,this.loadedCalled=!1,this[mU]=!0,ke(this,nc,[]);const i=this,r=e??hk();ke(i,Cn,r),i.ready=i.P.promise,ke(i,Pa,VN(i)),i.component=r,G(i,Cn).addController(i),G(i,Cn).manager===void 0||(X8(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=G(this,Cn);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),G(e,Op)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return G(this,Pa)}set exports(e){const i=G(this,Pa);i!==e&&(ke(this,Pa,e),G(this,nc).forEach(di),this.connectedCalled&&this.O!==!1&&G(this,Cn).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){ke(this,Pa,i?VN(e):e),G(this,nc).forEach(di)}watchExports(e){const i=()=>e(G(this,Pa));return G(this,nc).push(i),()=>void G(this,nc).splice(G(this,nc).indexOf(i),1)}get use(){return Mm(G(this,Cn)),_te}get useRef(){return Mm(G(this,Cn)),xte}get useRefSync(){return Mm(G(this,Cn)),VP}controllerRemoved(){G(this,Cn).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){G(this,cg).push(e)}onDisconnected(e){G(this,ug).push(e)}onLoad(e){G(this,Cp).push(e)}onLoaded(e){G(this,dg).push(e)}onUpdate(e){G(this,pg).push(e)}onUpdated(e){G(this,hg).push(e)}onDestroy(e){G(this,fg).push(e)}onLifecycle(e){G(this,mg).push(e),this.connectedCalled&&G(this,Cn).el.isConnected&&nr(this,gg,px).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&di(e.hostConnected,e),G(e,cg).forEach(di),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&di(e.hostDisconnected,e),G(e,ug).forEach(di),G(e,$u).forEach(di),ke(e,$u,[])}async triggerLoad(){if(G(this,Op))return;ke(this,Op,!0);const e=this;e.hostLoad&&await mM(e.hostLoad,e),G(this,Cp).length>0&&await Promise.allSettled(G(this,Cp).map(mM)),this.P.resolve(G(this,Pa))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&di(this.hostLoaded,this),G(this,dg).forEach(di),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&di(this.hostUpdate,this,e),G(this,pg).forEach(jN,e)}triggerUpdated(e){this.hostUpdated&&di(this.hostUpdated,this,e),G(this,hg).forEach(jN,e)}triggerDestroy(){this.hostDestroy&&di(this.hostDestroy,this),G(this,fg).forEach(di)}triggerLifecycle(){this.hostLifecycle&&nr(this,gg,px).call(this,()=>this.hostLifecycle()),G(this,mg).forEach(nr(this,gg,px),this)}},cg=new WeakMap,ug=new WeakMap,Cp=new WeakMap,dg=new WeakMap,pg=new WeakMap,hg=new WeakMap,fg=new WeakMap,mg=new WeakMap,$u=new WeakMap,Op=new WeakMap,Cn=new WeakMap,Pa=new WeakMap,nc=new WeakMap,gg=new WeakSet,px=function(e){Mm(G(this,Cn));const i=di(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?G(this,$u).push(n):typeof n=="object"&&typeof n.remove=="function"&&G(this,$u).push(n.remove)})},q8);function jN(t){di(t,void 0,this)}const Vte=WP,VN=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},Ute=t=>t.replace(qte,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),qte=/[A-Z]+(?![a-z])|[A-Z]/gu,Bte=1,Gte=2,Hte=4,Wte=8,Zte=16,Jte=32,Yte=64,gU=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},UN={};function yU(){}const hx=Object.defineProperty,Kte=globalThis.HTMLElement??yU;var On,sc,yg,Cw,bM,vg;let JNe=(vg=class extends Kte{constructor(){var n,s;super();Le(this,Cw);Le(this,On);Le(this,sc);Le(this,yg);ke(this,sc,{}),ke(this,yg,[]),this.I=new Gb,this.H=new Gb,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(G(i,sc)[o]=i[o],delete i[o])}),r.A?nr(s=i,Cw,bM).call(s,{a:r.A}):r.B.then(async o=>{var a,c;await r.K.p,nr(c=i,Cw,bM).call(c,await(((a=o.default)==null?void 0:a.then(d=>typeof d=="function"?{a:d}:d))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])hx(this.prototype,i,{configurable:!0,enumerable:!0,get(){return G(this,sc)[i]},set(r){G(this,sc)[i]=r}});for(const i of this.E??[])hx(this.prototype,i,{async value(...r){return G(this,On)||await this.H.promise,await G(this,On)[i](...r)},configurable:!0});for(const i of this.D??[])hx(this.prototype,i,{value(...r){return G(this,On)[i](...r)},configurable:!0})}get manager(){var i;return(i=G(this,On))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=G(this,On))==null||s.attributeChangedCallback(i,r,n),G(this,On)||G(this,yg).push(i)}connectedCallback(){var i,r;G(this,On)?(r=(i=G(this,On)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=gU(this))}disconnectedCallback(){var i,r;(r=(i=G(this,On))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=G(this,On))==null||i.requestUpdate()}},On=new WeakMap,sc=new WeakMap,yg=new WeakMap,Cw=new WeakSet,bM=function(i){var m;const r=this.constructor,n=r.L,s=G(this,sc),o=Object.values(i).find(v=>v.L===n),a=`${n}--lazy`;let c=o;for(;c&&!Object.hasOwn(c,"lumina");)c=Object.getPrototypeOf(c);Xte(c),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,ke(this,On,h),ke(this,sc,h),G(this,yg).forEach(v=>h.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(s).forEach(Qte,h);const f=this.isConnected;(f||this.G)&&((m=h.connectedCallback)==null||m.call(h),f||h.disconnectedCallback())},vg.lumina=!0,vg);function Qte([t,e]){this[t]=e}const Xte=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},hx(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ZP={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},yk=t=>(...e)=>({_$litDirective$:t,values:e});let vk=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vU=yk(class extends vk{constructor(t){var e;if(super(t),t.type!==ZP.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(e)}const i=t.element.classList;for(const s of this.st)s in e||(i.remove(s),this.st.delete(s));for(const s in e){const o=!!e[s];o===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(o?(i.add(s),this.st.add(s)):(i.remove(s),this.st.delete(s)))}return Qu}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bU="important",eie=" !"+bU,tie=yk(class extends vk{constructor(t){var e;if(super(t),t.type!==ZP.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(eie);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?bU:""):i[r]=n}}return Qu}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:iie}=Rte,rie=t=>t.strings===void 0,qN=()=>document.createComment(""),KNe=(t,e,i)=>{var s;const r=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(i===void 0){const o=r.insertBefore(qN(),n),a=r.insertBefore(qN(),n);i=new iie(o,a,t,t.options)}else{const o=i._$AB.nextSibling,a=i._$AM,c=a!==t;if(c){let d;(s=i._$AQ)==null||s.call(i,t),i._$AM=t,i._$AP!==void 0&&(d=t._$AU)!==a._$AU&&i._$AP(d)}if(o!==n||c){let d=i._$AA;for(;d!==o;){const h=d.nextSibling;r.insertBefore(d,n),d=h}}}return i},QNe=(t,e,i=t)=>(t._$AI(e,i),t),nie={},sie=(t,e=nie)=>t._$AH=e,XNe=t=>t._$AH,e5e=t=>{t._$AR(),t._$AA.remove()};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rb=(t,e)=>{var r;const i=t._$AN;if(i===void 0)return!1;for(const n of i)(r=n._$AO)==null||r.call(n,e,!1),rb(n,e);return!0},KS=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while((i==null?void 0:i.size)===0)},wU=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),lie(e)}};function oie(t){this._$AN!==void 0?(KS(this),this._$AM=t,wU(this)):this._$AM=t}function aie(t,e=!1,i=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)rb(r[s],!1),KS(r[s]);else r!=null&&(rb(r,!1),KS(r));else rb(this,t)}const lie=t=>{t.type==ZP.CHILD&&(t._$AP??(t._$AP=aie),t._$AQ??(t._$AQ=oie))};let cie=class extends vk{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),wU(this),this.isConnected=e._$AU}_$AO(e,i=!0){var r,n;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(n=this.disconnected)==null||n.call(this)),i&&(rb(this,e),KS(this))}setValue(e){if(rie(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ks=()=>new uie;let uie=class{};const pE=new WeakMap,Bt=yk(class extends cie{render(t){return Je}update(t,[e]){var r;const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),Je}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=pE.get(e);i===void 0&&(i=new WeakMap,pE.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=pE.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var oc,Do,bg,B8;let die=(B8=class extends Vte{constructor(i){super(i);Le(this,oc);Le(this,Do);Le(this,bg);this.destroyed=!1,this.R=!1,this.V=Je,this.T=[],ke(this,bg,new WeakMap),ke(this,Do,i),this.exports=void 0,this.hasDestroy=wM in i&&typeof i.destroy=="function",ju.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${wM} prop.`)}G(this,oc)!==void 0&&clearTimeout(G(this,oc)),gk();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():di(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():di(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):di(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):di(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),Mm(i)}async destroy(){if(!this.destroyed){G(this,Do).el.isConnected&&(this.hasDestroy=!1,G(this,Do).el.remove()),ke(this,oc,void 0),this.destroyed=!0;for(const i of G(this,Do).M)"triggerDestroy"in i?i.triggerDestroy():di(i.hostDestroy,i);G(this,Do).M.splice(0)}}U(){G(this,oc)!==void 0&&clearTimeout(G(this,oc)),!G(this,Do).el.isConnected&&!G(this,Do).autoDestroyDisabled&&ke(this,oc,Fte(()=>void G(this,Do).destroy(),pie))}S(i,r){const n=this.T;this.V=Je,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&G(this,bg).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return G(this,bg).get(i)}},oc=new WeakMap,Do=new WeakMap,bg=new WeakMap,B8),pie=1e3;const wM="autoDestroyDisabled";var Pp,Ow,Pw,Rp,Ra,Iy,_U,xU,Zu;let vi=(Zu=class extends ju{constructor(){super();Le(this,Iy);Le(this,Pp);Le(this,Ow);Le(this,Pw);Le(this,Rp);Le(this,Ra);this.M=[],this.manager=new die(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=Zu.prototype.shouldUpdate;ke(i,Rp,(n==null?void 0:n.H)??new Gb),i.I=(n==null?void 0:n.I)??new Gb,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,ke(i,Pw,i.enableUpdating),i.enableUpdating=yU,i.shouldUpdate!==o&&(ke(i,Ow,i.shouldUpdate),i.shouldUpdate=o),s&&(ke(i,Pp,new Map),r.elementProperties.forEach((a,c)=>G(i,Pp).set(c,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===UN;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??fk,a={attribute:n&Bte&&typeof i=="string"?Ute(i):!1,reflect:!!(n&Gte),type:n&Hte?Boolean:n&Wte?Number:void 0,state:!!(n&Zte),readOnly:!!(n&Jte),noAccessor:!!(n&Yte),c:!1,...s,hasChanged(c,d){const h=o(c,d);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,c;return(a=s.t)==null||a.call(s,G(this,Pp).get(i)),(c=o.get)==null?void 0:c.call(this)},set(a){var d,h;const c=this.manager;if(n.readOnly&&!gM&&(c.R||c.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((h=(d=G(this,Pp))==null?void 0:d.get(i))==null||h.notify()),c.T.length>0&&(gk(),c==null||c.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());ke(this,Ra,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>nr(this,Iy,xU).call(this).catch(o=>{G(this,Rp).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=G(this,Ra))==null||i.destroy(),ke(this,Ra,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===UN?this.el:this.el.attachShadow(n));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(c=>"styleSheet"in c?c.styleSheet:c)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=G(this,Ow))==null?void 0:r.call(this,i))??!0}update(i){G(this,Ra)?nr(this,Iy,_U).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await G(this,Rp).promise,this}addController(i){var r;this.M.push(i),!(jP in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}},Pp=new WeakMap,Ow=new WeakMap,Pw=new WeakMap,Rp=new WeakMap,Ra=new WeakMap,Iy=new WeakSet,_U=function(i){try{G(this,Ra).clear(),this.constructor.K.r(G(this,Ra),()=>aE(Zu.prototype,this,"update").call(this,i))}catch(r){throw G(this,Ra).clear(),r}},xU=async function(){var s,o;const i=this.el.G??gU(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(mM(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(wM)&&this.manager.U()),G(this,Pw).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var c;return!((c=a.manager)!=null&&c.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():di(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),G(this,Rp).resolve()},Zu.lumina=!0,Zu);const hie=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},se=t=>typeof t=="object"&&t!=null?vU(t):t,fx=t=>typeof t=="object"&&t!=null?tie(t):t,Mt=Je;function bk(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const My={toAttribute:t=>t===!0?"":t===!1?null:t},SU="calcite-mode-auto",$U="calcite-mode-dark",fie="calcite-mode-light",Nd={autoMode:SU,darkMode:$U,lightMode:fie,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},TU={filter:250,nextTick:0,resize:150,reposition:100},mie=10,gie=25;function BN(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains($U)||t.contains(SU)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const gc=globalThis.calciteConfig,yie=(gc==null?void 0:gc.focusTrapStack)||[],vie=(gc==null?void 0:gc.logLevel)||"info",GN="3.3.3",bie="2025-10-08",wie="7391af08e";function _ie(){if(gc&&gc.version)return;console.info(`Using Calcite Components ${GN} [Date: ${bie}, Revision: ${wie}]`);const t=gc||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:GN,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?BN():document.addEventListener("DOMContentLoaded",BN,{once:!0});queueMicrotask(_ie);const xie=hie({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:bi,getAssetPath:kU,setAssetPath:Sie}=xie;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */let IU=!1;const EU=t=>{IU=!0,Sie(t)};function l(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s}function n5e(t,e){return function(i,r){e(i,r,t)}}function s5e(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(f){o(f)}}function c(h){try{d(r.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):n(h.value).then(a,c)}d((r=r.apply(t,e||[])).next())})}function $ie(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:i})}else i&&t.stack.push({async:!0});return e}var Tie=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function kie(t){function e(s){t.error=t.hasError?new Tie(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,r=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(s).then(n,function(o){return e(o),n()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}const En=globalThis;var G8;const Sp={...(G8=En.esriConfig)==null?void 0:G8.has};function B(t){return typeof Sp[t]=="function"?Sp[t]=Sp[t](En):Sp[t]}B.add=(t,e,i,r)=>{(r||Sp[t]===void 0)&&(Sp[t]=e),i&&B(t)},B.cache=Sp,B.add("big-integer-warning-enabled",!0),B.add("esri-deprecation-warnings",!0),B.add("esri-tests-disable-screenshots",!1),B.add("esri-tests-use-full-window",!1),B.add("esri-tests-post-to-influx",!0),B.add("esri-cim-animations-enable-status","enabled"),B.add("esri-cim-animations-spotlight",!1),B.add("esri-cim-animations-freeze-time",!1),(()=>{var e;B.add("host-webworker",En.WorkerGlobalScope!==void 0&&self instanceof En.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(B.add("host-browser",t),B.add("host-node",!(typeof En.process!="object"||!((e=En.process.versions)!=null&&e.node)||!En.process.versions.v8)),B.add("dom",t),B("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(B.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),B.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),B.add("khtml",n.includes("Konqueror")?s:void 0),B.add("edge",parseFloat(r.split("Edge/")[1])||void 0),B.add("opr",parseFloat(r.split("OPR/")[1])||void 0),B.add("webkit",!B("wp")&&!B("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),B.add("chrome",!B("edge")&&!B("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),B.add("android",!B("wp")&&parseFloat(r.split("Android ")[1])||void 0),B.add("safari",!n.includes("Safari")||B("wp")||B("chrome")||B("android")||B("edge")||B("opr")?void 0:parseFloat(n.split("Version/")[1])),B.add("mac",n.includes("Macintosh")),!B("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",c=parseFloat(a.replace(/_/,".").replaceAll("_",""));B.add(o,c),B.add("ios",c)}B("webkit")||(!r.includes("Gecko")||B("wp")||B("khtml")||B("edge")||B.add("mozilla",s),B("mozilla")&&B.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(En.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&B.add("esri-mobile",e),i&&B.add("esri-iPhone",i),B.add("esri-geolocation",!!navigator.geolocation)}B.add("esri-wasm","WebAssembly"in En),B.add("esri-performance-mode-frames-between-render",20),B.add("esri-force-performance-mode",!1),B.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in En,e=En.crossOriginIsolated===!1;return t&&!e}),B.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),B.add("esri-atomics","Atomics"in En),B.add("esri-workers","Worker"in En),B.add("web-feat:cache","caches"in En),B.add("esri-workers-arraybuffer-transfer",!B("safari")||Number(B("safari"))>=12),B.add("workers-pool-size",8),B.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),B.add("featurelayer-simplify-payload-size-factors",[1,1,4]),B.add("featurelayer-fast-triangulation-enabled",!0),B.add("featurelayer-animation-enabled",!0),B.add("featurelayer-snapshot-enabled",!0),B.add("featurelayer-snapshot-initial-tolerance",0),B.add("featurelayer-snapshot-point-min-threshold",8e4),B.add("featurelayer-snapshot-point-max-threshold",4e5),B.add("featurelayer-snapshot-multipoint-min-threshold",2e4),B.add("featurelayer-snapshot-multipoint-max-threshold",1e5),B.add("featurelayer-snapshot-polygon-min-threshold",2e3),B.add("featurelayer-snapshot-polygon-max-threshold",2e3),B.add("featurelayer-snapshot-polyline-min-threshold",2e3),B.add("featurelayer-snapshot-polyline-max-threshold",2e3),B.add("featurelayer-snapshot-max-vertex-count",25e4),B.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),B.add("featurelayer-snapshot-concurrency",4),B.add("featurelayer-snapshot-coverage",.1),B.add("featurelayer-query-max-depth",4),B.add("featurelayer-query-pausing-enabled",!1),B.add("featurelayer-query-tile-concurrency",4),B.add("featurelayer-query-tile-max-features",6e5),B.add("featurelayer-advanced-symbols",!1),B.add("featurelayer-pbf",!0),B.add("featurelayer-pbf-statistics",!1),B.add("feature-layers-workers",!0),B.add("feature-polyline-generalization-factor",1),B.add("parquetlayer-full-query-feature-count",2e4),B.add("parquetlayer-hittest-max-feature-count",1),B.add("parquetlayer-persistence-enabled",!1),B.add("mapview-transitions-duration",200),B.add("mapview-essential-goto-duration",200),B.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),B.add("mapserver-pbf-version-support",10.81),B.add("mapservice-popup-identify-max-tolerance",20),B.add("request-queue-concurrency-global",50),B.add("request-queue-concurrency-hosted",16),B.add("request-queue-concurrency-non-hosted",4),B.add("curve-densification-coarse-segments",128),B.add("curve-densification-max-segments",2e3),B.add("curve-densification-min-segments",3),B.add("curve-densification-pixel-deviation",.5),B.add("view-readyState-waiting-delay",1e3),B.add("gradient-depth-bias",.01),B.add("gradient-depth-epsilon",1e-8),B.add("enable-feature:esri-compress-textures",!0),B.add("enable-feature:basemap-groundlayers",!0),B.add("enable-feature:oit-ground",!1),!B("host-webworker")&&B("host-browser")&&(B.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),B.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function o5e(t){}function a5e(t){}function Iie(t){return()=>t}function l5e(t){return t}var Nn;let Eie=(Nn=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Nn._m}getInt(){return this._seed=(Nn._a*this._seed+Nn._c)%Nn._m,this._seed}getFloat(){return this.getInt()/(Nn._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Nn._m*r}},Nn._m=2147483647,Nn._a=48271,Nn._c=0,Nn);const Mie=1.5,c5e=1/Mie,u5e=.5;function MU(t){return t}function Aie(t,e=MU){if(!t||t.length===0)return;let i=t[0],r=e(i);for(let n=1;n<t.length;++n){const s=t[n],o=Number(e(s));o>r&&(r=o,i=s)}return i}function d5e(t,e=MU){return Aie(t,i=>-e(i))}function Cie(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function Oie(t,e,i,r,n,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),n=Math.max(0,n),i=Math.max(0,i<0?((t==null?void 0:t.length)??0)+i:i),s=Math.max(0,s<0?((r==null?void 0:r.length)??0)+s:s);const a=i-e;if(t==null||r==null||a!==s-n)return!1;if(o){for(let c=0;c<a;c++)if(!o(t[e+c],r[n+c]))return!1}else for(let c=0;c<a;c++)if(t[e+c]!==r[n+c])return!1;return!0}function Uw(t,e,i){return Oie(t,0,(t==null?void 0:t.length)??0,e,0,(e==null?void 0:e.length)??0,i)}function p5e(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}function HN(t,e,i){let r,n;return i?(r=e.filter(s=>!t.some(o=>i(o,s))),n=t.filter(s=>!e.some(o=>i(o,s)))):(r=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:r,removed:n}}function h5e(t){return t&&typeof t.length=="number"}function f5e(t,e){const i=t.length;if(i===0)return[];const r=[];for(let n=0;n<i;n+=e)r.push(t.slice(n,n+e));return r}let AU=class{constructor(){this.last=0}};const CU=new AU;function _M(t,e,i,r){r=r||CU;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function xM(t,e,i,r){const n=t.length,s=_M(t,e,n,r);if(s!==-1)return t[s]=t[n-1],t.pop(),e}const ho=new Set;function Pie(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;ho.clear();for(let a=0;a<r;++a)ho.add(e[a]);n=n||CU;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(ho.has(t[a])&&(s==null||s.push(t[a]),ho.delete(t[a]),t[a]=t[i-1],--i,--a,ho.size===0||i===0))return ho.clear(),i;for(let a=0;a<o;++a)if(ho.has(t[a])&&(s==null||s.push(t[a]),ho.delete(t[a]),t[a]=t[i-1],--i,--a,ho.size===0||i===0))return ho.clear(),i;return ho.clear(),i}function Rie(t,e){let i=0;for(let r=0;r<t.length;++r){const n=t[r];e(n,r)&&(t[i]=n,i++)}return t.length=i,t}function g5e(t,e,i){const r=t.length;if(e>=r)return t.slice();const n=OU(i),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(n()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function OU(t){return t?(WN.seed=t,()=>WN.getFloat()):Math.random}const WN=new Eie;function y5e(t,e){if(!t)return t;const i=OU(e);for(let r=t.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),s=t[r];t[r]=t[n],t[n]=s}return t}function JP(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function _r(t,e){return t!=null}function YP(t){return Array.isArray(t)}const v5e=[];function b5e(t){return t instanceof ArrayBuffer}function KP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function PU(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function RU(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function QP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function LU(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function XP(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function FU(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function Lie(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float16Array"}function wk(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function _k(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function Fie(t){return"buffer"in t}const NU=1024;function w5e(t){return _k(t)||wk(t)||XP(t)||QP(t)||KP(t)}function _5e(t){return _k(t)||wk(t)}function x5e(t){return _k(t)?179769e303:Lie(t)?65504:wk(t)?3402823e32:FU(t)?4294967295:LU(t)?65535:PU(t)||RU(t)?255:XP(t)?2147483647:QP(t)?32767:KP(t)?127:256}const S5e=-32768,$5e=-2147483648;function T5e(t){return t}function Nie(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function V(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=jU(t);if(e!=null)return e;if(nb(t))return t.clone();if(DU(t))return t.map(V);if(zU(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=V(t[r]);return i}function SM(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const i=jU(t);if(i!=null)return i;if(DU(t)){let n=!0;const s=t.map(o=>{const a=SM(o,e);return o!=null&&a==null&&(n=!1),a});return n?s:null}if(nb(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(zU(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],o=SM(s);if(s!=null&&o==null)return null;r[n]=o}return r}function nb(t){return typeof t.clone=="function"}function DU(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function zU(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function ZN(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function jU(t){if(KP(t)||PU(t)||RU(t)||QP(t)||LU(t)||XP(t)||FU(t)||wk(t)||_k(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,V(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(V(i));return e}return null}function eR(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function VU(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&Uw(t,e):t instanceof Set?e instanceof Set&&zie(t,e):t instanceof Map?e instanceof Map&&jie(t,e):!!ZN(t)&&ZN(e)&&Die(t,e))}function Die(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function zie(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function jie(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function tR(t,e,i=!1){return qU(t,e,i)}function qw(t,e){if(e!=null)return e[t]||UU(t.split("."),!1,e)}function Ai(t,e,i){const r=t.split("."),n=r.pop(),s=UU(r,!0,i);s&&n&&(s[n]=e)}function JN(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(JN(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(JN(t[i],e[i]))return!0;return!1}return t!==e}function UU(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function qU(t,e,i){return e?Object.keys(e).reduce((r,n)=>{if(n==="__proto__")return r;let s=r[n],o=e[n];return s===o?r:s===void 0?(r[n]=V(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.slice():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):r[n]=o.slice())):o&&typeof o=="object"?r[n]=qU(s,o,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=o),r)},t||{}):t}function k5e(t,e){for(const i of Object.entries(t))if(e===i[1])return i[0]}function xk(t,e){return Object.values(t).includes(e)}var H8;const Qe={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:(H8=globalThis.location)==null?void 0:H8.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(tR(Qe,globalThis.esriConfig,!0),delete Qe.has),!Qe.assetsPath){{const t="5.0.0-next.43";Qe.assetsPath=`https://cdn.jsdelivr.net/npm/@arcgis/core@${t}/assets`}Qe.defaultAssetsPath=Qe.assetsPath}const YN=new WeakMap;function Vie(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let n=YN.get(t);n||(n=new Set,YN.set(t,n)),n.has(e)||(n.add(e),t.warn(r))}const QS="https://www.esriurl.com/";function Uie(t,e,i,r={}){B("esri-deprecation-warnings")&&_c(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${QS}${i}/`,`Esri's move to web components: ${QS}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function qie(t,e,i,r={}){B("esri-deprecation-warnings")&&_c(t,`This class is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${QS}${i}/`,`Esri's move to web components: ${QS}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function I5e(t,e,i={}){B("esri-deprecation-warnings")&&_c(t,`Module: ${e}`,i)}function BU(t,e,i={}){if(B("esri-deprecation-warnings")){const{moduleName:r}=i;_c(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function XS(t,e,i={}){if(B("esri-deprecation-warnings")){const{moduleName:r}=i;_c(t,`Property: ${(r?r+"::":"")+e}`,i)}}function Bie(t,e,i={}){B("esri-deprecation-warnings")&&_c(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function _c(t,e,i={}){if(B("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),n&&(a+=`
	 Version: ${n}`),s)if(Array.isArray(s)){a+=`
	 See for more details:`;for(const c of s)a+=`
		${c}`}else a+=`
	 See ${s} for more details.`;Vie(t,a,o)}}function E5e(t){const e=[];return function*(){yield*e;let i,r=e.length;for(;!(i=t.next()).done;)for(e.push(i.value),yield i.value;++r<e.length;)yield e[r]}}const KN=Object.freeze({done:!0,value:void 0});function M5e(t){const e=[];let i=null,r=null,n=!1;async function s(){if(n)return KN;if(r!=null)return r;r=t.next();try{const o=await r;return r=null,o.done?(n=!0,KN):(e.push(o.value),o)}catch(o){throw n=!0,r=null,i=o,o}}return async function*(){yield*e;let o,a=e.length;for(;!(o=await s()).done;)for(yield o.value;++a<e.length;)yield e[a];if(i!=null)throw i}}function Gie(t,e){for(const i of t)if(i!=null&&e(i))return i}function e$(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let Ay=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(e$(e)){const r=this._getOrCreateGroup(i);for(const n of e)XN(n)&&r.push(n)}else XN(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(W1(e))}remove(e){if(typeof e!="string"&&e$(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(QN(this._getGroup(e)),this._groups.delete(W1(e)),this):this}removeAll(){return this._groups.forEach(QN),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(W1(e),i),i}_getGroup(e){return this._groups.get(W1(e))}};function W1(t){return t||"_default_"}function QN(t){for(const e of t)e instanceof Ay?e.removeAll():e.remove()}function XN(t){return t!=null&&(!!t.remove||t instanceof Ay)}const Hie=/\{([^}]+)\}/g;function e5(t){return t??""}function ld(t,e){return e?t.replaceAll(Hie,typeof e=="object"?(i,r)=>e5(qw(r,e)):(i,r)=>e5(e(r))):t}function C5e(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function GU(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let t5;function O5e(t){return t5??(t5=new DOMParser),t5.parseFromString(t||"","text/html").body.innerText||""}function P5e(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function R5e(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const i5={info:0,warn:1,error:2,none:3};var Fi;let ie=(Fi=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,Fi._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Fi.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,Fi._loggers.get(e)||new Fi({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!Fi._throttlingDisabled){const n=Zie(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=Fi._tickCounter)return;this._loggedMessages[e].set(n,Fi._tickCounter),Fi._scheduleTickCounterIncrement()}for(const n of Qe.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",Wie)}_matchLevel(e){const i=Qe.log.level||"warn";return i5[this._parentWithMember("level",i)]<=i5[e]}static _scheduleTickCounterIncrement(){Fi._tickCounterScheduled||(Fi._tickCounterScheduled=!0,Promise.resolve().then(()=>{Fi._tickCounter++,Fi._tickCounterScheduled=!1}))}},Fi._loggers=new Map,Fi._tickCounter=0,Fi._tickCounterScheduled=!1,Fi._throttlingDisabled=!1,Fi);function Wie(t,e,...i){console[t](`[${e}]`,...i)}function Zie(...t){return GU(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function HU(t,e){if(t==null)throw new Error(e??"value is None")}function Ot(t){return t==null||t.destroy(),null}function L5e(t){return t==null||t.dispose(),null}function Gt(t){return t==null||t.remove(),null}function ch(t){return t==null||t.abort(),null}function F5e(t){return t==null||t.release(),null}function Jie(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function Yie(t,e){let i;return t.some((r,n)=>(i=e(r,n),i!=null)),i??void 0}const WU=Symbol("Accessor-beforeDestroy"),Kie={remove:()=>{}};function ct(t){return t?{remove(){t&&(t(),t=void 0)}}:Kie}function ZU(t){t.forEach(e=>e==null?void 0:e.remove())}function N5e(t){ZU(t),t.length=0}function Mh(t){return ct(()=>ZU(t))}function D5e(t){return ct(()=>{var e;return(e=t())==null?void 0:e.remove()})}function Qie(t){return ct(()=>t==null?void 0:t.abort())}function z5e(t){return ct(t!=null?()=>t.destroy():void 0)}function Xie(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function j5e(t){Xie(t)&&t.remove()}function V5e(t){return{[Symbol.dispose](){t.remove()}}}function mn(t){return t.__accessor__??null}function ere(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function mx(t,e,i){return i?t$(t,e,{policy:i,path:""}):t$(t,e,null)}function t$(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const s=n;if(s==="__proto__")return r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=V(e[s]),r;let c=r[s],d=e[s];if(c===d)return r;if(Array.isArray(d)||Array.isArray(r))c=c?Array.isArray(c)?r[s]=c.slice():r[s]=[c]:r[s]=[],d&&(Array.isArray(d)||(d=[d]),d.forEach(h=>{c.includes(h)||c.push(h)}));else if(d&&typeof d=="object")if(i){const h=i.path;i.path=o,r[s]=t$(c,d,i),i.path=h}else r[s]=t$(c,d,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=d);return r},t||{}):t}function JU(t){return Array.isArray(t)?t:t.split(".")}function r5(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function tre(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...r5(i));return e}return r5(t)}function YU(t,e,i,r){const n=tre(e);if(n.length!==1){const s=n.map(o=>r(t,o,i));return Mh(s)}return r(t,n[0],i)}function KU(t,e){const i=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=mn(e);return ere(r,i)?r.get(i):e[i]}function QU(t,e,i){if(t==null)return t;const r=KU(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:QU(r,e,i+1)}function Bw(t,e,i=0){return typeof e!="string"||e.includes(".")?QU(t,JU(e),i):KU(e,t)}function un(t,e){return Bw(t,e)}function n5(t,e){return Bw(e,t)!==void 0}const ys={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function Cy(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=V(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function Gw(t,e){const i=Cy(t);let r=i[e];return r||(r=i[e]={}),r}function ire(t,e){return mx(t,e,nre)}const rre=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function nre(t){return rre.test(t)?"replace":"merge"}function sre(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function ore(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}var Ju;let Oy=(Ju=class{constructor(e,i,r,n=1,s=0){this._creator=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=this._creator();this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(Ju.test.disabled)i=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=this._creator()}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):ore(i)&&i.acquire(...e),i}release(e){e&&!Ju.test.disabled&&(this._releaseFunction?this._releaseFunction(e):sre(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Ju.test={disabled:!!B("esri-tests-disable-memory-pools")},Ju),are=class{constructor(e,i){this._observers=e,this._observer=i}remove(){JP(this._observers,this._observer)}},XU=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return lre;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new are(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const lre=ct(),At={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let Sk=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const i$=new Sk,tv=[];let sb=i$;function Ve(t){sb.onAccessed(t)}let gx=!1,yx=!1;function Ya(t,e,i){if(gx)return iR(t,e,i);let r=null;return e9(t),r=e.call(i),t9(),r}function cre(t,e){return Ya(i$,t,e)}function iR(t,e,i){const r=gx;gx=!0,e9(t);let n=null;try{n=e.call(i)}catch(s){yx&&ie.getLogger("esri.core.accessorSupport.tracking").error(s)}return t9(),gx=r,n}function e9(t){sb=t,tv.push(t)}function t9(){const t=tv.length;if(t>1){const e=tv.pop();sb=tv[t-2],e.onTrackingEnd()}else if(t===1){const e=tv.pop();sb=i$,e.onTrackingEnd()}else sb=i$}function i9(t,e){if(e.flags&At.DepTrackingInitialized)return;e.flags|=At.DepTrackingInitialized;const i=yx;yx=!1,e.flags&At.AutoTracked?iR(e.trackingTarget,e.metadata.get,t):r9(t,e),yx=i}const ure=[];function r9(t,e){e.flags&At.ExplicitlyTracking||(e.flags|=At.ExplicitlyTracking,iR(e.trackingTarget,()=>{const i=e.metadata.dependsOn||ure;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=JU(r);for(let s=0,o=t;s<n.length&&o!=null&&typeof o=="object";++s)o=s5(o,n[s],s!==n.length-1)}else s5(t,r,!1)}),e.flags&=~At.ExplicitlyTracking)}function s5(t,e,i){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=mn(t);if(n){const s=n.propertiesByName.get(r);s&&(Ve(s),i9(t,s))}return i?t[r]:void 0}let o5=class extends XU{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new Sk(this),this.flags=0,this.flags=At.Dirty|(i.nonNullable?At.NonNullable:0)|(i.hasOwnProperty("value")?At.HasDefaultValue:0)|(i.get===void 0?At.DepTrackingInitialized:0)|(i.dependsOn===void 0?At.AutoTracked:0)}destroy(){this.flags&At.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&Ve(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&At.Computing||~n&At.Dirty&&i.has(r))return s;this.flags|=At.Computing;const o=e.host;let a;n&At.AutoTracked?a=Ya(this.trackingTarget,this.metadata.get,o):(r9(o,this),a=this.metadata.get.call(o)),this.flags|=At.DepTrackingInitialized,i.set(r,a,1);const c=i.get(r);return c===s?this.flags&=~At.Dirty:cre(this.commit,this),this.flags&=~At.Computing,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~At.Dirty,this.onCommitted()}onInvalidated(){~this.flags&At.Overridden&&(this.flags|=At.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}};const $M=8;function pc(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function Hb(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function dre(t){return Hb(t)}let pre=class n9{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new n9;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,V(r))}),i}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function Qh(t,e,i){return t!==void 0}function a5(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&At.NonNullable)||(r.lifecycle,!1))}let hre=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=ys.INITIALIZING,this.store=new pre,this.mutable=!0,this._origin=7;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new o5(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=ys.CONSTRUCTING}constructed(){this.lifecycle=ys.CONSTRUCTED}destroy(){this.lifecycle=ys.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==ys.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!Qh(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&Ve(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&At.HasDefaultValue)return"defaults"}return Hb(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(Qh(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);Qh(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!Qh(n))return"";const s=new Sk,o=Ya(s,()=>{var d;return(d=n.metadata.get)==null?void 0:d.call(e)});let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const c=s.accessed??new Set;if(c.size===0)return a;r+="  ";for(const d of c)d instanceof o5&&(a+=`${r}${d.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(Qh(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&At.Overridden)}clearOrigin(e,i){const r=this.store,n=this.propertiesByName.get(e);if(!Qh(n))return;const s=r.isAtOrigin(e,i)&&!(n.flags&At.Overridden);r.delete(e,i),s&&n.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&At.Overridden&&(i.flags&=~At.Overridden,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!a5(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(hE.release(s),!o)return;i=a}r.flags|=At.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!a5(r,e,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:c}=o;if(hE.release(o),!a)return;i=c}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=pc(e)}getDefaultOrigin(){return Hb(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==ys.INITIALIZING?this._origin:0;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;if(n.isAtOrigin(s,r)&&eR(i,n.get(s))&&~e.flags&At.Overridden)return;const o=n.isBelowOrigin(s,r)||n.isAtOrigin(s,r);o&&e.invalidate(),n.set(s,i,r),o&&e.commit(),i9(this.host,e)}_cast(e,i){const r=hE.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},fre=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const hE=new Oy(()=>new fre);function mre(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(qw(r,e)??"").toString())}let s9=class{constructor(e,i,r){this.name=e,this.details=r,this.message=(i&&mre(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},j=class o9 extends s9{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return V(i)}catch{return"[object]"}}))}}catch(e){throw ie.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new o9(e.name,e.message,e.details)}};j.prototype.type="error";function r$(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))r$(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void r$(un(t,n),s,i)}const r=t.__accessor__;r!=null&&gre(e,r),t[e]=i}}function gre(t,e){if(B("esri-unknown-property-errors")&&!yre(t,e))throw new j("set:unknown-property",vre(t,e))}function yre(t,e){return e.metadata[t]!=null}function vre(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let bre;function wre(){return bre}function _re(t){t.length=0}let sn=class{constructor(e=50,i=50){this._pool=new Oy(()=>[],void 0,_re,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return fE.acquire()}static release(e){return fE.release(e)}static prune(){fE.prune()}};const fE=new sn(100);let a9=class extends Oy{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const Z1=[];function n$(t){Z1.push(t),Z1.length===1&&queueMicrotask(()=>{const e=Z1.slice();Z1.length=0;for(const i of e)i()})}function s$(t,e,i,r,n){console.timeStamp(t,e,i,n,r)}let ob=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const o$=(t,e,i,r)=>{let n=e,s=e;const o=i>>>1,a=t[n-1];for(;s<=o;){s=n<<1,s<i&&r(t[s-1],t[s])<0&&++s;const c=t[s-1];if(r(c,a)<=0)break;t[n-1]=c,n=s}t[n-1]=a},l9=(t,e)=>t<e?-1:t>e?1:0;function xre(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=l9);for(let s=i>>>1;s>e;s--)o$(t,s,i,r);const n=e+1;for(let s=i-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,o$(t,n,s,r)}}function*Sre(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=l9);for(let s=i>>>1;s>e;s--)o$(t,s,i,r),yield;const n=e+1;for(let s=i-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,o$(t,n,s,r),yield}}const $re=1.5,Tre=1.1;let c9=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new AU,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>l5(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}pushAll(e){for(const i of e)this.data[this._length++]=i}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,l5(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=_M(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(_M(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=Pie(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){xre(this.data,0,this.length,e)}iterableSort(e){return Sre(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)if(e.call(i,r[s]))return r[s]}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function l5(t){t.data.length>$re*t.length&&(t.data.length=Math.floor(t.length*Tre))}function kre(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return ct(()=>t.clearTimeout(r))}}}const Py=kre(globalThis);function $k(t){return Ire(t)||u9(t)}function Ire(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function u9(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function Ry(t,e,i){if(!$k(t))throw new TypeError("target is not a Evented or EventTarget object");return u9(t)?Ere(t,e,i):t.on(e,i)}function Ere(t,e,i,r){if(Array.isArray(e)){const n=e.slice();for(const s of n)t.addEventListener(s,i,r);return ct(()=>{for(const s of n)t.removeEventListener(s,i,r)})}return t.addEventListener(e,i,r),ct(()=>t.removeEventListener(e,i,r))}function d9(t,e,i){if(!$k(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=Ry(t,e,n=>{r.remove(),i.call(t,n)});return r}function gt(t="Aborted"){return new j("AbortError",t)}function Lt(t,e="Aborted"){if(Ur(t))throw gt(e)}function Hw(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function Ur(t){const e=Hw(t);return e!=null&&e.aborted}function Ho(t){if(hr(t))throw t}function c5(t){if(!hr(t))throw t}function io(t,e){const i=Hw(t);if(i!=null){if(!i.aborted)return d9(i,"abort",()=>e());e()}}function rR(t,e){const i=Hw(t);if(i!=null)return Lt(i),d9(i,"abort",()=>e(gt()))}function p9(t,e){return Hw(e)==null?t:new Promise((i,r)=>{let n=io(e,()=>r(gt()));const s=()=>{n=Gt(n)};t.then(s,s),t.then(i,r)})}function hr(t){return(t==null?void 0:t.name)==="AbortError"}async function Wb(t){try{return await t}catch(e){if(!hr(e))throw e;return}}async function nR(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),n=await nR(r),s={};return i.map((o,a)=>s[o]=n[a]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function Mre(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function X5e(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function h9(t,e=void 0,i){const r=new AbortController;return io(i,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(e)},t);io(r,()=>{o&&(clearTimeout(o),s(gt()))})})}function eDe(t,e,i,r){const n=i&&"abort"in i?i:null;r!=null||n||(r=i);let s=setTimeout(()=>{s=0,n==null||n.abort()},e);const o=()=>r||new j("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(s===0)throw o();return clearTimeout(s),a},a=>{throw clearTimeout(s),s===0?o():a})}function Are(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return io(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function qr(t){return t&&typeof t.then=="function"}function TM(t){return qr(t)?t:Promise.resolve(t)}function Tk(t,e=-1){let i,r,n,s,o=null;const a=(...c)=>{if(i){r=c,s&&s.reject(gt()),s=Gn();const m=s.promise;if(o){const v=o;o=null,v.abort()}return m}if(n=s||Gn(),s=null,e>0){const m=new AbortController;i=TM(t(...c,m.signal));const v=i;h9(e).then(()=>{i===v&&(s?m.abort():o=m)})}else i=1,i=TM(t(...c));const d=()=>{const m=r;r=n=i=o=null,m!=null&&a(...m)},h=i,f=n;return h.then(d,d),h.then(f.resolve,f.reject),f.promise};return a}function Gn(){let t,e;const i=new Promise((n,s)=>{t=n,e=s}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>Py.setTimeout(()=>r.reject(s),n),r.promise=i,r}function tDe(t,e){e.then(t.resolve,t.reject)}async function u5(t){await Promise.resolve(),Lt(t)}function iDe(t){return t}function Cre(t){return 1e3*t}function rDe(t){return t}function nDe(t){return .001*t}let Ore=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Pre=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},kM=0;const T0={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},IM=["prepare","preRender","render","postRender","update","finish"],EM=[],uh=new c9;let Rre=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,f9()}};function Lre(){Vp!=null&&(cancelAnimationFrame(Vp),Vp=requestAnimationFrame(sR))}function f9(){Vp==null&&(kM=performance.now(),Vp=requestAnimationFrame(sR))}const a$={frameTasks:uh,willDispatch:!1,clearFrameTasks:Fre,dispatch:g9,executeFrameTasks:Nre,reschedule:Lre};function Ly(t){const e=new Pre(t);return EM.push(e),a$.willDispatch||(a$.willDispatch=!0,n$(g9)),e}function dh(t){const e=new Ore(t);return uh.push(e),f9(),new Rre(e)}let Vp=null;function Fre(t=!1){uh.forAll(e=>{e.removed=!0}),t&&m9()}function sR(){const t=performance.now();Vp=null,Vp=uh.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(sR):null,a$.executeFrameTasks(t)}function Nre(t){const e=t-kM;kM=t;const i=1e3/60,r=Math.max(0,e-i);T0.time=t,T0.frameDuration=i-r;for(let s=0;s<IM.length;s++){const o=performance.now(),a=IM[s];uh.forAll(d=>{var h;d.paused||d.removed||(s===0&&d.ticks++,d.phases[a]&&(T0.elapsedFrameTime=performance.now()-t,T0.deltaTime=d.ticks===0?0:e,(h=d.phases[a])==null||h.call(d,T0)))});const c=performance.now();Vre[s].push(c-o),s$(a,o,c,"Maps SDK","Scheduling")}m9();const n=performance.now();Ure.push(n-t),s$("Animation Frame",t,n,"Maps SDK","Scheduling")}const J1=new c9;function m9(){uh.forAll(t=>{t.removed&&J1.push(t)}),uh.removeUnorderedMany(J1.data,J1.length),J1.clear()}function g9(){for(;EM.length;){const t=EM.shift();t.isActive&&t.callback()}a$.willDispatch=!1}function Dre(t=1,e){const i=Gn(),r=()=>{Ur(e)?i.reject(gt()):t===0?i():(--t,n$(()=>r()))};return r(),i.promise}function zre(t){return Dre(1,t)}async function jre(t){await zre(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const Vre=IM.map(t=>new ob(t)),Ure=new ob("total");function y9(t,e){for(const i of t.values())if(e(i))return!0;return!1}function l$(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function d5(t,e){return e!=null&&t.add(e),t}function oR(t,e){const i=new Set;return l$(i,t),l$(i,e),i}function qre(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function lDe(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function cDe(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function Bre(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function Gre(t,e){return Bre(oR(t,e),qre(t,e))}let Hre=0;function vx(){return++Hre}let Ww=class extends Sk{constructor(e){super(new Wre(e)),this._observer&&p5.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&p5.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},Wre=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Zre}};const p5=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function Zre(){}let Bm=!1;const c$=[];function v9(t,e){let i=new Ww(s),r=null,n=!1;function s(){if(!i||n)return;if(Bm)return void _9(s);const a=r;i.clear(),Bm=!0,n=!0,r=Ya(i,t),n=!1,Bm=!1,e(r,a),x9()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=Ya(i,t),n=!1,ct(o)}function b9(t,e){let i=new Ww(n),r=null;function n(){e(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=Ya(i,t),r):null}return o(),ct(s)}function w9(t,e){let i=!1,r=!1;const n=!!(e!=null&&e.sync);let s=new Ww(()=>{i||r||(r=!0,n?o():queueMicrotask(o))});function o(){r=!1,s&&!i&&(Bm?_9(o):(s.clear(),Bm=!0,i=!0,Ya(s,t),i=!1,Bm=!1,x9()))}function a(){s&&(s.destroy(),s=null)}return i=!0,Ya(s,t),i=!1,ct(a)}function _9(t){c$.includes(t)||c$.unshift(t)}function x9(){for(;c$.length;)c$.pop()()}var Xp;let aR=(Xp=class{constructor(){this.uid=vx(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(0,e,i,r,n,s,eR)}static acquireTracked(e,i,r,n){return this.pool.acquire(1,e,i,r,null,null,n)}notify(e,i){this.type===0?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,o,a){this.uid=vx(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=vx(),this.removed=!0}},Xp.pool=new a9(()=>new Xp),Xp);const bx=new sn,yc=new Set;let u$;function d$(t){yc.delete(t),yc.add(t),S9()}function S9(){u$||(u$=Ly(Kre))}function Jre(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function Yre(t){for(const e of yc.values())e.target===t&&(e.removed=!0)}function Kre(){let t=10;for(;u$&&t--;){u$=null;const e=Qre(),i=bx.acquire();for(const r of e){const n=r.uid;Jre(r),n===r.uid&&r.removed&&i.push(r)}for(const r of yc)r.removed&&(i.push(r),yc.delete(r));for(const r of i)aR.pool.release(r);bx.release(i),bx.release(e),MM.forEach(r=>r())}}function Qre(){const t=bx.acquire();t.length=yc.size;let e=0;for(const i of yc)t[e]=i,++e;return yc.clear(),t}const MM=new Set;function Xre(t){return MM.add(t),ct(()=>MM.delete(t))}function ene(t,e,i){let r=YU(t,e,i,(n,s,o)=>{let a,c,d=b9(()=>Bw(n,s),(h,f)=>{var m;((m=n.__accessor__)==null?void 0:m.lifecycle)===ys.DESTROYED||a&&a.uid!==c?r.remove():(a||(a=aR.acquireUntracked(h,o,f,n,s),c=a.uid),d$(a))});return ct(()=>{d.remove(),a&&(a.uid!==c||a.removed||(a.removed=!0,d$(a)),a=null),r=d=null})});return r}function tne(t,e,i){const r=YU(t,e,i,(n,s,o)=>{let a=!1;return v9(()=>Bw(n,s),(c,d)=>{n.__accessor__.lifecycle!==ys.DESTROYED?a||(a=!0,eR(d,c)||o.call(n,c,d,s,n),a=!1):r.remove()})});return r}function ine(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==ys.DESTROYED?r?tne(t,e,i):ene(t,e,i):ct()}function rne(t,e,i){let r,n,s=b9(t,(o,a)=>{r&&r.uid!==n?s.remove():(r||(r=aR.acquireTracked(o,e,a,i),n=r.uid),d$(r))});return ct(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,d$(r)),r=null),s=null})}function nne(t,e,i){let r=!1;return v9(t,(n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)})}function sne(t,e,i=!1,r=VU){return i?nne(t,e,r):rne(t,e,r)}function h5(t){return y9(yc,e=>e.oldValue===t)}function one(t,e){for(const i of t.values())if(e(i))return!0;return!1}function pDe(t,e){for(const i of t.values())if(!e(i))return!1;return!0}function hDe(t,e){for(const i of t.values())if(e(i))return i;return null}function Ah(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}function fDe(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Up=()=>ie.getLogger("esri.core.accessorSupport.ensureTypes");function ane(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(Up().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function lne(t){return t==null?t:!!t}function Zw(t){return t==null?t:t.toString()}function on(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function lR(t){return t==null?t:Math.round(parseFloat(t))}function cne(t){return null}function une(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function $9(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function p$(t,e){return e!=null&&t&&!(e instanceof t)}function T9(t){return t&&"isCollection"in t}function f5(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function dne(t,e){if(!(e!=null&&e.constructor)||!T9(e.constructor))return AM(t,e)?e:new t(e);const i=f5(t.prototype.itemType),r=f5(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(AM(t,e),e):new t(e):e}function AM(t,e){return!!$9(e)&&(Up().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+kk(t)+"'"),!0)}function Jw(t,e){return e==null?e:T9(t)?dne(t,e):p$(t,e)?AM(t,e)?e:new t(e):e}function kk(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const pne=new WeakMap;function hne(t){switch(t){case Number:return e=>on(e);case nt:return lR;case Boolean:return lne;case String:return Zw;case Date:return ane;case Fy:return cne;default:return Ah(pne,t,()=>Jw.bind(null,t))}}function gi(t,e){const i=hne(t);return arguments.length===1?i:i(e)}function Zb(t,e,i){return arguments.length===1?Zb.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function fne(t,e){return arguments.length===1?Zb(i=>gi(t,i)):Zb(i=>gi(t,i),e)}function k9(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>k9(t,e-1,r)):t(i)}function h$(t,e,i){if(arguments.length===2)return s=>h$(t,e,s);if(!i)return i;i=k9(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function mne(t,e,i){return arguments.length===2?h$(r=>gi(t,r),e):h$(r=>gi(t,r),e,i)}function I9(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function CM(t,e){if(arguments.length===2)return CM(t).call(null,e);const i=new Set,r=t.filter(a=>typeof a!="function"),n=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,c)=>{if(a==null)return a;const d=typeof a,h=d==="string"||d==="number";return h&&(i.has(a)||n.some(f=>d==="string"&&f===String||d==="number"&&f===Number))||d==="object"&&n.some(f=>!p$(f,a))?a:(h&&r.length?(s||(s=r.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Up().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(f=>kk(f)).join(", ")),Up().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Up().error("Accessor#set",`'${a}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function Ka(t,e){if(arguments.length===2)return Ka(t).call(null,e);const i={},r=[],n=[];for(const c in t.typeMap){const d=t.typeMap[c];i[c]=gi(d),r.push(kk(d)),n.push(c)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof t.key=="string"?c=>c[t.key]:t.key;return c=>{if(t.base&&!p$(t.base,c)||c==null)return c;const d=a(c)||t.defaultKeyValue,h=i[d];if(!h)return Up().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!p$(t.typeMap[d],c))return c;if(typeof t.key=="string"&&!$9(c)){const f={};for(const m in c)m!==t.key&&(f[m]=c[m]);return h(f)}return h(c)}}let nt=class{},Fy=class{};const yDe={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function gne(t){if(!t||typeof t!="object"&&typeof t!="function"||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function E9(t){switch(t.type){case"native":return gi(t.value);case"array":return Zb(E9(t.value));case"one-of":return yne(t);default:return null}}function yne(t){let e=null;return(i,r)=>PM(i,t)?i:(e==null&&(e=OM(t)),Up().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function OM(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case nt:return"integer";case Date:return"date";case Fy:return"null";default:return kk(t.value)}case"array":return`array of ${OM(t.value)}`;case"one-of":{const e=t.values.map(i=>OM(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function PM(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case nt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case Fy:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!PM(i,e.value));case"one-of":return e.values.some(i=>PM(t,i))}}function Me(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=Gw(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&ie.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const c=typeof s=="string"?s:s.source,d=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[c],n.get=function(){let f=un(this,c);if(typeof f=="function"){h||(h=c.split(".").slice(0,-1).join("."));const m=un(this,h);m&&(f=f.bind(m))}return f},n.readOnly||(n.set=d?function(f){this._override(i,f)}:function(f){r$(this,c,f)})}const o=t.type,a=t.types;if(!n.cast){let c;o&&t.useTypeForAutocast!==!1?c=vne(o):a&&(c=Array.isArray(a)?Zb(Ka(a[0])):Ka(a)),t.cast=bne(t.cast,c)}ire(n,t),t.range&&(n.cast=une(n.cast,t.range))}}function cR(t,e,i){const r=Gw(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function vne(t){let e=0,i=t;if(gne(t))return E9(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(I9(r))return e===0?CM(r):h$(CM(r),e);if(e===1)return fne(r);if(e>1)return mne(r,e);const n=t;return n.from?n.from:gi(n)}function bne(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}function wne(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(s=>{e[s]=n}),delete e[r]}}}let Is=class extends s9{constructor(e,i,r){super(e,i,r)}};Is.prototype.type="warning";function M9(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function _ne(t,e){return uR(t,"any",e==null?void 0:e.origin)}function f$(t,e){return uR(t,"read",e==null?void 0:e.origin)}function A9(t,e){return uR(t,"write",e==null?void 0:e.origin)}function uR(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}const RM=()=>ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function m5(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||$ne(t)&&Ai("read.reader",Ny(t),e))}function Ny(t){var i,r;const e=t.ndimArray??0;if(e>1)return Sne(t);if(e===1)return g5(t);if("type"in t&&O9(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,s=g5(typeof n=="function"?{type:n}:{types:n});return(o,a,c)=>{const d=s(o,a,c);return d&&new t.type(d)}}return dR(t)}function dR(t){return"type"in t?xne(t.type):Tne(t.types)}function xne(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void RM().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function C9(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>C9(t,n,i,r-1)):t(e,void 0,i)}function Sne(t){const e=dR(t),i=C9.bind(null,e),r=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let a=r,c=n;for(;a>0&&Array.isArray(c);)a--,c=c[0];if(c!==void 0)for(let d=0;d<a;d++)n=[n];return n}}function g5(t){const e=dR(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const c=e(a,void 0,n);c!==void 0&&o.push(c)}return o}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function O9(t){if(!M9(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?pR(e.Type):P9(e.Type))}function $ne(t){return"types"in t?P9(t.types):pR(t.type)}function pR(t){return!Array.isArray(t)&&!!t&&(typeof t=="object"||typeof t=="function")&&t.prototype&&("read"in t.prototype||"fromJSON"in t||O9(t))}function P9(t){for(const e in t.typeMap)if(!pR(t.typeMap[e]))return!1;return!0}function Tne(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void RM().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=Ine(t));const c=t.key;if(typeof c!="string")return;const d=n[kne(c,e,o)],h=d?e[d]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!h){const m=`Type '${d||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new Is(`${i}:unsupported`,m,{definition:n,context:o})),void RM().error(m)}const f=new h;return f.read(n,o),r?r(f):f}}function kne(t,e,i){var a;const r=Object.values(e)[0],n=Cy(r.prototype)[t],s=f$(n,i),o=(a=s==null?void 0:s.read)==null?void 0:a.source;return o&&typeof o=="string"?o:t}function Ine(t){var i,r;const e={};for(const n in t.typeMap){const s=t.typeMap[n],o=Cy(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;if((i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){e[a.json.type[0]]=s;continue}const c=(r=a.json)==null?void 0:r.write;if(!(c!=null&&c.writer)){e[n]=s;continue}const d=c.target,h=typeof d=="string"?d:t.key,f={};c.writer(n,f,h),f[h]&&(e[f[h]]=s)}return e}function Ene(t){if(t.json||(t.json={}),v5(t.json),b5(t.json),y5(t.json),t.json.origins)for(const e in t.json.origins)v5(t.json.origins[e]),b5(t.json.origins[e]),y5(t.json.origins[e]);return!0}function y5(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function v5(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function b5(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function w5(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&M9(t.type))?e.write.writer=Cne:i>1?e.write.writer=One(i):e.types?Array.isArray(e.types)?e.write.writer=Ane(e.types[0]):e.write.writer=Mne(e.types):e.write.writer=Jb}function Mne(t){return(e,i,r,n)=>e?R9(e,t,n)?Jb(e,i,r,n):void 0:Jb(e,i,r,n)}function R9(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new j(`${r}:unsupported`,n,{definition:t,context:i})),ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function Ane(t){return(e,i,r,n)=>!e||!Array.isArray(e)?Jb(e,i,r,n):Jb(e.filter(s=>R9(s,t,n)),i,r,n)}function Jb(t,e,i,r){Ai(i,m$(t,r),e)}function m$(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?g$(t):t}function g$(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Cne(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>m$(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[m$(t,r)],Ai(i,n,e)}function L9(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>L9(r,e,i-1)):m$(t,e)}function One(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=L9(e,n,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let c=0;c<o;c++)s=[s]}Ai(r,s,i)}}function Pne(t){var i;const e=Rne(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?Lne(n):e;m5(s,n,!1),n.types&&!n.write&&((i=t.json.write)!=null&&i.enabled)&&(n.write={...t.json.write}),w5(s,n)}m5(e,t.json,!0),w5(e,t.json)}function Rne(t){return t.json.types?LM(t.json):t.type?F9(t):LM(t)}function Lne(t){return t.type?F9(t):LM(t)}function F9(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!I9(i);)i=i[0],e++;return{type:i,ndimArray:e}}function LM(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function Fne(t){Ene(t)&&(wne(t),Pne(t))}const mE=new Set,gE=new Set;function wi(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,Dne(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!mE.has(n.initialize)&&(mE.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!gE.has(n.destroy)&&(gE.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);mE.clear(),gE.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=i.length-1;c>=0;c--)i[c].call(this)}}),r.length){let c=!1;const d=this[WU];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){this.__accessor__.lifecycle=ys.DESTROYING,c=!0,d.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=Cy(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function Nne(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&Ve(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function Dne(t){const e=t.prototype,i=Cy(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];Fne(s),r[n]={enumerable:!0,configurable:!0,get:Nne(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?_5("read-only",n):a.lifecycle===ys.CONSTRUCTED&&s.constructOnly?_5("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const _5=(t,e)=>{ie.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var x5,S5;function zne(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const aa=Symbol("Accessor-Handles"),yE=Symbol("Accessor-Initialized");var Yu;let Se=(Yu=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...c){super(...c),this.inherited=null,n&&n.apply(this,c)}}Cy(o.prototype);for(const a in e){const c=e[a];o.prototype[a]=typeof c=="function"?function(...d){const h=this.inherited;let f;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{f=c.apply(this,d)}catch(m){throw this.inherited=h,m}return this.inherited=h,f}:e[a]}for(const a in i){const c=zne(i[a]);Me(c)(o.prototype,a)}return wi(r)(o)}static freeze(e){return e instanceof Yu?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Yu?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var r;if(this[x5]=null,this[S5]=!1,this.constructor===Yu)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new hre(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[yE]=!0}initialize(){}[WU](){this[aa]=Ot(this[aa])}destroy(){var e;this.destroyed||(Yre(this),this.__accessor__.destroy(),(e=wre())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[yE]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===ys.DESTROYED||!1}get destroying(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===ys.DESTROYING||!1}commitProperty(e){un(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return r$(this,e,i),this}watch(e,i,r){return BU(ie.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),ine(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}(this[aa]??(this[aa]=new Ay)).add(e,i)}removeHandles(e){var i;(i=this[aa])==null||i.remove(e)}removeAllHandles(){var e;(e=this[aa])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[aa])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[aa])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},x5=aa,S5=yE,Yu);const jne=Symbol("ClonableMixin"),Pe=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}clone(s){var m;const o=mn(this);HU(o,"unable to clone instance of non-accessor class");const a=o.metadata,c=o.store,d={},h=new Map;for(const v in a){const w=a[v],x=c==null?void 0:c.originOf(v),$=w.clonable;if(w.readOnly||$===!1||x!==7&&x!==0&&x!==5&&x!==4)continue;const T=this[v];let C=null;if(typeof $=="function")C=$(T,s);else if($==="reference")C=T;else if(C=SM(T,s),T!=null&&C==null)continue;x===0?h.set(v,C):d[v]=C}const f=new(Object.getPrototypeOf(this)).constructor(d);if(h.size){const v=(m=mn(f))==null?void 0:m.store;if(v)for(const[w,x]of h)v.set(w,x,0)}return f}},e=jne,n);return r=l([wi("esri.core.Clonable")],r),r},hR=Pe(Se),Ik=t=>{const e=t;class i extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(n,s){var c;let o=(c=this._listenersMap)==null?void 0:c.get(n);if(!o)return!1;let a=!1;for(const d of o.slice()){const h="deref"in d?d.deref():d;h?h==null||h.call(this,s):a=!0}return a&&(o=o.filter(d=>!("deref"in d)||d.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(c=>this.on(c,s));return Mh(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),ct(()=>{var d;const a=(d=this._listenersMap)==null?void 0:d.get(n),c=(a==null?void 0:a.indexOf(s))??-1;c>=0&&a.splice(c,1)})}once(n,s){const o=this.on(n,a=>{o.remove();const c="deref"in s?s.deref():s;c==null||c.call(null,a)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}return i},N9=Ik(class{}),D9=N9,Dy=Ik(Se);function fR(t){return(e,i)=>{e[i]=t}}let zy=class extends XU{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};function Yb(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}var yl;let Vne=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},Une=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const As=new Oy(()=>new Vne,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function $5(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function vE(t){return t?t instanceof Vl?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function bE(t){if(t!=null&&t.length)return t[0]}function qne(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function z9(t,e,i,r){e&&e.forEach((n,s,o)=>{t.push(n),z9(t,i.call(r,n,s,o),i,r)})}const Nc=new Set,Dc=new Set,zc=new Set,wE=new Map;let Bne=0,Vl=yl=class extends Dy{static ofType(t){if(!t)return yl;if(wE.has(t))return wE.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends yl{};return l([fR({Type:t,ensureType:typeof t=="function"?gi(t):Ka(t)})],i.prototype,"itemType",void 0),i=l([wi(`esri.core.Collection<${e}>`)],i),wE.set(t,i),i}static isCollection(t){return t!=null&&t instanceof yl}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new zy,this._length=0,this._items=[],Object.defineProperty(this,"uid",{value:Bne++})}normalizeCtorArgs(t){return t?YP(t)||t instanceof yl?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get length(){return this._length}set length(t){t>this._length?ie.getLogger(this).error("#length=","Cannot increase the length of the collection by assigning to the length property."):this.splice(t,Math.max(0,this._length-t))}get items(){return Ve(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,vE(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return ct();if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ct(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return super.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,r=this.on(t,n=>{var s;(s=i())==null||s.call(null,n),r.remove()});return r}add(t,e){if(Ve(this._observable),this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(Ve(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e);return this._splice(i,0,vE(t)),this._emitAfterChanges(1),this}at(t){if(Ve(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ve(this._observable),this._createNewInstance({items:this._items.map(V)})}concat(...t){Ve(this._observable);const e=t.map(vE);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ve(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(2)}destroyAll(){this.drain($5)}destroyMany(t){const e=this.removeMany(t);return e.forEach($5),e}every(t,e){return Ve(this._observable),this._items.every(t,e)}filter(t,e){Ve(this._observable);const i=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:i})}find(t,e){return Ve(this._observable),this._items.find(t,e)}findIndex(t,e){return Ve(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ve(this._observable);const i=[];return z9(i,this,t,e),new yl(i)}forEach(t,e){return Ve(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ve(this._observable),this._items[t]}getNextIndex(t){Ve(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ve(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ve(this._observable),this._items.indexOf(t,e)}join(t=","){return Ve(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ve(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ve(this._observable);const i=this._items.map(t,e);return new yl({items:i})}reorder(t,e=this.length-1){Ve(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(4))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=bE(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return Ve(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){Ve(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ve(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ve(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ve(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=bE(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(Ve(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(2))return[];const e=t instanceof yl?t.toArray():t,i=this._items,r=[],n=e.length;for(let s=0;s<n;s++){const o=e[s],a=i.indexOf(o);if(a>-1){const c=1+qne(e,i,s+1,a+1),d=this._splice(a,c);d&&d.length>0&&r.push.apply(r,d),s+=c-1}}return this._emitAfterChanges(2),r}reverse(){if(Ve(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=bE(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return Ve(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ve(this._observable),this._items.some(t,e)}sort(t){if(Ve(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,i)=>e===i?0:e<i?-1:1){const e=this.length-1;for(let i=0;i<e;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,e,...i){Ve(this._observable),arguments.length===1&&(e=this.length),e??(e=0);const r=(e?2:0)|(i.length?1:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return Ve(this._observable),this._items.slice()}toJSON(t){return Ve(this._observable),this.toArray().map(e=>Yb(e)?e.toJSON(t):e)}toLocaleString(){return Ve(this._observable),this._items.toLocaleString()}toString(){return Ve(this._observable),this._items.toString()}unshift(...t){return Ve(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Ly(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=As.acquire();a.target=this,a.cancellable=!0;for(let c=0,d=o.length;c<d;c++)s=o[c],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(c,1),r.splice(t,0,s),t+=1,c-=1,d-=1);As.release(a)}if(this._length=this._items.length,this.hasEventListener("after-remove")){const a=As.acquire();a.target=this,a.cancellable=!1;const c=o.length;for(let d=0;d<c;d++)a.reset(o[d]),this.emit("after-remove",a);As.release(a)}}if(i!=null&&i.length){if(n){const h=[];for(const f of i){const m=n.ensureType(f);m==null&&f!=null||h.push(m)}i=h}const a=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),d=t===this.length;if(a||c){const h=As.acquire();h.target=this,h.cancellable=!0;const f=As.acquire();f.target=this,f.cancellable=!1;for(const m of i)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(d?r.push(m):r.splice(t++,0,m),this._length=r.length,c&&(f.reset(m),this.emit("after-add",f)))):(d?r.push(m):r.splice(t++,0,m),this._length=r.length,f.reset(m),this.emit("after-add",f));As.release(f),As.release(h)}else{if(d)for(const h of i)r.push(h);else r.splice(t,0,...i);this._length=r.length}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const a=new Une(this,i,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=As.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,As.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=As.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),As.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Nc.clear(),Dc.clear(),zc.clear();for(const{added:c,removed:d}of i){if(c)if(zc.size===0&&Dc.size===0)for(const h of c)Nc.add(h);else for(const h of c)Dc.has(h)?(zc.add(h),Dc.delete(h)):zc.has(h)||Nc.add(h);if(d)if(zc.size===0&&Nc.size===0)for(const h of d)Dc.add(h);else for(const h of d)Nc.has(h)?Nc.delete(h):(zc.delete(h),Dc.add(h))}const r=sn.acquire();Nc.forEach(c=>{r.push(c)});const n=sn.acquire();Dc.forEach(c=>{n.push(c)});const s=this._items,o=e.items,a=sn.acquire();if(zc.forEach(c=>{o.indexOf(c)!==s.indexOf(c)&&a.push(c)}),e.listeners&&(r.length||n.length||a.length)){const c={target:this,added:r,removed:n,moved:a},d=e.listeners.length;for(let h=0;h<d;h++){const f=e.listeners[h];f.removed||f.callback.call(this,c)}}sn.release(r),sn.release(n),sn.release(a)}Nc.clear(),Dc.clear(),zc.clear()}};l([Me()],Vl.prototype,"_updating",void 0),l([Me()],Vl.prototype,"_length",void 0),l([Me()],Vl.prototype,"length",null),l([Me()],Vl.prototype,"items",null),l([Me({readOnly:!0})],Vl.prototype,"updating",null),Vl=yl=l([wi("esri.core.Collection")],Vl);const de=Vl;let Gne=class j9{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new j9;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,V(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??7}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===0){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(e,new Hne(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},Hne=class{constructor(e,i){this.value=e,this.origin=i}};function V9(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),0)});const r=t.metadata;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),0)})}function Wne(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&n5(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.startsWith(e)&&n5(n,i))return!0;return!1}function Zne(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function Jne(t,e,i,r,n){let s=f$(e[i],n);Zne(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=f$(e[o],n),Wne(s,i,r)&&(t[o]=!0)}function Yne(t,e,i,r){const n=i.metadata,s=_ne(n[e],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const U9={origin:"service"};function q9(t,e,i=U9){if(!e||typeof e!="object")return;const r=mn(t),n=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))Jne(s,n,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=f$(n[o],i).read,c=a==null?void 0:a.source;let d;d=c&&typeof c=="string"?Bw(e,c):e[o],a!=null&&a.reader&&(d=a.reader.call(t,d,e,i)),d!==void 0&&r.set(o,d)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||Yne(t,o,r,i)}r.setDefaultOrigin("user")}function B9(t,e,i,r=U9){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||t.loaded?r!=null&&r.messages&&r.messages.push(o):t.loadWarnings.push(o)})}function Kne(t,e,i,r,n){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,r,s,i,n),s}function G9(t,e,i,r,n,s){if(!(r!=null&&r.write))return!1;const o=un(t,i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,s??void 0);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new j("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&ie.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===0)&&Qne(t,i,s,r,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<pc(s.origin))}function Qne(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,i??void 0);return Uw(o,n)}return!1}return s===n}function H9(t,e,i,r){const n=mn(t),s=n.metadata,o=A9(s[e],r);return!!o&&G9(t,n,e,o,i,r)}function W9(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return mx(e,t.toJSON(i));const r=mn(t),n=r.metadata;for(const a in n){const c=A9(n[a],i);if(!G9(t,r,a,c,void 0,i))continue;const d=un(t,a),h=Kne(t,c,c.write&&typeof c.write.target=="string"?c.write.target:a,d,i);Object.keys(h).length>0&&(e=mx(e,h),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>mx(e,h,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:dre(r.store.originOf(a)),newOrigin:i.origin}))}return e}const $c=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=mn(this),s=n.store,o=new Gne;n.store=o,V9(n,s,o)}read(r,n){q9(this,r,n)}write(r,n){return W9(this,r??{},n)}toJSON(r){return this.write({},r)}static fromJSON(r,n){return Xne.call(this,r,n)}};return i=l([wi("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function Xne(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}const Z=$c(Se),ese=Object.prototype.toString;function tse(t){const e="__accessorMetadata__"in t?gi(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return ise.apply(this,i)}}function ise(t,e,i,r){Gw(t,e).cast=r}function rse(t){return(e,i)=>{Gw(e,t).cast=e[i]}}function y$(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&ese.call(t[0])==="[object Function]"?tse(t[0]):t.length===1&&typeof t[0]=="string"?rse(t[0]):void 0}let Ze=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=nse(e),this.apiValues=T5(this._apiToJSON),this.jsonValues=T5(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&Ai(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function nse(t){const e={};for(const i in t)e[t[i]]=i;return e}function T5(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Wi(){return function(t,e){return new Ze(t,{ignoreUnknown:!0,...e})}}function Ie(t,e={}){const i=t instanceof Ze?t:new Ze(t,e),{alwaysWriteDefaults:r,default:n,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:c=!1}=e;return Me({type:s?i.apiValues:String,json:{type:i.jsonValues,default:n,name:o,read:!c&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:c})}function oe(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(c=>{const d=cR(s,c,n);d.read&&typeof d.read=="object"||(d.read={}),d.read.reader=a[o],i&&(d.read.source=(d.read.source||[]).concat(i))})}}function le(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const c of r){const d=cR(s,c,n);d.write&&typeof d.write=="object"||(d.write={}),i&&(d.write.target=i),d.write.writer=a[o]}}}const u=Me,E=wi;function ti(...t){return y$(...t)}const sse="modulepreload",ose=function(t,e){return new URL(t,e).href},k5={},Q=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.all(i.map(c=>{if(c=ose(c,r),c in k5)return;k5[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let v=s.length-1;v>=0;v--){const w=s[v];if(w.href===c&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":sse,d||(m.as="script",m.crossOrigin=""),m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((v,w)=>{m.addEventListener("load",v),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}return n.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function ase(t){return typeof t=="number"}function $De(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function TDe(t){return typeof t=="boolean"}function Yw(t){return typeof t=="string"||t instanceof String}function lse(t){return t==null||Yw(t)}function kDe(t){return Array.isArray(t)}function Z9(t){return(t==null?void 0:t.declaredClass)==="esri.Graphic"}function IDe(t){return t instanceof Date}let _E;async function cse(){return _E==null&&(_E=Q(()=>import("./WhereClauseCache-Bg00WU4t.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>new t.WhereClauseCache(500,500))),_E}async function J9(t,e){const i=await cse(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function wx(t,e){return t||(t=null),e||(e=null),t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function FM(t,e){return t||(t=null),e||(e=null),t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function use(t,e){return e.length===0?null:`${t} IN (${dse(e)})`}function dse(t){return t.map(e=>typeof e=="string"?pse(e):e).join(",")}function pse(t,e){return`'${t.replaceAll("'","''")}'`}class Ch extends Error{}class hse extends Ch{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class fse extends Ch{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class mse extends Ch{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Cm extends Ch{}class Y9 extends Ch{constructor(e){super(`Invalid unit ${e}`)}}class Rr extends Ch{}class jc extends Ch{constructor(){super("Zone is an abstract class")}}const xe="numeric",ea="short",xs="long",v$={year:xe,month:xe,day:xe},K9={year:xe,month:ea,day:xe},gse={year:xe,month:ea,day:xe,weekday:ea},Q9={year:xe,month:xs,day:xe},X9={year:xe,month:xs,day:xe,weekday:xs},e7={hour:xe,minute:xe},t7={hour:xe,minute:xe,second:xe},i7={hour:xe,minute:xe,second:xe,timeZoneName:ea},r7={hour:xe,minute:xe,second:xe,timeZoneName:xs},n7={hour:xe,minute:xe,hourCycle:"h23"},s7={hour:xe,minute:xe,second:xe,hourCycle:"h23"},o7={hour:xe,minute:xe,second:xe,hourCycle:"h23",timeZoneName:ea},a7={hour:xe,minute:xe,second:xe,hourCycle:"h23",timeZoneName:xs},l7={year:xe,month:xe,day:xe,hour:xe,minute:xe},c7={year:xe,month:xe,day:xe,hour:xe,minute:xe,second:xe},u7={year:xe,month:ea,day:xe,hour:xe,minute:xe},d7={year:xe,month:ea,day:xe,hour:xe,minute:xe,second:xe},yse={year:xe,month:ea,day:xe,weekday:ea,hour:xe,minute:xe},p7={year:xe,month:xs,day:xe,hour:xe,minute:xe,timeZoneName:ea},h7={year:xe,month:xs,day:xe,hour:xe,minute:xe,second:xe,timeZoneName:ea},f7={year:xe,month:xs,day:xe,weekday:xs,hour:xe,minute:xe,timeZoneName:xs},m7={year:xe,month:xs,day:xe,weekday:xs,hour:xe,minute:xe,second:xe,timeZoneName:xs};class Oh{get type(){throw new jc}get name(){throw new jc}get ianaName(){return this.name}get isUniversal(){throw new jc}offsetName(e,i){throw new jc}formatOffset(e,i){throw new jc}offset(e){throw new jc}equals(e){throw new jc}get isValid(){throw new jc}}let xE=null;class Ek extends Oh{static get instance(){return xE===null&&(xE=new Ek),xE}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return k7(e,i,r)}formatOffset(e,i){return ab(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const NM=new Map;function vse(t){let e=NM.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),NM.set(t,e)),e}const bse={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function wse(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,c,d,h]=r;return[o,n,s,a,c,d,h]}function _se(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],a=bse[s];s==="era"?r[a]=o:rt(a)||(r[a]=parseInt(o,10))}return r}const SE=new Map;class Hn extends Oh{static create(e){let i=SE.get(e);return i===void 0&&SE.set(e,i=new Hn(e)),i}static resetCache(){SE.clear(),NM.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Hn.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return k7(e,i,r,this.name)}formatOffset(e,i){return ab(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=vse(this.name);let[n,s,o,a,c,d,h]=r.formatToParts?_se(r,i):wse(r,i);a==="BC"&&(n=-Math.abs(n)+1);const m=Ak({year:n,month:s,day:o,hour:c===24?0:c,minute:d,second:h,millisecond:0});let v=+i;const w=v%1e3;return v-=w>=0?w:1e3+w,(m-v)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let I5={};function xse(t,e={}){const i=JSON.stringify([t,e]);let r=I5[i];return r||(r=new Intl.ListFormat(t,e),I5[i]=r),r}const DM=new Map;function zM(t,e={}){const i=JSON.stringify([t,e]);let r=DM.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),DM.set(i,r)),r}const jM=new Map;function Sse(t,e={}){const i=JSON.stringify([t,e]);let r=jM.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),jM.set(i,r)),r}const VM=new Map;function $se(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=VM.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),VM.set(n,s)),s}let iv=null;function Tse(){return iv||(iv=new Intl.DateTimeFormat().resolvedOptions().locale,iv)}const UM=new Map;function g7(t){let e=UM.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),UM.set(t,e)),e}const qM=new Map;function kse(t){let e=qM.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...y7,...e}),qM.set(t,e)}return e}function Ise(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=zM(t).resolvedOptions(),n=t}catch{const c=t.substring(0,i);r=zM(c).resolvedOptions(),n=c}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function Ese(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function Mse(t){const e=[];for(let i=1;i<=12;i++){const r=Te.utc(2009,i,1);e.push(t(r))}return e}function Ase(t){const e=[];for(let i=1;i<=7;i++){const r=Te.utc(2016,11,13+i);e.push(t(r))}return e}function Y1(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function Cse(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||g7(t.locale).numberingSystem==="latn"}class Ose{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=Sse(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):bR(e,3);return Gi(i,this.padTo)}}}class Pse{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Hn.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=zM(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Rse{constructor(e,i,r){this.opts={style:"long",...r},!i&&$7()&&(this.rtf=$se(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):ioe(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const y7={firstDay:1,minimalDays:4,weekend:[6,7]};class Ct{static fromOpts(e){return Ct.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const o=e||Ei.defaultLocale,a=o||(s?"en-US":Tse()),c=i||Ei.defaultNumberingSystem,d=r||Ei.defaultOutputCalendar,h=GM(n)||Ei.defaultWeekSettings;return new Ct(a,c,d,h,o)}static resetCache(){iv=null,DM.clear(),jM.clear(),VM.clear(),UM.clear(),qM.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return Ct.create(e,i,r,n)}constructor(e,i,r,n,s){const[o,a,c]=Ise(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||c||null,this.weekSettings=n,this.intl=Ese(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Cse(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Ct.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,GM(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return Y1(this,e,M7,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");i&=!r;const n=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";if(!this.monthsCache[s][e]){const o=r?a=>this.dtFormatter(a,n).format():a=>this.extract(a,n,"month");this.monthsCache[s][e]=Mse(o)}return this.monthsCache[s][e]})}weekdays(e,i=!1){return Y1(this,e,O7,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=Ase(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return Y1(this,void 0,()=>P7,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Te.utc(2016,11,13,9),Te.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Y1(this,e,R7,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Te.utc(-40,1,1),Te.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new Ose(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new Pse(e,this.intl,i)}relFormatter(e={}){return new Rse(this.intl,this.isEnglish(),e)}listFormatter(e={}){return xse(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||g7(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:T7()?kse(this.locale):y7}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let $E=null;class Di extends Oh{static get utcInstance(){return $E===null&&($E=new Di(0)),$E}static instance(e){return e===0?Di.utcInstance:new Di(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Di(Ck(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ab(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ab(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return ab(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Lse extends Oh{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function bu(t,e){if(rt(t)||t===null)return e;if(t instanceof Oh)return t;if(Vse(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?Ek.instance:i==="utc"||i==="gmt"?Di.utcInstance:Di.parseSpecifier(i)||Hn.create(t)}else return Vu(t)?Di.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Lse(t)}const mR={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},E5={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Fse=mR.hanidec.replace(/[\[|\]]/g,"").split("");function Nse(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(mR.hanidec)!==-1)e+=Fse.indexOf(t[i]);else for(const n in E5){const[s,o]=E5[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const BM=new Map;function Dse(){BM.clear()}function fo({numberingSystem:t},e=""){const i=t||"latn";let r=BM.get(i);r===void 0&&(r=new Map,BM.set(i,r));let n=r.get(e);return n===void 0&&(n=new RegExp(`${mR[i]}${e}`),r.set(e,n)),n}let M5=()=>Date.now(),A5="system",C5=null,O5=null,P5=null,R5=60,L5,F5=null;class Ei{static get now(){return M5}static set now(e){M5=e}static set defaultZone(e){A5=e}static get defaultZone(){return bu(A5,Ek.instance)}static get defaultLocale(){return C5}static set defaultLocale(e){C5=e}static get defaultNumberingSystem(){return O5}static set defaultNumberingSystem(e){O5=e}static get defaultOutputCalendar(){return P5}static set defaultOutputCalendar(e){P5=e}static get defaultWeekSettings(){return F5}static set defaultWeekSettings(e){F5=GM(e)}static get twoDigitCutoffYear(){return R5}static set twoDigitCutoffYear(e){R5=e%100}static get throwOnInvalid(){return L5}static set throwOnInvalid(e){L5=e}static resetCaches(){Ct.resetCache(),Hn.resetCache(),Te.resetCache(),Dse()}}class Jo{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const v7=[0,31,59,90,120,151,181,212,243,273,304,334],b7=[0,31,60,91,121,152,182,213,244,274,305,335];function Ys(t,e){return new Jo("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function gR(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function w7(t,e,i){return i+(Kw(t)?b7:v7)[e-1]}function _7(t,e){const i=Kw(t)?b7:v7,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function yR(t,e){return(t-e+7)%7+1}function b$(t,e=4,i=1){const{year:r,month:n,day:s}=t,o=w7(r,n,s),a=yR(gR(r,n,s),i);let c=Math.floor((o-a+14-e)/7),d;return c<1?(d=r-1,c=Kb(d,e,i)):c>Kb(r,e,i)?(d=r+1,c=1):d=r,{weekYear:d,weekNumber:c,weekday:a,...Ok(t)}}function N5(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,o=yR(gR(r,1,e),i),a=Gm(r);let c=n*7+s-o-7+e,d;c<1?(d=r-1,c+=Gm(d)):c>a?(d=r+1,c-=Gm(r)):d=r;const{month:h,day:f}=_7(d,c);return{year:d,month:h,day:f,...Ok(t)}}function TE(t){const{year:e,month:i,day:r}=t,n=w7(e,i,r);return{year:e,ordinal:n,...Ok(t)}}function D5(t){const{year:e,ordinal:i}=t,{month:r,day:n}=_7(e,i);return{year:e,month:r,day:n,...Ok(t)}}function z5(t,e){if(!rt(t.localWeekday)||!rt(t.localWeekNumber)||!rt(t.localWeekYear)){if(!rt(t.weekday)||!rt(t.weekNumber)||!rt(t.weekYear))throw new Cm("Cannot mix locale-based week fields with ISO-based week fields");return rt(t.localWeekday)||(t.weekday=t.localWeekday),rt(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),rt(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function zse(t,e=4,i=1){const r=Mk(t.weekYear),n=Ks(t.weekNumber,1,Kb(t.weekYear,e,i)),s=Ks(t.weekday,1,7);return r?n?s?!1:Ys("weekday",t.weekday):Ys("week",t.weekNumber):Ys("weekYear",t.weekYear)}function jse(t){const e=Mk(t.year),i=Ks(t.ordinal,1,Gm(t.year));return e?i?!1:Ys("ordinal",t.ordinal):Ys("year",t.year)}function x7(t){const e=Mk(t.year),i=Ks(t.month,1,12),r=Ks(t.day,1,w$(t.year,t.month));return e?i?r?!1:Ys("day",t.day):Ys("month",t.month):Ys("year",t.year)}function S7(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=Ks(e,0,23)||e===24&&i===0&&r===0&&n===0,o=Ks(i,0,59),a=Ks(r,0,59),c=Ks(n,0,999);return s?o?a?c?!1:Ys("millisecond",n):Ys("second",r):Ys("minute",i):Ys("hour",e)}function rt(t){return typeof t>"u"}function Vu(t){return typeof t=="number"}function Mk(t){return typeof t=="number"&&t%1===0}function Vse(t){return typeof t=="string"}function Use(t){return Object.prototype.toString.call(t)==="[object Date]"}function $7(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function T7(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function qse(t){return Array.isArray(t)?t:[t]}function j5(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function Bse(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function oy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function GM(t){if(t==null)return null;if(typeof t!="object")throw new Rr("Week settings must be an object");if(!Ks(t.firstDay,1,7)||!Ks(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Ks(e,1,7)))throw new Rr("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Ks(t,e,i){return Mk(t)&&t>=e&&t<=i}function Gse(t,e){return t-e*Math.floor(t/e)}function Gi(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function uu(t){if(!(rt(t)||t===null||t===""))return parseInt(t,10)}function Id(t){if(!(rt(t)||t===null||t===""))return parseFloat(t)}function vR(t){if(!(rt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function bR(t,e,i="round"){const r=10**e;switch(i){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${i} is out of range`)}}function Kw(t){return t%4===0&&(t%100!==0||t%400===0)}function Gm(t){return Kw(t)?366:365}function w$(t,e){const i=Gse(e-1,12)+1,r=t+(e-i)/12;return i===2?Kw(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Ak(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function V5(t,e,i){return-yR(gR(t,1,e),i)+e-1}function Kb(t,e=4,i=1){const r=V5(t,e,i),n=V5(t+1,e,i);return(Gm(t)-r+n)/7}function HM(t){return t>99?t:t>Ei.twoDigitCutoffYear?1900+t:2e3+t}function k7(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(c=>c.type.toLowerCase()==="timezonename");return a?a.value:null}function Ck(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function I7(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new Rr(`Invalid unit value ${t}`);return e}function _$(t,e){const i={};for(const r in t)if(oy(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=I7(n)}return i}function ab(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${Gi(i,2)}:${Gi(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${Gi(i,2)}${Gi(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Ok(t){return Bse(t,["hour","minute","second","millisecond"])}const Hse=["January","February","March","April","May","June","July","August","September","October","November","December"],E7=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Wse=["J","F","M","A","M","J","J","A","S","O","N","D"];function M7(t){switch(t){case"narrow":return[...Wse];case"short":return[...E7];case"long":return[...Hse];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const A7=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],C7=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Zse=["M","T","W","T","F","S","S"];function O7(t){switch(t){case"narrow":return[...Zse];case"short":return[...C7];case"long":return[...A7];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const P7=["AM","PM"],Jse=["Before Christ","Anno Domini"],Yse=["BC","AD"],Kse=["B","A"];function R7(t){switch(t){case"narrow":return[...Kse];case"short":return[...Yse];case"long":return[...Jse];default:return null}}function Qse(t){return P7[t.hour<12?0:1]}function Xse(t,e){return O7(e)[t.weekday-1]}function eoe(t,e){return M7(e)[t.month-1]}function toe(t,e){return R7(e)[t.year<0?0:1]}function ioe(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${n[t][0]}`;case-1:return f?"yesterday":`last ${n[t][0]}`;case 0:return f?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),c=a===1,d=n[t],h=r?c?d[1]:d[2]||d[1]:c?n[t][0]:t;return o?`${a} ${h} ago`:`in ${a} ${h}`}function U5(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const roe={D:v$,DD:K9,DDD:Q9,DDDD:X9,t:e7,tt:t7,ttt:i7,tttt:r7,T:n7,TT:s7,TTT:o7,TTTT:a7,f:l7,ff:u7,fff:p7,ffff:f7,F:c7,FF:d7,FFF:h7,FFFF:m7};class Dr{static create(e,i={}){return new Dr(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?((r.length>0||n)&&s.push({literal:n||/^\s+$/.test(r),val:r===""?"'":r}),i=null,r="",n=!n):n||a===i?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return roe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0,r=void 0){if(this.opts.forceSimple)return Gi(e,i);const n={...this.opts};return i>0&&(n.padTo=i),r&&(n.signDisplay=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(v,w)=>this.loc.extract(e,v,w),o=v=>e.isOffsetFixed&&e.offset===0&&v.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,v.format):"",a=()=>r?Qse(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(v,w)=>r?eoe(e,v):s(w?{month:v}:{month:v,day:"numeric"},"month"),d=(v,w)=>r?Xse(e,v):s(w?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),h=v=>{const w=Dr.macroTokenToFormatOpts(v);return w?this.formatWithSystemDefault(e,w):v},f=v=>r?toe(e,v):s({era:v},"era"),m=v=>{switch(v){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(v)}};return U5(Dr.parseFormat(i),m)}formatDurationFromString(e,i){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,n=h=>{switch(h[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(h,f)=>m=>{const v=n(m);if(v){const w=f.isNegativeDuration&&v!==f.largestUnit?r:1;let x;return this.opts.signMode==="negativeLargestOnly"&&v!==f.largestUnit?x="never":this.opts.signMode==="all"?x="always":x="auto",this.num(h.get(v)*w,m.length,x)}else return m},o=Dr.parseFormat(i),a=o.reduce((h,{literal:f,val:m})=>f?h:h.concat(m),[]),c=e.shiftTo(...a.map(n).filter(h=>h)),d={isNegativeDuration:c<0,largestUnit:Object.keys(c.values)[0]};return U5(o,s(c,d))}}const L7=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function jy(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function Vy(...t){return e=>t.reduce(([i,r,n],s)=>{const[o,a,c]=s(e,n);return[{...i,...o},a||r,c]},[{},null,1]).slice(0,2)}function Uy(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function F7(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=uu(e[i+n]);return[r,null,i+n]}}const N7=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,noe=`(?:${N7.source}?(?:\\[(${L7.source})\\])?)?`,wR=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,D7=RegExp(`${wR.source}${noe}`),_R=RegExp(`(?:[Tt]${D7.source})?`),soe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ooe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,aoe=/(\d{4})-?(\d{3})/,loe=F7("weekYear","weekNumber","weekDay"),coe=F7("year","ordinal"),uoe=/(\d{4})-(\d\d)-(\d\d)/,z7=RegExp(`${wR.source} ?(?:${N7.source}|(${L7.source}))?`),doe=RegExp(`(?: ${z7.source})?`);function Hm(t,e,i){const r=t[e];return rt(r)?i:uu(r)}function poe(t,e){return[{year:Hm(t,e),month:Hm(t,e+1,1),day:Hm(t,e+2,1)},null,e+3]}function qy(t,e){return[{hours:Hm(t,e,0),minutes:Hm(t,e+1,0),seconds:Hm(t,e+2,0),milliseconds:vR(t[e+3])},null,e+4]}function Qw(t,e){const i=!t[e]&&!t[e+1],r=Ck(t[e+1],t[e+2]),n=i?null:Di.instance(r);return[{},n,e+3]}function Xw(t,e){const i=t[e]?Hn.create(t[e]):null;return[{},i,e+1]}const hoe=RegExp(`^T?${wR.source}$`),foe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function moe(t){const[e,i,r,n,s,o,a,c,d]=t,h=e[0]==="-",f=c&&c[0]==="-",m=(v,w=!1)=>v!==void 0&&(w||v&&h)?-v:v;return[{years:m(Id(i)),months:m(Id(r)),weeks:m(Id(n)),days:m(Id(s)),hours:m(Id(o)),minutes:m(Id(a)),seconds:m(Id(c),c==="-0"),milliseconds:m(vR(d),f)}]}const goe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function xR(t,e,i,r,n,s,o){const a={year:e.length===2?HM(uu(e)):uu(e),month:E7.indexOf(i)+1,day:uu(r),hour:uu(n),minute:uu(s)};return o&&(a.second=uu(o)),t&&(a.weekday=t.length>3?A7.indexOf(t)+1:C7.indexOf(t)+1),a}const yoe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function voe(t){const[,e,i,r,n,s,o,a,c,d,h,f]=t,m=xR(e,n,r,i,s,o,a);let v;return c?v=goe[c]:d?v=0:v=Ck(h,f),[m,new Di(v)]}function boe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const woe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,_oe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,xoe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function q5(t){const[,e,i,r,n,s,o,a]=t;return[xR(e,n,r,i,s,o,a),Di.utcInstance]}function Soe(t){const[,e,i,r,n,s,o,a]=t;return[xR(e,a,i,r,n,s,o),Di.utcInstance]}const $oe=jy(soe,_R),Toe=jy(ooe,_R),koe=jy(aoe,_R),Ioe=jy(D7),j7=Vy(poe,qy,Qw,Xw),Eoe=Vy(loe,qy,Qw,Xw),Moe=Vy(coe,qy,Qw,Xw),Aoe=Vy(qy,Qw,Xw);function Coe(t){return Uy(t,[$oe,j7],[Toe,Eoe],[koe,Moe],[Ioe,Aoe])}function Ooe(t){return Uy(boe(t),[yoe,voe])}function Poe(t){return Uy(t,[woe,q5],[_oe,q5],[xoe,Soe])}function Roe(t){return Uy(t,[foe,moe])}const Loe=Vy(qy);function Foe(t){return Uy(t,[hoe,Loe])}const Noe=jy(uoe,doe),Doe=jy(z7),zoe=Vy(qy,Qw,Xw);function joe(t){return Uy(t,[Noe,j7],[Doe,zoe])}const B5="Invalid Duration",V7={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Voe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...V7},Cs=146097/400,Xh=146097/4800,Uoe={years:{quarters:4,months:12,weeks:Cs/7,days:Cs,hours:Cs*24,minutes:Cs*24*60,seconds:Cs*24*60*60,milliseconds:Cs*24*60*60*1e3},quarters:{months:3,weeks:Cs/28,days:Cs/4,hours:Cs*24/4,minutes:Cs*24*60/4,seconds:Cs*24*60*60/4,milliseconds:Cs*24*60*60*1e3/4},months:{weeks:Xh/7,days:Xh,hours:Xh*24,minutes:Xh*24*60,seconds:Xh*24*60*60,milliseconds:Xh*24*60*60*1e3},...V7},$p=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],qoe=$p.slice(0).reverse();function ll(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new _t(r)}function U7(t,e){let i=e.milliseconds??0;for(const r of qoe.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function G5(t,e){const i=U7(t,e)<0?-1:1;$p.reduceRight((r,n)=>{if(rt(e[n]))return r;if(r){const s=e[r]*i,o=t[n][r],a=Math.floor(s/o);e[n]+=a*i,e[r]-=a*o*i}return n},null),$p.reduce((r,n)=>{if(rt(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function H5(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class _t{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?Uoe:Voe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Ct.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return _t.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Rr(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new _t({values:_$(e,_t.normalizeUnit),loc:Ct.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(Vu(e))return _t.fromMillis(e);if(_t.isDuration(e))return e;if(typeof e=="object")return _t.fromObject(e);throw new Rr(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=Roe(e);return r?_t.fromObject(r,i):_t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=Foe(e);return r?_t.fromObject(r,i):_t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Rr("need to specify a reason the Duration is invalid");const r=e instanceof Jo?e:new Jo(e,i);if(Ei.throwOnInvalid)throw new mse(r);return new _t({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new Y9(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Dr.create(this.loc,r).formatDurationFromString(this,e):B5}toHuman(e={}){if(!this.isValid)return B5;const i=e.showZeros!==!1,r=$p.map(n=>{const s=this.values[n];return rt(s)||s===0&&!i?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=bR(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Te.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?U7(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=_t.fromDurationLike(e),r={};for(const n of $p)(oy(i.values,n)||oy(this.values,n))&&(r[n]=i.get(n)+this.get(n));return ll(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=_t.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=I7(e(this.values[r],r));return ll(this,{values:i},!0)}get(e){return this[_t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,..._$(e,_t.normalizeUnit)};return ll(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return ll(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return G5(this.matrix,e),ll(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=H5(this.normalize().shiftToAll().toObject());return ll(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>_t.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of $p)if(e.indexOf(o)>=0){s=o;let a=0;for(const d in r)a+=this.matrix[d][o]*r[d],r[d]=0;Vu(n[o])&&(a+=n[o]);const c=Math.trunc(a);i[o]=c,r[o]=(a*1e3-c*1e3)/1e3}else Vu(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return G5(this.matrix,i),ll(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return ll(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=H5(this.values);return ll(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of $p)if(!i(this.values[r],e.values[r]))return!1;return!0}}const ef="Invalid Interval";function Boe(t,e){return!t||!t.isValid?$i.invalid("missing or invalid start"):!e||!e.isValid?$i.invalid("missing or invalid end"):e<t?$i.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class $i{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Rr("need to specify a reason the Interval is invalid");const r=e instanceof Jo?e:new Jo(e,i);if(Ei.throwOnInvalid)throw new fse(r);return new $i({invalid:r})}static fromDateTimes(e,i){const r=k0(e),n=k0(i),s=Boe(r,n);return s??new $i({start:r,end:n})}static after(e,i){const r=_t.fromDurationLike(i),n=k0(e);return $i.fromDateTimes(n,n.plus(r))}static before(e,i){const r=_t.fromDurationLike(i),n=k0(e);return $i.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=Te.fromISO(r,i),o=s.isValid}catch{o=!1}let a,c;try{a=Te.fromISO(n,i),c=a.isValid}catch{c=!1}if(o&&c)return $i.fromDateTimes(s,a);if(o){const d=_t.fromISO(n,i);if(d.isValid)return $i.after(s,d)}else if(c){const d=_t.fromISO(r,i);if(d.isValid)return $i.before(a,d)}}return $i.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?$i.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(k0).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;r.push($i.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const i=_t.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(c=>c*n));s=+a>+this.e?this.e:a,o.push($i.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:$i.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return $i.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((c,d)=>c.time-d.time);for(const c of a)r+=c.type==="s"?1:-1,r===1?i=c.time:(i&&+i!=+c.time&&n.push($i.fromDateTimes(i,c.time)),i=null);return $i.merge(n)}difference(...e){return $i.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ef}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=v$,i={}){return this.isValid?Dr.create(this.s.loc.clone(i),e).formatInterval(this):ef}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ef}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ef}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ef}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:ef}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):_t.invalid(this.invalidReason)}mapEndpoints(e){return $i.fromDateTimes(e(this.s),e(this.e))}}class K1{static hasDST(e=Ei.defaultZone){const i=Te.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Hn.isValidZone(e)}static normalizeZone(e){return bu(e,Ei.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Ct.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Ct.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Ct.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Ct.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Ct.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||Ct.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||Ct.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Ct.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Ct.create(i,null,"gregory").eras(e)}static features(){return{relative:$7(),localeWeek:T7()}}}function W5(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(_t.fromMillis(r).as("days"))}function Goe(t,e,i){const r=[["years",(c,d)=>d.year-c.year],["quarters",(c,d)=>d.quarter-c.quarter+(d.year-c.year)*4],["months",(c,d)=>d.month-c.month+(d.year-c.year)*12],["weeks",(c,d)=>{const h=W5(c,d);return(h-h%7)/7}],["days",W5]],n={},s=t;let o,a;for(const[c,d]of r)i.indexOf(c)>=0&&(o=c,n[c]=d(t,e),a=s.plus(n),a>e?(n[c]--,t=s.plus(n),t>e&&(a=t,n[c]--,t=s.plus(n))):t=a);return[t,n,a,o]}function Hoe(t,e,i,r){let[n,s,o,a]=Goe(t,e,i);const c=e-n,d=i.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);d.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+c/(o-n)));const h=_t.fromObject(s,r);return d.length>0?_t.fromMillis(c,r).shiftTo(...d).plus(h):h}const Woe="missing Intl.DateTimeFormat.formatToParts support";function $t(t,e=i=>i){return{regex:t,deser:([i])=>e(Nse(i))}}const Zoe="",q7=`[ ${Zoe}]`,B7=new RegExp(q7,"g");function Joe(t){return t.replace(/\./g,"\\.?").replace(B7,q7)}function Z5(t){return t.replace(/\./g,"").replace(B7," ").toLowerCase()}function mo(t,e){return t===null?null:{regex:RegExp(t.map(Joe).join("|")),deser:([i])=>t.findIndex(r=>Z5(i)===Z5(r))+e}}function J5(t,e){return{regex:t,deser:([,i,r])=>Ck(i,r),groups:e}}function Q1(t){return{regex:t,deser:([e])=>e}}function Yoe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Koe(t,e){const i=fo(e),r=fo(e,"{2}"),n=fo(e,"{3}"),s=fo(e,"{4}"),o=fo(e,"{6}"),a=fo(e,"{1,2}"),c=fo(e,"{1,3}"),d=fo(e,"{1,6}"),h=fo(e,"{1,9}"),f=fo(e,"{2,4}"),m=fo(e,"{4,6}"),v=$=>({regex:RegExp(Yoe($.val)),deser:([T])=>T,literal:!0}),x=($=>{if(t.literal)return v($);switch($.val){case"G":return mo(e.eras("short"),0);case"GG":return mo(e.eras("long"),0);case"y":return $t(d);case"yy":return $t(f,HM);case"yyyy":return $t(s);case"yyyyy":return $t(m);case"yyyyyy":return $t(o);case"M":return $t(a);case"MM":return $t(r);case"MMM":return mo(e.months("short",!0),1);case"MMMM":return mo(e.months("long",!0),1);case"L":return $t(a);case"LL":return $t(r);case"LLL":return mo(e.months("short",!1),1);case"LLLL":return mo(e.months("long",!1),1);case"d":return $t(a);case"dd":return $t(r);case"o":return $t(c);case"ooo":return $t(n);case"HH":return $t(r);case"H":return $t(a);case"hh":return $t(r);case"h":return $t(a);case"mm":return $t(r);case"m":return $t(a);case"q":return $t(a);case"qq":return $t(r);case"s":return $t(a);case"ss":return $t(r);case"S":return $t(c);case"SSS":return $t(n);case"u":return Q1(h);case"uu":return Q1(a);case"uuu":return $t(i);case"a":return mo(e.meridiems(),0);case"kkkk":return $t(s);case"kk":return $t(f,HM);case"W":return $t(a);case"WW":return $t(r);case"E":case"c":return $t(i);case"EEE":return mo(e.weekdays("short",!1),1);case"EEEE":return mo(e.weekdays("long",!1),1);case"ccc":return mo(e.weekdays("short",!0),1);case"cccc":return mo(e.weekdays("long",!0),1);case"Z":case"ZZ":return J5(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return J5(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Q1(/[a-z_+-/]{1,256}?/i);case" ":return Q1(/[^\S\n\r]/);default:return v($)}})(t)||{invalidReason:Woe};return x.token=t,x}const Qoe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Xoe(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const c=/^\s+$/.test(n);return{literal:!c,val:c?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=Qoe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function eae(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function tae(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const o in i)if(oy(i,o)){const a=i[o],c=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+c))),s+=c}return[r,n]}else return[r,{}]}function iae(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return rt(t.z)||(i=Hn.create(t.z)),rt(t.Z)||(i||(i=new Di(t.Z)),r=t.Z),rt(t.q)||(t.M=(t.q-1)*3+1),rt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),rt(t.u)||(t.S=vR(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,r]}let kE=null;function rae(){return kE||(kE=Te.fromMillis(1555555555555)),kE}function nae(t,e){if(t.literal)return t;const i=Dr.macroTokenToFormatOpts(t.val),r=Z7(i,e);return r==null||r.includes(void 0)?t:r}function G7(t,e){return Array.prototype.concat(...t.map(i=>nae(i,e)))}class H7{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=G7(Dr.parseFormat(i),e),this.units=this.tokens.map(r=>Koe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=eae(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,r]=tae(e,this.regex,this.handlers),[n,s,o]=r?iae(r):[null,null,void 0];if(oy(r,"a")&&oy(r,"H"))throw new Cm("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function W7(t,e,i){return new H7(t,i).explainFromTokens(e)}function sae(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=W7(t,e,i);return[r,n,s,o]}function Z7(t,e){if(!t)return null;const r=Dr.create(e,t).dtFormatter(rae()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>Xoe(o,t,s))}const IE="Invalid DateTime",Y5=864e13;function rv(t){return new Jo("unsupported zone",`the zone "${t.name}" is not supported`)}function EE(t){return t.weekData===null&&(t.weekData=b$(t.c)),t.weekData}function ME(t){return t.localWeekData===null&&(t.localWeekData=b$(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Ed(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Te({...i,...e,old:i})}function J7(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function X1(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function _x(t,e,i){return J7(Ak(t),e,i)}function K5(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,w$(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=_t.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Ak(s);let[c,d]=J7(a,i,t.zone);return o!==0&&(c+=o,d=t.zone.offset(c)),{ts:c,o:d}}function tf(t,e,i,r,n,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const c=e||a,d=Te.fromObject(t,{...i,zone:c,specificOffset:s});return o?d:d.setZone(a)}else return Te.invalid(new Jo("unparsable",`the input "${n}" can't be parsed as ${r}`))}function e_(t,e,i=!0){return t.isValid?Dr.create(Ct.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function AE(t,e,i){const r=t.c.year>9999||t.c.year<0;let n="";if(r&&t.c.year>=0&&(n+="+"),n+=Gi(t.c.year,r?6:4),i==="year")return n;if(e){if(n+="-",n+=Gi(t.c.month),i==="month")return n;n+="-"}else if(n+=Gi(t.c.month),i==="month")return n;return n+=Gi(t.c.day),n}function Q5(t,e,i,r,n,s,o){let a=!i||t.c.millisecond!==0||t.c.second!==0,c="";switch(o){case"day":case"month":case"year":break;default:if(c+=Gi(t.c.hour),o==="hour")break;if(e){if(c+=":",c+=Gi(t.c.minute),o==="minute")break;a&&(c+=":",c+=Gi(t.c.second))}else{if(c+=Gi(t.c.minute),o==="minute")break;a&&(c+=Gi(t.c.second))}if(o==="second")break;a&&(!r||t.c.millisecond!==0)&&(c+=".",c+=Gi(t.c.millisecond,3))}return n&&(t.isOffsetFixed&&t.offset===0&&!s?c+="Z":t.o<0?(c+="-",c+=Gi(Math.trunc(-t.o/60)),c+=":",c+=Gi(Math.trunc(-t.o%60))):(c+="+",c+=Gi(Math.trunc(t.o/60)),c+=":",c+=Gi(Math.trunc(t.o%60)))),s&&(c+="["+t.zone.ianaName+"]"),c}const Y7={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},oae={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},aae={ordinal:1,hour:0,minute:0,second:0,millisecond:0},xx=["year","month","day","hour","minute","second","millisecond"],lae=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],cae=["year","ordinal","hour","minute","second","millisecond"];function Sx(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Y9(t);return e}function X5(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Sx(t)}}function uae(t){if(nv===void 0&&(nv=Ei.now()),t.type!=="iana")return t.offset(nv);const e=t.name;let i=WM.get(e);return i===void 0&&(i=t.offset(nv),WM.set(e,i)),i}function eD(t,e){const i=bu(e.zone,Ei.defaultZone);if(!i.isValid)return Te.invalid(rv(i));const r=Ct.fromObject(e);let n,s;if(rt(t.year))n=Ei.now();else{for(const c of xx)rt(t[c])&&(t[c]=Y7[c]);const o=x7(t)||S7(t);if(o)return Te.invalid(o);const a=uae(i);[n,s]=_x(t,a,i)}return new Te({ts:n,zone:i,loc:r,o:s})}function tD(t,e,i){const r=rt(i.round)?!0:i.round,n=rt(i.rounding)?"trunc":i.rounding,s=(a,c)=>(a=bR(a,r||i.calendary?0:2,i.calendary?"round":n),e.loc.clone(i).relFormatter(i).format(a,c)),o=a=>i.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(i.unit)return s(o(i.unit),i.unit);for(const a of i.units){const c=o(a);if(Math.abs(c)>=1)return s(c,a)}return s(t>e?-0:0,i.units[i.units.length-1])}function iD(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let nv;const WM=new Map;class Te{constructor(e){const i=e.zone||Ei.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Jo("invalid input"):null)||(i.isValid?null:rv(i));this.ts=rt(e.ts)?Ei.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const a=Vu(e.o)&&!e.old?e.o:i.offset(this.ts);n=X1(this.ts,a),r=Number.isNaN(n.year)?new Jo("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=i,this.loc=e.loc||Ct.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Te({})}static local(){const[e,i]=iD(arguments),[r,n,s,o,a,c,d]=i;return eD({year:r,month:n,day:s,hour:o,minute:a,second:c,millisecond:d},e)}static utc(){const[e,i]=iD(arguments),[r,n,s,o,a,c,d]=i;return e.zone=Di.utcInstance,eD({year:r,month:n,day:s,hour:o,minute:a,second:c,millisecond:d},e)}static fromJSDate(e,i={}){const r=Use(e)?e.valueOf():NaN;if(Number.isNaN(r))return Te.invalid("invalid input");const n=bu(i.zone,Ei.defaultZone);return n.isValid?new Te({ts:r,zone:n,loc:Ct.fromObject(i)}):Te.invalid(rv(n))}static fromMillis(e,i={}){if(Vu(e))return e<-Y5||e>Y5?Te.invalid("Timestamp out of range"):new Te({ts:e,zone:bu(i.zone,Ei.defaultZone),loc:Ct.fromObject(i)});throw new Rr(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(Vu(e))return new Te({ts:e*1e3,zone:bu(i.zone,Ei.defaultZone),loc:Ct.fromObject(i)});throw new Rr("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=bu(i.zone,Ei.defaultZone);if(!r.isValid)return Te.invalid(rv(r));const n=Ct.fromObject(i),s=_$(e,X5),{minDaysInFirstWeek:o,startOfWeek:a}=z5(s,n),c=Ei.now(),d=rt(i.specificOffset)?r.offset(c):i.specificOffset,h=!rt(s.ordinal),f=!rt(s.year),m=!rt(s.month)||!rt(s.day),v=f||m,w=s.weekYear||s.weekNumber;if((v||h)&&w)throw new Cm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&h)throw new Cm("Can't mix ordinal dates with month/day");const x=w||s.weekday&&!v;let $,T,C=X1(c,d);x?($=lae,T=oae,C=b$(C,o,a)):h?($=cae,T=aae,C=TE(C)):($=xx,T=Y7);let P=!1;for(const ne of $){const ue=s[ne];rt(ue)?P?s[ne]=T[ne]:s[ne]=C[ne]:P=!0}const L=x?zse(s,o,a):h?jse(s):x7(s),D=L||S7(s);if(D)return Te.invalid(D);const q=x?N5(s,o,a):h?D5(s):s,[F,ee]=_x(q,d,r),ae=new Te({ts:F,zone:r,o:ee,loc:n});return s.weekday&&v&&e.weekday!==ae.weekday?Te.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${ae.toISO()}`):ae.isValid?ae:Te.invalid(ae.invalid)}static fromISO(e,i={}){const[r,n]=Coe(e);return tf(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=Ooe(e);return tf(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=Poe(e);return tf(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(rt(e)||rt(i))throw new Rr("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=Ct.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,c,d,h]=sae(o,e,i);return h?Te.invalid(h):tf(a,c,r,`format ${i}`,e,d)}static fromString(e,i,r={}){return Te.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=joe(e);return tf(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Rr("need to specify a reason the DateTime is invalid");const r=e instanceof Jo?e:new Jo(e,i);if(Ei.throwOnInvalid)throw new hse(r);return new Te({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=Z7(e,Ct.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return G7(Dr.parseFormat(e),Ct.fromObject(i)).map(n=>n.val).join("")}static resetCache(){nv=void 0,WM.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?EE(this).weekYear:NaN}get weekNumber(){return this.isValid?EE(this).weekNumber:NaN}get weekday(){return this.isValid?EE(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?ME(this).weekday:NaN}get localWeekNumber(){return this.isValid?ME(this).weekNumber:NaN}get localWeekYear(){return this.isValid?ME(this).weekYear:NaN}get ordinal(){return this.isValid?TE(this.c).ordinal:NaN}get monthShort(){return this.isValid?K1.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?K1.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?K1.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?K1.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=Ak(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*i),a=this.zone.offset(r-s*i);if(o===a)return[this];const c=r-o*i,d=r-a*i,h=X1(c,o),f=X1(d,a);return h.hour===f.hour&&h.minute===f.minute&&h.second===f.second&&h.millisecond===f.millisecond?[Ed(this,{ts:c}),Ed(this,{ts:d})]:[this]}get isInLeapYear(){return Kw(this.year)}get daysInMonth(){return w$(this.year,this.month)}get daysInYear(){return this.isValid?Gm(this.year):NaN}get weeksInWeekYear(){return this.isValid?Kb(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Kb(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=Dr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Di.instance(e),i)}toLocal(){return this.setZone(Ei.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=bu(e,Ei.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),o=this.toObject();[n]=_x(o,s,e)}return Ed(this,{ts:n,zone:e})}else return Te.invalid(rv(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Ed(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=_$(e,X5),{minDaysInFirstWeek:r,startOfWeek:n}=z5(i,this.loc),s=!rt(i.weekYear)||!rt(i.weekNumber)||!rt(i.weekday),o=!rt(i.ordinal),a=!rt(i.year),c=!rt(i.month)||!rt(i.day),d=a||c,h=i.weekYear||i.weekNumber;if((d||o)&&h)throw new Cm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Cm("Can't mix ordinal dates with month/day");let f;s?f=N5({...b$(this.c,r,n),...i},r,n):rt(i.ordinal)?(f={...this.toObject(),...i},rt(i.day)&&(f.day=Math.min(w$(f.year,f.month),f.day))):f=D5({...TE(this.c),...i});const[m,v]=_x(f,this.o,this.zone);return Ed(this,{ts:m,o:v})}plus(e){if(!this.isValid)return this;const i=_t.fromDurationLike(e);return Ed(this,K5(this,i))}minus(e){if(!this.isValid)return this;const i=_t.fromDurationLike(e).negate();return Ed(this,K5(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=_t.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Dr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):IE}toLocaleString(e=v$,i={}){return this.isValid?Dr.create(this.loc.clone(i),e).formatDateTime(this):IE}toLocaleParts(e={}){return this.isValid?Dr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=Sx(o);const a=e==="extended";let c=AE(this,a,o);return xx.indexOf(o)>=3&&(c+="T"),c+=Q5(this,a,i,r,n,s,o),c}toISODate({format:e="extended",precision:i="day"}={}){return this.isValid?AE(this,e==="extended",Sx(i)):null}toISOWeekDate(){return e_(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=Sx(a),(n&&xx.indexOf(a)>=3?"T":"")+Q5(this,o==="extended",i,e,r,s,a)):null}toRFC2822(){return e_(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return e_(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?AE(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),e_(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():IE}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return _t.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=qse(i).map(_t.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,c=o?e:this,d=Hoe(a,c,s,n);return o?d.negate():d}diffNow(e="milliseconds",i={}){return this.diff(Te.now(),e,i)}until(e){return this.isValid?$i.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||Te.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),tD(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?tD(e.base||Te.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Te.isDateTime))throw new Rr("min requires all arguments be DateTimes");return j5(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(Te.isDateTime))throw new Rr("max requires all arguments be DateTimes");return j5(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=Ct.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return W7(o,e,i)}static fromStringExplain(e,i,r={}){return Te.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:n=null}=i,s=Ct.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new H7(s,e)}static fromFormatParser(e,i,r={}){if(rt(e)||rt(i))throw new Rr("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=r,o=Ct.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(i.locale))throw new Rr(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:c,specificOffset:d,invalidReason:h}=i.explainFromTokens(e);return h?Te.invalid(h):tf(a,c,r,`format ${i.format}`,e,d)}static get DATE_SHORT(){return v$}static get DATE_MED(){return K9}static get DATE_MED_WITH_WEEKDAY(){return gse}static get DATE_FULL(){return Q9}static get DATE_HUGE(){return X9}static get TIME_SIMPLE(){return e7}static get TIME_WITH_SECONDS(){return t7}static get TIME_WITH_SHORT_OFFSET(){return i7}static get TIME_WITH_LONG_OFFSET(){return r7}static get TIME_24_SIMPLE(){return n7}static get TIME_24_WITH_SECONDS(){return s7}static get TIME_24_WITH_SHORT_OFFSET(){return o7}static get TIME_24_WITH_LONG_OFFSET(){return a7}static get DATETIME_SHORT(){return l7}static get DATETIME_SHORT_WITH_SECONDS(){return c7}static get DATETIME_MED(){return u7}static get DATETIME_MED_WITH_SECONDS(){return d7}static get DATETIME_MED_WITH_WEEKDAY(){return yse}static get DATETIME_FULL(){return p7}static get DATETIME_FULL_WITH_SECONDS(){return h7}static get DATETIME_HUGE(){return f7}static get DATETIME_HUGE_WITH_SECONDS(){return m7}}function k0(t){if(Te.isDateTime(t))return t;if(t&&t.valueOf&&Vu(t.valueOf()))return Te.fromJSDate(t);if(t&&typeof t=="object")return Te.fromObject(t);throw new Rr(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const dae="HH:mm",pae="HH:mm:ss",hae="HH:mm:ss.SSS",fae=[hae,pae,dae,"TT"],mae="yyyy-MM-dd";function rD(t){if(!t||!Yw(t))return null;const e=Te.fromFormat(t,mae);return e.isValid?e:null}function nD(t){return t&&Yw(t)?Yie(fae,e=>{const i=Te.fromFormat(t,e);return i.isValid?i:null})??null:null}function sD(t){if(!t||!Yw(t))return null;const e=Te.fromISO(t);return e.isValid?e:null}const K7=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function gae(t){return t!=null&&K7.has(t.type)}function Q7(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function X7(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function eq(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const yae=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);oR(K7,yae);function EDe(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=gae(t);return Q7(t)||eq(t)||X7(t)?{...vae(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function vae(t,e,i){var r,n,s,o,a,c;return Q7(t)?{min:(r=rD(i))==null?void 0:r.toMillis(),max:(n=rD(e))==null?void 0:n.toMillis(),rawMin:i,rawMax:e}:eq(t)?{min:(s=nD(i))==null?void 0:s.toMillis(),max:(o=nD(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:X7(t)?{min:(a=sD(i))==null?void 0:a.toMillis(),max:(c=sD(e))==null?void 0:c.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function bae(t){if(!t)return;const e=t.match(wae);return e!=null&&e.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const wae=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function _ae(t){var e,i;return((i=(e=t.match(xae))==null?void 0:e[1])==null?void 0:i.replaceAll("\\'","'"))??null}const xae=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let CE;function ph(){return CE||(CE=(async()=>{const[t,e,i]=await Promise.all([Q(()=>import("./arcadeUtils-Y4r_h9jI.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,16,17,18,19,20]),import.meta.url),Q(()=>import("./batchExec-QNVzSxZ_.js"),__vite__mapDeps([21,22]),import.meta.url),Q(()=>import("./aiServices-nbIINXcF.js").then(r=>r.a),__vite__mapDeps([14,5,6,7,8,15,4]),import.meta.url)]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),CE}const Sae=/^([0-9_])/,$ae=/[^a-z0-9_\u0080-\uffff]+/gi;function Tae(t){return t==null?null:t.trim().replaceAll($ae,"_").replace(Sae,"F$1")||null}const kae=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Iae=["field","normalizationField"];function oD(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(aD(kae,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)aD(Iae,r,e)}}function aD(t,e,i){if(t)for(const r of t){const n=qw(r,e),s=n&&typeof n!="function"&&i.get(n);s&&Ai(r,s.name,e)}}function tq(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const OE=new Set;function Pk(t,e){return t&&e?(OE.clear(),hh(OE,t,e),Array.from(OE).sort()):[]}function hh(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)Br(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function Br(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function MDe(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function ADe(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=Pk(t,e);return r.length/t.fields.length>=i?["*"]:r}async function Gr(t,e,i,r){var s;if(!r)return;const n=bae(r);if(n)Br(t,e,n);else{const{arcadeUtils:o}=await ph(),a=o.extractFieldNames(r,(i==null?void 0:i.partitions)??((s=e==null?void 0:e.fields)==null?void 0:s.map(c=>c.name)));for(const c of a)Br(t,(i==null?void 0:i.index)??e,c)}}async function SR(t,e,i){if(i&&i!=="1=1"){const r=await J9(i,e);if(!r.isStandardized)throw new j("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});hh(t,e,r.fieldNames)}}function Eae({displayField:t,fields:e}){return t||(e!=null&&e.length?Mae(e):null)}function Mae(t){return PE(t,"name-or-title")||PE(t,"unique-identifier")||PE(t,"type-or-category")||Aae(t)}function Aae(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function PE(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function CDe(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function Cae(t,e,i){i.onStatisticExpression?Gr(t,e,null,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function ODe(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(iq(t,e,n)),i.fields&&r.push(...i.fields.map(async s=>Cae(t,e.fieldsIndex,s))),await Promise.all(r)}async function PDe(t,e){var s,o,a;const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const n=[(s=r.latestObservations.renderer)==null?void 0:s.collectRequiredFields(t,i),(o=r.previousObservations.renderer)==null?void 0:o.collectRequiredFields(t,i),(a=r.trackLines.renderer)==null?void 0:a.collectRequiredFields(t,i)];r.popupTemplate&&n.push(iq(t,e,r.popupTemplate));for(const c of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(c)for(const d of c)n.push(oq(t,i,d));await Promise.all(n)}async function iq(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(s=>Gr(t,e.fieldsIndex,null,s.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(Gr(t,e.fieldsIndex,null,s.expressionInfo.expression));await Promise.all(r)}async function RDe(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&hh(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&hh(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await SR(t,e.fieldsIndex,i.where))}async function LDe(t,e,i){e&&i&&await Promise.all(i.map(r=>Oae(t,e,r)))}async function Oae(t,e,i){e&&i&&(i.valueExpression?await Gr(t,e.fieldsIndex,null,i.valueExpression):i.field&&Br(t,e.fieldsIndex,i.field))}function FDe(t){return t?Pk(t.fieldsIndex,rq(t)):[]}function Pae(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?Pk(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function NDe(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(n=>SR(t,r,n.where)))}const Rae=new Set(["oid","global-id","guid"]),Lae=new Set(["oid","global-id"]),Fae=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function Nae(t){const e=new Set;nq(t).forEach(r=>e.add(r)),Pae(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function rq(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function nq(t){return rq(t).map(e=>e.toLowerCase())}function sq(t,e){var i;return t.editable&&!Rae.has(t.type)&&!nq(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function Dae(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||Nae(e).includes(i)||Lae.has(t.type)||Fae.some(n=>n.test(i)))}async function DDe(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i!=null&&i.length&&await Promise.all(i.map(n=>oq(t,r,n)))}async function oq(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Gr(t,e,null,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Br(t,e,o.slice(1,-1))})}await SR(t,e,n)}function zae(t){const e=t.defaultValue;return e!==void 0&&lq(t,e)?e:t.nullable?null:void 0}function zDe(t){const e=typeof t=="string"?{type:t}:t;return uq(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function aq(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function jae(t){return t===null||aq(t)}function Vae(t){return t===null||Number.isInteger(t)}function Uae(){return!0}function lq(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?Vae:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?jae:aq;break;case"string":case"esriFieldTypeString":i=t.nullable?lse:Yw;break;default:i=Uae}return arguments.length===1?i:i(e)}const qae=["integer","small-integer","big-integer","long"],Bae=["single","double"],Gae=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],Hae=["esriFieldTypeSingle","esriFieldTypeDouble"],cq=new Set([...qae,...Gae]),Wae=new Set([...Bae,...Hae]),Zae=oR(cq,Wae);function Jae(t){return t!=null&&cq.has(t.type)}function $R(t){return t!=null&&Zae.has(t.type)}function uq(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function dq(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function Yae(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Kae(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function pq(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function lD(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function cD(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function jDe(t,e){return Qae(t,e)===null}function VDe(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Qae(t,e){return t==null||t.nullable&&e===null?null:lq(t,e)?$R(t)&&!Xae(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function Xae(t,e){const i=typeof t=="string"?hq(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function hq(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return ele;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return tle;case"esriFieldTypeBigInteger":case"big-integer":return ile;case"esriFieldTypeSingle":case"single":return rle;case"esriFieldTypeDouble":case"double":return nle}}const ele={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},tle={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},ile={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},t_=(2-2**-23)*2**127,rle={min:-t_,max:t_,isInteger:!1,rawMin:-t_,rawMax:t_},nle={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function UDe(t,e,i){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:n}=hq(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function sle(t,e){return!ole(t,e,null)}function ole(t,e,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!r.has(s)&&(n=!0,i==null))break;return n}function ale(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function TR(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let $x=class extends Z{constructor(e){super(e),this.type=null}};l([u({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],$x.prototype,"type",void 0),$x=l([E("esri.popup.content.Content")],$x);const Tc=$x,i_=new Ze({asc:"ascending",desc:"descending"});let sv=class extends Pe(Z){constructor(e){super(e),this.field=null,this.order="ascending"}};l([u({type:String,json:{write:!0}})],sv.prototype,"field",void 0),l([u({type:i_.apiValues,json:{type:i_.jsonValues,read:i_.read,write:i_.write}})],sv.prototype,"order",void 0),sv=l([E("esri.popup.support.AttachmentsOrderByInfo")],sv);const lle=sv;let ua=class extends Pe(Tc){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};l([u({type:[String],json:{write:!0}})],ua.prototype,"attachmentKeywords",void 0),l([u({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],ua.prototype,"attachmentTypes",void 0),l([u({type:String,json:{write:!0}})],ua.prototype,"description",void 0),l([u({type:["auto","preview","list"],json:{write:!0}})],ua.prototype,"displayType",void 0),l([u({type:[lle],json:{write:!0}})],ua.prototype,"orderByFields",void 0),l([u({type:String,json:{write:!0}})],ua.prototype,"title",void 0),l([u({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ua.prototype,"type",void 0),ua=l([E("esri.popup.content.AttachmentsContent")],ua);const fq=ua;var ZM;let Dd=ZM=class extends Tc{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new ZM({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?V(this.outFields):null})}};l([u()],Dd.prototype,"creator",void 0),l([u()],Dd.prototype,"destroyer",void 0),l([u()],Dd.prototype,"outFields",void 0),l([u({type:["custom"],readOnly:!0})],Dd.prototype,"type",void 0),Dd=ZM=l([E("esri.popup.content.CustomContent")],Dd);const cle=Dd;var JM;let If=JM=class extends Z{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new JM({title:this.title,expression:this.expression})}};l([u({type:String,json:{write:!0}})],If.prototype,"title",void 0),l([u({type:String,json:{write:!0}})],If.prototype,"expression",void 0),l([u({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],If.prototype,"returnType",void 0),If=JM=l([E("esri.popup.ElementExpressionInfo")],If);const ule=If;var YM;let ov=YM=class extends Tc{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new YM({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};l([u({type:ule,json:{write:!0}})],ov.prototype,"expressionInfo",void 0),l([u({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],ov.prototype,"type",void 0),ov=YM=l([E("esri.popup.content.ExpressionContent")],ov);const dle=ov;let Tx=class extends Pe(Z){constructor(e){super(e),this.type=null}};l([Me({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Tx.prototype,"type",void 0),Tx=l([wi("esri.layers.support.FieldFormat")],Tx);const kR=Tx,mq="auto";let vl=class extends kR{constructor(e){super(e),this.dateStyle=null,this.hour12=mq,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};l([Me({type:["full","long","medium","short"],json:{write:!0}})],vl.prototype,"dateStyle",void 0),l([Me({type:["always","auto","never"],nonNullable:!0,json:{default:mq,write:!0}})],vl.prototype,"hour12",void 0),l([Me({type:["long","short"],json:{write:!0}})],vl.prototype,"month",void 0),l([Me({type:["full","long","medium","short"],json:{write:!0}})],vl.prototype,"timeStyle",void 0),l([Me({type:["date-time"]})],vl.prototype,"type",void 0),l([Me({type:["numeric"],json:{write:!0}})],vl.prototype,"year",void 0),vl=l([wi("esri.layers.support.DateTimeFieldFormat")],vl);const qp=vl,uD={min:0,max:20},gq=2,yq=0,vq="decimal",bq="auto";let Zc=class extends kR{constructor(e){super(e),this.maximumFractionDigits=gq,this.minimumFractionDigits=yq,this.style=vq,this.type="number",this.useGrouping=bq}};l([Me({type:nt,nonNullable:!0,range:uD,json:{default:gq,write:!0}})],Zc.prototype,"maximumFractionDigits",void 0),l([Me({type:nt,nonNullable:!0,range:uD,json:{default:yq,write:!0}})],Zc.prototype,"minimumFractionDigits",void 0),l([Me({type:["decimal"],nonNullable:!0,json:{default:vq,write:!0}})],Zc.prototype,"style",void 0),l([Me({type:["number"]})],Zc.prototype,"type",void 0),l([Me({type:["always","auto","never"],nonNullable:!0,json:{default:bq,write:!0}})],Zc.prototype,"useGrouping",void 0),Zc=l([wi("esri.layers.support.NumberFieldFormat")],Zc);const x$=Zc;let lb;var W8;const ple=(W8=globalThis.esriConfig)==null?void 0:W8.locale;var Z8;const cb=(Z8=globalThis.document)==null?void 0:Z8.documentElement;function wq(){var i;const t=cb==null?void 0:cb.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return ple??t??e??"en"}function eo(){return lb===void 0&&(lb=wq()),lb}const hle=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function IR(t=eo()){var e;return(e=xq(t))==null?void 0:e.language}function _q(t=eo()){const e=xq(t);return e!=null&&e.language&&(e!=null&&e.extlang)?t.replace(`${e.language}-`,""):t}function xq(t=eo()){var e;return(e=hle.exec(t))==null?void 0:e.groups}const kx=[];function fle(t){return kx.push(t),ct(()=>{kx.splice(kx.indexOf(t),1)})}const Ix=[];function ER(t){return Ix.push(t),ct(()=>Ix.splice(Ix.indexOf(t),1))}function dD(){const t=wq();lb!==t&&([...Ix].forEach(e=>e(t)),lb=t,[...kx].forEach(e=>e(t)))}var J8;(J8=globalThis.addEventListener)==null||J8.call(globalThis,"languagechange",dD),cb&&new MutationObserver(()=>{dD()}).observe(cb,{attributeFilter:["lang"]});const ro="system",Xu="unknown",ed="UTC",mle=Intl.DateTimeFormat().resolvedOptions().timeZone,pD=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]),gle="shortOffset";function yle(t){return"timeZoneIANA"in t}function vle(t){return t.startsWith("UTC")}function S$(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?Ex(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?ble(i):null}}}}}function Ex(t,e=ro){return t?yle(t)?t.timeZoneIANA:wle(t,e):e}function ble(t){return{timeZoneIANA:t}}function wle(t,e=ro){if(!t||!pD.has(t.timeZone))return e;const i=pD.get(t.timeZone);return vle(t.timeZone)||t.respectsDaylightSaving?i:_le(i)}function _le(t){const e=Te.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Di.instance(-i).formatOffset(0,"narrow")}`}function JDe(t,e,i,r,n){if(e&&n==="date")return{timeZone:ed,timeZoneName:void 0};const s=r.hour,o=i===Xu;return{timeZone:o?n==="timestamp-offset"?void 0:t??ed:i,timeZoneName:o&&s?gle:void 0}}function xle(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===ro||t===Xu||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const Sle={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},$le={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},Sq={timeZone:ed},la={year:"numeric",month:"numeric",day:"numeric"},I0={year:"numeric",month:"long",day:"numeric"},E0={year:"numeric",month:"short",day:"numeric"},M0={year:"numeric",month:"long",weekday:"long",day:"numeric"},du={hour:"numeric",minute:"numeric"},zd={...du,second:"numeric"},$q={hourCycle:"h23"},A0={...du,...$q},C0={...zd,...$q},MR={"short-date":la,"short-date-short-time":{...la,...du},"short-date-short-time-24":{...la,...A0},"short-date-long-time":{...la,...zd},"short-date-long-time-24":{...la,...C0},"short-date-le":la,"short-date-le-short-time":{...la,...du},"short-date-le-short-time-24":{...la,...A0},"short-date-le-long-time":{...la,...zd},"short-date-le-long-time-24":{...la,...C0},"long-month-day-year":I0,"long-month-day-year-short-time":{...I0,...du},"long-month-day-year-short-time-24":{...I0,...A0},"long-month-day-year-long-time":{...I0,...zd},"long-month-day-year-long-time-24":{...I0,...C0},"day-short-month-year":E0,"day-short-month-year-short-time":{...E0,...du},"day-short-month-year-short-time-24":{...E0,...A0},"day-short-month-year-long-time":{...E0,...zd},"day-short-month-year-long-time-24":{...E0,...C0},"long-date":M0,"long-date-short-time":{...M0,...du},"long-date-short-time-24":{...M0,...A0},"long-date-long-time":{...M0,...zd},"long-date-long-time-24":{...M0,...C0},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":du,"long-time":zd},Tle=Wi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Tq={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},kle=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2));var Y8;const Ile=(Y8=kle.find(({type:t})=>t==="month"))==null?void 0:Y8.value.toLowerCase();function kq(){const t=IR();return(t&&Tq[t])??_q()}Ile!=="mart"&&(Tq.bs="sr-Latn-CS");let KM=new WeakMap;const Rk=MR["short-date-short-time"];MR["short-date"];function Ele(t){let e=KM.get(t);if(!e){const i=kq(),r=AR(t.timeZone??ro),n={...t,timeZone:r};e=new Intl.DateTimeFormat(i,n),KM.set(t,e)}return e}function YDe(t){return MR[t]}function KDe(t){const{dateStyle:e,timeStyle:i,hour12:r,year:n,month:s}=t,o={};return e?o.dateStyle=e:n&&(o.year=n,o.month=s||void 0),i&&!o.year&&(o.timeStyle=i,o.hour12=r==="auto"?void 0:r==="always"),o}function fh(t,e=Rk){return Ele(e).format(t)}function QDe(t,e=Rk){return fh(new Date(t),{...e,...Sq,...$le})}function XDe(t,e=Rk){return fh(new Date(`1970-01-01T${t}Z`),{...e,...Sq,...Sle})}function eze(t,e=Rk){if(e.timeZone)return fh(new Date(t),e);const i=Te.fromISO(t,{setZone:!0}),r=i.offset===0?ed:e.timeZone,n={...e,timeZone:r};return i.toLocaleString(n,{locale:kq()})}function AR(t){switch(t){case ro:return mle;case Xu:return ed;default:return t}}ER(()=>{KM=new WeakMap});let Ef=class extends Pe(Z){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};l([Ie(Tle)],Ef.prototype,"dateFormat",void 0),l([u({type:Boolean,json:{write:!0}})],Ef.prototype,"digitSeparator",void 0),l([u({type:nt,json:{write:!0}})],Ef.prototype,"places",void 0),Ef=l([E("esri.popup.support.FieldInfoFormat")],Ef);const vc=Ef,Iq={base:kR,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":qp,number:x$}};function Mle(t,e){const{format:i}=t;return e&&Ph(e)?i?Eq(i,e):ub(e,{hour12:"always",useGrouping:"always"}):null}function Eq(t,e){const{dateFormat:i}=t;if(!e)return i?fD(t):hD(t);if(!Ph(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return Mq(t);case"single":case"double":return hD(t);case"date":case"timestamp-offset":return i?fD(t):ub(e,r);case"date-only":return i?Ale(t):ub(e);case"time-only":return i?Cle(t):ub(e,r)}}function Ph(t){return $R(t)||dq(t)||Yae(t)||pq(t)||Kae(t)}function Mq(t){return new x$({useGrouping:t.digitSeparator?"always":"never"})}function hD(t){const e=Mq(t),{places:i}=t;return e.minimumFractionDigits=i??0,e.maximumFractionDigits=i??2,e}function fD(t){return new qp({dateStyle:Aq(t),year:Rq(t),month:Oq(t),timeStyle:Pq(t),hour12:Cq(t)})}function Ale(t){return new qp({dateStyle:Aq(t),year:Rq(t),month:Oq(t)})}function Cle(t){return new qp({timeStyle:Pq(t),hour12:Cq(t)})}function Aq(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function Cq(t){var e;return(e=t.dateFormat)!=null&&e.endsWith("-24")?"never":"always"}function Oq(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Pq(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function Rq(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function CR(t,e){const i=t.type==="number",r=t.type==="date-time";if(!e)return i?mD(t):r?gD(t):null;if(Ph(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return i?Lq(t):null;case"single":case"double":return i?mD(t):null;case"date":case"timestamp-offset":return r?gD(t):null;case"date-only":return r?Ole(t):null;case"time-only":return r?Ple(t):null}}function Lq(t){return new vc({digitSeparator:t.useGrouping!=="never"})}function mD(t){const e=Lq(t);return e.places=t.maximumFractionDigits,e}function gD(t){let e;const i=Fq(t),r=Nq(t),n=t.hour12==="never"?"24":null,s=t.year==="numeric"?"year":null,o=Dq(t);return i&&r&&n?e=`${i}-${r}-${n}`:i&&r?e=`${i}-${r}`:i?e=i:s&&o?e=`${o}-${s}`:s&&(e=s),e?new vc({dateFormat:e}):null}function Ole(t){let e;const i=Fq(t),r=t.year==="numeric"?"year":null,n=Dq(t);return i?e=i:r&&n?e=`${n}-${r}`:r&&(e=r),e?new vc({dateFormat:e}):null}function Ple(t){let e;const i=Nq(t),r=t.hour12==="never"?"24":null;return i&&r?e=`short-date-${i}-${r}`:i&&(e=`short-date-${i}`),e?new vc({dateFormat:e}):null}function Fq(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function Nq(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function Dq(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function ub(t,e){if(!Ph(t))return;const i=(e==null?void 0:e.useGrouping)??"auto",r=(e==null?void 0:e.hour12)??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new x$({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:i});case"single":case"double":return new x$({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:i});case"date":case"timestamp-offset":return new qp({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new qp({dateStyle:"short"});case"time-only":return new qp({timeStyle:"short",hour12:r})}}let is=class extends Pe(Z){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?CR(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?Eq(e):null)}readFormat(e,i){if(!i.fieldFormat)return e?vc.fromJSON(e):null}clone(){var i,r;const e=super.clone();return e._set("format",(i=this.format)==null?void 0:i.clone()),e._set("fieldFormat",(r=this.fieldFormat)==null?void 0:r.clone()),e}};l([u({value:null,clonable:!1,types:Iq,json:{write:{overridePolicy(t,e,i){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!(i!=null&&i.writeFieldFormat)}}}}})],is.prototype,"fieldFormat",null),l([u({type:String,json:{write:!0}})],is.prototype,"fieldName",void 0),l([u({value:null,clonable:!1,type:vc,json:{write:!0}})],is.prototype,"format",null),l([oe("format")],is.prototype,"readFormat",null),l([u({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],is.prototype,"isEditable",void 0),l([u({type:String,json:{write:!0}})],is.prototype,"label",void 0),l([u({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],is.prototype,"statisticType",void 0),l([Ie(new Ze({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],is.prototype,"stringFieldOption",void 0),l([u({type:String,json:{write:!0}})],is.prototype,"tooltip",void 0),l([u({type:Boolean,json:{write:!0}})],is.prototype,"visible",void 0),is=l([E("esri.popup.FieldInfo")],is);const Lk=is;var QM;let Jc=QM=class extends Tc{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new QM(V({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([u({type:Object,json:{write:!0}})],Jc.prototype,"attributes",void 0),l([u({type:String,json:{write:!0}})],Jc.prototype,"description",void 0),l([u({type:[Lk],json:{write:!0}})],Jc.prototype,"fieldInfos",void 0),l([u({type:String,json:{write:!0}})],Jc.prototype,"title",void 0),l([u({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Jc.prototype,"type",void 0),Jc=QM=l([E("esri.popup.content.FieldsContent")],Jc);const zq=Jc;let jd=class extends Z{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};l([u({type:String,json:{write:!0}})],jd.prototype,"altText",void 0),l([u({type:String,json:{write:!0}})],jd.prototype,"caption",void 0),l([u({type:String,json:{write:!0}})],jd.prototype,"title",void 0),l([u({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],jd.prototype,"type",void 0),jd=l([E("esri.popup.content.mixins.MediaInfo")],jd);const OR=jd,$$={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function jq(t){return!!$$[t]||!!$$[t.toLowerCase()]}function PR(t){return $$[t]??$$[t.toLowerCase()]}function Rle(t){return[...PR(t)]}function RE(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function Vq(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*RE(o,s,n+1/3)),Math.round(255*RE(o,s,n)),Math.round(255*RE(o,s,n-1/3)),r]}function Lle(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let c;return s&&(c=o&r,o>>=i,a[3]=n*c/255),c=o&r,o>>=i,a[2]=n*c,c=o&r,o>>=i,a[1]=n*c,c=o&r,o>>=i,a[0]=n*c,a}function Uq(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),n=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(n+16*n)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function qq(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){if(i[0].endsWith("%")){const n=i.map(s=>2.56*parseFloat(s));return i.length===4&&(n[3]=parseFloat(i[3])),yD(n)}return yD(i.map(n=>parseFloat(n)))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return Vq(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function yD(t){return t[0]=Wm(t[0]),t[1]=Wm(t[1]),t[2]=Wm(t[2]),t[3]=t.length===4?Gq(t[3]):1,t}function Bq(t){let e=jq(t)?PR(t):null;return e??(e=qq(t)),e??(e=Uq(t)),e}function nze(t){const e=Bq(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function Gq(t){return Hq(t,0,1)}function Wm(t){return Math.round(Hq(t,0,255))}function Hq(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const Wq=2.2,Fle=1/Wq;function sze(t){return t**Wq}function oze(t){return t**Fle}const vD=new Float32Array(1);function aze(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Es(t,e,i){return Math.min(Math.max(t,e),i)}function lze(t){return!(t&t-1)}function cze(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function av(t,e,i){return t+(e-t)*i}function uze(t,e,i,r,n){return av(r,n,(t-e)/(i-e))}function e1(t){return t*Math.PI/180}function Zq(t){return 180*t/Math.PI}function dze(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function pze(t){return Math.acos(Es(t,-1,1))}function Nle(t){return Math.asin(Es(t,-1,1))}function Ss(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function Jq(t,e,i=1e-6){return!Ss(t,e,i)&&t>e}function XM(t,e,i=1e-6){return!Ss(t,e,i)&&t<e}function Dle(t,e,i=1e-6){return Ss(t,e,i)||t>e}const T$=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function eA(t){return T$.setFloat64(0,t),T$.getBigInt64(0)}function zle(t){return T$.setBigInt64(0,t),T$.getFloat64(0)}const Mx=1000000n,jle=Yq(1);function Yq(t){const e=eA(t=Math.abs(t)),i=zle(e<=Mx?Mx:e-Mx);return Math.abs(t-i)}function hze(t,e,i=jle){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&Yq(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=eA(t),n=eA(e);return r<0!=n<0?!1:!((r<n?n-r:r-n)>Mx)}function Kq(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),n=Math.abs(t),s=Math.abs(e);if(t===0||e===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function fze(t){return Qq(Math.max(-bD,Math.min(t,bD)))}function Qq(t){return vD[0]=t,vD[0]}function mze(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Ss(e,1)&&Ss(i,1)&&Ss(r,1))}function gze(t,e){return(t%e+e)%e}const bD=Qq(34028234663852886e22);function yze(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}function r_(t){return Es(lR(t),0,255)}function n_(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let Ue=class Rs{static blendColors(e,i,r,n=new Rs){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=qq(e);return r?Rs.fromArray(r,i):null}static fromHex(e,i=new Rs){const r=Uq(e);return r?Rs.fromArray(r,i):null}static fromArray(e,i=new Rs){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=Bq(e);return r?Rs.fromArray(r,i):null}static fromJSON(e){return e!=null?new Rs([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,i){return e==null?null:(i??(i=[0,0,0,0]),i[0]=e.r/255,i[1]=e.g/255,i[2]=e.b/255,i[3]=e.a!=null?e.a:1,i)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){if(typeof e=="string")Rs.fromString(e,this);else if(YP(e))Rs.fromArray(e,this);else{const i=e;this._set(i.r??0,i.g??0,i.b??0,i.a??1),e instanceof Rs||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,r=(e==null?void 0:e.digits)??6,n=r===3||r===4,s=r===4||r===8,o=`#${n_(this.r,n)}${n_(this.g,n)}${n_(this.b,n)}${s?n_(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const i=r_(this.r),r=r_(this.g),n=r_(this.b);return e===0||this.a!==1?[i,r,n,r_(255*this.a)]:[i,r,n]}clone(){return new Rs(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Wm(this.r),this.g=Wm(this.g),this.b=Wm(this.b),this.a=Gq(this.a),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};Ue.prototype.declaredClass="esri.Color";var tA;let Vd=tA=class extends Se{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new tA({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([u()],Vd.prototype,"color",void 0),l([u()],Vd.prototype,"fieldName",void 0),l([u()],Vd.prototype,"tooltip",void 0),l([u()],Vd.prototype,"value",void 0),Vd=tA=l([E("esri.popup.content.support.ChartMediaInfoValueSeries")],Vd);const Vle=Vd;var iA;let Yc=iA=class extends Z{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new iA({colors:V(this.colors),fields:V(this.fields),normalizeField:this.normalizeField,series:V(this.series),tooltipField:this.tooltipField})}};l([u({type:[Ue],json:{type:[[nt]],write:!0}})],Yc.prototype,"colors",void 0),l([u({type:[String],json:{write:{isRequired:!0}}})],Yc.prototype,"fields",void 0),l([u({type:String,json:{write:!0}})],Yc.prototype,"normalizeField",void 0),l([u({type:[Vle],json:{read:!1}})],Yc.prototype,"series",void 0),l([u({type:String,json:{write:!0}})],Yc.prototype,"tooltipField",void 0),Yc=iA=l([E("esri.popup.content.support.ChartMediaInfoValue")],Yc);const Ule=Yc;let lv=class extends OR{constructor(e){super(e),this.type=null,this.value=void 0}};l([u({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],lv.prototype,"type",void 0),l([u({type:Ule,json:{write:{isRequired:!0}}})],lv.prototype,"value",void 0),lv=l([E("esri.popup.content.mixins.ChartMediaInfo")],lv);const Fk=lv,Nk=Wi()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var rA;let Ax=rA=class extends Fk{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new rA({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};l([u({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:Nk.write,isRequired:!0}}})],Ax.prototype,"type",void 0),Ax=rA=l([E("esri.popup.content.BarChartMediaInfo")],Ax);const Xq=Ax;var nA;let Cx=nA=class extends Fk{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new nA({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};l([u({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:Nk.write,isRequired:!0}}})],Cx.prototype,"type",void 0),Cx=nA=l([E("esri.popup.content.ColumnChartMediaInfo")],Cx);const eB=Cx;var sA;let cv=sA=class extends Z{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new sA({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([u({type:String,json:{write:!0}})],cv.prototype,"linkURL",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],cv.prototype,"sourceURL",void 0),cv=sA=l([E("esri.popup.content.support.ImageMediaInfoValue")],cv);const qle=cv;var oA;let Mf=oA=class extends OR{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new oA({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};l([u({type:Number,json:{write:!0}})],Mf.prototype,"refreshInterval",void 0),l([u({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Mf.prototype,"type",void 0),l([u({type:qle,json:{write:{isRequired:!0}}})],Mf.prototype,"value",void 0),Mf=oA=l([E("esri.popup.content.ImageMediaInfo")],Mf);const tB=Mf;var aA;let Ox=aA=class extends Fk{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new aA({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};l([u({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:Nk.write,isRequired:!0}}})],Ox.prototype,"type",void 0),Ox=aA=l([E("esri.popup.content.LineChartMediaInfo")],Ox);const iB=Ox;var lA;let Px=lA=class extends Fk{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new lA({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};l([u({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:Nk.write,isRequired:!0}}})],Px.prototype,"type",void 0),Px=lA=l([E("esri.popup.content.PieChartMediaInfo")],Px);const rB=Px,cA={base:OR,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Xq,"column-chart":eB,"line-chart":iB,"pie-chart":rB,image:tB}};var uA;let To=uA=class extends Tc{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?tB.fromJSON(e):e.type==="barchart"?Xq.fromJSON(e):e.type==="columnchart"?eB.fromJSON(e):e.type==="linechart"?iB.fromJSON(e):e.type==="piechart"?rB.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new uA(V({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([u()],To.prototype,"activeMediaInfoIndex",void 0),l([u({type:Object,json:{write:!0}})],To.prototype,"attributes",void 0),l([u({type:String,json:{write:!0}})],To.prototype,"description",void 0),l([u({types:[cA]})],To.prototype,"mediaInfos",void 0),l([oe("mediaInfos")],To.prototype,"readMediaInfos",null),l([le("mediaInfos")],To.prototype,"writeMediaInfos",null),l([u({type:String,json:{write:!0}})],To.prototype,"title",void 0),l([u({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],To.prototype,"type",void 0),To=uA=l([E("esri.popup.content.MediaContent")],To);const Ble=To;var dA;let uv=dA=class extends Z{constructor(t){super(t),this.field=null,this.order=null}clone(){return new dA({field:this.field,order:this.order})}};l([u({type:String,json:{write:!0}})],uv.prototype,"field",void 0),l([u({type:["asc","desc"],json:{write:!0}})],uv.prototype,"order",void 0),uv=dA=l([E("esri.popup.support.RelatedRecordsInfoFieldOrder")],uv);const RR=uv;let da=class extends Pe(Tc){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};l([u({type:String,json:{write:!0}})],da.prototype,"description",void 0),l([u({type:Number,json:{type:nt,write:!0}})],da.prototype,"displayCount",void 0),l([u({type:["list"],json:{write:{isRequired:!0}}})],da.prototype,"displayType",void 0),l([u({type:[RR],json:{write:!0}})],da.prototype,"orderByFields",void 0),l([u({type:Number,json:{type:nt,write:{isRequired:!0}}})],da.prototype,"relationshipId",void 0),l([u({type:String,json:{write:!0}})],da.prototype,"title",void 0),l([u({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],da.prototype,"type",void 0),da=l([E("esri.popup.content.RelationshipContent")],da);const Gle=da;var pA;let dv=pA=class extends Tc{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new pA({text:this.text})}};l([u({type:String,json:{write:!0}})],dv.prototype,"text",void 0),l([u({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],dv.prototype,"type",void 0),dv=pA=l([E("esri.popup.content.TextContent")],dv);const Hle=dv;let bl=class extends Pe(Z){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};l([u({type:String,json:{write:!0}})],bl.prototype,"title",void 0),l([u({type:String,json:{write:!0}})],bl.prototype,"description",void 0),l([u({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],bl.prototype,"type",void 0),l([u({type:Number,json:{type:nt,write:!0}})],bl.prototype,"associatedNetworkSourceId",void 0),l([u({type:Number,json:{type:nt,write:!0}})],bl.prototype,"associatedAssetGroup",void 0),l([u({type:Number,json:{type:nt,write:!0}})],bl.prototype,"associatedAssetType",void 0),bl=l([E("esri.popup.support.UtilityNetworkAssociationType")],bl);const nB=bl;let Kc=class extends Pe(Tc){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};l([u({type:String,json:{write:!0}})],Kc.prototype,"description",void 0),l([u({type:Number,json:{type:nt,write:!0}})],Kc.prototype,"displayCount",void 0),l([u({type:String,json:{write:!0}})],Kc.prototype,"title",void 0),l([u({type:[nB],json:{write:!0}})],Kc.prototype,"associationTypes",void 0),l([Ie({utilityNetworkAssociations:"utility-network-associations"})],Kc.prototype,"type",void 0),Kc=l([E("esri.popup.content.UtilityNetworkAssociationsContent")],Kc);const Wle=Kc,Qb=fq,Zle=Tc,Jle=cle,Dk=dle,Xb=zq,ew=Ble,tw=Gle,iw=Hle,LR=Wle,Yle={base:null,key:"type",typeMap:{attachment:Qb,media:ew,text:iw,expression:Dk,field:Xb,relationship:tw,utilityNetworkAssociations:LR}},Kle={base:null,key:"type",typeMap:{attachment:Qb,media:ew,text:iw,expression:Dk,field:Xb,relationship:tw}};var hA;let Ud=hA=class extends Z{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new hA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([u({type:String,json:{write:!0}})],Ud.prototype,"name",void 0),l([u({type:String,json:{write:!0}})],Ud.prototype,"title",void 0),l([u({type:String,json:{write:!0}})],Ud.prototype,"expression",void 0),l([u({type:["string","number"],json:{write:!0}})],Ud.prototype,"returnType",void 0),Ud=hA=l([E("esri.popup.ExpressionInfo")],Ud);const Qle=Ud;var fA;let pv=fA=class extends Z{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new fA({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([u({type:Boolean,json:{write:!0}})],pv.prototype,"returnTopmostRaster",void 0),l([u({type:Boolean,json:{write:!0}})],pv.prototype,"showNoDataRecords",void 0),pv=fA=l([E("esri.popup.LayerOptions")],pv);const Xle=pv;var mA;let hv=mA=class extends Z{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new mA({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?V(this.orderByFields):null})}};l([u({type:Boolean,json:{write:!0}})],hv.prototype,"showRelatedRecords",void 0),l([u({type:[RR],json:{write:!0}})],hv.prototype,"orderByFields",void 0),hv=mA=l([E("esri.popup.RelatedRecordsInfo")],hv);const wD=hv;let ece=0;const cd=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+ece++})}};return i=l([wi("esri.core.Identifiable")],i),i};cd(class{});var gA;let Ls=gA=class extends cd(Se){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new gA({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([u()],Ls.prototype,"active",void 0),l([u()],Ls.prototype,"className",void 0),l([u()],Ls.prototype,"disabled",void 0),l([u()],Ls.prototype,"icon",void 0),l([u()],Ls.prototype,"id",void 0),l([u()],Ls.prototype,"indicator",void 0),l([u()],Ls.prototype,"title",void 0),l([u()],Ls.prototype,"type",void 0),l([u()],Ls.prototype,"visible",void 0),Ls=gA=l([E("esri.support.actions.ActionBase")],Ls);const zk=Ls;var yA;let Rx=yA=class extends zk{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new yA({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([u()],Rx.prototype,"image",void 0),Rx=yA=l([E("esri.support.actions.ActionButton")],Rx);const sB=Rx;var vA;let fv=vA=class extends zk{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new vA({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([u()],fv.prototype,"image",void 0),l([u()],fv.prototype,"value",void 0),fv=vA=l([E("esri.support.actions.ActionToggle")],fv);const oB=fv,O0="relationships/",_D="expression/",tce=de.ofType({key:"type",defaultKeyValue:"button",base:zk,typeMap:{button:sB,toggle:oB}}),ice={base:Zle,key:"type",typeMap:{media:ew,custom:Jle,text:iw,attachments:Qb,fields:Xb,expression:Dk,relationship:tw,utilityNetworkAssociations:LR}},aB=new Set(["attachments","fields","media","text","expression","relationship"]),rce=new Set([...aB,"utility-network-associations"]);let Vi=class extends Pe(Z){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Ka(ice,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||qr(e)?e:(ie.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null,{writeFieldFormat:a,...c}=n||{};if(e){const d=o?o.filter(f=>f.type==="fields"):[],h=d.length&&d.every(f=>{var m;return(m=f.fieldInfos)==null?void 0:m.length});i.fieldInfos=e.filter(Boolean).map(f=>{const m=f.toJSON(c);return h&&(m.visible=!1),m})}if(o)for(const d of o)d.type==="fields"&&this._writeFieldsContent(d,i,c)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i,r){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,r,[...n,...this._getContentExpressionInfos(this.content,n)]),hh(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,i){const r=new Set;return await this.collectRequiredFields(r,e,i),[...r].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>(r==null?void 0:r.origin)==="web-scene"?aB.has(n.type):rce.has(n.type)).map(n=>n==null?void 0:n.toJSON(r)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}_writeFieldsContent(e,i,r){const n=e.fieldInfos;if(!Array.isArray(n)||!n.length)return;const s=i.fieldInfos;if(Array.isArray(s))for(const o of n){const a=s.find(c=>{var d,h;return((d=c.fieldName)==null?void 0:d.toLowerCase())===((h=o.fieldName)==null?void 0:h.toLowerCase())});a?a.visible=!0:s.push(o.toJSON(r))}else i.fieldInfos=n.map(o=>o.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const r=((s=e.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,e.relationshipId)))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=V(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),ew.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),iw.fromJSON(s)):s.type==="attachments"?Qb.fromJSON(s):s.type==="fields"?Xb.fromJSON(s):s.type==="expression"?Dk.fromJSON(s):s.type==="relationship"?tw.fromJSON(s):s.type==="utilityNetworkAssociations"?LR.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(O0)))return null;const n=i.replace(O0,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return!Number.isNaN(s)&&o?tw.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${O0}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new iw({text:e})):s.push(new Xb),Array.isArray(i)&&i.length&&s.push(ew.fromJSON({mediaInfos:i})),r&&s.push(Qb.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(c=>{const d=this._toRelationshipContent(c);d&&s.push(d)}),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:o,normalizeField:a,tooltipField:c,sourceURL:d,linkURL:h}=s,f=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(d),...this._extractFieldNames(h),...o??[]];return a&&f.push(a),c&&f.push(c),f}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r,n){n&&await Promise.all(n.map(s=>Gr(e,i,r,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(O0)||i.startsWith(_D))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return TR(e).filter(i=>!(i.startsWith(O0)||i.startsWith(_D)))}};l([u({type:tce})],Vi.prototype,"actions",void 0),l([u()],Vi.prototype,"content",void 0),l([ti("content")],Vi.prototype,"castContent",null),l([oe("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Vi.prototype,"readContent",null),l([le("web-scene","content",{popupElements:{type:de.ofType(Kle)},showAttachments:{type:Boolean},mediaInfos:{type:de.ofType(cA)},description:{type:String},relatedRecordsInfo:{type:wD}})],Vi.prototype,"writeWebSceneContent",null),l([le("content",{popupElements:{type:de.ofType(Yle)},showAttachments:{type:Boolean},mediaInfos:{type:de.ofType(cA)},description:{type:String},relatedRecordsInfo:{type:wD}})],Vi.prototype,"writeWebMapContent",null),l([u({type:[Qle],json:{write:!0}})],Vi.prototype,"expressionInfos",void 0),l([u({type:[Lk]})],Vi.prototype,"fieldInfos",void 0),l([le("fieldInfos")],Vi.prototype,"writeFieldInfos",null),l([u({type:Xle})],Vi.prototype,"layerOptions",void 0),l([le("layerOptions")],Vi.prototype,"writeLayerOptions",null),l([u({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Vi.prototype,"lastEditInfoEnabled",void 0),l([u()],Vi.prototype,"outFields",void 0),l([u()],Vi.prototype,"overwriteActions",void 0),l([u()],Vi.prototype,"returnGeometry",void 0),l([u({json:{type:String}})],Vi.prototype,"title",void 0),l([le("title")],Vi.prototype,"writeTitle",null),Vi=l([E("esri.PopupTemplate")],Vi);const Rh=Vi;function ve(t,e,i={}){return FR(t,e,i,lB)}function gn(t,e,i={}){return FR(t,e,i,cB)}function FR(t,e,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(Gt(n),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(n=sne(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return n}function Wn(t,e,i,r={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=r.onListenerRemove)==null||h.call(r,n),n=null,s=null)}function c(h){r.once&&r.once&&Gt(o),i(h)}const d=ve(t,(h,f)=>{var m;a(),$k(h)&&(n=h,s=Ry(h,e,c),(m=r.onListenerAdd)==null||m.call(r,h))},{sync:r.sync,initial:!0});return o=ct(()=>{d.remove(),a()}),o}function jk(t,e){return nce(t,cB,e)}function nce(t,e,i){if(Ur(i))return Promise.reject(gt());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function s(){n=Gt(n)}return new Promise((o,a)=>{n=Mh([io(i,()=>{s(),a(gt())}),FR(t,c=>{s(),o(c)},{sync:!1,once:!0},e??lB)])})}function lB(t){return!0}function cB(t){return!!t}function Sze(t,e,i={}){let r=!1;const n=ve(t,(s,o)=>{r||e(s,o)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const pr={sync:!0},Pt={initial:!0},wr={sync:!0,initial:!0};let NR=class{constructor(e,i,r,n,s,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const yi=new NR(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),qa=new NR(3396190,1/169.8944472236118,23e4,6e4,.111),td=new NR(1737400,0,0,0,0),sce=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,oce={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function xD(t){const e=t==null?void 0:t.match(sce);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:c,qaext:d,www:h}=oce;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=c);break;case"qa":({customBaseUrl:o,portalHostname:a}=d);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=c);break;case"qaext":({customBaseUrl:o,portalHostname:a}=d);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function uB(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function dB(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function pB(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function ace(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const lce=()=>ie.getLogger("esri.core.urlUtils"),By=Qe.request,SD="esri/config: esriConfig.request.proxyUrl is not set.",hB=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,fB=/^\s*http:/i,cce=/^\s*https:/i,uce=/^\s*file:/i,mB=/:\d+$/,dce=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,pce=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),hce=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Uu=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(pce);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(hce),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const s_={},fce=new Uu(Qe.applicationUrl);let zr=fce;const mce=gce();let DR=mce;const zR=()=>zr,kze=()=>DR;function gce(){const t=zr.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${zr.scheme}://${zr.host}${zr.port!=null?`:${zr.port}`:""}`}${e}`}function zi(t){if(!t)return null;const e={path:null,query:null},i=new Uu(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=jR(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function jR(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function rw(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e==null?void 0:e[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>Yb(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):Yb(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function gB(t=!1){let e,i=By.proxyUrl;if(typeof t=="string"){e=wB(t);const r=Vk(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw lce().warn(SD),new j("urlUtils:proxy-not-set",SD);return e&&wA()&&(i=GR(i)),zi(i)}function yce(t,e=!1){const i=Vk(t);let r,n;if(i){const s=VR(i.proxyUrl);r=s.path,n=s.query?jR(s.query):null}else if(e){const s=gB(t);r=s.path,n=s.query}if(r){const s=zi(t);t=r+"?"+s.path;const o=rw({...n,...s.query});o&&(t=`${t}?${o}`)}return t}const P0={path:"",query:""};function VR(t){const e=t.indexOf("?");return e!==-1?(P0.path=t.slice(0,e),P0.query=t.slice(e+1)):(P0.path=t,P0.query=null),P0}function yB(t){return t=(t=I$(t=Mce(t=VR(t).path),!0)).toLowerCase()}function vce(t){const e={proxyUrl:t.proxyUrl,urlPrefix:yB(t.urlPrefix)},i=By.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.startsWith(o)){if(r.length===o.length)return-1;n=s;break}o.startsWith(r)&&(n=s+1)}return i.splice(n,0,e),n}function Vk(t){const e=By.proxyRules,i=yB(t);for(let r=0;r<e.length;r++)if(i.startsWith(e[r].urlPrefix))return e[r]}function bce(t,e){if(!t||!e)return!1;t=k$(t),e=k$(e);const i=xD(t),r=xD(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&Ba(t,e,!0)}function vB(t,e){return t=k$(t),e=k$(e),I$(t)===I$(e)}function k$(t){const e=(t=Qo(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function bA(t,e=By.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function Ba(t,e,i=!1){if(!t||!e)return!1;const r=xA(t),n=xA(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function UR(t){if(typeof t=="string"){if(!qn(t))return!0;t=xA(t)}if(Ba(t,zr))return!0;const e=By.trustedServers||[];for(let i=0;i<e.length;i++){const r=wce(e[i]);for(let n=0;n<r.length;n++)if(Ba(t,r[n]))return!0}return!1}function wce(t){return s_[t]||(BR(t)||Qa(t)?s_[t]=[new Uu(Vn(t))]:s_[t]=[new Uu(`http://${t}`),new Uu(`https://${t}`)]),s_[t]}function Vn(t,e=DR,i){return Qa(t)?i!=null&&i.preserveProtocolRelative?t:zr.scheme==="http"&&zr.authority===$s(t).slice(2)?`http:${t}`:`https:${t}`:BR(t)?t:mh(t.startsWith("/")?Ice(e):e,t)}function qR(t,e=DR,i){if(t==null||!qn(t))return t;const r=Qo(t),n=r.toLowerCase(),s=Qo(e).toLowerCase().replace(/\/+$/,""),o=i?Qo(i).toLowerCase().replace(/\/+$/,""):null;if(o&&!s.startsWith(o))return t;const a=(f,m,v)=>(v=f.indexOf(m,v))===-1?f.length:v;let c=a(n,"/",n.indexOf("//")+2),d=-1;for(;n.slice(0,c+1)===s.slice(0,c)+"/"&&(d=c+1,c!==n.length);)c=a(n,"/",c+1);if(d===-1||o&&d<o.length)return t;t=r.slice(d);const h=s.slice(d-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)t=`../${t}`;else t=`./${t}`;return t}function Qo(t){return t=Oce(t=Cce(t=Ace(t=Vn(t=t.trim()))))}function mh(...t){const e=t.filter(_r);if(!(e!=null&&e.length))return;const i=[];if(qn(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),Tce(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0].startsWith("/")&&i.push("");const r=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function $s(t,e=!1){if(t==null||Gy(t)||kc(t))return null;let i=t.indexOf("://");if(i===-1&&Qa(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=I$(t,!0)),t}function qn(t){return Qa(t)||BR(t)}function Gy(t){return t!=null&&t.startsWith("blob:")}function kc(t){return t!=null&&t.startsWith("data:")}function _ce(t){const e=gh(t);return e!=null&&e.isBase64?pB(e.data):null}function Ize(t){return ace(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const xce=/^data:(.*?)(;base64)?,(.*)$/;function gh(t){const e=t.match(xce);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function bB(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function Sce(t){return(await fetch(t)).blob()}function Eze(t){const e=_ce(t);if(!e)return null;const i=gh(t);return new Blob([e],{type:i.mediaType})}function Qa(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function BR(t){return t!=null&&hB.test(t)}function wB(t){return t!=null&&cce.test(t)||zr.scheme==="https"&&Qa(t)}function $ce(t){return t!=null&&fB.test(t)||zr.scheme==="http"&&Qa(t)}function Tce(t){return t!=null&&uce.test(t)}function GR(t){return Qa(t)?`https:${t}`:t.replace(fB,"https:")}function kce(){return zr.scheme==="http"}function wA(){return zr.scheme==="https"}function I$(t,e=!1){return Qa(t)?t.slice(2):(t=t.replace(hB,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function Ice(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function Ece(t){let e=0;if(qn(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function Mze(t,e){if(!t)return"";const i=zi(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(n,"")}function Mce(t){return t.endsWith("/")?t:`${t}/`}function _B(t){return t.replace(/\/+$/,"")}function Ace(t){if(/^https?:\/\//i.test(t)){const e=VR(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function Cce(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Oce(t){const e=By.httpsDomains;if(!$ce(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),mB.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return kce()&&r===zr.authority&&!dce.test(t)||(wA()&&r===zr.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||wA()&&!Vk(t))&&(t=GR(t)),t}function _A(t,e,i){if(!(e&&i&&t&&qn(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function xB(t,e){const i=new URL(t);return i.host=e,i.port&&!mB.test(e)&&(i.port=""),i.toString()}function Pce(t){return new URL(t).host}function xA(t){return typeof t=="string"?new Uu(Vn(t)):(t.scheme||(t.scheme=zr.scheme),t)}function Aze(t){return Rce.test(t)}function SB(t,e){const i=zi(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function $B(t,e,i){const r=zi(t),n=r.query||{};return n[e]=String(i),`${r.path}?${rw(n)}`}function db(t,e){if(!e)return t;const i=zi(t),r=i.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const n=rw(r);return n?`${i.path}?${n}`:i.path}function TB(t){if(t==null)return null;const e=t.match(kB);return e?e[2]:null}function $D(t){if(t==null)return null;const e=t.match(kB);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function Cze(t){return typeof t=="string"?gh(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(gh(r.result)),r.onerror=n=>i(n)})}const kB=/([^.]*)\.([^/]*)$/,Rce=/(^data:image\/svg|\.svg$)/i,Wo={corsServers:["https://server.arcgisonline.com","https://services.arcgisonline.com"],beforeFetch:void 0,afterFetch:void 0,isForeignWorker:!1},IB="20251118",EB="bced93838b5381b86351138064ad715c819f9331";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const MB="5.0";let We,HR=MB;function Oze(t){We=t}function Pze(t){const e=We==null?void 0:We.findCredential(t);return e!=null&&e.token?$B(t,"token",e.token):t}HR="5.0.0-next.43",B("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),B("host-webworker");function Lce(t){Qe.request.crossOriginNoCorsDomains||(Qe.request.crossOriginNoCorsDomains={});const e=Qe.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[$s(i)??""]=0:(e[$s("http://"+i)??""]=0,e[$s("https://"+i)??""]=0)}function Fce(t){const e=Qe.request.crossOriginNoCorsDomains;if(e){let i=$s(t);if(i)return i=i.toLowerCase(),!Ba(i,zR())&&e[i]<Date.now()-36e5}return!1}async function Nce(t){var n;const e=zi(t);t=e.path,((n=e.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=Qe.request.crossOriginNoCorsDomains,r=$s(t);i&&r&&(i[r.toLowerCase()]=Date.now())}let Dce=class{constructor(e,i){this.element=e,this.type="image+type",this.isOpaque=i==="image/jpeg"}};function zce(t){if(t.byteLength<2)return"unknown";const e=new Uint8Array(t,0,t.byteLength);return e[0]===137&&e[1]===80?"image/png":e[0]===71&&e[1]===73?"image/gif":e[0]===66&&e[1]===77?"image/bmp":e[0]===255&&e[1]===216?"image/jpeg":"unknown"}function jce(t,e,i=!1,r){return new Promise((n,s)=>{if(Ur(r))return void s(gt());let o=()=>{d(),s(new Error(`Unable to load ${e}`))},a=async()=>{const h=t;try{await h.decode()}catch{}d(),n(h)},c=()=>{if(!t)return;const h=t;d(),h.src="",s(gt())};const d=()=>{t&&(t.removeEventListener("error",o),t.removeEventListener("load",a),o=null,a=null,t=null,r==null||r.removeEventListener("abort",c),c=null,i&&URL.revokeObjectURL(e))};r==null||r.addEventListener("abort",c),t.addEventListener("error",o),t.addEventListener("load",a)})}function Lh(t,e){var r;const i=(r=e==null?void 0:e.url)==null?void 0:r.path;if(t&&i&&(t=Vn(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=qR(t,e.portalItem.itemUrl);n!=null&&n.startsWith(Vce)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return(t=SA(t,e==null?void 0:e.portal))&&qk.test(t)?WR(t):t}function yh(t,e,i=0){var n,s;if((t=t&&qk.test(t)?PB(t):t)==null)return t;!qn(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let r=Vn(t);if(e){const o=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=e.url)==null?void 0:s.path);if(o){const a=SA(o,e.portal),c=SA(r,e.portal);r=qR(c,a,a),r!=null&&r!==c&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=OB(r,e==null?void 0:e.portal),qn(r)&&(r=Qo(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!qn(r)&&!kc(r)&&i===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function Uk(t,e,i){return Lh(t,i)}function vh(t,e,i,r){const n=yh(t,r);n!==void 0&&(e[i]=n)}const qk=/\/items\/([^/]+)\/resources\/(.*)/,Vce="./resources/";function AB(t){const e=(t==null?void 0:t.match(qk))??null;return(e==null?void 0:e[1])??null}function CB(t){const e=(t==null?void 0:t.match(qk))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=$D(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=$D(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function OB(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?_A(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function SA(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=zR();return Ba(r,`${r.scheme}://${i}`)?_A(t,e.portalHostname,i):_A(t,i,e.portalHostname)}function WR(t){if(!t)return t||null;let e=t;return e&&We&&!We.findCredential(e)&&(e=dB(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function PB(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&We&&!We.findCredential(e)&&(e=dB(e)),e}const Uce=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:OB,fromCDNUrl:PB,fromJSON:Lh,itemIdFromResourceUrl:AB,prefixAndFilenameFromResourceUrl:CB,read:Uk,toCDNUrl:WR,toJSON:yh,write:vh},Symbol.toStringTag,{value:"Module"})),RB={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},LB=Object.values(RB),FB=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${LB.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),qce=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${LB.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Bce=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Lze(t){return FB.test(t)}function Xa(t){if(t==null)return null;const e=zi(t),i=(e==null?void 0:e.path.match(FB))||(e==null?void 0:e.path.match(qce));if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:ZR(a!==-1?n.slice(a+1):n),serverType:RB[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function Gce(t){const e=zi(t).path.match(Bce);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function ZR(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function Hce(t,e){const i=[];if(t){const r=Xa(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=ZR(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}const Wce=["services","features","tiles","elevation3d","basemaps3d"];function E$(t){let e=$s(t,!0);return!!e&&(e=e.toLowerCase(),!!e.endsWith(".arcgis.com")&&(!!Wce.some(i=>e.startsWith(i))||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function Zce(t,e){return t&&_B(SB(t,e))}function Jce(t){let{url:e}=t;if(!e)return{url:e};e=SB(e,t.logger);const i=zi(e),r=Xa(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=Gce(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:_B(e),layerId:n}}function Yce(t,e,i,r,n){vh(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=mh(r.url,i,t.layerId.toString()))}function Kce(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function Fze(t){var r;if(!t)return!1;const e=new Uu(Vn(t)),i=(r=e.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const $A=new Map;function Qce(t,e){const i=e==null?void 0:e.preferredHost;if(!i||Ba(t,`https://${i}`,!0))return;const r=Xa(t);if(!r||r.serverType!=="FeatureServer"||uB(t))return;const n=r.url.path.toLowerCase();$A.has(n)||$A.set(n,i)}function TD(t){var r;const e=(r=Xa(t))==null?void 0:r.url.path.toLowerCase();if(!e)return t;const i=$A.get(e);return i?xB(t,i):t}const Xce=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function JR(t){if(!YR(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=Qe.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:Qe.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?Qe.apiKey:null}function TA(){return Qe.apiKey!=null||Qe.apiKeys.basemapStyles!=null}function eue(t,e){return e?YR(t):JR(t)!=null}function YR(t){const e=$s(t,!0);return!!e&&!Xce.has(e)&&!t.endsWith("/sharing/rest/generateToken")}const NB="FormData"in globalThis,tue=new Set([499,498,403,401]),iue=new Set(["COM_0056","COM_0057","SB_0008"]),rue=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i];async function KR(t){var s,o,a;let e,i;await nue(t);try{do[e,i]=await DB(t);while(!await aue(t,e,i))}catch(c){const d=Xo("request:server",c,t.parameters,e);throw d.details.ssl=t.useSSL,(o=(s=t.interceptor)==null?void 0:s.error)==null||o.call(s,d),d}const r=t.parameters.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((a=i.user)!=null&&a.username)&&!UR(r)){const c=$s(r,!0);c&&Qe.request.trustedServers.push(c)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Lce(i.authorizedCrossOriginNoCorsDomains)}else(t.parameters.requestOptions.responseType||"json")==="json"&&Qce(r,i);const n=t.credential;if(n&&We){const c=We.findServerInfo(n.server);let d=c==null?void 0:c.owningSystemUrl;if(d){d=d.replace(/\/?$/,"/sharing");const h=We.findCredential(d,n.userId);h&&We._getIdenticalSvcIdx(d,h)===-1&&h.resources.unshift(d)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):A$,getHeader:e?c=>e.headers.get(c):A$,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.parameters.requestOptions,ssl:t.useSSL,url:t.parameters.url}}async function nue(t){var a;const e=t.parameters.url,i=t.parameters.requestOptions,r=t.controller.signal,n=i.body;let s=null,o=null;if(NB&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},keepalive:i.keepAlive??!1,method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:i.priority??Qe.request.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(Wo.isForeignWorker||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken){const c=JR(e);c&&(i.query??(i.query={}),i.query.token=c,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!zB(e)&&!Ur(r)){let c;i.authMode==="immediate"?(await kA(),c=await We.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await kA(),c=await We.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):We&&(c=We.findCredential(e)),c&&(t.credential=c,t.credentialToken=c.token,t.useSSL=!!c.ssl)}}async function DB(t){var w,x;let e=t.parameters.url,i=TD(e);const r=t.parameters.requestOptions,n=t.fetchOptions??{},s=Gy(e)||kc(e),o=r.responseType??"json",a=o==="image"&&r.imageWithType,c=s?0:r.timeout!=null?r.timeout:Qe.request.timeout;let d=!1;if(!s){t.useSSL&&(e=GR(e));let $={...r.query};t.credentialToken&&($.token=t.credentialToken);let T=rw($);B("esri-url-encodes-apostrophe")&&(T=T.replaceAll("'","%27"));const C=i.length+1+T.length;let P;d=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||C>Qe.request.maxUrlLength;const L=r.useProxy||!!Vk(e);if(L){const D=gB(e);P=D.path,!d&&P.length+1+C>Qe.request.maxUrlLength&&(d=!0),D.query&&($={...D.query,...$})}if(n.method==="HEAD"&&(d||L)){if(d)throw C>Qe.request.maxUrlLength?Xo("request:invalid-parameters",new Error("URL exceeds maximum length"),t.parameters):Xo("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.parameters);if(L)throw Xo("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.parameters)}if(d?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=db(e,$):(n.body=rw($),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=db(e,$),L&&(t.useProxy=!0,e=`${P}?${e}`),$.token&&NB&&n.body instanceof FormData&&!uB(e)&&n.body.set("token",$.token),r.hasOwnProperty("withCredentials"))t.withCredentials=r.withCredentials;else if(!Ba(e,zR())){if(UR(e))t.withCredentials=!0;else if(We){const D=We.findServerInfo(e);D!=null&&D.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",Fce(e)&&await Nce(d?db(e,$):e)),i=TD(e)}let h,f,m=0,v=!1;c>0&&(m=setTimeout(()=>{v=!0,t.controller.abort()},c));try{if(r.responseType==="native-request-init")f=n,f.url=i,r.signal?f.signal=r.signal:delete f.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.keepalive||n.method!=="GET"||d||oue(r.headers)||!s&&!t.useProxy&&Qe.request.proxyUrl&&!kD(e)){if(await((w=Wo.beforeFetch)==null?void 0:w.call(Wo,e,n)),h=await fetch(i,n),await((x=Wo.afterFetch)==null?void 0:x.call(Wo,h)),t.useProxy||sue(e),r.responseType==="native")f=h;else if(n.method!=="HEAD")if(h.ok){switch(o){case"array-buffer":f=await h.arrayBuffer();break;case"blob":f=await h.blob();break;case"image":f=await(a?h.arrayBuffer():h.blob());break;default:f=await h.text()}if(m&&(clearTimeout(m),m=0),o==="json"||o==="xml"||o==="document")if(f)switch(o){case"json":f=JSON.parse(f);break;case"xml":f=ID(f,"application/xml");break;case"document":f=ID(f,"text/html")}else f=null;if(f){if(o==="array-buffer"||o==="blob"){const $=h.headers.get("Content-Type");if($&&/application\/json|text\/plain/i.test($)&&f[o==="blob"?"size":"byteLength"]<=750)try{const T=await new Response(f).json();T.error&&(f=T)}catch{}}if(a&&f instanceof ArrayBuffer){const $=zce(f);if($==="unknown")return r.responseType="image",await DB(t);f=await h.blob(),f=await LE(URL.createObjectURL(f),t,!0),f=new Dce(f,$)}o==="image"&&f instanceof Blob&&(f=await LE(URL.createObjectURL(f),t,!0))}}else{f=await h.text();try{f=JSON.parse(f)}catch{}}}else f=await LE(i,t)}catch($){if($.name==="AbortError")throw v?lue():gt("Request canceled");if(!(!h&&$ instanceof TypeError&&Qe.request.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||kD(e))throw $;t.redoRequest=!0,vce({proxyUrl:Qe.request.proxyUrl,urlPrefix:$s(e)??""})}finally{m&&clearTimeout(m)}return[h,f]}function LE(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Qe.request.priority,n.src=t,jce(n,t,i,r)}function sue(t){const e=$s(t);e&&!Wo.corsServers.includes(e)&&Wo.corsServers.push(e)}function kD(t){const e=$s(t);return!e||e.endsWith(".arcgis.com")||Wo.corsServers.includes(e)||UR(e)}async function kA(){We||await Q(()=>import("./IdentityManager-GEkCpU5v.js"),[],import.meta.url)}function zB(t){return rue.some(e=>e.test(t))}function oue(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function ID(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function aue(t,e,i){var d;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.parameters.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[M$]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[M$]=i,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const c=r.authMode;if(s===403&&(a===4||(d=n.message)!=null&&d.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(c!=="no-prompt"||s===498)&&s!==void 0&&tue.has(s)&&!zB(t.parameters.url)&&(s!==403||(!o||!iue.has(o))&&(a==null||a===2&&t.credentialToken))){await kA();try{const h=await We.getCredential(t.parameters.url,{error:Xo("request:server",n,t.parameters),credential:t.credential,prompt:c!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=h,t.credentialToken=h.token,t.useSSL=t.useSSL||h.ssl,!1}catch(h){if(c==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function Xo(t,e,i,r){var o;let n;const s={url:i.url,requestOptions:i.requestOptions,getAllHeaders:A$,getHeader:A$,ssl:!1};if(e instanceof j)return e.details?(e.details=V(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const a=r&&(()=>Array.from(r.headers)),c=r&&(f=>r.headers.get(f)),d=r==null?void 0:r.status,h=e.message;h&&(n=h),a&&c&&(s.getAllHeaders=a,s.getHeader=c),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||d||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],n??(n=e.details)):(s.messages=e.details,n??(n=(o=s.messages)==null?void 0:o[0])),s.raw=M$ in e?e[M$]:e}return n??(n="Error"),hr(e)?gt():new j(t,n,s)}const M$=Symbol(),A$=()=>null,jB="Timeout exceeded";function lue(){return new Error(jB)}function Nze(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===jB}async function cue(t){const e=due(t.parameters.url);if(!e)return null;const{QueueProcessor:i,SharedConcurrency:r}=await Q(()=>import("./QueueProcessor-7WLZ5z5V.js"),[],import.meta.url);return Ah(uue,e.origin,()=>{const n=(e.isHosted?B("request-queue-concurrency-hosted"):B("request-queue-concurrency-non-hosted"))??4;return ED??(ED=new r(B("request-queue-concurrency-global")??50)),new i({concurrency:n,sharedConcurrency:ED,process:s=>{if(Ur(s.parameters.requestOptions))throw Xo("",gt("Request canceled"),s.parameters);return KR(s)}})})}const uue=new Map;let ED;function due(t){let e,i=!1;return typeof t=="string"?(e=$s(t,!0),i=E$(t)):(e=t.origin,i=E$(t.toString())),e==null?null:new pue(e,i)}let pue=class{constructor(e,i){this.origin=e,this.isHosted=i}};async function Ft(t,e){var v;t instanceof URL&&(t=t.toString());const i=kc(t),r=Gy(t);r||i||(t=Qo(t));const n={url:t,requestOptions:{...e}};e!=null&&e.query&&(n.requestOptions.query=(e==null?void 0:e.query)instanceof URLSearchParams?jR(e.query.toString().replaceAll("+"," ")):e==null?void 0:e.query);const s=w=>({data:w,getAllHeaders:AD,getHeader:AD,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=bA(t,MD.internalInterceptors);if(o){const w=await CD(o,n);if(w!=null)return s(w)}let a=bA(t);if(a){const w=await CD(a,n);if(w!=null)return s(w);a.after||a.error||(a=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(B("host-webworker")||B("host-node")))throw Xo("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Xo("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Xo("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await hue(),C$)return C$.execute(t,e);const c=new AbortController,d=io(e,()=>c.abort()),h={controller:c,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,parameters:n,redoRequest:!1,useIdentity:MD.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=e.useQueue?fue(h):KR(h),m=await f.finally(()=>d==null?void 0:d.remove());return(v=a==null?void 0:a.after)==null||v.call(a,m),m}let C$;const MD=Qe.request,AD=()=>null;async function hue(){B("host-webworker")&&(!C$&&globalThis.invokeStaticMessage?C$=await Q(()=>import("./request-zH0tkvwU.js"),[],import.meta.url):Wo.isForeignWorker=!0)}async function CD(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Xo("request:interceptor",n,e)}if((r instanceof Error||r instanceof j)&&(i=Xo("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}async function fue(t){const e=await cue(t);return e?e.push(t):KR(t)}function Ti(t){if(!Qe.assetsPath)throw ie.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new j("assets:path-not-set","config.assetsPath is not set");return mh(Qe.assetsPath,t)}let FE,U=null;function VB(){return!!U}function mue(){return!!B("esri-wasm")}function gue(){return FE||(FE=Q(async()=>{const{default:t}=await import("./pe-wasm-Dornym0k.js");return{default:t}},[],import.meta.url).then(({default:t})=>t({locateFile:e=>Ti(`esri/geometry/support/${e}`)})).then(t=>{WB(t)}),FE)}const Lx={geogToProj(t,e,i){U.ensureCache.prepare();const r=bh(i),n=i===r,s=U.ensureFloat64(r),o=U._pe_geog_to_proj(U.getPointer(t),e,s);return o&&id(i,e,s,n),o},projGeog(t,e,i,r){switch(r){case fi.PE_TRANSFORM_P_TO_G:return Lx.projToGeog(t,e,i);case fi.PE_TRANSFORM_G_TO_P:return Lx.geogToProj(t,e,i)}return 0},projToGeog:(t,e,i)=>Lx.projToGeogCenter(t,e,i,0),projToGeogCenter(t,e,i,r){U.ensureCache.prepare();const n=bh(i),s=i===n,o=U.ensureFloat64(n),a=U._pe_proj_to_geog_center(U.getPointer(t),e,o,r);return a&&id(i,e,o,s),a}};let fi=class bt{static init(){bt.PE_BUFFER_MAX=U.PeDefs.prototype.PE_BUFFER_MAX,bt.PE_NAME_MAX=U.PeDefs.prototype.PE_NAME_MAX,bt.PE_MGRS_MAX=U.PeDefs.prototype.PE_MGRS_MAX,bt.PE_USNG_MAX=U.PeDefs.prototype.PE_USNG_MAX,bt.PE_DD_MAX=U.PeDefs.prototype.PE_DD_MAX,bt.PE_DDM_MAX=U.PeDefs.prototype.PE_DDM_MAX,bt.PE_DMS_MAX=U.PeDefs.prototype.PE_DMS_MAX,bt.PE_UTM_MAX=U.PeDefs.prototype.PE_UTM_MAX,bt.PE_PARM_MAX=U.PeDefs.prototype.PE_PARM_MAX,bt.PE_TYPE_NONE=U.PeDefs.prototype.PE_TYPE_NONE,bt.PE_TYPE_GEOGCS=U.PeDefs.prototype.PE_TYPE_GEOGCS,bt.PE_TYPE_PROJCS=U.PeDefs.prototype.PE_TYPE_PROJCS,bt.PE_TYPE_GEOGTRAN=U.PeDefs.prototype.PE_TYPE_GEOGTRAN,bt.PE_TYPE_COORDSYS=U.PeDefs.prototype.PE_TYPE_COORDSYS,bt.PE_TYPE_UNIT=U.PeDefs.prototype.PE_TYPE_UNIT,bt.PE_TYPE_LINUNIT=U.PeDefs.prototype.PE_TYPE_LINUNIT,bt.PE_STR_OPTS_NONE=U.PeDefs.prototype.PE_STR_OPTS_NONE,bt.PE_STR_AUTH_NONE=U.PeDefs.prototype.PE_STR_AUTH_NONE,bt.PE_STR_AUTH_TOP=U.PeDefs.prototype.PE_STR_AUTH_TOP,bt.PE_STR_NAME_CANON=U.PeDefs.prototype.PE_STR_NAME_CANON,bt.PE_STR_FMT_WKT=U.PeDefs.prototype.PE_STR_FMT_WKT,bt.PE_STR_FMT_WKT2=U.PeDefs.prototype.PE_STR_FMT_WKT2,bt.PE_PARM_X0=U.PeDefs.prototype.PE_PARM_X0,bt.PE_PARM_ND=U.PeDefs.prototype.PE_PARM_ND,bt.PE_TRANSFORM_1_TO_2=U.PeDefs.prototype.PE_TRANSFORM_1_TO_2,bt.PE_TRANSFORM_2_TO_1=U.PeDefs.prototype.PE_TRANSFORM_2_TO_1,bt.PE_TRANSFORM_P_TO_G=U.PeDefs.prototype.PE_TRANSFORM_P_TO_G,bt.PE_TRANSFORM_G_TO_P=U.PeDefs.prototype.PE_TRANSFORM_G_TO_P,bt.PE_HORIZON_RECT=U.PeDefs.prototype.PE_HORIZON_RECT,bt.PE_HORIZON_POLY=U.PeDefs.prototype.PE_HORIZON_POLY,bt.PE_HORIZON_LINE=U.PeDefs.prototype.PE_HORIZON_LINE,bt.PE_HORIZON_DELTA=U.PeDefs.prototype.PE_HORIZON_DELTA}},UB=null;const OD={},PD={},RD=t=>{const e=t.getType();switch(e){case fi.PE_TYPE_GEOGCS:t=U.castObject(t,U.PeGeogcs);break;case fi.PE_TYPE_PROJCS:t=U.castObject(t,U.PeProjcs);break;case fi.PE_TYPE_GEOGTRAN:t=U.castObject(t,U.PeGeogtran);break;default:e&fi.PE_TYPE_UNIT&&(t=U.castObject(t,U.PeUnit))}return t},Af={initialize(){U.PeFactory.prototype.initialize(null)},coordsys:t=>Af.factoryByType(fi.PE_TYPE_COORDSYS,t),factoryByType(t,e){let i=null,r=OD[t];if(r||(r={},OD[t]=r),r.hasOwnProperty(String(e))&&(i=r[e],U.compare(i,U.NULL)&&(i=null)),!i){const n=U.PeFactory.prototype.factoryByType(t,e);U.compare(n,U.NULL)||(i=RD(n),r[e]=i)}return i},fromString(t,e){let i=null,r=PD[t];if(r||(r={},PD[t]=r),r.hasOwnProperty(e)&&(i=r[e],U.compare(i,U.NULL)&&(i=null)),!i){const n=U.PeFactory.prototype.fromString(t,e);U.compare(n,U.NULL)||(i=RD(n),r[e]=i)}return i},geogcs:t=>Af.factoryByType(fi.PE_TYPE_GEOGCS,t),geogtran:t=>Af.factoryByType(fi.PE_TYPE_GEOGTRAN,t),getCode:t=>U.PeFactory.prototype.getCode(t),projcs:t=>Af.factoryByType(fi.PE_TYPE_PROJCS,t),unit:t=>Af.factoryByType(fi.PE_TYPE_UNIT,t)};let LD,qB=null;const QR={PE_GTLIST_OPTS_COMMON:0,init(){QR.PE_GTLIST_OPTS_COMMON=U.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,LD=U._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,i,r,n,s){let o=null;const a=new U.PeInteger(s);try{const c=U.PeGTlistExtended.prototype.getGTlist(t,e,i,r,n,a);if((s=a.val)&&(o=[c],s>1)){const d=U.getPointer(c);for(let h=1;h<s;h++)o.push(U.wrapPointer(d+LD*h,U.PeGTlistExtendedEntry))}}finally{U.destroy(a)}return o}},yue={destroy(t){if(t!=null&&t.length){for(const e of t)Lo(e),e.getEntries().forEach(i=>{Lo(i);const r=i.getGeogtran();Lo(r),r.getParameters().forEach(Lo),[r.getGeogcs1(),r.getGeogcs2()].forEach(n=>{Lo(n);const s=n.getDatum();Lo(s),Lo(s.getSpheroid()),Lo(n.getPrimem()),Lo(n.getUnit())})});U.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},vue={geogToGeog(t,e,i,r,n){U.ensureCache.prepare();const s=bh(i),o=i===s,a=U.ensureFloat64(s);let c=0;r&&(c=U.ensureFloat64(r));const d=U._pe_geog_to_geog(U.getPointer(t),e,a,c,n);return d&&id(i,e,a,o),d}},bue={geodesicCoordinate(t,e,i,r,n,s,o,a){U.PeLineType.prototype.geodesic_coordinate(t,e,i,r,n,s,o,a)},geodeticCoordinate(t,e,i,r,n,s,o,a,c){U.PeLineType.prototype.geodetic_coordinate(t,e,i,r,n,s,o,a,c)},geodeticDistance(t,e,i,r,n,s,o,a,c,d){U.PeLineType.prototype.geodetic_distance(t,e,i,r,n,s,o,a,c,d)},greatEllipticDistance(t,e,i,r,n,s,o,a,c){U.PeLineType.prototype.great_elliptic_distance(t,e,i,r,n,s,o,a,c)}},wue={phiToEta:(t,e)=>U.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>U.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>U.PeMath.prototype.phi_to_phig(t,e),q:(t,e,i)=>U.PeMath.prototype.q(t,e,i),q90:(t,e)=>U.PeMath.prototype.q90(t,e)},NE=(t,e,i,r,n,s)=>{let o,a;switch(U.ensureCache.prepare(),t){case"dd":o=U._pe_geog_to_dd,a=fi.PE_DD_MAX;break;case"ddm":o=U._pe_geog_to_ddm,a=fi.PE_DDM_MAX;break;case"dms":o=U._pe_geog_to_dms,a=fi.PE_DMS_MAX}let c=0;e&&(c=U.getPointer(e));const d=bh(r),h=U.ensureFloat64(d),f=Bk(i,a),m=o(c,i,h,n,U.ensureInt32(f));if(m)for(let v=0;v<i;v++)s[v]=U.UTF8ToString(f[v]);return m},DE=(t,e,i,r,n)=>{let s;switch(U.ensureCache.prepare(),t){case"dd":s=U._pe_dd_to_geog;break;case"ddm":s=U._pe_ddm_to_geog;break;case"dms":s=U._pe_dms_to_geog}let o=0;e&&(o=U.getPointer(e));const a=r.map(f=>U.ensureString(f)),c=U.ensureInt32(a),d=U.ensureFloat64(new Array(2*i)),h=s(o,i,c,d);return h&&id(n,i,d),h},_ue={geogToDms:(t,e,i,r,n)=>NE("dms",t,e,i,r,n),dmsToGeog:(t,e,i,r)=>DE("dms",t,e,i,r),geogToDdm:(t,e,i,r,n)=>NE("ddm",t,e,i,r,n),ddmToGeog:(t,e,i,r)=>DE("ddm",t,e,i,r),geogToDd:(t,e,i,r,n)=>NE("dd",t,e,i,r,n),ddToGeog:(t,e,i,r)=>DE("dd",t,e,i,r)};let BB=class Cf{static init(){Cf.PE_MGRS_STYLE_NEW=U.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,Cf.PE_MGRS_STYLE_OLD=U.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,Cf.PE_MGRS_STYLE_AUTO=U.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,Cf.PE_MGRS_180_ZONE_1_PLUS=U.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,Cf.PE_MGRS_ADD_SPACES=U.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,i,r,n,s,o,a){U.ensureCache.prepare();let c=0;e&&(c=U.getPointer(e));const d=bh(r),h=U.ensureFloat64(d),f=Bk(i,fi.PE_MGRS_MAX),m=U.ensureInt32(f),v=U._pe_geog_to_mgrs_extended(c,i,h,n,s,o,m);if(v)for(let w=0;w<i;w++)a[w]=U.UTF8ToString(f[w]);return v}static mgrsToGeogExtended(e,i,r,n,s){U.ensureCache.prepare();let o=0;e&&(o=U.getPointer(e));const a=r.map(f=>U.ensureString(f)),c=U.ensureInt32(a),d=U.ensureFloat64(new Array(2*i)),h=U._pe_mgrs_to_geog_extended(o,i,c,n,d);return h&&id(s,i,d),h}};const xue={geogToUsng(t,e,i,r,n,s,o){U.ensureCache.prepare();let a=0;t&&(a=U.getPointer(t));const c=bh(i),d=U.ensureFloat64(c),h=Bk(e,fi.PE_MGRS_MAX),f=U.ensureInt32(h),m=U._pe_geog_to_usng(a,e,d,r,n,s,f);if(m)for(let v=0;v<e;v++)o[v]=U.UTF8ToString(h[v]);return m},usngToGeog(t,e,i,r){U.ensureCache.prepare();let n=0;t&&(n=U.getPointer(t));const s=i.map(d=>U.ensureString(d)),o=U.ensureInt32(s),a=U.ensureFloat64(new Array(2*e)),c=U._pe_usng_to_geog(n,e,o,a);return c&&id(r,e,a),c}};let GB=class Fx{static init(){Fx.PE_UTM_OPTS_NONE=U.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,Fx.PE_UTM_OPTS_ADD_SPACES=U.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,Fx.PE_UTM_OPTS_NS=U.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,i,r,n,s){U.ensureCache.prepare();let o=0;e&&(o=U.getPointer(e));const a=bh(r),c=U.ensureFloat64(a),d=Bk(i,fi.PE_UTM_MAX),h=U.ensureInt32(d),f=U._pe_geog_to_utm(o,i,c,n,h);if(f)for(let m=0;m<i;m++)s[m]=U.UTF8ToString(d[m]);return f}static utmToGeog(e,i,r,n,s){U.ensureCache.prepare();let o=0;e&&(o=U.getPointer(e));const a=r.map(f=>U.ensureString(f)),c=U.ensureInt32(a),d=U.ensureFloat64(new Array(2*i)),h=U._pe_utm_to_geog(o,i,c,n,d);return h&&id(s,i,d),h}};var Dn;let HB=(Dn=class{static init(){Dn.PE_PCSINFO_OPTION_NONE=U.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,Dn.PE_PCSINFO_OPTION_DOMAIN=U.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,Dn.PE_POLE_OUTSIDE_BOUNDARY=U.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,Dn.PE_POLE_POINT=U.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,i=Dn.PE_PCSINFO_OPTION_DOMAIN){let r=null,n=null;return Dn.cache.has(e)&&(n=Dn.cache.get(e),n[i]&&(r=n[i])),r||(r=U.PePCSInfo.prototype.generate(e,i),n||(n=[],Dn.cache.set(e,n)),n[i]=r),r}},Dn.cache=new Map,Dn);const Sue={versionString:()=>U.PeVersion.prototype.version_string()};function WB(t){function e(s,o,a){s[o]=a(s[o])}U=t,fi.init(),QR.init(),BB.init(),GB.init(),HB.init(),UB=class extends U.PeDouble{constructor(s=NaN){super(s)}destroy(){U.destroy(this)}[Symbol.dispose](){this.destroy()}},qB=class extends U.PeGCSExtent{destroy(){U.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[U.PeAngunit,U.PeDatum,U.PeGeogcs,U.PeGeogtran,U.PeObject,U.PeParameter,U.PePrimem,U.PeProjcs,U.PeSpheroid,U.PeUnit];for(const s of i)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(fi.PE_NAME_MAX))});for(const s of[U.PeGeogtran,U.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(fi.PE_PARM_MAX);let c=o.call(this);for(let d=0;d<a.length;d++){const h=U.getValue(c,"*");a[d]=h?U.wrapPointer(h,U.PeParameter):null,c+=Int32Array.BYTES_PER_ELEMENT}return a});e(U.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const c=[];return id(c,a,s.call(this),o),c}),e(U.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=U._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const c=s.call(this);if(!U.compare(c,U.NULL)){a=[c];const d=this.getSteps();if(d>1){const h=U.getPointer(c);for(let f=1;f<d;f++)a.push(U.wrapPointer(h+o*f,U.PeGTlistExtendedGTs))}}return a}});const r=U._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const c=s.call(this);if(!U.compare(c,U.NULL)){a=[c];const d=c.getNump();if(d>1){const h=U.getPointer(c);for(let f=1;f<d;f++)a.push(U.wrapPointer(h+r*f,U.PeHorizon))}}return o.set(s,a),a};e(U.PeProjcs.prototype,"horizonGcsGenerate",n),e(U.PeProjcs.prototype,"horizonPcsGenerate",n),U.PeObject.prototype.toString=function(s=fi.PE_STR_OPTS_NONE){U.ensureCache.prepare();const o=U.getPointer(this),a=U.ensureInt8(new Array(fi.PE_BUFFER_MAX));return U.UTF8ToString(U._pe_object_to_string_ext(o,s,a))},U.PeGeogcs.prototype.destroy=function(){this.Delete(),Lo(this),this.ptr=0},U.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},U.PeProjcs.prototype.destroy=function(){this.Delete(),Lo(this),this.ptr=0},U.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Lo(t){if(!t)return;const e=U.getClass(t);if(!e)return;const i=U.getCache(e);if(!i)return;const r=U.getPointer(t);r&&delete i[r]}function Bk(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(U.ensureInt8(r));return i}function bh(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function id(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=U.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=U.getValue(i,"double"),t[s][1]=U.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}const zze=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:Lx,PeDefs:fi,get PeDouble(){return UB},PeFactory:Af,get PeGCSExtent(){return qB},PeGTTransformations:vue,PeGTlistExtended:QR,PeGTlistExtendedEntry:yue,PeLineType:bue,PeMath:wue,PeNotationDms:_ue,PeNotationMgrs:BB,PeNotationUsng:xue,PeNotationUtm:GB,PePCSInfo:HB,PeVersion:Sue,_init:WB,get _pe(){return U},isLoaded:VB,isSupported:mue,load:gue},Symbol.toStringTag,{value:"Module"}));let p;const I={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(p=2e3;p<=2045;p++)I[p]=0;for(p=2056;p<=2065;p++)I[p]=0;for(p=2067;p<=2135;p++)I[p]=0;for(p=2137;p<=2154;p++)I[p]=0;for(p=2161;p<=2170;p++)I[p]=0;for(p=2172;p<=2193;p++)I[p]=0;for(p=2195;p<=2198;p++)I[p]=0;for(p=2200;p<=2203;p++)I[p]=0;for(p=2205;p<=2217;p++)I[p]=0;for(p=2222;p<=2224;p++)I[p]=1;for(p=2225;p<=2250;p++)I[p]=2;for(p=2251;p<=2253;p++)I[p]=1;for(p=2257;p<=2264;p++)I[p]=2;for(p=2274;p<=2279;p++)I[p]=2;for(p=2280;p<=2282;p++)I[p]=1;for(p=2283;p<=2289;p++)I[p]=2;for(p=2290;p<=2292;p++)I[p]=0;for(p=2308;p<=2313;p++)I[p]=0;for(p=2315;p<=2491;p++)I[p]=0;for(p=2494;p<=2866;p++)I[p]=0;for(p=2867;p<=2869;p++)I[p]=1;for(p=2870;p<=2888;p++)I[p]=2;for(p=2891;p<=2895;p++)I[p]=2;for(p=2896;p<=2898;p++)I[p]=1;for(p=2902;p<=2908;p++)I[p]=2;for(p=2915;p<=2920;p++)I[p]=2;for(p=2921;p<=2923;p++)I[p]=1;for(p=2924;p<=2930;p++)I[p]=2;for(p=2931;p<=2962;p++)I[p]=0;for(p=2964;p<=2968;p++)I[p]=2;for(p=2969;p<=2973;p++)I[p]=0;for(p=2975;p<=2991;p++)I[p]=0;for(p=2995;p<=3051;p++)I[p]=0;for(p=3054;p<=3079;p++)I[p]=0;for(p=3081;p<=3088;p++)I[p]=0;for(p=3092;p<=3101;p++)I[p]=0;for(p=3106;p<=3138;p++)I[p]=0;for(p=3146;p<=3151;p++)I[p]=0;for(p=3153;p<=3166;p++)I[p]=0;for(p=3168;p<=3172;p++)I[p]=0;for(p=3174;p<=3203;p++)I[p]=0;for(p=3294;p<=3358;p++)I[p]=0;for(p=3367;p<=3403;p++)I[p]=0;for(p=3408;p<=3416;p++)I[p]=0;for(p=3417;p<=3438;p++)I[p]=2;for(p=3441;p<=3446;p++)I[p]=2;for(p=3447;p<=3450;p++)I[p]=0;for(p=3451;p<=3459;p++)I[p]=2;for(p=3460;p<=3478;p++)I[p]=0;for(p=3554;p<=3559;p++)I[p]=0;for(p=3560;p<=3570;p++)I[p]=2;for(p=3571;p<=3581;p++)I[p]=0;for(p=3594;p<=3597;p++)I[p]=0;for(p=3601;p<=3604;p++)I[p]=0;for(p=3637;p<=3639;p++)I[p]=0;for(p=3665;p<=3667;p++)I[p]=0;for(p=3693;p<=3695;p++)I[p]=0;for(p=3701;p<=3727;p++)I[p]=0;for(p=3728;p<=3739;p++)I[p]=2;for(p=3740;p<=3751;p++)I[p]=0;for(p=3753;p<=3760;p++)I[p]=2;for(p=3761;p<=3773;p++)I[p]=0;for(p=3775;p<=3777;p++)I[p]=0;for(p=3779;p<=3781;p++)I[p]=0;for(p=3783;p<=3785;p++)I[p]=0;for(p=3788;p<=3791;p++)I[p]=0;for(p=3797;p<=3802;p++)I[p]=0;for(p=3814;p<=3816;p++)I[p]=0;for(p=3825;p<=3829;p++)I[p]=0;for(p=3832;p<=3841;p++)I[p]=0;for(p=3844;p<=3852;p++)I[p]=0;for(p=3873;p<=3885;p++)I[p]=0;for(p=3890;p<=3893;p++)I[p]=0;for(p=3907;p<=3912;p++)I[p]=0;for(p=3942;p<=3950;p++)I[p]=0;for(p=3968;p<=3970;p++)I[p]=0;for(p=3973;p<=3976;p++)I[p]=0;for(p=3986;p<=3989;p++)I[p]=0;for(p=3994;p<=3997;p++)I[p]=0;for(p=4048;p<=4051;p++)I[p]=0;for(p=4056;p<=4063;p++)I[p]=0;for(p=4093;p<=4096;p++)I[p]=0;for(p=4390;p<=4398;p++)I[p]=0;for(p=4399;p<=4413;p++)I[p]=2;for(p=4418;p<=4433;p++)I[p]=2;for(p=4455;p<=4457;p++)I[p]=2;for(p=4484;p<=4489;p++)I[p]=0;for(p=4491;p<=4554;p++)I[p]=0;for(p=4568;p<=4589;p++)I[p]=0;for(p=4652;p<=4656;p++)I[p]=0;for(p=4766;p<=4800;p++)I[p]=0;for(p=5014;p<=5016;p++)I[p]=0;for(p=5069;p<=5072;p++)I[p]=0;for(p=5105;p<=5130;p++)I[p]=0;for(p=5167;p<=5188;p++)I[p]=0;for(p=5253;p<=5259;p++)I[p]=0;for(p=5269;p<=5275;p++)I[p]=0;for(p=5292;p<=5311;p++)I[p]=0;for(p=5329;p<=5331;p++)I[p]=0;for(p=5343;p<=5349;p++)I[p]=0;for(p=5355;p<=5357;p++)I[p]=0;for(p=5387;p<=5389;p++)I[p]=0;for(p=5459;p<=5463;p++)I[p]=0;for(p=5479;p<=5482;p++)I[p]=0;for(p=5518;p<=5520;p++)I[p]=0;for(p=5530;p<=5539;p++)I[p]=0;for(p=5550;p<=5552;p++)I[p]=0;for(p=5562;p<=5583;p++)I[p]=0;for(p=5623;p<=5625;p++)I[p]=2;for(p=5631;p<=5639;p++)I[p]=0;for(p=5649;p<=5653;p++)I[p]=0;for(p=5663;p<=5680;p++)I[p]=0;for(p=5682;p<=5685;p++)I[p]=0;for(p=5875;p<=5877;p++)I[p]=0;for(p=5896;p<=5899;p++)I[p]=0;for(p=5921;p<=5940;p++)I[p]=0;for(p=6050;p<=6125;p++)I[p]=0;for(p=6244;p<=6275;p++)I[p]=0;for(p=6328;p<=6348;p++)I[p]=0;for(p=6350;p<=6356;p++)I[p]=0;for(p=6366;p<=6372;p++)I[p]=0;for(p=6381;p<=6387;p++)I[p]=0;for(p=6393;p<=6404;p++)I[p]=0;for(p=6480;p<=6483;p++)I[p]=0;for(p=6511;p<=6514;p++)I[p]=0;for(p=6579;p<=6581;p++)I[p]=0;for(p=6619;p<=6624;p++)I[p]=0;for(p=6625;p<=6627;p++)I[p]=2;for(p=6628;p<=6632;p++)I[p]=0;for(p=6634;p<=6637;p++)I[p]=0;for(p=6669;p<=6692;p++)I[p]=0;for(p=6707;p<=6709;p++)I[p]=0;for(p=6720;p<=6723;p++)I[p]=0;for(p=6732;p<=6738;p++)I[p]=0;for(p=6931;p<=6933;p++)I[p]=0;for(p=6956;p<=6959;p++)I[p]=0;for(p=7005;p<=7007;p++)I[p]=0;for(p=7057;p<=7070;p++)I[p]=2;for(p=7074;p<=7082;p++)I[p]=0;for(p=7109;p<=7118;p++)I[p]=0;for(p=7119;p<=7127;p++)I[p]=1;for(p=7374;p<=7376;p++)I[p]=0;for(p=7528;p<=7586;p++)I[p]=0;for(p=7587;p<=7645;p++)I[p]=2;for(p=7692;p<=7696;p++)I[p]=0;for(p=7755;p<=7787;p++)I[p]=0;for(p=7791;p<=7795;p++)I[p]=0;for(p=7799;p<=7801;p++)I[p]=0;for(p=7803;p<=7805;p++)I[p]=0;for(p=7825;p<=7831;p++)I[p]=0;for(p=7845;p<=7859;p++)I[p]=0;for(p=8013;p<=8032;p++)I[p]=0;for(p=8065;p<=8068;p++)I[p]=1;for(p=8518;p<=8529;p++)I[p]=2;for(p=8533;p<=8536;p++)I[p]=2;for(p=8538;p<=8540;p++)I[p]=2;for(p=8677;p<=8679;p++)I[p]=0;for(p=8836;p<=8840;p++)I[p]=0;for(p=8857;p<=8859;p++)I[p]=0;for(p=8908;p<=8910;p++)I[p]=0;for(p=9154;p<=9159;p++)I[p]=0;for(p=9205;p<=9218;p++)I[p]=0;for(p=9271;p<=9273;p++)I[p]=0;for(p=9295;p<=9297;p++)I[p]=0;for(p=9356;p<=9360;p++)I[p]=0;for(p=9404;p<=9407;p++)I[p]=0;for(p=9476;p<=9482;p++)I[p]=0;for(p=9487;p<=9494;p++)I[p]=0;for(p=9697;p<=9699;p++)I[p]=0;for(p=9821;p<=9865;p++)I[p]=0;for(p=10285;p<=10291;p++)I[p]=0;for(p=10314;p<=10317;p++)I[p]=0;for(p=10448;p<=10465;p++)I[p]=0;for(p=10726;p<=10729;p++)I[p]=0;for(p=10731;p<=10733;p++)I[p]=0;for(p=11114;p<=11118;p++)I[p]=0;for(p=20004;p<=20032;p++)I[p]=0;for(p=20047;p<=20049;p++)I[p]=0;for(p=20062;p<=20092;p++)I[p]=0;for(p=20135;p<=20138;p++)I[p]=0;for(p=20248;p<=20258;p++)I[p]=0;for(p=20348;p<=20358;p++)I[p]=0;for(p=20436;p<=20440;p++)I[p]=0;for(p=20822;p<=20824;p++)I[p]=0;for(p=20904;p<=20932;p++)I[p]=0;for(p=20934;p<=20936;p++)I[p]=0;for(p=21004;p<=21032;p++)I[p]=0;for(p=21035;p<=21037;p++)I[p]=0;for(p=21095;p<=21097;p++)I[p]=0;for(p=21148;p<=21150;p++)I[p]=0;for(p=21207;p<=21264;p++)I[p]=0;for(p=21307;p<=21364;p++)I[p]=0;for(p=21413;p<=21423;p++)I[p]=0;for(p=21453;p<=21463;p++)I[p]=0;for(p=21473;p<=21483;p++)I[p]=0;for(p=21780;p<=21782;p++)I[p]=0;for(p=21891;p<=21894;p++)I[p]=0;for(p=21896;p<=21899;p++)I[p]=0;for(p=22171;p<=22177;p++)I[p]=0;for(p=22181;p<=22187;p++)I[p]=0;for(p=22191;p<=22197;p++)I[p]=0;for(p=22207;p<=22222;p++)I[p]=0;for(p=22229;p<=22232;p++)I[p]=0;for(p=22234;p<=22236;p++)I[p]=0;for(p=22243;p<=22250;p++)I[p]=0;for(p=22262;p<=22265;p++)I[p]=0;for(p=22307;p<=22322;p++)I[p]=0;for(p=22348;p<=22357;p++)I[p]=0;for(p=22407;p<=22422;p++)I[p]=0;for(p=22462;p<=22465;p++)I[p]=0;for(p=22521;p<=22525;p++)I[p]=0;for(p=22607;p<=22622;p++)I[p]=0;for(p=22641;p<=22646;p++)I[p]=0;for(p=22648;p<=22657;p++)I[p]=0;for(p=22707;p<=22722;p++)I[p]=0;for(p=22762;p<=22765;p++)I[p]=0;for(p=22807;p<=22822;p++)I[p]=0;for(p=22991;p<=22994;p++)I[p]=0;for(p=23028;p<=23038;p++)I[p]=0;for(p=23301;p<=23333;p++)I[p]=2;for(p=23830;p<=23853;p++)I[p]=0;for(p=23866;p<=23872;p++)I[p]=0;for(p=23877;p<=23884;p++)I[p]=0;for(p=23886;p<=23894;p++)I[p]=0;for(p=23946;p<=23948;p++)I[p]=0;for(p=24311;p<=24313;p++)I[p]=0;for(p=24342;p<=24347;p++)I[p]=0;for(p=24370;p<=24374;p++)I[p]=10;for(p=24375;p<=24381;p++)I[p]=0;for(p=24718;p<=24721;p++)I[p]=0;for(p=24817;p<=24821;p++)I[p]=0;for(p=24877;p<=24882;p++)I[p]=0;for(p=24891;p<=24893;p++)I[p]=0;for(p=25391;p<=25395;p++)I[p]=0;for(p=25828;p<=25838;p++)I[p]=0;for(p=26191;p<=26195;p++)I[p]=0;for(p=26391;p<=26393;p++)I[p]=0;for(p=26701;p<=26722;p++)I[p]=0;for(p=26729;p<=26799;p++)I[p]=2;for(p=26801;p<=26803;p++)I[p]=2;for(p=26811;p<=26813;p++)I[p]=2;for(p=26847;p<=26870;p++)I[p]=2;for(p=26891;p<=26899;p++)I[p]=0;for(p=26901;p<=26923;p++)I[p]=0;for(p=26929;p<=26946;p++)I[p]=0;for(p=26948;p<=26998;p++)I[p]=0;for(p=27037;p<=27040;p++)I[p]=0;for(p=27205;p<=27232;p++)I[p]=0;for(p=27258;p<=27260;p++)I[p]=0;for(p=27391;p<=27398;p++)I[p]=0;for(p=27561;p<=27564;p++)I[p]=0;for(p=27571;p<=27574;p++)I[p]=0;for(p=27581;p<=27584;p++)I[p]=0;for(p=27591;p<=27594;p++)I[p]=0;for(p=27700;p<=27707;p++)I[p]=0;for(p=28191;p<=28193;p++)I[p]=0;for(p=28348;p<=28358;p++)I[p]=0;for(p=28402;p<=28432;p++)I[p]=0;for(p=28462;p<=28492;p++)I[p]=0;for(p=29118;p<=29122;p++)I[p]=0;for(p=29168;p<=29172;p++)I[p]=0;for(p=29177;p<=29185;p++)I[p]=0;for(p=29187;p<=29195;p++)I[p]=0;for(p=29900;p<=29903;p++)I[p]=0;for(p=30161;p<=30179;p++)I[p]=0;for(p=30491;p<=30494;p++)I[p]=0;for(p=30729;p<=30732;p++)I[p]=0;for(p=31251;p<=31259;p++)I[p]=0;for(p=31265;p<=31268;p++)I[p]=0;for(p=31275;p<=31279;p++)I[p]=0;for(p=31281;p<=31297;p++)I[p]=0;for(p=31461;p<=31469;p++)I[p]=0;for(p=31491;p<=31495;p++)I[p]=0;for(p=31917;p<=31922;p++)I[p]=0;for(p=31965;p<=32e3;p++)I[p]=0;for(p=32001;p<=32003;p++)I[p]=2;for(p=32005;p<=32031;p++)I[p]=2;for(p=32033;p<=32060;p++)I[p]=2;for(p=32064;p<=32067;p++)I[p]=2;for(p=32074;p<=32077;p++)I[p]=2;for(p=32081;p<=32086;p++)I[p]=0;for(p=32107;p<=32130;p++)I[p]=0;for(p=32133;p<=32159;p++)I[p]=0;for(p=32164;p<=32167;p++)I[p]=2;for(p=32180;p<=32199;p++)I[p]=0;for(p=32201;p<=32260;p++)I[p]=0;for(p=32301;p<=32360;p++)I[p]=0;for(p=32401;p<=32460;p++)I[p]=0;for(p=32501;p<=32560;p++)I[p]=0;for(p=32601;p<=32662;p++)I[p]=0;for(p=32664;p<=32667;p++)I[p]=2;for(p=32701;p<=32761;p++)I[p]=0;for(p=53001;p<=53004;p++)I[p]=0;for(p=53008;p<=53019;p++)I[p]=0;for(p=53021;p<=53032;p++)I[p]=0;for(p=53034;p<=53037;p++)I[p]=0;for(p=53042;p<=53046;p++)I[p]=0;for(p=53074;p<=53080;p++)I[p]=0;for(p=54001;p<=54004;p++)I[p]=0;for(p=54008;p<=54019;p++)I[p]=0;for(p=54021;p<=54032;p++)I[p]=0;for(p=54034;p<=54037;p++)I[p]=0;for(p=54042;p<=54046;p++)I[p]=0;for(p=54048;p<=54053;p++)I[p]=0;for(p=54074;p<=54080;p++)I[p]=0;for(p=54090;p<=54096;p++)I[p]=0;for(p=54098;p<=54101;p++)I[p]=0;for(p=65161;p<=65163;p++)I[p]=0;for(p=102001;p<=102040;p++)I[p]=0;for(p=102042;p<=102063;p++)I[p]=0;for(p=102065;p<=102067;p++)I[p]=0;for(p=102070;p<=102117;p++)I[p]=0;for(p=102122;p<=102216;p++)I[p]=0;for(p=102221;p<=102377;p++)I[p]=0;for(p=102382;p<=102388;p++)I[p]=0;for(p=102389;p<=102398;p++)I[p]=2;for(p=102399;p<=102444;p++)I[p]=0;for(p=102445;p<=102447;p++)I[p]=2;for(p=102448;p<=102458;p++)I[p]=0;for(p=102459;p<=102468;p++)I[p]=2;for(p=102469;p<=102499;p++)I[p]=0;for(p=102500;p<=102519;p++)I[p]=1;for(p=102520;p<=102524;p++)I[p]=0;for(p=102525;p<=102529;p++)I[p]=2;for(p=102530;p<=102588;p++)I[p]=0;for(p=102590;p<=102598;p++)I[p]=0;for(p=102601;p<=102603;p++)I[p]=0;for(p=102605;p<=102628;p++)I[p]=0;for(p=102629;p<=102646;p++)I[p]=2;for(p=102648;p<=102700;p++)I[p]=2;for(p=102701;p<=102703;p++)I[p]=0;for(p=102707;p<=102730;p++)I[p]=2;for(p=102733;p<=102758;p++)I[p]=2;for(p=102767;p<=102900;p++)I[p]=0;for(p=102901;p<=102933;p++)I[p]=2;for(p=102934;p<=102950;p++)I[p]=13;for(p=102951;p<=102963;p++)I[p]=0;for(p=102965;p<=102969;p++)I[p]=0;for(p=102971;p<=102973;p++)I[p]=0;for(p=102975;p<=102989;p++)I[p]=0;for(p=102990;p<=102992;p++)I[p]=1;for(p=102997;p<=103002;p++)I[p]=0;for(p=103003;p<=103008;p++)I[p]=2;for(p=103009;p<=103011;p++)I[p]=0;for(p=103012;p<=103014;p++)I[p]=2;for(p=103019;p<=103021;p++)I[p]=0;for(p=103022;p<=103024;p++)I[p]=2;for(p=103029;p<=103031;p++)I[p]=0;for(p=103032;p<=103034;p++)I[p]=2;for(p=103065;p<=103068;p++)I[p]=0;for(p=103074;p<=103076;p++)I[p]=0;for(p=103077;p<=103079;p++)I[p]=1;for(p=103080;p<=103082;p++)I[p]=0;for(p=103083;p<=103085;p++)I[p]=2;for(p=103090;p<=103093;p++)I[p]=0;for(p=103097;p<=103099;p++)I[p]=0;for(p=103100;p<=103102;p++)I[p]=2;for(p=103107;p<=103109;p++)I[p]=0;for(p=103110;p<=103112;p++)I[p]=2;for(p=103113;p<=103116;p++)I[p]=0;for(p=103117;p<=103120;p++)I[p]=2;for(p=103153;p<=103157;p++)I[p]=0;for(p=103158;p<=103162;p++)I[p]=2;for(p=103163;p<=103165;p++)I[p]=0;for(p=103166;p<=103168;p++)I[p]=1;for(p=103169;p<=103171;p++)I[p]=2;for(p=103186;p<=103188;p++)I[p]=0;for(p=103189;p<=103191;p++)I[p]=2;for(p=103192;p<=103195;p++)I[p]=0;for(p=103196;p<=103199;p++)I[p]=2;for(p=103200;p<=103224;p++)I[p]=0;for(p=103225;p<=103227;p++)I[p]=1;for(p=103232;p<=103237;p++)I[p]=0;for(p=103238;p<=103243;p++)I[p]=2;for(p=103244;p<=103246;p++)I[p]=0;for(p=103247;p<=103249;p++)I[p]=2;for(p=103254;p<=103256;p++)I[p]=0;for(p=103257;p<=103259;p++)I[p]=2;for(p=103264;p<=103266;p++)I[p]=0;for(p=103267;p<=103269;p++)I[p]=2;for(p=103300;p<=103375;p++)I[p]=0;for(p=103381;p<=103383;p++)I[p]=0;for(p=103384;p<=103386;p++)I[p]=1;for(p=103387;p<=103389;p++)I[p]=0;for(p=103390;p<=103392;p++)I[p]=2;for(p=103397;p<=103399;p++)I[p]=0;for(p=103400;p<=103471;p++)I[p]=2;for(p=103476;p<=103478;p++)I[p]=0;for(p=103479;p<=103481;p++)I[p]=2;for(p=103486;p<=103488;p++)I[p]=0;for(p=103489;p<=103491;p++)I[p]=2;for(p=103492;p<=103495;p++)I[p]=0;for(p=103496;p<=103499;p++)I[p]=2;for(p=103528;p<=103543;p++)I[p]=0;for(p=103544;p<=103548;p++)I[p]=2;for(p=103549;p<=103551;p++)I[p]=0;for(p=103552;p<=103554;p++)I[p]=1;for(p=103555;p<=103557;p++)I[p]=2;for(p=103558;p<=103560;p++)I[p]=0;for(p=103571;p<=103573;p++)I[p]=0;for(p=103574;p<=103576;p++)I[p]=2;for(p=103577;p<=103580;p++)I[p]=0;for(p=103581;p<=103583;p++)I[p]=2;for(p=103595;p<=103694;p++)I[p]=0;for(p=103696;p<=103699;p++)I[p]=0;for(p=103700;p<=103793;p++)I[p]=2;for(p=103794;p<=103890;p++)I[p]=0;for(p=103891;p<=103896;p++)I[p]=2;for(p=103900;p<=103971;p++)I[p]=2;for(p=103972;p<=103977;p++)I[p]=0;for(p=112e3;p<=112101;p++)I[p]=0;const ZB=[102100,102113,3857,3785,900913],$ue=[104905,104971],Tue=[104903],kue=[4326,...ZB,...$ue,...Tue],nw=[-20037508342788905e-9,20037508342788905e-9],IA=[-20037508342787e-6,20037508342787e-6],zE={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:nw,origin:IA,dx:1e-5},JB={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:nw,origin:IA,dx:1e-5},102100:zE,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:nw,origin:IA,dx:1e-5},3857:zE,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:zE,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Hi(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||el(t)&&el(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&i===a}let n,s;return t.wkt2&&e.wkt2?(n=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,s=e.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function hn(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&JB[e]||null}function O$(t){if(!t)return;const{wkid:e,vcsWkid:i,falseM:r,falseX:n,falseY:s,falseZ:o,mTolerance:a,mUnits:c,xyTolerance:d,xyUnits:h,zTolerance:f,zUnits:m}=t;if(e&&[i,r,n,s,o,a,c,d,h,f,m].every(w=>w==null))return String(e);const v={wkid:e,wkt:e?void 0:t.wkt||t.wkt2,vcsWkid:i,falseM:r,falseX:n,falseY:s,falseZ:o,mTolerance:a,mUnits:c,xyTolerance:d,xyUnits:h,zTolerance:f,zUnits:m};for(const[w,x]of Object.entries(v))x===null&&delete v[w];return JSON.stringify(v)}function Hy(t){if(!bs(t))return!1;const{wkid:e}=t;if(e)return I[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function Iue(t){return!(YB(t)||KB(t))}function wh(t){return(t==null?void 0:t.wkid)===4326}function jze(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function FD(t){return(t==null?void 0:t.wkid)===4490}function el(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&ZB.includes(e)}function Eue(t){return(t==null?void 0:t.wkid)===32662}function Gk(t){return t===104971||t===104905}function YB(t){return Gk(t==null?void 0:t.wkid)}function Hk(t){return t===104903}function KB(t){return Hk(t==null?void 0:t.wkid)}function Mue(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&kue.includes(e)}function bs(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const QB={wkid:4326,wkt:ld(JB[4326].wkTemplate,{Central_Meridian:"0.0"})},XB={wkid:102100,latestWkid:3857},Aue={wkid:32662};function XR(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Cue=XR(yi),eL=XR(qa),tL=XR(td),Oue={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${yi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},Pue=eL.wkt.toUpperCase(),Rue=tL.wkt.toUpperCase();function Lue(t){if(t!=null&&bs(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(Gk(e))return qa;const r=i==null?void 0:i.toUpperCase();if(i&&r===Pue)return qa;if(Hk(e)||r&&r===Rue)return td}return yi}function Vze(t){return Gk(t)?qa:Hk(t)?td:yi}function P$(t){return Hi(t,Cue)}function rd(t){return P$(t)||Hi(t,eL)||Hi(t,tL)}const eG=39.37,Fue=yi.radius*Math.PI/200,tG=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,ay=I,iG=/UNIT\[([^\]]+)]/i,Nue=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),Due=Wi()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),go=t=>t*t,Vc=t=>t*t*t,sw={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:go(.001)},"square-centimeters":{inBaseUnits:go(.01)},"square-decimeters":{inBaseUnits:go(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:go(1e3)},"square-inches":{inBaseUnits:go(.0254)},"square-feet":{inBaseUnits:go(.3048)},"square-yards":{inBaseUnits:go(.9144)},"square-miles":{inBaseUnits:go(1609.344)},"square-nautical-miles":{inBaseUnits:go(1852)},"square-us-feet":{inBaseUnits:go(1200/3937)},acres:{inBaseUnits:.0015625*go(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Vc(.001)},"cubic-centimeters":{inBaseUnits:1e3*Vc(.01)},"cubic-decimeters":{inBaseUnits:1e3*Vc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Vc(1e3)},"cubic-inches":{inBaseUnits:1e3*Vc(.0254)},"cubic-feet":{inBaseUnits:1e3*Vc(.3048)},"cubic-yards":{inBaseUnits:1e3*Vc(.9144)},"cubic-miles":{inBaseUnits:1e3*Vc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},zue=(()=>{const t={};for(const e in sw)for(const i in sw[e].units)t[i]=e;return t})();function jue(t,e,i){return t*sw[i].units[e].inBaseUnits}function Vue(t,e,i){return t/sw[i].units[e].inBaseUnits}const Uue=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],que=["metric","imperial"],rG=[...que,...Uue],Bue=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function EA(t){const e=zue[t];if(!e)throw new Error("unknown type");return e}function ND(t,e=null){return e=e||EA(t),sw[e].baseUnit===t}function ki(t,e,i){if(e===i)return t;const r=EA(e);if(r!==EA(i))throw new Error("incompatible units");const n=ND(e,r)?t:jue(t,e,r);return ND(i,r)?n:Vue(n,i,r)}function Uze(t,e,i,r=!1){if(!r&&Hy(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=Fh(e);return n!==i&&(t=n?ki(t,n,i):ki(t*=so(e),"meters",i)),t}function qze(t,e,i,r=!1){if(!r&&Hy(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=Fh(i);return e!==n&&(t=n?ki(t,e,n):ki(t,e,"meters")/so(i)),t}function Gue(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function Bze(t){return Gue(t)}function Gze(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function Hze(t,e,i){switch(i){case"metric":return Hue(t,e);case"imperial":return Zue(t,e);default:return i}}function Wze(t,e,i){switch(i){case"metric":return Wue(t,e);case"imperial":return Jue(t,e);default:return i}}function Hue(t,e){const i=ki(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Wue(t,e){const i=ki(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Zue(t,e){const i=ki(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Jue(t,e){const i=ki(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Zze(t,e){const i=ki(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Jze(t,e){const i=ki(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Yue(t,e,i){return ki(t,e,"meters")/(i*Math.PI/180)}function iL(t){return Due.fromJSON(t.toLowerCase())||null}function R$(t){if(t!=null&&!Iue(t))return 1;const e=so(t);return e>1e5?1:e}function nG(t){return so(t)>=Lue(t).metersPerDegree?"meters":Fh(t)}function so(t,e=yi.metersPerDegree){return Kue(t,!0)??e}function Kue(t,e=!1){const i=(t==null?void 0:t.wkid)??null,r=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(Gk(i))return qa.metersPerDegree;if(Hk(i))return td.metersPerDegree;n=ay.values[ay[i]],!n&&e&&Nue.has(i)&&(n=Fue)}else r&&(aG(r)?n=DD(tG.exec(r),n):oG(r)&&(n=DD(iG.exec(r),n)));return n}function Yze(t){return Hy(t)?1:so(t)}function DD(t,e){return t!=null&&t[1]?sG(t[1]):e}function sG(t){return parseFloat(t.split(",")[1])}function Fh(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(e)r=ay.units[ay[e]];else if(i){const n=aG(i)?tG:oG(i)?iG:null;if(n){const s=n.exec(i);s!=null&&s[1]&&(r=Xue(s[1]))}}return r!=null?iL(r):null}function Kze(t){const e=Fh(t);return e!=null&&rG.includes(e)?e:null}function Qze(t){const e=nG(t);return e!=null&&rG.includes(e)?e:null}function Xze(t){const e=Fh(t);return e==null?null:Bue.get(e)}function oG(t){return/^GEOCCS/i.test(t)}function aG(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const Que=1e-7;function Xue(t){const e=/[\\"']([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!iL(i)){const r=sG(t);i=null;const n=ay.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<Que){i=ay.units[s];break}}return i}function eje(t){const e=Fh(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const ede={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},tde={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},ide={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},rde=Wi()(ede),nde=Wi()(tde),tje=Wi()(ide);var pa,Va;let me=(Va=class extends Z{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return pa.WebMercator;if((e==null?void 0:e.wkid)===4326)return pa.WGS84;const i=new pa;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.falseM=null,this.falseX=null,this.falseY=null,this.falseZ=null,this.mTolerance=null,this.mUnits=null,this.xyTolerance=null,this.xyUnits=null,this.zTolerance=null,this.zUnits=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return wh(this)}get isWebMercator(){return el(this)}get isGeographic(){return Hy(this)}get isWrappable(){return Mue(this)}get metersPerUnit(){return so(this)}get unit(){return Fh(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===pa.WGS84)return new pa(QB);if(this===pa.WebMercator)return new pa(XB);const e=new pa;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=V(this.imageCoordinateSystem)),this.falseM!=null&&(e.falseM=this.falseM),this.falseX!=null&&(e.falseX=this.falseX),this.falseY!=null&&(e.falseY=this.falseY),this.falseZ!=null&&(e.falseZ=this.falseZ),this.mTolerance!=null&&(e.mTolerance=this.mTolerance),this.mUnits!=null&&(e.mUnits=this.mUnits),this.xyTolerance!=null&&(e.xyTolerance=this.xyTolerance),this.xyUnits!=null&&(e.xyUnits=this.xyUnits),this.zTolerance!=null&&(e.zTolerance=this.zTolerance),this.zUnits!=null&&(e.zUnits=this.zUnits),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return i==null||n?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===i&&s.referenceServiceName===r:s.id===i}return Hi(this,e)}toJSON(e){return this.write(void 0,e)}},pa=Va,Va.GCS_NAD_1927=null,Va.WGS84=null,Va.WebMercator=null,Va.PlateCarree=null,Va);l([Me({readOnly:!0})],me.prototype,"isWGS84",null),l([Me({readOnly:!0})],me.prototype,"isWebMercator",null),l([Me({readOnly:!0})],me.prototype,"isGeographic",null),l([Me({readOnly:!0})],me.prototype,"isWrappable",null),l([Me({type:nt,json:{write:!0}})],me.prototype,"latestWkid",void 0),l([Me({readOnly:!0})],me.prototype,"metersPerUnit",null),l([Me({readOnly:!0})],me.prototype,"unit",null),l([Me({type:nt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],me.prototype,"wkid",void 0),l([Me({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],me.prototype,"wkt",void 0),l([le("wkt"),le("web-scene","wkt")],me.prototype,"writeWkt",null),l([Me({type:String,json:{write:!1}})],me.prototype,"wkt2",void 0),l([Me({type:nt,json:{write:!0}})],me.prototype,"vcsWkid",void 0),l([Me({type:nt,json:{write:!0}})],me.prototype,"latestVcsWkid",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"falseM",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"falseX",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"falseY",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"falseZ",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"mTolerance",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"mUnits",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"xyTolerance",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"xyUnits",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"zTolerance",void 0),l([Me({type:Number,json:{write:!0}})],me.prototype,"zUnits",void 0),l([Me()],me.prototype,"imageCoordinateSystem",void 0),me=pa=l([wi("esri.geometry.SpatialReference")],me),me.prototype.toJSON.isDefaultToJSON=!0,me.GCS_NAD_1927=Se.freeze(new me({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),me.WGS84=Se.freeze(new me(QB)),me.WebMercator=Se.freeze(new me(XB)),me.PlateCarree=Se.freeze(new me(Aue));let Xi=class extends Z{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=me.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof me)return e;if(e!=null){const r=new me;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};l([u()],Xi.prototype,"type",void 0),l([u({readOnly:!0})],Xi.prototype,"cache",null),l([u({readOnly:!0})],Xi.prototype,"extent",null),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Xi.prototype,"hasM",void 0),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Xi.prototype,"hasZ",void 0),l([u({type:me,json:{write:!0},value:me.WGS84})],Xi.prototype,"spatialReference",void 0),l([oe("spatialReference")],Xi.prototype,"readSpatialReference",null),Xi=l([E("esri.geometry.Geometry")],Xi);function ly(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new j("internal:mesh","Mesh geometries are not supported for this operation")}function sde(t){t.forEach(ly)}const ode=57.29577951308232,ade=.017453292519943;function zD(t){return t*ode}function jD(t){return t*ade}function rje(t){return Math.PI/2-2*Math.atan(Math.exp(-t/yi.radius))}function MA(t){return t.wkid!=null||t.wkt!=null}const jE=[0,0];function L$(t,e,i,r,n){const s=t,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,jE,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,jE,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,jE,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,c=[];let d;for(let h=0;h<a.length;h++){const f=a[h];d=[],c.push(d);for(let m=0;m<f.length;m++)d.push(e(f[m][0],f[m][1],[0,0],r)),f[m].length>2&&d[m].push(f[m][2]),f[m].length>3&&d[m].push(f[m][3])}"paths"in o?o.paths=c:o.rings=c}else if("points"in s&&"points"in o){const a=s.points,c=[];for(let d=0;d<a.length;d++)c[d]=e(a[d][0],a[d][1],[0,0],r),a[d].length>2&&c[d].push(a[d][2]),a[d].length>3&&c[d].push(a[d][3]);o.points=c}return n}function Nx(t,e){const i=t&&(MA(t)?t:t.spatialReference),r=e&&(MA(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Hi(r,i)||el(r)&&wh(i)||el(i)&&wh(r))}function rL(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(MA(e)?e:e.spatialReference);return Nx(i,r)?Hi(i,r)?V(t):el(r)?L$(t,Om,me.WebMercator,!1,V(t)):wh(r)?L$(t,Wk,me.WGS84,!1,V(t)):null:null}function Om(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=jD(e);return i[0]=jD(t)*yi.radius,i[1]=yi.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Wk(t,e,i=[0,0],r=!1){if(t===nw[0])i[0]=-180;else if(t===nw[1])i[0]=180;else{const n=zD(t/yi.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=zD(Math.PI/2-2*Math.atan(Math.exp(-e/yi.radius))),i}function Bp(t,e=!1,i=V(t)){return ly(t),ly(i),L$(t,Om,me.WebMercator,e,i)}function Pm(t,e=!1,i=V(t)){return ly(t),ly(i),L$(t,Wk,me.WGS84,e,i)}function lG(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}function lde(t){var e;return((e=cG(t,uG))==null?void 0:e[0])??null}function cde(t){var e;return((e=cG(t,uG))==null?void 0:e[1])??null}function cG({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(el(i))return Wk(t,e,r);if(Hy(i))return r[0]=t,r[1]=e,r}return null}const uG=[0,0];var Dx;const VE=[0,0];function VD(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ze=Dx=class extends Xi{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Se.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new me(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)ie.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)ie.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=Om(s.longitude,s.latitude,VE);t=a[0],e=a[1]}}}else VD(i)?(n=i,i=null):VD(r)&&(n=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?ie.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&ie.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return cde(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Om(i,t,VE)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return lde(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Om(t,e,VE)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new Dx;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return Dx.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=t;let{x:c,y:d,spatialReference:h}=t;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[c,d]=Om(c,d),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[c,d]=Wk(c,d),h=s}return e===c&&i===d&&r===o&&n===a&&s.wkid===h.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=hn(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return lG(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};l([u({readOnly:!0})],ze.prototype,"cache",null),l([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ze.prototype,"hasM",null),l([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ze.prototype,"hasZ",null),l([u({type:Number})],ze.prototype,"latitude",null),l([u({type:Number})],ze.prototype,"longitude",null),l([u({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ti(t=>isNaN(t)?t:on(t))],ze.prototype,"x",void 0),l([le("x")],ze.prototype,"writeX",null),l([oe("x")],ze.prototype,"readX",null),l([u({type:Number,json:{write:!0}})],ze.prototype,"y",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ze.prototype,"z",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ze.prototype,"m",void 0),ze=Dx=l([E("esri.geometry.Point")],ze),ze.prototype.toJSON.isDefaultToJSON=!0;const UE=[0,0];function Zk(t,e){return e!=null&&Xr(t,e.x,e.y,e.z)}function nje(t,e){var i;if(!((i=e.points)!=null&&i.length))return!1;for(const r of e.points)if(!cy(t,r))return!1;return!0}function ude(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Xr(t,i,r,n)&&Xr(t,i,o,n)&&Xr(t,s,o,n)&&Xr(t,s,r,n)&&Xr(t,i,r,a)&&Xr(t,i,o,a)&&Xr(t,s,o,a)&&Xr(t,s,r,a):Xr(t,i,r)&&Xr(t,i,o)&&Xr(t,s,o)&&Xr(t,s,r)}function cy(t,e){return Xr(t,e[0],e[1])}function dde(t,e){return Xr(t,e[0],e[1],e[2])}function Xr(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function nL(t,e){return UE[1]=e.y,UE[0]=e.x,pde(t,UE)}function pde(t,e){return sL(t.rings,e)}function sL(t,e){if(!t||t.length<1)return!1;if(hde(t))return UD(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=UD(i,t[r],e);return i}function hde(t){return!Array.isArray(t[0][0])}function UD(t,e,i){const[r,n]=i;let s=t,o=0;for(let a=0,c=e.length;a<c;a++){o++,o===c&&(o=0);const[d,h]=e[a],[f,m]=e[o];(h<n&&m>=n||m<n&&h>=n)&&d+(n-h)/(m-h)*(f-d)<r&&(s=!s)}return s}function fde(t,e){return Zk(t,e)}function mde(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function gde(t,e){const{points:i,hasZ:r}=e,n=r?dde:cy;for(const s of i)if(n(t,s))return!0;return!1}const _h=[0,0],xh=[0,0],Sh=[0,0],$h=[0,0],yde=[_h,xh,Sh,$h],dG=[[Sh,_h],[_h,xh],[xh,$h],[$h,Sh]];function vde(t,e){return bde(t,e.rings)}function bde(t,e){_h[0]=t.xmin,_h[1]=t.ymax,xh[0]=t.xmax,xh[1]=t.ymax,Sh[0]=t.xmin,Sh[1]=t.ymin,$h[0]=t.xmax,$h[1]=t.ymin;for(const i of yde)if(sL(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(cy(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(cy(t,s)||pG(r,s,dG))return!0;r=s}}return!1}function wde(t,e){_h[0]=t.xmin,_h[1]=t.ymax,xh[0]=t.xmax,xh[1]=t.ymax,Sh[0]=t.xmin,Sh[1]=t.ymin,$h[0]=t.xmax,$h[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(cy(t,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(cy(t,o)||pG(n,o,dG))return!0;n=o}}return!1}const sr=[0,0];function _de(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=e+1;a<t.length;a++)for(let c=0;c<t[a].length-1;c++){const d=t[a][c],h=t[a][c+1];if(AA(s,o,d,h,sr)&&!(sr[0]===s[0]&&sr[1]===s[1]||sr[0]===d[0]&&sr[1]===d[1]||sr[0]===o[0]&&sr[1]===o[1]||sr[0]===h[0]&&sr[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let c=n+2;c<s;c++){const d=i[c],h=i[c+1];if(AA(o,a,d,h,sr)&&!(sr[0]===o[0]&&sr[1]===o[1]||sr[0]===d[0]&&sr[1]===d[1]||sr[0]===a[0]&&sr[1]===a[1]||sr[0]===h[0]&&sr[1]===h[1]))return!0}}}return!1}function pG(t,e,i){for(let r=0;r<i.length;r++)if(AA(t,e,i[r][0],i[r][1]))return!0;return!1}function AA(t,e,i,r,n){const[s,o]=t,[a,c]=e,[d,h]=i,[f,m]=r,v=f-d,w=s-d,x=a-s,$=m-h,T=o-h,C=c-o,P=$*x-v*C;if(P===0)return!1;const L=(v*T-$*w)/P,D=(x*T-C*w)/P;return L>=0&&L<=1&&D>=0&&D<=1&&(n&&(n[0]=s+L*(a-s),n[1]=o+L*(c-o)),!0)}function xde(t){switch(t){case"esriGeometryEnvelope":case"extent":return mde;case"esriGeometryMultipoint":case"multipoint":return gde;case"esriGeometryPoint":case"point":return fde;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return vde;case"esriGeometryPolyline":case"polyline":return wde}}var ko;function Sde(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Uc(t,e,i){return e==null?i:i==null?e:t(e,i)}let Ke=ko=class extends Xi{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return Sde(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?me.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??me.WGS84}}static fromPoint(t){return new ko({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new ze({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new ko;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Nx(e,i)&&(t=e.isWebMercator?Bp(t):Pm(t,!0)),t.type==="point"?Zk(this,t):t.type==="extent"&&ude(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&Nx(e,i)&&(t=e.isWebMercator?Bp(t):Pm(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Hi(e,i)&&Nx(e,i)&&(t=e.isWebMercator?Bp(t):Pm(t,!0)),xde(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Uc(Math.min,this.zmin,t.zmin),this.zmax=Uc(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Uc(Math.min,this.mmin,t.mmin),this.mmax=Uc(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Uc(Math.max,this.zmin,t.zmin),this.zmax=Uc(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Uc(Math.max,this.mmin,t.mmin),this.mmax=Uc(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=hn(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Pm(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=qE(r.x,t).x),this.spatialReference=new me(ld((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??hn(r);if(n==null)return this;const s=this._getParts(n).map(c=>c.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let o=!0,a=!0;return s.forEach(c=>{c.hasZ||(o=!1),c.hasM||(a=!1)}),{rings:s.map(c=>{const d=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(o){const h=(c.zmax-c.zmin)/2;for(let f=0;f<d.length;f++)d[f].push(h)}if(a){const h=(c.mmax-c.mmin)/2;for(let f=0;f<d.length;f++)d[f].push(h)}return d}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,c=this.xmin,d=this.xmax;let h;t=t||hn(o);const[f,m]=t.valid;h=qE(this.xmin,t);const v=h.x,w=h.frameId;h=qE(this.xmax,t);const x=h.x,$=h.frameId,T=v===x&&a>0;if(a>2*m){const C=new ko(c<d?v:x,n,m,s,o),P=new ko(f,n,c<d?x:v,s,o),L=new ko(0,n,m,s,o),D=new ko(f,n,0,s,o),q=[],F=[];C.contains(L)&&q.push(w),C.contains(D)&&F.push(w),P.contains(L)&&q.push($),P.contains(D)&&F.push($);for(let ee=w+1;ee<$;ee++)q.push(ee),F.push(ee);e.push({extent:C,frameIds:[w]},{extent:P,frameIds:[$]},{extent:L,frameIds:q},{extent:D,frameIds:F})}else v>x||T?e.push({extent:new ko(v,n,m,s,o),frameIds:[w]},{extent:new ko(f,n,x,s,o),frameIds:[$]}):e.push({extent:new ko(v,n,x,s,o),frameIds:[w]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}};function qE(t,e){const[i,r]=e.valid,n=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,o=-s),{x:t,frameId:o}}l([u({readOnly:!0})],Ke.prototype,"cache",null),l([u({readOnly:!0})],Ke.prototype,"center",null),l([u({readOnly:!0})],Ke.prototype,"extent",null),l([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ke.prototype,"hasM",null),l([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ke.prototype,"hasZ",null),l([u({readOnly:!0})],Ke.prototype,"height",null),l([u({type:me,json:{write:!0},value:me.WGS84})],Ke.prototype,"spatialReference",void 0),l([u({readOnly:!0})],Ke.prototype,"width",null),l([u({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Ke.prototype,"xmin",void 0),l([u({type:Number,json:{write:!0}})],Ke.prototype,"ymin",void 0),l([u({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ke.prototype,"mmin",void 0),l([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ke.prototype,"zmin",void 0),l([u({type:Number,json:{write:!0}})],Ke.prototype,"xmax",void 0),l([u({type:Number,json:{write:!0}})],Ke.prototype,"ymax",void 0),l([u({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ke.prototype,"mmax",void 0),l([u({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ke.prototype,"zmax",void 0),Ke=ko=l([E("esri.geometry.Extent")],Ke),Ke.prototype.toJSON.isDefaultToJSON=!0;function Un(t=Ede){return[t[0],t[1],t[2],t[3]]}function hG(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function fG(t,e,i,r,n=Un()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function sje(t,e=Un()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function $de(t,e,i=new Ke){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function Zs(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Tde(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function kde(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function oje(t,e,i){if(e!=null)if("length"in e)CA(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else hG(i,t)}function aje(t,e,i=t){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3];for(let c=0;c<r;c++){const d=e[c];n=Math.min(n,d[0]),s=Math.min(s,d[1]),o=Math.max(o,d[0]),a=Math.max(a,d[1])}return i[0]=n,i[1]=s,i[2]=o,i[3]=a,i}function lje(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function oL(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function aL(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function cje(t){return oL(t)*aL(t)}function uje(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function dje(t){const e=oL(t),i=aL(t);return Math.sqrt(e*e+i*i)}function pje(t,e){return!!t&&F$(t,e.x,e.y)}function F$(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function hje(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function fje(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function Ide(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function mje(t,e,i,r){return r??(r=t),r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function gje(t){return t?hG(t,qD):Un(qD)}function CA(t){return t!=null&&t.length===4}function yje(t,e){return CA(t)&&CA(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const qD=[1/0,1/0,-1/0,-1/0],Ede=[0,0,0,0];let lL=1e-6;function fn(){return lL}function Mde(t){lL=t}const Jk=Math.random,Ade=Math.PI/180,Cde=180/Math.PI;function cL(t){return t*Ade}function Ode(t){return t*Cde}function Pde(t,e){return Math.abs(t-e)<=lL*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Jk,equals:Pde,getEpsilon:fn,setEpsilon:Mde,toDegree:Ode,toRadian:cL},Symbol.toStringTag,{value:"Module"}));function Zm(t,e){return t[0]=e[0],t[1]=e[1],t}function dr(t,e,i){return t[0]=e,t[1]=i,t}function mG(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function ow(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function gG(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function yG(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Rde(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Lde(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Fde(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function Nde(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function Dde(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function t1(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function zde(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function Yk(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function aw(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function N$(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function vG(t){const e=t[0],i=t[1];return e*e+i*i}function bG(t,e){return t[0]=-e[0],t[1]=-e[1],t}function jde(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function OA(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function wG(t,e){return t[0]*e[0]+t[1]*e[1]}function _G(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function Vde(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function Ude(t,e=1){const i=2*Jk()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function qde(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function Na(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function zx(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Bde(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function Gde(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*o+i[0],t[1]=n*o+s*a+i[1],t}function Hde(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const c=(i*n+r*s)*o*a;return c>1?0:c<-1?Math.PI:Math.acos(c)}function Wde(t){return"vec2("+t[0]+", "+t[1]+")"}function Zde(t,e){return t[0]===e[0]&&t[1]===e[1]}function Jde(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],o=fn();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function Yde(t,e,i,r,n){let s=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const Kde=N$,uL=ow,Qde=gG,Xde=yG,epe=Yk,tpe=aw,ipe=vG;Object.freeze(Object.defineProperty({__proto__:null,add:mG,angle:Hde,ceil:Rde,copy:Zm,cross:_G,dist:epe,distance:Yk,div:Xde,divide:yG,dot:wG,equals:Jde,exactEquals:Zde,floor:Lde,inverse:jde,len:Kde,length:N$,lerp:Vde,max:Nde,min:Fde,mul:Qde,multiply:gG,negate:bG,normalize:OA,projectAndScale:Yde,random:Ude,rotate:Gde,round:Dde,scale:t1,scaleAndAdd:zde,set:dr,sqrDist:tpe,sqrLen:ipe,squaredDistance:aw,squaredLength:vG,str:Wde,sub:uL,subtract:ow,transformMat2:qde,transformMat2d:Na,transformMat3:zx,transformMat4:Bde},Symbol.toStringTag,{value:"Module"}));function Ql(t,e,i,r){return t[0]=e[0]*(1-r)+i[0]*r,t[1]=e[1]*(1-r)+i[1]*r,t}function dn(t,e){return aw(t,e)}function vje(t,e,i){const r=dn(e,i);if(r===0)return dn(e,t);const n=(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0]);return n*n/r}function rpe(t,e,i,r,n){const[s,o]=e,[a,c]=i,[d,h]=r,[f,m]=n,v=(s-a)*(h-m)-(o-c)*(d-f);if(v===0)return null;const w=(s*c-o*a)*(d-f)-(s-a)*(d*m-h*f),x=(s*c-o*a)*(h-m)-(o-c)*(d*m-h*f);return t[0]=w/v,t[1]=x/v,t}const Yo=2*Math.PI;function Gp(t,e){const i=Math.atan2(t,e);return i<0?i+Yo:i}function xG(t){return Math.abs(t)%Yo}function BD(t){const e=xG(t);return e<Math.PI?e:Yo-e}function Kk(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function SG(t,e,i,r){if(Ss(xG(t-e),0))return i?[t,t]:[t,r?t-Yo:t+Yo];const[n,s]=r?[t-Yo,t]:[t,t+Yo];return[t,i1({min:n,max:s},e)]}function i1({min:t,max:e},i){let r;return r=e-i,r>=Yo?(r-=r%Yo,i+r):(r=i-t,r>=Yo?(r-=r%Yo,i-r):i)}function npe(t,e){const i=i1(t,e);return i>t.min&&i<t.max?i:BD(i-t.min)<BD(i-t.max)?t.min:t.max}function $G(t,e,i,r=10){return e.map(n=>{let s=n;for(let o=0;o<r;o++){const[a,c,d,h,f,m]=i(s),v=t[0]-a,w=t[1]-c,x=-d,$=-h;s+=-(2*v*x+2*w*$)/(2*x*x+2*v*-f+2*$*$+2*w*-m||1e-6)}return s})}const spe=[0,0];function TG(t){const e=1-t,i=e*e,r=t*t;return[i*e,3*t*i,3*r*e,r*t]}function PA(t,e,i,r,n){const[s,o,a,c]=TG(n);return[t[0]*s+e[0]*o+i[0]*a+r[0]*c,t[1]*s+e[1]*o+i[1]*a+r[1]*c]}function GD(t,e,i,r,n){const[s,o,a,c]=TG(n);return t*s+e*o+i*a+r*c}function bje(t,e,i){const r=t,[n,s,o]=e.b;return PA(r,s,o,n,i)}function ope(t,e,i){const r=t,[n,s,o]=e.b,a=Ql([0,0],r,s,i),c=Ql(spe,s,o,i),d=Ql([0,0],o,n,i),h=Ql([0,0],a,c,i),f=Ql([0,0],c,d,i);return[{b:[Ql([],h,f,i),a,h]},{b:[[...n],f,d]}]}function wje(t,e,i){const r=t,[n,s,o]=e.b,a=$G(i,[.1,.5,.9],f=>{const m=1-f,[v,w]=PA(r,s,o,n,f);return[v,w,3*m*m*(s[0]-r[0])+6*m*f*(o[0]-s[0])+3*f*f*(n[0]-o[0]),3*m*m*(s[1]-r[1])+6*m*f*(o[1]-s[1])+3*f*f*(n[1]-o[1]),6*m*(o[0]-2*s[0]+r[0])+6*f*(n[0]-2*o[0]+s[0]),6*m*(o[1]-2*s[1]+r[1])+6*f*(n[1]-2*o[1]+s[1])]}).map(f=>Math.min(1,Math.max(0,f)));a.push(0,1);let c=1/0;const d=a.map(f=>{const m=PA(r,s,o,n,f),[v,w]=m,x=i[0]-v,$=i[1]-w,T=Math.sqrt(x*x+$*$);return c=Math.min(T,c),{t:f,curvePoint:m,distance:T}}),h=[];for(const f of d){const{t:m,distance:v}=f;Kq(v,c)&&!h.some(({t:w})=>Ss(w,m))&&h.push(f)}return h}function ape(t,e,i){const r=e,[n,s,o]=i.b;if(Zs(t,r),Zs(t,n),F$(t,s[0],s[1])&&F$(t,o[0],o[1]))return t;for(const a of HD(r[0],s[0],o[0],n[0]))a>0&&a<1&&Tde(t,GD(r[0],s[0],o[0],n[0],a));for(const a of HD(r[1],s[1],o[1],n[1]))a>0&&a<1&&kde(t,GD(r[1],s[1],o[1],n[1],a));return t}function HD(t,e,i,r){const n=3*(3*(e-i)-t+r),s=6*(t-2*e+i),o=3*(e-t);if(n===0)return s!==0?[-o/s]:[];const a=Math.sqrt(s*s-4*n*o);return[(-s+a)/(2*n),(-s-a)/(2*n)]}function _je(t,e,i){let n=0,s=[e];for(let o=0;o<16;o++){let a=t;const c=[];for(const h of s)c.push(...ope(a,h,.5)),a=h.b[0];s=c,a=t,n=0;let d=0;for(const h of s){const[f,m,v]=h.b,w=Math.sqrt(dn(a,f));n+=(w+(Math.sqrt(dn(a,m))+Math.sqrt(dn(m,v))+Math.sqrt(dn(v,f))))/2,d+=w,a=f}if(n-d<i)return n}return n}function lpe(t,e,i){const[r,n]=t,[s,o]=e,[a,c]=i,[d,h]=[s-r,o-n];let f=d*(a-r)+h*(c-n);f/=d**2+h**2,f=Es(f,0,1);const m=Ql([0,0],t,e,f);return{t:f,curvePoint:m,distance:Math.sqrt(dn(m,i))}}let kG=class{constructor(e,i,r,n,s,o){this.cx=e,this.cy=i,this.radius=r,this.thetaStart=n,this.thetaEnd=s,this.isInvalid=o}get startPoint(){const{cx:e,cy:i,radius:r,thetaStart:n}=this;return[e+r*Math.cos(n),i+r*Math.sin(n)]}get endPoint(){const{cx:e,cy:i,radius:r,thetaEnd:n}=this;return[e+r*Math.cos(n),i+r*Math.sin(n)]}};function D$(t,e){const{cx:i,cy:r,radius:n}=t;return[i+n*Math.cos(e),r+n*Math.sin(e)]}function jx(t,e){if(t.isInvalid)return Ql([0,0],t.startPoint,t.endPoint,e);const{thetaStart:i,thetaEnd:r}=t;return D$(t,i*(1-e)+r*e)}function Sje(t,e){if(t.isInvalid)return lpe(t.startPoint,t.endPoint,e);const{cx:i,cy:r,thetaStart:n,thetaEnd:s}=t,[o,a]=e,c=npe(Kk(n,s),Math.atan2(a-r,o-i)),d=D$(t,c);return{t:(c-n)/(s-n),curvePoint:d,distance:Math.sqrt(dn(e,d))}}function WD(t,e){if(e.isInvalid)return Zs(t,e.startPoint),Zs(t,e.endPoint),t;const{cx:i,cy:r,radius:n,thetaStart:s,thetaEnd:o}=e;Zs(t,D$(e,s)),Zs(t,D$(e,o));const a=Kk(s,o),c=Math.PI/2;let d=0;for(const h of[[i+n,r],[i,r+n],[i-n,r],[i,r-n]])d=i1(a,d),d>a.min&&d<a.max&&Zs(t,h),d+=c;return t}function $je(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:i,thetaEnd:r}=t;return e*Math.abs(r-i)}function cpe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function upe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Jm(t,e,i,r,n,s,o,a,c,d){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=c,t[8]=d,t}function IG(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function EG(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function MG(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],h=e[8],f=h*o-a*d,m=-h*s+a*c,v=d*s-o*c;let w=i*f+r*m+n*v;return w?(w=1/w,t[0]=f*w,t[1]=(-h*r+n*d)*w,t[2]=(a*r-n*o)*w,t[3]=m*w,t[4]=(h*i-n*c)*w,t[5]=(-a*i+n*s)*w,t[6]=v*w,t[7]=(-d*i+r*c)*w,t[8]=(o*i-r*s)*w,t):null}function dpe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],h=e[8];return t[0]=o*h-a*d,t[1]=n*d-r*h,t[2]=r*a-n*o,t[3]=a*c-s*h,t[4]=i*h-n*c,t[5]=n*s-i*a,t[6]=s*d-o*c,t[7]=r*c-i*d,t[8]=i*o-r*s,t}function Vx(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],c=t[7],d=t[8];return e*(d*s-o*c)+i*(-d*n+o*a)+r*(c*n-s*a)}function lw(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=i[0],v=i[1],w=i[2],x=i[3],$=i[4],T=i[5],C=i[6],P=i[7],L=i[8];return t[0]=m*r+v*o+w*d,t[1]=m*n+v*a+w*h,t[2]=m*s+v*c+w*f,t[3]=x*r+$*o+T*d,t[4]=x*n+$*a+T*h,t[5]=x*s+$*c+T*f,t[6]=C*r+P*o+L*d,t[7]=C*n+P*a+L*h,t[8]=C*s+P*c+L*f,t}function RA(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=i[0],v=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=m*r+v*o+d,t[7]=m*n+v*a+h,t[8]=m*s+v*c+f,t}function AG(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=Math.sin(i),v=Math.cos(i);return t[0]=v*r+m*o,t[1]=v*n+m*a,t[2]=v*s+m*c,t[3]=v*o-m*r,t[4]=v*a-m*n,t[5]=v*c-m*s,t[6]=d,t[7]=h,t[8]=f,t}function ppe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function hpe(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function fpe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function mpe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function gpe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ype(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function vpe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,c=n+n,d=i*o,h=r*o,f=r*a,m=n*o,v=n*a,w=n*c,x=s*o,$=s*a,T=s*c;return t[0]=1-f-w,t[3]=h-T,t[6]=m+$,t[1]=h+T,t[4]=1-d-w,t[7]=v-x,t[2]=m-$,t[5]=v+x,t[8]=1-d-f,t}function bpe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],c=e[8],d=e[9],h=e[10],f=h*o-a*d,m=-h*s+a*c,v=d*s-o*c,w=i*f+r*m+n*v;if(!w)return null;const x=1/w;return t[0]=f*x,t[1]=(-h*r+n*d)*x,t[2]=(a*r-n*o)*x,t[3]=m*x,t[4]=(h*i-n*c)*x,t[5]=(-a*i+n*s)*x,t[6]=v*x,t[7]=(-d*i+r*c)*x,t[8]=(o*i-r*s)*x,t}function wpe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],h=e[8],f=e[9],m=e[10],v=e[11],w=e[12],x=e[13],$=e[14],T=e[15],C=i*a-r*o,P=i*c-n*o,L=i*d-s*o,D=r*c-n*a,q=r*d-s*a,F=n*d-s*c,ee=h*x-f*w,ae=h*$-m*w,ne=h*T-v*w,ue=f*$-m*x,X=f*T-v*x,J=m*T-v*$;let H=C*J-P*X+L*ue+D*ne-q*ae+F*ee;return H?(H=1/H,t[0]=(a*J-c*X+d*ue)*H,t[1]=(c*ne-o*J-d*ae)*H,t[2]=(o*X-a*ne+d*ee)*H,t[3]=(n*X-r*J-s*ue)*H,t[4]=(i*J-n*ne+s*ae)*H,t[5]=(r*ne-i*X-s*ee)*H,t[6]=(x*F-$*q+T*D)*H,t[7]=($*L-w*F-T*P)*H,t[8]=(w*q-x*L+T*C)*H,t):null}function _pe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function xpe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Spe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function $pe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function CG(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function Tpe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function kpe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function Ipe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Epe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],c=t[6],d=t[7],h=t[8],f=e[0],m=e[1],v=e[2],w=e[3],x=e[4],$=e[5],T=e[6],C=e[7],P=e[8],L=fn();return Math.abs(i-f)<=L*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-m)<=L*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-v)<=L*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(s-w)<=L*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-x)<=L*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-$)<=L*Math.max(1,Math.abs(a),Math.abs($))&&Math.abs(c-T)<=L*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(d-C)<=L*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(h-P)<=L*Math.max(1,Math.abs(h),Math.abs(P))}function Mpe(t){const e=fn(),i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],c=t[6],d=t[7],h=t[8];return Math.abs(1-(i*i+s*s+c*c))<=e&&Math.abs(1-(r*r+o*o+d*d))<=e&&Math.abs(1-(n*n+a*a+h*h))<=e}const Ape=lw,Cpe=CG;Object.freeze(Object.defineProperty({__proto__:null,add:$pe,adjoint:dpe,copy:upe,determinant:Vx,equals:Epe,exactEquals:Ipe,frob:Spe,fromMat2d:ype,fromMat4:cpe,fromQuat:vpe,fromRotation:mpe,fromScaling:gpe,fromTranslation:fpe,identity:IG,invert:MG,isOrthoNormal:Mpe,mul:Ape,multiply:lw,multiplyScalar:Tpe,multiplyScalarAndAdd:kpe,normalFromMat4:wpe,normalFromMat4Legacy:bpe,projection:_pe,rotate:AG,scale:ppe,scaleByVec2:hpe,set:Jm,str:xpe,sub:Cpe,subtract:CG,translate:RA,transpose:EG},Symbol.toStringTag,{value:"Module"}));function Nh(){return[1,0,0,0,1,0,0,0,1]}function Ope(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function Ppe(t,e,i,r,n,s,o,a,c){return[t,e,i,r,n,s,o,a,c]}const Rpe=Nh();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Rpe,clone:Ope,create:Nh,fromValues:Ppe},Symbol.toStringTag,{value:"Module"}));const rf=Nh();function Lpe(t,e,i){const[r,n]=t,[s,o]=e,[a,c]=i;Jm(rf,r,s,a,n,o,c,1,1,1);const d=Vx(rf),h=4*d/(dn(t,e)+dn(e,i)+dn(i,t));if(!isFinite(h)||Math.abs(h)<1e-8)return null;const f=r**2+n**2,m=s**2+o**2,v=a**2+c**2;Jm(rf,f,m,v,n,o,c,1,1,1);const w=Vx(rf);return Jm(rf,f,m,v,r,s,a,1,1,1),[w/d*.5,Vx(rf)/d*-.5]}function OG(t,e){const[i,r]=e.c,n=Lpe(t,r,i),s=n==null,o=n??Ql([],t,i,.5),[a,c]=t,[d,h]=r,[f,m]=i,[v,w]=o,x=a-v,$=c-w,T=Math.sqrt(x*x+$*$),C=Gp(c-w,a-v),P=Gp(h-w,d-v);let L=Gp(m-w,f-v);return(P-C)*(L-P)<0&&(L+=2*Math.sign(C-L)*Math.PI),new kG(v,w,T,C,L,s)}function Tje(t,e,i){const r=jx(t,i/2),n=jx(t,i),s=jx(t,(i+1)/2);return[{c:[n,r]},{c:[[...e.c[0]],s]}]}function kje(t,e){const[i]=e.c,{cx:r,cy:n,thetaStart:s,thetaEnd:o,radius:a,isInvalid:c}=OG(t,e);return{a:[i,[r,n],Math.abs(o-s)<Math.PI?1:0,s>o?1:0,c?s:0,a,c?0:1]}}function Ije(t){var e,i;return"curveRings"in t&&!!((e=t.curveRings)!=null&&e.length)||"curvePaths"in t&&!!((i=t.curvePaths)!=null&&i.length)}function Eje(t){return"curveRings"in t?t.curveRings:t.curvePaths}function dL(t){return"b"in t}function pL(t){return"c"in t}function Qk(t){return Array.isArray(t)}function Mje(t){return"a"in t}function PG(t){return"a"in t&&t.a.length===4}function Fpe(t){return"a"in t&&t.a.length===7}function BE(t){return Qk(t)?t:dL(t)?t.b[0]:pL(t)?t.c[0]:t.a[0]}function Npe(t){if(dL(t)){const[e,i,r]=t.b;return{b:[[...e],[...i],[...r]]}}if(pL(t)){const[e,i]=t.c;return{c:[[...e],[...i]]}}if(Qk(t))return[...t];if(PG(t)){const[e,i,r,n]=t.a;return{a:[[...e],[...i],r,n]}}if(Fpe(t)){const[e,i,r,n,s,o,a]=t.a;return{a:[[...e],[...i],r,n,s,o,a]}}return t}function Dpe(t,e){const[i,r,n,s]=e.a,[o,a]=t,[c,d]=i,[h,f]=r,m=o-h,v=a-f,w=Math.sqrt(m*m+v*v),x=c-h,$=d-f,T=Math.sqrt(x*x+$*$),C=w===0||T===0||!Kq(w,T),P=w,[L,D]=SG(Gp(a-f,o-h),Math.atan2(d-f,c-h),n,s);return new kG(h,f,P,L,D,C)}function Aje(t,e,i){const{cx:r,cy:n,thetaStart:s,thetaEnd:o}=t,[a,c,d,h]=e.a,f=s*(1-i)+o*i;return[{a:[jx(t,i),[r,n],Math.abs(f-s)<Math.PI?1:0,h]},{a:[[...a],[r,n],Math.abs(o-f)<Math.PI?1:0,h]}]}let zpe=class{constructor(e,i,r,n,s,o,a,c,d){this.cx=e,this.cy=i,this.a=r,this.b=n,this.cosR=s,this.sinR=o,this.u1=a,this.u2=c,this.isInvalid=d}};function hL(t,e){const[i,r,n,s,o,a,c]=e.a,[d,h]=t,[f,m]=i,[v,w]=r,x=a*c,$=Math.cos(o),T=Math.sin(o),[C,P]=SG(Gp(1/x*(h-w)*$-1/x*(d-v)*T,1/a*(h-w)*T+1/a*(d-v)*$),Math.atan2(1/x*(m-w)*$-1/x*(f-v)*T,1/a*(m-w)*T+1/a*(f-v)*$),n,s);return new zpe(v,w,a,x,$,T,C,P,a===0||x===0)}function cw(t,e){const{a:i,b:r,cosR:n,sinR:s,cx:o,cy:a}=t,c=Math.cos(e),d=Math.sin(e);return[i*c*n-r*d*s+o,i*c*s+r*d*n+a]}function Of(t,e){const{u1:i,u2:r}=t;return cw(t,i*(1-e)+r*e)}function Oje(t,e,i){if(i<0||i>1)return[];if(i===0||i===1)return[Npe(e)];const[r,[n,s],o,a,c,d,h]=e.a,{u1:f,u2:m}=t,v=f*(1-i)+m*i;return[{a:[[...Of(t,i)],[n,s],Math.abs(v-f)<Math.PI?1:0,a,c,d,h]},{a:[[...r],[n,s],Math.abs(m-v)<Math.PI?1:0,a,c,d,h]}]}function Pje(t,e){const{a:i,b:r,cosR:n,sinR:s,u1:o,u2:a}=t,c=Math.PI/6,d=$G(e,[1*c,2*c,4*c,5*c,7*c,8*c,10*c,11*c],x=>{const $=Math.cos(x),T=Math.sin(x),[C,P]=cw(t,x);return[C,P,-i*n*T-r*s*$,-i*s*T+r*n*$,-i*n*$+r*s*T,-i*s*$-r*n*T]}),h=Kk(o,a),f=new Set(d.map(x=>i1(h,x)).filter(x=>x>h.min&&x<h.max));f.add(o),f.add(a);let m,v,w=1/0;for(const x of f){const $=cw(t,x),[T,C]=$,P=e[0]-T,L=e[1]-C,D=P*P+L*L;D<w&&(m=(x-o)/(a-o),v=$,w=D)}return{t:m,curvePoint:v,distance:Math.sqrt(w)}}function jpe(t,e,i){const r=hL(e,i),{a:n,b:s,u1:o,u2:a,cosR:c,sinR:d,isInvalid:h}=r,f=i.a[0];if(Zs(t,e),Zs(t,f),h)return t;const m=Math.atan2(-s*d,n*c),v=m+Math.PI,w=Math.atan2(s*c,n*d),x=w+Math.PI,$=Kk(o,a);for(const T of[m,v,w,x].map(C=>i1($,C)))T>$.min&&T<$.max&&Zs(t,cw(r,T));return t}function Rje(t,e,i){const[r,n,s,o,a,c,d]=e.a,h=hL(t,e),{u1:f,u2:m,isInvalid:v}=h,w=m-f;if(v)return Math.sqrt(dn(t,r));const x=14,$=[0,0];let T=0,C=[Of(h,0),Of(h,.25),Of(h,.5),Of(h,.75),Of(h,1)];for(let P=0;P<x;P++){const L=C.length-1,D=w/(2*L),q=[];for(let ee=0;ee<L;ee++)q.push(C[ee]),q.push(cw(h,f+(2*ee+1)*D));q.push(C[C.length-1]),C=q,T=0;let F=0;for(let ee=1;ee<C.length;ee++){const ae=C[ee-1],ne=C[ee];if(T+=Math.sqrt(dn(ae,ne)),ee>1){const ue=C[ee-2],X=rpe($,ue,ae,n,ne);F+=X?Math.sqrt(dn(ae,X)):Math.abs(ne[0]-ae[0])+Math.abs(ne[1]-ae[1])}else F+=T}if(F-T<i)return T}return T}const ZD=Nh(),o_=Nh(),JD=Nh(),qc=Nh();function Lje(t,e,i){const[r,n,s,o,a,c,d]=e.a,h=hL(t,e),{cosR:f,sinR:m,a:v,b:w,cx:x,cy:$}=h,T=zx([0,0],r,i),C=zx([0,0],n,i),P=i[0]*i[4]<0?1-o:o;{const L=v*v*m*m+w*w*f*f,D=2*(w*w-v*v)*m*f,q=v*v*f*f+w*w*m*m,F=-2*L*x-D*$,ee=-D*x-2*q*$;Jm(ZD,L,D/2,F/2,D/2,q,ee/2,F/2,ee/2,L*x*x+D*x*$+q*$*$-v*v*w*w)}if(MG(o_,i),o_==null){const L=zx([0,0],t,i);return{a:[T,C,s,o,Gp(T[1],T[0]),Math.sqrt(dn(T,L))/2,0]}}EG(JD,o_),lw(qc,lw(qc,JD,ZD),o_);{const L=qc[0],D=2*qc[1],q=qc[4],F=2*qc[2],ee=2*qc[5],ae=D*D-4*L*q,ne=2*(L*ee*ee+q*F*F-D*F*ee+ae*qc[8]),ue=Math.sqrt((L-q)**2+D*D),X=-Math.sqrt(ne*(L+q+ue))/ae,J=-Math.sqrt(ne*(L+q-ue))/ae;return{a:[T,C,s,P,.5*Gp(-D,q-L),X,J/X]}}}function Vpe(t,e,i){if(Qk(i))return Zs(t,e),Zs(t,i),t;if(dL(i))return ape(t,e,i);if(pL(i)){const r=OG(e,i);return WD(t,r)}if(PG(i)){const r=Dpe(e,i);return WD(t,r)}return jpe(t,e,i)}function RG(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function LG(t){return t.points!==void 0}function FG(t){return t.x!==void 0&&t.y!==void 0}function NG(t){return t.paths!==void 0}function DG(t){return t.rings!==void 0}function zG(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const Eu=zG(Math.min),Mu=zG(Math.max);function Fje(t,e){return NG(e)?uy(t,e.curvePaths??e.paths,!1,!1)??t:DG(e)?uy(t,e.curveRings??e.rings,!1,!1)??t:LG(e)?fL(t,e.points,!1,!1,!1,!1):RG(e)?jG(t,e):(FG(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function Nje(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=Upe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return Un([e,r,i,n])}function Upe(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return Un([e,r,i,n])}function Dje(t,e){return NG(e)?uy(t,e.curvePaths??e.paths,!0,!1)??t:DG(e)?uy(t,e.curveRings??e.rings,!0,!1)??t:LG(e)?fL(t,e.points,!0,!1,!0,!1):RG(e)?jG(t,e,!0,!1,!0,!1):(FG(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function uy(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,c,[d,h]=BE(e[0][0]),f=d,m=h;for(let v=0;v<e.length;v++){const w=e[v];for(let x=0;x<w.length;x++){const $=BE(w[x]),[T,C]=$;if(d=Eu(d,T),h=Eu(h,C),f=Mu(f,T),m=Mu(m,C),i&&$.length>2){const q=$[2];s=Eu(s,q),o=Mu(o,q)}if(r&&$.length>n){const q=$[n];a=Eu(a,q),c=Mu(c,q)}const P=w[x];if(Qk(P)||x<1)continue;const L=BE(w[x-1]),D=fG(d,h,f,m);[d,h,f,m]=Vpe(D,L,P)}}return i?r?(t[0]=d,t[1]=h,t[2]=s,t[3]=a,t[4]=f,t[5]=m,t[6]=o,t[7]=c,t.length=8,t):(t[0]=d,t[1]=h,t[2]=s,t[3]=f,t[4]=m,t[5]=o,t.length=6,t):r?(t[0]=d,t[1]=h,t[2]=a,t[3]=f,t[4]=m,t[5]=c,t.length=6,t):(t[0]=d,t[1]=h,t[2]=f,t[3]=m,t.length=4,t)}function jG(t,e,i,r,n,s){const o=e.xmin,a=e.xmax,c=e.ymin,d=e.ymax;let h=e.zmin,f=e.zmax,m=e.mmin,v=e.mmax;return n?(h=h||0,f=f||0,s?(m=m||0,v=v||0,t[0]=o,t[1]=c,t[2]=h,t[3]=m,t[4]=a,t[5]=d,t[6]=f,t[7]=v,t):(t[0]=o,t[1]=c,t[2]=h,t[3]=a,t[4]=d,t[5]=f,t)):s?(m=m||0,v=v||0,t[0]=o,t[1]=c,t[2]=m,t[3]=a,t[4]=d,t[5]=v,t):(t[0]=o,t[1]=c,t[2]=a,t[3]=d,t)}function fL(t,e,i,r,n,s){const o=i?3:2,a=r&&s,c=i&&n;if(!e.length||!e[0].length)return null;let d,h,f,m,[v,w]=e[0],[x,$]=e[0];for(let T=0;T<e.length;T++){const C=e[T],[P,L]=C;if(v=Eu(v,P),w=Eu(w,L),x=Mu(x,P),$=Mu($,L),c&&C.length>2){const D=C[2];d=Eu(d,D),h=Mu(h,D)}if(a&&C.length>o){const D=C[o];f=Eu(d,D),m=Mu(h,D)}}return n?(d=d||0,h=h||0,s?(f=f||0,m=m||0,t[0]=v,t[1]=w,t[2]=d,t[3]=f,t[4]=x,t[5]=$,t[6]=h,t[7]=m,t):(t[0]=v,t[1]=w,t[2]=d,t[3]=x,t[4]=$,t[5]=h,t)):s?(f=f||0,m=m||0,t[0]=v,t[1]=w,t[2]=f,t[3]=x,t[4]=$,t[5]=m,t):(t[0]=v,t[1]=w,t[2]=x,t[3]=$,t)}function qpe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Bpe(t){return t.points!==void 0}function Gpe(t){return t.x!==void 0&&t.y!==void 0}function Hpe(t){return t.paths!==void 0}function Wpe(t){return t.rings!==void 0}const mL=[];function VG(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function UG(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function qG(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function BG(t,e,i,r,n,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function gL(t,e=!1,i=!1){return e?i?BG(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):UG(t[0],t[1],t[2],t[3],t[4],t[5]):i?qG(t[0],t[1],t[2],t[3],t[4],t[5]):VG(t[0],t[1],t[2],t[3])}function zje(t){return t?qpe(t)?t:Gpe(t)?Zpe(t):Wpe(t)?HG(t):Hpe(t)?WG(t):Bpe(t)?GG(t):null:null}function GG(t){const{hasZ:e,hasM:i,points:r}=t,n=fL(mL,r,e??!1,i??!1,e??!1,i??!1);return n?gL(n,e,i):null}function Zpe(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?BG(e,i,r,n,e,i,r,n):UG(e,i,r,e,i,r):s?qG(e,i,n,e,i,n):VG(e,i,e,i)}function HG(t){const{hasZ:e,hasM:i,rings:r,curveRings:n}=t,s=uy(mL,n??r,e??!1,i??!1);return s?gL(s,e,i):null}function WG(t){const{hasZ:e,hasM:i,paths:r,curvePaths:n}=t,s=uy(mL,n??r,e??!1,i??!1);return s?gL(s,e,i):null}function dy(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var LA;function Jpe(t){var s;if(!t)return;let{points:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),(s=e==null?void 0:e.at(0))==null?void 0:s.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=me.WGS84),{...t,hasM:i,hasZ:r,points:e,spatialReference:n}}let Gs=LA=class extends Xi{constructor(t){super(Jpe(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=GG(this);return t?new Ke({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=V(this.points)}clone(){const{points:t,spatialReference:e,hasM:i,hasZ:r}=this;return new LA({points:V(t),spatialReference:e.clone(),hasM:i,hasZ:r})}addPoint(t){return dy(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new ze(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new ze(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(dy(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};l([u({readOnly:!0})],Gs.prototype,"cache",null),l([u({readOnly:!0})],Gs.prototype,"extent",null),l([u({type:[[Number]],json:{write:{isRequired:!0}}})],Gs.prototype,"points",void 0),l([le("points")],Gs.prototype,"writePoints",null),Gs=LA=l([E("esri.geometry.Multipoint")],Gs),Gs.prototype.toJSON.isDefaultToJSON=!0;function jje(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();){const r=[t.x,t.y];t.hasZ&&r.push(t.z),t.hasM&&r.push(t.m),i.push(r)}e.push(i)}return t.reset(),e}function Ype(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function Vje(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const c=.5*(o.zmax-o.zmin);for(let d=0;d<a.length;d++)a[d].push(c)}if(s&&o.hasM){const c=.5*(o.mmax-o.mmin);for(let d=0;d<a.length;d++)a[d].push(c)}return a})}return null}function Xk(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function ZG(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function Kpe(t,e,i,r){return Qpe(t,e,i[r],i[r+1])}function Qpe(t,e,i,r){const[n,s]=e,[o,a]=i,[c,d]=r,h=c-o,f=d-a,m=h*h+f*f,v=(n-o)*h+(s-a)*f,w=Math.min(1,Math.max(0,v/m));return t[0]=o+h*w,t[1]=a+f*w,t}function Uje(t,e,i,r,n,s){let o=i,a=r,c=n-o,d=s-a;if(c!==0||d!==0){const h=((t-o)*c+(e-a)*d)/(c*c+d*d);h>1?(o=n,a=s):h>0&&(o+=c*h,a+=d*h)}return c=t-o,d=e-a,c*c+d*d}function JG(t,e){return ZG(t,e,.5)}function qje(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=Xk(t[r],t[r+1]);return i}function Bje(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=Xk(t[n],t[n+1]);if(e-r<s){const o=(e-r)/s;return ZG(t[n],t[n+1],o)}r+=s}return t[i-1]}function YG(t,e=0,i=1){let r=0;const n=t.length;let s=t[0];for(let o=1;o<n;o++){const a=t[o];r+=(a[e]-s[e])*(a[i]+s[i]),s=a}if(KG(t)){const o=t[0];r+=(o[e]-s[e])*(o[i]+s[i])}return r>=0}function KG(t){const e=t.length;return e>0&&!Uw(t[0],t[e-1])}function Gje(t){"rings"in t&&(Xpe(t),ehe(t))}function Xpe(t){if("rings"in t)for(const e of t.rings)KG(e)&&e.push(e[0].slice())}function ehe(t){if(!("rings"in t)||t.rings.length===0||YG(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function Hje(t){return t.type!=="polygon"&&t.type!=="polyline"||the(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function the(t,e){const i=hn(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const o of t){let a=1/0,c=-1/0;for(const h of o){const f=ihe(h[0],r,n);a=Math.min(a,f),c=Math.max(c,f),h[0]=f}const d=c-a;s-d<d&&o.forEach(h=>{h[0]<0&&(h[0]+=s)})}}function ihe(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function Wje(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function rhe(t){return she(t.rings,t.hasZ??!1)}function nhe(t){const e=rhe(t);if(!e)return null;const{hasZ:i,spatialReference:r}=t,[n,s,o]=e;return isNaN(n)||isNaN(s)||i&&isNaN(o)?null:{x:n,y:s,z:i?o:void 0,spatialReference:r}}function she(t,e){if(!(t!=null&&t.length))return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=QG(t[s],e,n);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?ohe(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function QG(t,e,i){let r=0,n=0,s=0,o=0,a=0;const c=t.length?t[0][0]:0,d=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let m=0;m<t.length;m++){const v=t[m],w=t[(m+1)%t.length],[x,$,T]=v,C=x-c,P=$-d,[L,D,q]=w,F=L-c,ee=D-d,ae=C*ee-F*P;if(o+=ae,r+=(C+F)*ae,n+=(P+ee)*ae,e&&v.length>2&&w.length>2){const ne=T-h,ue=q-h,X=C*ue-F*ne;s+=(ne+ue)*X,a+=X}x<i[0]&&(i[0]=x),x>i[1]&&(i[1]=x),$<i[2]&&(i[2]=$),$>i[3]&&(i[3]=$),e&&(T<i[4]&&(i[4]=T),T>i[5]&&(i[5]=T))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[r/(6*o)+c,n/(6*o)+d,o];return e&&(i[4]===i[5]||a===0?(f[3]=(i[4]+i[5])/2,f[4]=0):(f[3]=s/(6*a)+h,f[4]=a)),f}function Zje(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const c=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const d=[t.x,t.y],[h,f]=c,m=h-s,v=f-o,[w,x]=d,$=w-s,T=x-o,C=m*T-$*v;n+=C,i+=(m+$)*C,r+=(v+T)*C,h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),f<e[2]&&(e[2]=f),f>e[3]&&(e[3]=f)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+o,n]):null}function ohe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let c=0,d=t.length;c<d-1;c++){const h=t[c],f=t[c+1];if(h&&f){i[0]=h[0],i[1]=h[1],r[0]=f[0],r[1]=f[1],e&&h.length>2&&f.length>2&&(i[2]=h[2],r[2]=f[2]);const m=Xk(i,r);if(m){n+=m;const v=JG(h,f);s+=m*v[0],o+=m*v[1],e&&v.length>2&&(a+=m*v[2])}}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.length?t[0]:null}function ahe(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=QG(Ype(t),t.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let c=o[2]-a[2];return c===0&&e&&(c=o[4]-a[4]),c}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?lhe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function lhe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(t.nextPoint()){let c=t.x,d=t.y,h=t.z;for(;t.nextPoint();){const f=t.x,m=t.y,v=t.z;i[0]=c,i[1]=d,r[0]=f,r[1]=m,e&&(i[2]=h,r[2]=v);const w=Xk(i,r);if(w){n+=w;const x=JG(i,r);s+=w*x[0],o+=w*x[1],e&&x.length>2&&(a+=w*x[2])}c=f,d=m,h=v}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const che=1e-6;function Jje(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<che){const n=ahe(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)dhe(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const uhe=1/3;function dhe(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,a=i.y-n,c=0,d=0;for(;i.nextPoint();)c=i.x-r,d=i.y-n,s=.5*uhe*(c*a-d*o),t[0]+=s*(o+c),t[1]+=s*(a+d),o=c,a=d;const h=i.getCurrentRingArea(),f=[r,n];return f[0]-=e[0],f[1]-=e[1],f[0]*=h,f[1]*=h,t[0]+=f[0],t[1]+=f[1],t}var Ux;function YD(t){return!Array.isArray(t[0])}function phe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function hhe(t){var s,o;if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),phe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=me.WGS84),{...t,hasM:i,hasZ:r,rings:e,spatialReference:n}}let ei=Ux=class extends Xi{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,n=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const c=o.zmin+.5*(o.zmax-o.zmin);for(let d=0;d<a.length;d++)a[d].push(c)}if(n&&o.hasM){const c=o.mmin+.5*(o.mmax-o.mmin);for(let d=0;d<a.length;d++)a[d].push(c)}return a}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new Ux(s)}constructor(t){super(hhe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){XS(ie.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=nhe(this);return t?ze.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=V(t)}get extent(){const t=HG(this),{spatialReference:e}=this;return t?new Ke({...t,spatialReference:e}):null}get isSelfIntersecting(){return XS(ie.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),_de(this.rings)}writeRings(t,e){e.rings=V(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(YD(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new Ux;return t.spatialReference=this.spatialReference,t.rings=V(this.rings),t.curveRings=V(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,o,a],[c,d,h,f])=>n===c&&s===d&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=t.rings[n];if(!Uw(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=rL(t,this.spatialReference);return nL(this,e??t)}isClockwise(t){const e=YD(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return YG(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new ze(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new ze(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new ze(i[0],i[1],i[2],i[3],this.spatialReference):new ze(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(dy(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ze(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new ze(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(dy(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};l([u({readOnly:!0})],ei.prototype,"cache",null),l([u({readOnly:!0})],ei.prototype,"centroid",null),l([u({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],ei.prototype,"curveRings",void 0),l([le("curveRings")],ei.prototype,"writeCurveRings",null),l([u({readOnly:!0})],ei.prototype,"extent",null),l([u({readOnly:!0})],ei.prototype,"isSelfIntersecting",null),l([u({type:[[[Number]]],json:{write:{isRequired:!0}}})],ei.prototype,"rings",void 0),l([le("rings")],ei.prototype,"writeRings",null),ei=Ux=l([E("esri.geometry.Polygon")],ei),ei.prototype.toJSON.isDefaultToJSON=!0;var FA;function fhe(t){return!Array.isArray(t[0])}function mhe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function ghe(t){var s,o;if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),mhe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=me.WGS84),{...t,hasM:i,hasZ:r,paths:e,spatialReference:n}}let hi=FA=class extends Xi{constructor(t){super(ghe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=V(t)}get extent(){const t=WG(this),{spatialReference:e}=this;return t?new Ke({...t,spatialReference:e}):null}writePaths(t,e){e.paths=V(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(fhe(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new FA;return t.spatialReference=this.spatialReference,t.paths=V(this.paths),t.curvePaths=V(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new ze(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new ze(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new ze(i[0],i[1],i[2],i[3],this.spatialReference):new ze(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(dy(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new ze(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ze(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(dy(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};l([u({readOnly:!0})],hi.prototype,"cache",null),l([u({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],hi.prototype,"curvePaths",void 0),l([le("curvePaths")],hi.prototype,"writeCurvePaths",null),l([u({readOnly:!0})],hi.prototype,"extent",null),l([u({type:[[[Number]]],json:{write:{isRequired:!0}}})],hi.prototype,"paths",void 0),l([le("paths")],hi.prototype,"writePaths",null),hi=FA=l([E("esri.geometry.Polyline")],hi),hi.prototype.toJSON.isDefaultToJSON=!0;function XG(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function eH(t){return t.points!==void 0}function tH(t){return t.x!==void 0&&t.y!==void 0}function iH(t){return t.paths!==void 0||t.curvePaths!==void 0}function Ym(t){return t.rings!==void 0||t.curveRings!==void 0}function ta(t){return t==null?null:t instanceof Xi?t:tH(t)?ze.fromJSON(t):iH(t)?hi.fromJSON(t):Ym(t)?ei.fromJSON(t):eH(t)?Gs.fromJSON(t):XG(t)?Ke.fromJSON(t):null}function Wy(t){return t?tH(t)?"esriGeometryPoint":iH(t)?"esriGeometryPolyline":Ym(t)?"esriGeometryPolygon":XG(t)?"esriGeometryEnvelope":eH(t)?"esriGeometryMultipoint":null:null}const yhe={esriGeometryPoint:ze,esriGeometryPolyline:hi,esriGeometryPolygon:ei,esriGeometryEnvelope:Ke,esriGeometryMultipoint:Gs,esriGeometryMultiPatch:ei};function vhe(t){return t&&yhe[t]||null}function Yje(t){return t!=null&&("hasZ"in t&&t.hasZ||"z"in t&&t.z!=null)}function Kje(t){return t!=null&&("hasM"in t&&t.hasM||"m"in t&&t.m!=null)}const bhe=Wi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),KD=Wi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Dh={base:Xi,key:"type",typeMap:{extent:Ke,multipoint:Gs,point:ze,polyline:hi,polygon:ei}};function Qje(t){return t.type==="point"}function Xje(t){return t.type==="multipoint"}function e4e(t){return t.type==="polygon"}function t4e(t){return t.type==="polyline"}const yL=Symbol("idFieldsProviderSymbol");function whe(t){return!!t&&yL in t}function QD(t){return whe(t)?t[yL]:void 0}const r1=Symbol("popupProvider");function i4e(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function _he(t){return!!t&&r1 in t}function xhe(t){return _he(t)?t[r1]:null}function r4e(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function XD(t,e){var i,r,n;if("uniqueIdFields"in e&&((i=e.uniqueIdFields)!=null&&i.length)){if(e.uniqueIdFields.length===1)return(r=t.attributes)==null?void 0:r[e.uniqueIdFields[0]];const s=e.uniqueIdFields.map(o=>{var a;return(a=t.attributes)==null?void 0:a[o]});return JSON.stringify(s)}return"objectIdField"in e&&e.objectIdField?(n=t.attributes)==null?void 0:n[e.objectIdField]:null}const ez=new Ze({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let She=0,Mi=class extends Z{constructor(e){super(e),this.id="sym"+She++,this.type=null,this.color=new Ue([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([u({type:ez.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:ez.write,isRequired:!0}}})],Mi.prototype,"type",void 0),l([u({type:Ue,json:{write:{allowNull:!0}}})],Mi.prototype,"color",void 0),l([oe("color")],Mi.prototype,"readColor",null),Mi=l([E("esri.symbols.Symbol")],Mi);var NA;let Nr=NA=class extends Mi{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(s=>{const o=s.valueExpressionInfo;return o?Gr(t,e,null,o.expression):null});await Promise.all(n)}}}clone(){return new NA({data:V(this.data)})}hash(){return GU(JSON.stringify(this.data)).toString()}};l([u({json:{write:!1}})],Nr.prototype,"color",void 0),l([u({json:{write:!0}})],Nr.prototype,"data",void 0),l([oe("data",["symbol"])],Nr.prototype,"readData",null),l([le("data",{})],Nr.prototype,"writeData",null),l([Ie({CIMSymbolReference:"cim"},{readOnly:!0})],Nr.prototype,"type",void 0),Nr=NA=l([E("esri.symbols.CIMSymbol")],Nr);function to(t,e,i=de){return e||(e=new i),e===t||e.destroyed||(e.removeAll(),$he(t)?e.addMany(t):t&&e.add(t)),e}function rH(t){return t}function $he(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let The=class{constructor(){this._resolver=Gn(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(gt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Gn(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||hr(n)||this._resolver.reject(n)}),e.resolve()}};const eI=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._promiseProps=new The,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,n){return this._promiseProps.promise.then(()=>this).then(r,n)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(Qie(r)),this._promiseProps.addResolvingPromise(r.promise))}};return i=l([wi("esri.core.Promise")],i),i},vL=eI(Se),khe="not-loaded",Ihe="loading",Ehe="failed",tz="loaded",bL=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=o=>{const a=new Promise((c,d)=>{const h=rR(o,d);this.destroyed&&d(new j("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(c,d).finally(()=>{h&&h.remove()})});if(this.loadStatus===khe){this._set("loadStatus",Ihe);const c=this._loadController=new AbortController;s({signal:c.signal})}return n(),a}})),this.when(()=>{this._set("loadStatus",tz),this._loadController=null},n=>{this.destroyed||(this._set("loadStatus",Ehe),this._set("loadError",n),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=ch(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===tz}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new j("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return l([Me({readOnly:!0})],i.prototype,"loaded",null),l([Me({readOnly:!0})],i.prototype,"loadError",void 0),l([Me({clonable:!1})],i.prototype,"loadStatus",void 0),l([Me({type:[Is],readOnly:!0})],i.prototype,"loadWarnings",null),i=l([wi("esri.core.Loadable")],i),i},zh=bL(vL);function DA(t){return!(!t||!t.load)}let a_;function Mhe(t){return a_&&!a_.destroyed||(a_=t()),a_}var zA;const Ahe=new Ze({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Ii=zA=class extends Se{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new zA({categories:this.categories?V(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=rL(this.extent,me.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>Ahe.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};l([u()],Ii.prototype,"categories",void 0),l([u()],Ii.prototype,"disableExtraQuery",void 0),l([u({type:Ke})],Ii.prototype,"extent",void 0),l([u()],Ii.prototype,"filter",void 0),l([u()],Ii.prototype,"num",void 0),l([u()],Ii.prototype,"query",void 0),l([u()],Ii.prototype,"sortField",void 0),l([u()],Ii.prototype,"sortOrder",null),l([u()],Ii.prototype,"start",void 0),Ii=zA=l([E("esri.portal.PortalQueryParams")],Ii);var jA;let Si=jA=class extends Z{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new j("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new jA({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=gi(Ii,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new Ii,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Ii,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new Ii({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(s,e)}throw new j("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],s=new Ii({num:1,query:`typekeywords:"${t}"`});return n.queryItems(s,e)}throw new j("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};l([u()],Si.prototype,"access",void 0),l([u({type:Date})],Si.prototype,"created",void 0),l([u()],Si.prototype,"description",void 0),l([u()],Si.prototype,"id",void 0),l([u()],Si.prototype,"isInvitationOnly",void 0),l([u({type:Date})],Si.prototype,"modified",void 0),l([u()],Si.prototype,"owner",void 0),l([u()],Si.prototype,"portal",void 0),l([u()],Si.prototype,"snippet",void 0),l([u()],Si.prototype,"sortField",void 0),l([u()],Si.prototype,"sortOrder",void 0),l([u()],Si.prototype,"sourceJSON",void 0),l([u()],Si.prototype,"tags",void 0),l([u()],Si.prototype,"thumbnail",void 0),l([u({readOnly:!0})],Si.prototype,"thumbnailUrl",null),l([u()],Si.prototype,"title",void 0),l([u({readOnly:!0})],Si.prototype,"url",null),Si=jA=l([E("esri.portal.PortalGroup")],Si);let qd=class extends Se{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([u()],qd.prototype,"nextQueryParams",void 0),l([u()],qd.prototype,"queryParams",void 0),l([u()],qd.prototype,"results",void 0),l([u()],qd.prototype,"total",void 0),qd=l([E("esri.portal.PortalQueryResult")],qd);let wl=class extends Z{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new j("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([u({type:Date})],wl.prototype,"created",void 0),l([u()],wl.prototype,"id",void 0),l([u()],wl.prototype,"portal",void 0),l([u()],wl.prototype,"title",void 0),l([u({readOnly:!0})],wl.prototype,"url",null),l([u()],wl.prototype,"username",void 0),wl=l([E("esri.portal.PortalFolder")],wl);var VA;let It=VA=class extends Z{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,r=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=t.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:e}},o=await this.portal.request(i,s);for(const a of o.results){const c=t.find(f=>a.itemId===f.id),d=a.success;let h=null;d?(c.id=null,c.portal=null):a.error&&(h=new j("portal:delete-item-failed",a.error.message,a.error)),r.push({item:c,success:d,error:h})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=wl.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=Si.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await Q(()=>Promise.resolve().then(()=>OW),void 0,import.meta.url),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:r});let s;return n!=null&&n.items?(s=n.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Si({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new j("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new j("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new VA({sourceJSON:t});return e.read(t),e}};l([u()],It.prototype,"access",void 0),l([u({type:Date})],It.prototype,"created",void 0),l([u()],It.prototype,"culture",void 0),l([u()],It.prototype,"description",void 0),l([u()],It.prototype,"email",void 0),l([u()],It.prototype,"favGroupId",void 0),l([u()],It.prototype,"fullName",void 0),l([u()],It.prototype,"id",void 0),l([u({type:Date})],It.prototype,"modified",void 0),l([u()],It.prototype,"orgId",void 0),l([u()],It.prototype,"portal",void 0),l([u()],It.prototype,"preferredView",void 0),l([u()],It.prototype,"privileges",void 0),l([u()],It.prototype,"region",void 0),l([u()],It.prototype,"role",void 0),l([u()],It.prototype,"roleId",void 0),l([u()],It.prototype,"sourceJSON",void 0),l([u()],It.prototype,"thumbnail",void 0),l([u({readOnly:!0})],It.prototype,"thumbnailUrl",null),l([u()],It.prototype,"units",void 0),l([u({readOnly:!0})],It.prototype,"userContentUrl",null),l([u({readOnly:!0})],It.prototype,"url",null),l([u()],It.prototype,"username",void 0),l([u()],It.prototype,"userLicenseTypeId",void 0),l([u()],It.prototype,"userType",void 0),It=VA=l([E("esri.portal.PortalUser")],It);var rs;let R0;const iz={PortalGroup:()=>Promise.resolve({default:Si}),PortalItem:()=>Q(()=>Promise.resolve().then(()=>OW),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:It})};var Ua;let ce=(Ua=class extends $c(zh){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Qe.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){rz.unregister(this),this.defaultBasemap=Ot(this.defaultBasemap),this.defaultDevBasemap=Ot(this.defaultDevBasemap),this.defaultVectorBasemap=Ot(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Gt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)Qe.request.trustedServers.includes(i)||Qe.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return eue(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=It.fromJSON(e),i.portal=this),i}load(e){const i=Q(async()=>{const{default:r}=await Promise.resolve().then(()=>OSe);return{default:r}},void 0,import.meta.url).then(({default:r})=>{Lt(e),R0=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var n;if(!this.hasAPIKey&&We){const s=We;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==rs.AUTH_MODE_AUTO&&this.authMode!==rs.AUTH_MODE_NO_PROMPT||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",Che(new WeakRef(this))),rz.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await Q(async()=>{const{default:r}=await import("./ElevationLayer-BpZ-RCW9.js");return{default:r}},__vite__mapDeps([23,24,25,26,12,27]),import.meta.url)).default;return e?e.map(r=>new i({id:r.id,url:r.url})):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if((i==null?void 0:i.include3d)===!0&&this.use3dBasemaps!==!1){if(this.g3dTilesEnabled&&this.g3DTilesGalleryGroupQuery&&B("enable-feature:basemap-groundlayers")){const s=await this._fetchBasemaps3D(this.g3DTilesGalleryGroupQuery,i);r.unshift(...s)}const n=await this._fetchBasemaps3D(e,i);r.unshift(...n)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new Ii;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find(n=>n.type==="Web Scene");return r?new R0({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(i=>i.categorySchema):Ur(e)?Promise.reject(gt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(i=>i.classificationSchema):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new Ii({num:100,sortField:"title"});if(i!=null&&i.length){const n=[];for(const s of i)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return Ur(e)?Promise.reject(gt()):Promise.resolve([])}fetchRegions(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||eo();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||eo();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return Mhe(()=>new rs)}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const n=this.restUrl+"/portals/self",s={authMode:e,query:{culture:eo().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),i&&(s.query.default=!0),this.request(n,s)}queryPortal(e,i,r,n){const s=gi(Ii,i),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...n}).then(c=>{const d=s.clone();return d.start=c.nextStart,new qd({nextQueryParams:d,queryParams:s,total:c.total,results:rs._resultsToTypedArray(a,{portal:this},c,n)})}).then(c=>Promise.all(c.results.map(d=>typeof d.when=="function"?d.when():c)).then(()=>c,d=>(Ho(d),c)));return r&&iz[r]?iz[r]().then(({default:a})=>(Lt(n),o(a))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new j("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===rs.AUTH_MODE_ANONYMOUS||this.authMode===rs.AUTH_MODE_NO_PROMPT&&!We)return Promise.reject(new j("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate"))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return We?We.getCredential(this.restUrl,{prompt:this.authMode!==rs.AUTH_MODE_NO_PROMPT}).then(i=>e(i)):e(this.credential)}normalizeUrl(e){var r;const i=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then(n=>{const s=rs._resultsToTypedArray(r,{portal:this},n);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():n)).then(()=>s,()=>s)})}request(e,i={}){const r={f:"json",...i.query},{authMode:n=this.authMode===rs.AUTH_MODE_ANONYMOUS||this.authMode===rs.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:c="json",signal:d}=i,h={authMode:n,body:s,cacheBust:o,method:a,query:r,responseType:c,timeout:0,signal:d};return i.withCredentials&&(h.withCredentials=!0),Ft(this._normalizeSSL(e),h).then(f=>f.data)}toJSON(){throw new j("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new rs({sourceJSON:e})}_getHelperService(e){var r;const i=(r=this.helperServices)==null?void 0:r[e];if(!i)throw new j("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new Ii;r.query=e||(TA()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,i);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,i);return o.total?o.results.filter(a=>a.type==="Web Map").map(a=>new R0({portalItem:a})):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(TA())return[];const n=new Ii({query:r,disableExtraQuery:!0}),s=await this.queryGroups(n,i);if(!s.total)return[];const o=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=o.sortField||"name",n.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(n,i);return a.total?a.results.filter(c=>c.type==="Web Scene").map(c=>new R0({portalItem:c})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=R0.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,n){let s;if(r){const o=n!=null?n.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(s=s.map(a=>{const c=Object.assign(e?e.fromJSON(a):a,i);return typeof c.load=="function"&&c.load(o),c}))}else s=[];return s}},rs=Ua,Ua.AUTH_MODE_ANONYMOUS="anonymous",Ua.AUTH_MODE_AUTO="auto",Ua.AUTH_MODE_IMMEDIATE="immediate",Ua.AUTH_MODE_NO_PROMPT="no-prompt",Ua);l([u()],ce.prototype,"access",void 0),l([u()],ce.prototype,"allSSL",void 0),l([u()],ce.prototype,"authMode",void 0),l([u()],ce.prototype,"authorizedCrossOriginDomains",void 0),l([oe("authorizedCrossOriginDomains")],ce.prototype,"readAuthorizedCrossOriginDomains",null),l([u()],ce.prototype,"basemapGalleryGroupQuery",void 0),l([u({json:{name:"3DBasemapGalleryGroupQuery"}})],ce.prototype,"basemapGalleryGroupQuery3D",void 0),l([u({json:{name:"g3DTilesGalleryGroupQuery"}})],ce.prototype,"g3DTilesGalleryGroupQuery",void 0),l([u({json:{name:"g3dTilesEnabled"}})],ce.prototype,"g3dTilesEnabled",void 0),l([u()],ce.prototype,"bingKey",void 0),l([u()],ce.prototype,"canListApps",void 0),l([u()],ce.prototype,"canListData",void 0),l([u()],ce.prototype,"canListPreProvisionedItems",void 0),l([u()],ce.prototype,"canProvisionDirectPurchase",void 0),l([u()],ce.prototype,"canSearchPublic",void 0),l([u()],ce.prototype,"canShareBingPublic",void 0),l([u()],ce.prototype,"canSharePublic",void 0),l([u()],ce.prototype,"canSignInArcGIS",void 0),l([u()],ce.prototype,"canSignInIDP",void 0),l([u()],ce.prototype,"colorSetsGroupQuery",void 0),l([u()],ce.prototype,"commentsEnabled",void 0),l([u({type:Date})],ce.prototype,"created",void 0),l([u()],ce.prototype,"credential",void 0),l([u()],ce.prototype,"culture",void 0),l([u()],ce.prototype,"currentVersion",void 0),l([u()],ce.prototype,"customBaseUrl",void 0),l([u()],ce.prototype,"default3DBasemapQuery",void 0),l([u()],ce.prototype,"defaultBasemap",void 0),l([oe("defaultBasemap")],ce.prototype,"readDefaultBasemap",null),l([u()],ce.prototype,"defaultDevBasemap",void 0),l([oe("defaultDevBasemap")],ce.prototype,"readDefaultDevBasemap",null),l([u({type:Ke})],ce.prototype,"defaultExtent",void 0),l([u()],ce.prototype,"defaultVectorBasemap",void 0),l([oe("defaultVectorBasemap")],ce.prototype,"readDefaultVectorBasemap",null),l([u()],ce.prototype,"description",void 0),l([u()],ce.prototype,"devBasemapGalleryGroupQuery",void 0),l([u()],ce.prototype,"eueiEnabled",void 0),l([u({readOnly:!0})],ce.prototype,"extraQuery",null),l([u()],ce.prototype,"featuredGroups",void 0),l([u()],ce.prototype,"featuredItemsGroupQuery",void 0),l([u()],ce.prototype,"galleryTemplatesGroupQuery",void 0),l([u()],ce.prototype,"layoutGroupQuery",void 0),l([u()],ce.prototype,"livingAtlasGroupQuery",void 0),l([u({readOnly:!0})],ce.prototype,"hasAPIKey",null),l([u()],ce.prototype,"hasCategorySchema",void 0),l([u()],ce.prototype,"hasClassificationSchema",void 0),l([u()],ce.prototype,"helpBase",void 0),l([u()],ce.prototype,"helperServices",void 0),l([u()],ce.prototype,"helpMap",void 0),l([u()],ce.prototype,"homePageFeaturedContent",void 0),l([u()],ce.prototype,"homePageFeaturedContentCount",void 0),l([u()],ce.prototype,"httpPort",void 0),l([u()],ce.prototype,"httpsPort",void 0),l([u()],ce.prototype,"id",void 0),l([u()],ce.prototype,"ipCntryCode",void 0),l([u({readOnly:!0})],ce.prototype,"isOrganization",null),l([u()],ce.prototype,"isPortal",void 0),l([u()],ce.prototype,"isReadOnly",void 0),l([u({readOnly:!0})],ce.prototype,"itemPageUrl",null),l([u()],ce.prototype,"layerTemplatesGroupQuery",void 0),l([u()],ce.prototype,"maxTokenExpirationMinutes",void 0),l([u({type:Date})],ce.prototype,"modified",void 0),l([u()],ce.prototype,"name",void 0),l([u()],ce.prototype,"portalHostname",void 0),l([u()],ce.prototype,"portalMode",void 0),l([u()],ce.prototype,"portalProperties",void 0),l([u()],ce.prototype,"region",void 0),l([u()],ce.prototype,"recycleBinEnabled",void 0),l([u({readOnly:!0})],ce.prototype,"restUrl",null),l([u()],ce.prototype,"rotatorPanels",void 0),l([u()],ce.prototype,"showHomePageDescription",void 0),l([u()],ce.prototype,"sourceJSON",void 0),l([u()],ce.prototype,"staticImagesUrl",void 0),l([u({json:{name:"2DStylesGroupQuery"}})],ce.prototype,"stylesGroupQuery2d",void 0),l([u({json:{name:"stylesGroupQuery"}})],ce.prototype,"stylesGroupQuery3d",void 0),l([u()],ce.prototype,"supportsHostedServices",void 0),l([u()],ce.prototype,"symbolSetsGroupQuery",void 0),l([u()],ce.prototype,"templatesGroupQuery",void 0),l([u()],ce.prototype,"thumbnail",void 0),l([u({readOnly:!0})],ce.prototype,"thumbnailUrl",null),l([u()],ce.prototype,"units",void 0),l([u()],ce.prototype,"url",void 0),l([u()],ce.prototype,"urlKey",void 0),l([oe("urlKey")],ce.prototype,"readUrlKey",null),l([u()],ce.prototype,"user",void 0),l([oe("user")],ce.prototype,"readUser",null),l([u()],ce.prototype,"use3dBasemaps",void 0),l([u()],ce.prototype,"useDefault3dBasemap",void 0),l([u()],ce.prototype,"useStandardizedQuery",void 0),l([u()],ce.prototype,"useVectorBasemaps",void 0),l([u()],ce.prototype,"vectorBasemapGalleryGroupQuery",void 0),ce=rs=l([E("esri.portal.Portal")],ce);const rz=new FinalizationRegistry(t=>{t.remove()});function Che(t){const e=We;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let cn=class extends Z{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};l([u({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],cn.prototype,"enabled",void 0),l([le("enabled")],cn.prototype,"writeEnabled",null),l([u({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],cn.prototype,"type",void 0),cn=l([E("esri.symbols.Symbol3DLayer")],cn);const Ohe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Phe="screenUtils.toPt: input not recognized!",nH=96;function Rhe(t){return t?t/72*nH:0}function no(t){return t?72*t/nH:0}function ht(t){if(typeof t=="string"){const e=t.match(Ohe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.startsWith("-"),s=r==="px"?no(i):i;return n?-s:s}return console.warn(Phe),null}return t}function tr(t=0,e=0){return{x:t,y:e}}function c4e(t){return t?tr(t.x,t.y):null}function u4e(t=0,e=0){return[t,e]}function d4e(t=0,e=0,i=0){return[t,e,i]}function p4e(t){return t}function h4e(t){return t}function f4e(t){return t}function m4e(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function tI(t){const e=lR(100*(1-t));return Math.max(0,Math.min(e,100))}function uw(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}function Lhe(t,e){const i=e.transparency!=null?uw(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Ue([r[0]||0,r[1]||0,r[2]||0,i]):null}function Fhe(t,e){e.color=t.toJSON().slice(0,3);const i=tI(t.a);i!==0&&(e.transparency=i)}function ud(t){return{type:Ue,nonNullable:t==null?void 0:t.nonNullable,json:{type:[nt],default:null,read:{source:["color","transparency"],reader:Lhe},write:{target:{color:{type:[nt],isRequired:t==null?void 0:t.colorRequiredOnWrite},transparency:{type:nt}},writer:Fhe}}}}const tl={type:Number,cast:ht,json:{write:!0}};function g4e(t){return t==="emissive"?0:1}let Bd=class extends Z{constructor(e){super(e),this.color=new Ue([0,0,0,1])}get extensionLength(){return this._get("extensionLength")??0}set extensionLength(e){this._set("extensionLength",e)}get size(){return this._get("size")??no(1)}set size(e){this._set("size",e)}clone(){}cloneProperties(){return{color:V(this.color),size:this.size,extensionLength:this.extensionLength}}};l([u({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Bd.prototype,"type",void 0),l([u(ud({colorRequiredOnWrite:!0}))],Bd.prototype,"color",void 0),l([u({...tl,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Bd.prototype,"extensionLength",null),l([u(tl)],Bd.prototype,"size",null),Bd=l([E("esri.symbols.edges.Edges3D")],Bd);const wL=Bd;var UA;let qx=UA=class extends wL{constructor(t){super(t),this.type="sketch"}clone(){return new UA(this.cloneProperties())}};l([Ie({sketch:"sketch"},{readOnly:!0})],qx.prototype,"type",void 0),qx=UA=l([E("esri.symbols.edges.SketchEdges3D")],qx);const Nhe=qx;var qA;let Bx=qA=class extends wL{constructor(t){super(t),this.type="solid"}clone(){return new qA(this.cloneProperties())}};l([Ie({solid:"solid"},{readOnly:!0})],Bx.prototype,"type",void 0),Bx=qA=l([E("esri.symbols.edges.SolidEdges3D")],Bx);const sH=Bx,oH={types:{key:"type",base:wL,typeMap:{solid:sH,sketch:Nhe}},json:{write:!0}};var BA;let Rm=BA=class extends Z{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new BA(t)}};l([u({json:{write:!1}})],Rm.prototype,"strength",void 0),l([u({json:{write:!1}})],Rm.prototype,"source",void 0),Rm=BA=l([E("esri.symbols.support.Symbol3DEmissive")],Rm);var GA;let ws=GA=class extends Z{constructor(t){super(t),this.color=null,this.emissive=new Rm({source:"emissive"})}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new GA(t)}};l([u(ud())],ws.prototype,"color",void 0),l([u({type:Rm,json:{write:!1}})],ws.prototype,"emissive",void 0),ws=GA=l([E("esri.symbols.support.Symbol3DMaterial")],ws);var HA,wg;let Ul=(wg=class extends cn{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,i;return new HA({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(i=this.material)==null?void 0:i.clone(),castShadows:this.castShadows,size:this.size})}},HA=wg,wg);l([Ie({Extrude:"extrude"},{readOnly:!0})],Ul.prototype,"type",void 0),l([u({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ul.prototype,"size",void 0),l([u({type:ws,json:{write:!0}})],Ul.prototype,"material",void 0),l([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ul.prototype,"castShadows",void 0),l([u(oH)],Ul.prototype,"edges",void 0),Ul=HA=l([E("esri.symbols.ExtrudeSymbol3DLayer")],Ul);let pb=class extends Z{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};l([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],pb.prototype,"type",void 0),pb=l([E("esri.symbols.patterns.LinePattern3D")],pb);const Dhe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var WA;const zhe=Wi()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Tp=WA=class extends pb{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new WA(t)}};l([u({type:["style"],json:{write:{isRequired:!0}}})],Tp.prototype,"type",void 0),l([Ie(zhe),u({type:Dhe,json:{write:{isRequired:!0}}})],Tp.prototype,"style",void 0),Tp=WA=l([E("esri.symbols.patterns.LineStylePattern3D")],Tp);let hb=class extends Z{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};l([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],hb.prototype,"type",void 0),hb=l([E("esri.symbols.patterns.Pattern3D")],hb);const jhe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var ZA;let Lm=ZA=class extends hb{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new ZA({style:this.style})}};l([u({type:["style"],json:{write:{isRequired:!0}}})],Lm.prototype,"type",void 0),l([u({type:jhe,json:{read:!0,write:{isRequired:!0}}})],Lm.prototype,"style",void 0),Lm=ZA=l([E("esri.symbols.patterns.StylePattern3D")],Lm);const Vhe={types:{key:"type",base:hb,typeMap:{style:Lm}},json:{write:!0}},aH={types:{key:"type",base:pb,typeMap:{style:Tp}},json:{write:!0}},fb=new Ue("white"),Uhe=new Ue([255,255,255,0]);function qhe(t){return t.r===0&&t.g===0&&t.b===0}var JA;let mb=JA=class extends ws{constructor(t){super(t),this.colorMixMode=null}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,colorMixMode:this.colorMixMode,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new JA(t)}};l([Ie({multiply:"multiply",replace:"replace",tint:"tint"})],mb.prototype,"colorMixMode",void 0),mb=JA=l([E("esri.symbols.support.Symbol3DFillMaterial")],mb);function dd(){return[0,0,0]}function Bhe(t){return[t[0],t[1],t[2]]}function Zy(t,e,i){return[t,e,i]}function Ghe(t,e,i){return[t,e,i]}function Hhe(t,e=dd()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function lH(){return dd()}function cH(){return Zy(1,1,1)}function uH(){return Zy(1,0,0)}function dH(){return Zy(0,1,0)}function pH(){return Zy(0,0,1)}const Whe=lH(),Zhe=cH(),Jhe=uH(),Yhe=dH(),Khe=pH();Object.freeze(Object.defineProperty({__proto__:null,ONES:Zhe,UNIT_X:Jhe,UNIT_Y:Yhe,UNIT_Z:Khe,ZEROS:Whe,clone:Bhe,create:dd,freeze:Ghe,fromArray:Hhe,fromValues:Zy,ones:cH,unitX:uH,unitY:dH,unitZ:pH,zeros:lH},Symbol.toStringTag,{value:"Module"}));function _L(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Qhe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function Xhe(t,e,i,r,n,s,o,a,c,d,h,f,m,v,w,x){return[t,e,i,r,n,s,o,a,c,d,h,f,m,v,w,x]}const efe=_L();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:efe,clone:Qhe,create:_L,fromValues:Xhe},Symbol.toStringTag,{value:"Module"}));function tfe(t){return t<=NU?new Array(t).fill(0):new Float64Array(t)}function w4e(t){return(Fie(t)?t.byteLength/8:t.length)<=NU?Array.from(t):new Float64Array(t)}function _4e(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function x4e(t){return[...t]}function S4e(t){const e=_L();for(let i=0;i<16;++i)e[i]=t[i];return e}function n1(t=sfe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function xL(t,e,i,r,n,s,o=n1()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function $4e(t,e=n1()){return ife(t,0,t.length/3,e)}function ife(t,e,i,r=n1()){return hH(r,YA),rfe(r,t,e,i),r}function T4e(t,e=tfe(24)){const[i,r,n,s,o,a]=t;return e[0]=i,e[1]=r,e[2]=n,e[3]=i,e[4]=r,e[5]=a,e[6]=i,e[7]=o,e[8]=n,e[9]=i,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=n,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=n,e[21]=s,e[22]=o,e[23]=a,e}function k4e(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Ke(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function I4e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function E4e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function M4e(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function rfe(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],o=t[2],a=t[3],c=t[4],d=t[5];for(let h=0;h<r;h++)n=Math.min(n,e[i+3*h]),s=Math.min(s,e[i+3*h+1]),o=Math.min(o,e[i+3*h+2]),a=Math.max(a,e[i+3*h]),c=Math.max(c,e[i+3*h+1]),d=Math.max(d,e[i+3*h+2]);t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=c,t[5]=d}function A4e(t,e,i){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3],c=t[4],d=t[5];if(i)for(let h=0;h<r;h++){const f=e[h];n=Math.min(n,f[0]),s=Math.min(s,f[1]),o=Math.min(o,f[2]),a=Math.max(a,f[0]),c=Math.max(c,f[1]),d=Math.max(d,f[2])}else for(let h=0;h<r;h++){const f=e[h];n=Math.min(n,f[0]),s=Math.min(s,f[1]),a=Math.max(a,f[0]),c=Math.max(c,f[1])}t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=c,t[5]=d}function C4e(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function s1(t){return t[0]>=t[3]?0:t[3]-t[0]}function o1(t){return t[1]>=t[4]?0:t[4]-t[1]}function a1(t){return t[2]>=t[5]?0:t[5]-t[2]}function O4e(t){const e=s1(t),i=a1(t),r=o1(t);return Math.sqrt(e*e+i*i+r*r)}function P4e(t,e=[0,0,0]){return e[0]=t[0]+s1(t)/2,e[1]=t[1]+o1(t)/2,e[2]=t[2]+a1(t)/2,e}function R4e(t,e=[0,0,0]){return e[0]=s1(t),e[1]=o1(t),e[2]=a1(t),e}function L4e(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function nfe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function F4e(t,e){return e==null||nfe(t,e)}function N4e(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function D4e(t,e,i=t){const r=t[0]+s1(t)/2,n=t[1]+o1(t)/2,s=t[2]+a1(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function z4e(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function j4e(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function V4e(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function hH(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function U4e(t){return t?hH(t,YA):n1(YA)}function q4e(t,e=Un()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function B4e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function G4e(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function nz(t){return t.length===6}function H4e(t){return s1(t)===0&&o1(t)===0&&a1(t)===0}function W4e(t,e,i){if(t==null||e==null)return t===e;if(!nz(t)||!nz(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const YA=[1/0,1/0,1/0,-1/0,-1/0,-1/0],sfe=[0,0,0,0,0,0];n1();function Z4e(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=Zy(i,r,n);let a;for(let c=0;c<3;c++){const d=o[c];if(d!=null){a=d/t[c];break}}for(let c=0;c<3;c++)o[c]==null&&(o[c]=t[c]*a);return o}const ofe=xL(-.5,-.5,-.5,.5,.5,.5),afe=xL(-.5,-.5,0,.5,.5,1),lfe=xL(-.5,-.5,0,.5,.5,.5);function J4e(t){switch(t){case"sphere":case"cube":case"diamond":return ofe;case"cylinder":case"cone":case"inverted-cone":return afe;case"tetrahedron":return lfe;default:return}}const SL=["butt","square","round"],cfe=[...SL,"none"],fH=["miter","bevel","round"];var KA;let Gd=KA=class extends Z{constructor(t){super(t),this.color=new Ue([0,0,0,1]),this.pattern=null,this.patternCap="butt"}get size(){return this._get("size")??no(1)}set size(t){this._set("size",t)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new KA(t)}};l([u(ud({colorRequiredOnWrite:!0}))],Gd.prototype,"color",void 0),l([u({...tl,json:{write:{isRequired:!0}}})],Gd.prototype,"size",null),l([u(aH)],Gd.prototype,"pattern",void 0),l([u({type:SL,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Gd.prototype,"patternCap",void 0),Gd=KA=l([E("esri.symbols.support.Symbol3DOutline")],Gd);var Gx,_g;let nn=(_g=class extends cn{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Gx(e)}static fromSimpleFillSymbol(e){var n,s,o;const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Tp({style:e.outline.style}):null,r={size:((n=e.outline)==null?void 0:n.width)??0,color:(((s=e.outline)==null?void 0:s.color)??fb).clone(),pattern:i};return i&&((o=e.outline)!=null&&o.cap)&&(r.patternCap=e.outline.cap),new Gx({material:new mb({color:(e.color??Uhe).clone()}),pattern:e.style&&e.style!=="solid"?new Lm({style:e.style}):null,outline:r})}},Gx=_g,_g);l([Ie({Fill:"fill"},{readOnly:!0})],nn.prototype,"type",void 0),l([u({type:mb,json:{write:!0}})],nn.prototype,"material",void 0),l([u(Vhe)],nn.prototype,"pattern",void 0),l([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],nn.prototype,"castShadows",void 0),l([u({type:Gd,json:{write:!0}})],nn.prototype,"outline",void 0),l([u(oH)],nn.prototype,"edges",void 0),nn=Gx=l([E("esri.symbols.FillSymbol3DLayer")],nn);var QA;const ufe=Wi()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Hd=QA=class extends Z{constructor(t){super(t)}readHref(t,e,i){return t?Lh(t,i):e.dataURI}writeHref(t,e,i,r){t&&(kc(t)?e.dataURI=t:(e.href=yh(t,r),qn(e.href)&&(e.href=Qo(e.href))))}clone(){return new QA({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};l([u({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Hd.prototype,"href",void 0),l([oe("href")],Hd.prototype,"readHref",null),l([le("href",{href:{type:String},dataURI:{type:String}})],Hd.prototype,"writeHref",null),l([Ie(ufe)],Hd.prototype,"primitive",void 0),Hd=QA=l([E("esri.symbols.support.IconSymbol3DLayerResource")],Hd);const Y4e="circle";let Hx=class extends Pe(Z){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};l([u({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],Hx.prototype,"mode",void 0),Hx=l([E("esri.symbols.support.OccludedVisibility")],Hx);const mH=Hx;var XA;let Fm=XA=class extends Se{constructor(t){super(t),this.x=0,this.y=0}clone(){return new XA({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};l([u({type:Number})],Fm.prototype,"x",void 0),l([u({type:Number})],Fm.prototype,"y",void 0),Fm=XA=l([E("esri.symbols.support.Symbol3DAnchorPosition2D")],Fm);var eC;let mv=eC=class extends Z{constructor(t){super(t),this.color=new Ue([0,0,0,1])}get size(){return this._get("size")??no(1)}set size(t){this._set("size",t)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new eC(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};l([u(ud({colorRequiredOnWrite:!0}))],mv.prototype,"color",void 0),l([u({...tl,json:{write:{isRequired:!0}}})],mv.prototype,"size",null),mv=eC=l([E("esri.symbols.support.Symbol3DIconOutline")],mv);var Pf,xg;let ur=(xg=class extends cn{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}get size(){return this._get("size")??12}set size(e){this._set("size",e)}clone(){return new Pf({anchor:this.anchor,anchorPosition:V(this.anchorPosition),enabled:this.enabled,material:V(this.material),outline:V(this.outline),resource:V(this.resource),angle:this.angle,size:this.size,occludedVisibility:V(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const i=e.color||fb,r=sz(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||fb).clone()}:null;return new Pf({size:e.size,angle:e.angle,resource:{primitive:pfe(()=>ie.getLogger(this.prototype),e.style)},material:{color:i},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||qhe(e.color)?fb:e.color,r=sz(e);return new Pf({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Pf({resource:{href:bB({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},Pf=xg,xg);function sz(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=oz(t.xoffset),n=oz(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function oz(t){return isFinite(t)?t:0}l([u({type:ws,json:{write:!0}})],ur.prototype,"material",void 0),l([u({type:Hd,json:{write:!0}})],ur.prototype,"resource",void 0),l([Ie({Icon:"icon"},{readOnly:!0})],ur.prototype,"type",void 0),l([u({...tl,json:{write:{isRequired:!0}}})],ur.prototype,"size",null),l([Ie({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],ur.prototype,"anchor",void 0),l([u({type:Fm,json:{type:[Number],read:{reader:t=>new Fm({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ur.prototype,"anchorPosition",void 0),l([u({type:mv,json:{write:!0}})],ur.prototype,"outline",void 0),l([u({type:Number,json:{write:!0,default:0}})],ur.prototype,"angle",void 0),l([u({type:mH})],ur.prototype,"occludedVisibility",void 0),ur=Pf=l([E("esri.symbols.IconSymbol3DLayer")],ur);const dfe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function pfe(t,e){return dfe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const hfe=["begin","end","begin-end"],gH=["arrow","circle","square","diamond","cross","x"];let Xl=class extends Pe(Z){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};l([u({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Xl.prototype,"type",void 0),l([u({type:hfe,json:{default:"begin-end",write:!0}})],Xl.prototype,"placement",void 0),l([u({type:gH,json:{default:"arrow",write:!0}})],Xl.prototype,"style",void 0),l([u({type:Ue,json:{type:[nt],default:null,write:!0}})],Xl.prototype,"color",void 0),Xl=l([E("esri.symbols.LineStyleMarker3D")],Xl);var Wx,Sg;let rn=(Sg=class extends cn{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.pattern=null,this.marker=null}get size(){return this._get("size")??no(1)}set size(e){this._set("size",e)}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Wx(e)}static fromSimpleLineSymbol(e){var r;const i={enabled:!0,size:e.width??no(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Tp({style:e.style}):null,material:new ws({color:(e.color||fb).clone()}),marker:e.marker?new Xl({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new Wx(i)}},Wx=Sg,Sg);l([u({type:ws,json:{write:!0}})],rn.prototype,"material",void 0),l([Ie({Line:"line"},{readOnly:!0})],rn.prototype,"type",void 0),l([u({type:fH,json:{write:!0,default:"miter"}})],rn.prototype,"join",void 0),l([u({type:SL,json:{write:!0,default:"butt"}})],rn.prototype,"cap",void 0),l([u({...tl,json:{write:{isRequired:!0}}})],rn.prototype,"size",null),l([u(aH)],rn.prototype,"pattern",void 0),l([u({types:{key:"type",base:Xl,typeMap:{style:Xl}},json:{write:!0}})],rn.prototype,"marker",void 0),rn=Wx=l([E("esri.symbols.LineSymbol3DLayer")],rn);var tC;const ffe=Wi()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let gv=tC=class extends Z{clone(){return new tC({href:this.href,primitive:this.primitive})}};l([u({type:String,json:{read:Uk,write:vh}})],gv.prototype,"href",void 0),l([Ie(ffe)],gv.prototype,"primitive",void 0),gv=tC=l([E("esri.symbols.support.ObjectSymbol3DLayerResource")],gv);const X4e="sphere";var iC;let mp=iC=class extends Se{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new iC({x:this.x,y:this.y,z:this.z})}};l([u({type:Number})],mp.prototype,"x",void 0),l([u({type:Number})],mp.prototype,"y",void 0),l([u({type:Number})],mp.prototype,"z",void 0),mp=iC=l([E("esri.symbols.support.Symbol3DAnchorPosition3D")],mp);var rC,$g;let lr=($g=class extends cn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,i,r;return new rC({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((i=this.material)==null?void 0:i.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},rC=$g,$g);l([u({type:ws,json:{write:!0}})],lr.prototype,"material",void 0),l([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],lr.prototype,"castShadows",void 0),l([u({type:gv,json:{write:!0}})],lr.prototype,"resource",void 0),l([Ie({Object:"object"},{readOnly:!0})],lr.prototype,"type",void 0),l([u({type:Number,json:{write:!0}})],lr.prototype,"width",void 0),l([u({type:Number,json:{write:!0}})],lr.prototype,"height",void 0),l([u({type:Number,json:{write:!0}})],lr.prototype,"depth",void 0),l([Ie({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],lr.prototype,"anchor",void 0),l([u({type:mp,json:{type:[Number],read:{reader:t=>new mp({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],lr.prototype,"anchorPosition",void 0),l([u({type:Number,json:{write:!0}})],lr.prototype,"heading",void 0),l([u({type:Number,json:{write:!0}})],lr.prototype,"tilt",void 0),l([u({type:Number,json:{write:!0}})],lr.prototype,"roll",void 0),l([u({readOnly:!0})],lr.prototype,"isPrimitive",null),lr=rC=l([E("esri.symbols.ObjectSymbol3DLayer")],lr);var nC,Tg;let yr=(Tg=class extends cn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new nC({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},nC=Tg,Tg);l([u({type:ws,json:{write:!0}})],yr.prototype,"material",void 0),l([u({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],yr.prototype,"castShadows",void 0),l([Ie({Path:"path"},{readOnly:!0})],yr.prototype,"type",void 0),l([u({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],yr.prototype,"profile",void 0),l([u({type:fH,nonNullable:!0,json:{write:!0,default:"miter"}})],yr.prototype,"join",void 0),l([u({type:cfe,nonNullable:!0,json:{write:!0,default:"butt"}})],yr.prototype,"cap",void 0),l([u({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],yr.prototype,"width",void 0),l([oe("width",["width","size","height"])],yr.prototype,"readWidth",null),l([u({type:Number,json:{write:!0}})],yr.prototype,"height",void 0),l([oe("height",["height","size","width"])],yr.prototype,"readHeight",null),l([u({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],yr.prototype,"anchor",void 0),l([u({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],yr.prototype,"profileRotation",void 0),yr=nC=l([E("esri.symbols.PathSymbol3DLayer")],yr);const mfe=["none","underline","line-through"],gfe=["normal","italic","oblique"],yfe=["normal","lighter","bold","bolder"],yH={type:Number,cast:t=>{const e=on(t);return e===0?1:Es(e,.1,4)},nonNullable:!0},vfe=["left","right","center"],bfe=["baseline","top","middle","bottom"],vH={type:vfe,nonNullable:!0},bH={type:bfe,nonNullable:!0},e6e=8;var sC;let qs=sC=class extends Z{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.style="normal",this.weight="normal"}get size(){return this._get("size")??9}set size(t){this._set("size",t)}castSize(t){return ht(t)}clone(){return new sC({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([u({type:mfe,json:{default:"none",write:!0}})],qs.prototype,"decoration",void 0),l([u({type:String,json:{write:!0}})],qs.prototype,"family",void 0),l([u({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],qs.prototype,"size",null),l([ti("size")],qs.prototype,"castSize",null),l([u({type:gfe,json:{default:"normal",write:!0}})],qs.prototype,"style",void 0),l([u({type:yfe,json:{default:"normal",write:!0}})],qs.prototype,"weight",void 0),qs=sC=l([E("esri.symbols.Font")],qs);var oC;let Nm=oC=class extends Z{constructor(){super(...arguments),this.color=new Ue([0,0,0,1]),this.size=0}clone(){const t={color:V(this.color),size:this.size};return new oC(t)}};l([u(ud())],Nm.prototype,"color",void 0),l([u(tl)],Nm.prototype,"size",void 0),Nm=oC=l([E("esri.symbols.support.Symbol3DHalo")],Nm);let gb=class extends Pe(Z){constructor(e){super(e),this.color=null}};l([u(ud())],gb.prototype,"color",void 0),gb=l([E("esri.symbols.support.Symbol3DTextBackground")],gb);var Zx,kg;let Bi=(kg=class extends cn{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,n){const s={...n,textSymbol3D:!0};i.font=e.write({},s),delete i.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=Number(e),this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Zx({enabled:this.enabled,font:V(this.font),halo:V(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:V(this.background),occludedVisibility:V(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Zx({font:e.font!=null?e.font.clone():new qs,halo:wfe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new ws({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new gb({color:e.backgroundColor.clone()}):null})}},Zx=kg,kg);function wfe(t,e){return t&&e!=null&&e>0?new Nm({color:V(t),size:e}):null}l([u({type:qs,json:{write:!0}})],Bi.prototype,"font",null),l([le("font")],Bi.prototype,"writeFont",null),l([u({type:Nm,json:{write:!0}})],Bi.prototype,"halo",void 0),l([u({...vH,json:{default:"center",write:!0}})],Bi.prototype,"horizontalAlignment",void 0),l([u({...yH,json:{default:1,write:!0}})],Bi.prototype,"lineHeight",void 0),l([u({type:ws,json:{write:!0}})],Bi.prototype,"material",void 0),l([u({type:gb,json:{write:!0}})],Bi.prototype,"background",void 0),l([u(tl)],Bi.prototype,"size",null),l([u({type:String,json:{write:!0}})],Bi.prototype,"text",void 0),l([Ie({Text:"text"},{readOnly:!0})],Bi.prototype,"type",void 0),l([u({...bH,json:{default:"baseline",write:!0}})],Bi.prototype,"verticalAlignment",void 0),l([u({type:mH})],Bi.prototype,"occludedVisibility",void 0),Bi=Zx=l([E("esri.symbols.TextSymbol3DLayer")],Bi);var aC,Ig;let ql=(Ig=class extends cn{constructor(e){super(e),this.color=lC.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new aC({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},aC=Ig,Ig);l([u({type:Ue,nonNullable:!0,json:{type:[nt],write:(t,e,i)=>e[i]=t.toArray(1),default:()=>lC.clone(),defaultEquals:t=>t.toCss(!0)===lC.toCss(!0)}})],ql.prototype,"color",void 0),l([Ie({Water:"water"},{readOnly:!0})],ql.prototype,"type",void 0),l([u({type:["small","medium","large"],json:{write:!0,default:"medium"}})],ql.prototype,"waterbodySize",void 0),l([u({type:Number,json:{write:!0,default:null}})],ql.prototype,"waveDirection",void 0),l([u({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],ql.prototype,"waveStrength",void 0),ql=aC=l([E("esri.symbols.WaterSymbol3DLayer")],ql);const lC=new Ue([0,119,190]);var cC;let ec=cC=class extends Se{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new cC({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([u({type:String})],ec.prototype,"name",void 0),l([u({type:String})],ec.prototype,"styleUrl",void 0),l([u({type:String})],ec.prototype,"styleName",void 0),l([u({type:ce})],ec.prototype,"portal",void 0),ec=cC=l([E("esri.symbols.support.StyleOrigin")],ec);var uC;let yb=uC=class extends Se{constructor(){super(...arguments),this.url=""}clone(){return new uC({url:this.url})}};l([u({type:String})],yb.prototype,"url",void 0),yb=uC=l([E("esri.symbols.support.Thumbnail")],yb);const wH={icon:ur,object:lr,line:rn,path:yr,fill:nn,extrude:Ul,text:Bi,water:ql},_fe=de.ofType({base:cn,key:"type",typeMap:wH,errorContext:"symbol-layer"});let Fn=class extends Mi{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||de;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&ie.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){to(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=Lh(e.styleUrl,r);return new ec({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new ec({portal:(r==null?void 0:r.portal)||ce.getDefault(),styleName:e.styleName,name:e.name});r!=null&&r.messages&&r.messages.push(new Is("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=yh(e.styleUrl,n);qn(s)&&(s=Qo(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!vB(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Is("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof cn||e&&wH[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};l([u({json:{read:!1,write:!1}})],Fn.prototype,"color",null),l([u({type:_fe,nonNullable:!0,json:{write:!0}}),ti(rH)],Fn.prototype,"symbolLayers",null),l([u({type:ec})],Fn.prototype,"styleOrigin",void 0),l([oe("styleOrigin")],Fn.prototype,"readStyleOrigin",null),l([le("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Fn.prototype,"writeStyleOrigin",null),l([u({type:yb,json:{read:!1}})],Fn.prototype,"thumbnail",void 0),l([u({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Fn.prototype,"type",void 0),Fn=l([E("esri.symbols.Symbol3D")],Fn);let Dm=class extends Z{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};l([u({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Dm.prototype,"type",void 0),l([u({readOnly:!0})],Dm.prototype,"visible",void 0),Dm=l([E("esri.symbols.callouts.Callout3D")],Dm);var dC;let Jx=dC=class extends Z{constructor(t){super(t),this.color=new Ue("white")}clone(){return new dC({color:V(this.color)})}};l([u(ud({colorRequiredOnWrite:!0}))],Jx.prototype,"color",void 0),Jx=dC=l([E("esri.symbols.callouts.LineCallout3DBorder")],Jx);const xfe=Jx;var pC;let Bl=pC=class extends Dm{constructor(t){super(t),this.type="line",this.color=new Ue([0,0,0,1]),this.border=null}get size(){return this._get("size")??no(1)}set size(t){this._set("size",t)}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new pC({color:V(this.color),size:this.size,border:V(this.border)})}};l([Ie({line:"line"})],Bl.prototype,"type",void 0),l([u(ud({colorRequiredOnWrite:!0}))],Bl.prototype,"color",void 0),l([u({...tl,json:{write:{isRequired:!0}}})],Bl.prototype,"size",null),l([u({type:xfe,json:{write:!0}})],Bl.prototype,"border",void 0),l([u({readOnly:!0})],Bl.prototype,"visible",null),Bl=pC=l([E("esri.symbols.callouts.LineCallout3D")],Bl);function $L(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function _H(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!(e!=null&&e.visible)&&!!$L(t)}function n6e(t){return t.type==="point-3d"||t.type==="label-3d"}function s6e(t){return t.horizontalAlignment==="center"}const xH={types:{key:"type",base:Dm,typeMap:{line:Bl}},json:{write:!0}};var hC;let wu=hC=class extends Z{constructor(t){super(t),this.minWorldLength=0,this.maxWorldLength=null}get screenLength(){return this._get("screenLength")??0}set screenLength(t){this._set("screenLength",t)}clone(){return new hC({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([u({...tl,json:{write:{isRequired:!0}}})],wu.prototype,"screenLength",null),l([u({type:Number,nonNullable:!0,json:{write:!0,default:0}})],wu.prototype,"minWorldLength",void 0),l([u({type:Number,json:{write:!0}})],wu.prototype,"maxWorldLength",void 0),wu=hC=l([E("esri.symbols.support.Symbol3DVerticalOffset")],wu);var Yx;const SH=de.ofType({base:null,key:"type",typeMap:{text:Bi}});let jo=Yx=class extends Fn{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.type="label-3d",this.symbolLayers=new SH}get symbolLayers(){return this._get("symbolLayers")}set symbolLayers(t){to(t,this._get("symbolLayers"))}supportsCallout(){return!0}hasVisibleCallout(){return _H(this)}hasVisibleVerticalOffset(){return $L(this)}clone(){return new Yx({styleOrigin:V(this.styleOrigin),symbolLayers:V(this.symbolLayers),thumbnail:V(this.thumbnail),callout:V(this.callout),verticalOffset:V(this.verticalOffset)})}static fromTextSymbol(t){return new Yx({symbolLayers:new de([Bi.fromTextSymbol(t)])})}};l([u({type:wu,json:{write:!0}})],jo.prototype,"verticalOffset",void 0),l([u(xH)],jo.prototype,"callout",void 0),l([u({json:{read:!1,write:!1}})],jo.prototype,"styleOrigin",void 0),l([u({type:SH})],jo.prototype,"symbolLayers",null),l([Ie({LabelSymbol3D:"label-3d"},{readOnly:!0})],jo.prototype,"type",void 0),jo=Yx=l([E("esri.symbols.LabelSymbol3D")],jo);var Kx;const $H=de.ofType({base:null,key:"type",typeMap:{line:rn,path:yr}}),Sfe=de.ofType({base:null,key:"type",typeMap:{line:rn,path:yr}});let Ko=Kx=class extends Fn{constructor(t){super(t),this.symbolLayers=new $H,this.type="line-3d"}clone(){return new Kx({styleOrigin:V(this.styleOrigin),symbolLayers:V(this.symbolLayers),thumbnail:V(this.thumbnail)})}static fromSimpleLineSymbol(t){return new Kx({symbolLayers:new de([rn.fromSimpleLineSymbol(t)])})}};l([u({type:$H,json:{type:Sfe}})],Ko.prototype,"symbolLayers",void 0),l([Ie({LineSymbol3D:"line-3d"},{readOnly:!0})],Ko.prototype,"type",void 0),Ko=Kx=l([E("esri.symbols.LineSymbol3D")],Ko);var Qx;const TH=de.ofType({base:null,key:"type",typeMap:{fill:nn}});let hc=Qx=class extends Fn{constructor(t){super(t),this.type="mesh-3d",this.symbolLayers=new TH}get symbolLayers(){return this._get("symbolLayers")}set symbolLayers(t){to(t,this._get("symbolLayers"))}clone(){return new Qx({styleOrigin:V(this.styleOrigin),symbolLayers:V(this.symbolLayers),thumbnail:V(this.thumbnail)})}static fromSimpleFillSymbol(t){return new Qx({symbolLayers:new de([nn.fromSimpleFillSymbol(t)])})}};l([u({type:TH})],hc.prototype,"symbolLayers",null),l([Ie({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],hc.prototype,"type",void 0),hc=Qx=l([E("esri.symbols.MeshSymbol3D")],hc);let yv=class extends Mi{constructor(e){super(e),this.type="simple-line"}get width(){return this._get("width")??.75}set width(e){this._set("width",e)}hash(){return`${this.type}.${this.width}`}};l([Ie({esriSLS:"simple-line"},{readOnly:!0})],yv.prototype,"type",void 0),l([u({type:Number,cast:ht,json:{write:!0}})],yv.prototype,"width",null),yv=l([E("esri.symbols.LineSymbol")],yv);var fC;let ha=fC=class extends Z{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new fC({color:V(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};l([u({type:["begin","end","begin-end"],json:{write:!0}})],ha.prototype,"placement",void 0),l([Ie({"line-marker":"line-marker"},{readOnly:!0}),u({json:{origins:{"web-map":{write:!1}}}})],ha.prototype,"type",void 0),l([u({type:gH})],ha.prototype,"style",void 0),l([le("style")],ha.prototype,"writeStyle",null),l([u({type:Ue,value:null,json:{write:{allowNull:!0}}})],ha.prototype,"color",null),l([oe("color")],ha.prototype,"readColor",null),l([le("color")],ha.prototype,"writeColor",null),ha=fC=l([E("esri.symbols.LineSymbolMarker")],ha);const $fe=ha;var mC;const GE=new Ze({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ni=mC=class extends yv{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=ht(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=ht(s)),o}clone(){var t;return new mC({color:V(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};l([Ie({esriSLS:"simple-line"},{readOnly:!0})],Ni.prototype,"type",void 0),l([u({type:GE.apiValues,json:{read:GE.read,write:GE.write}})],Ni.prototype,"style",void 0),l([u({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Ni.prototype,"cap",void 0),l([u({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Ni.prototype,"join",void 0),l([u({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":$fe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ni.prototype,"marker",void 0),l([u({type:Number,json:{read:!1,write:!1}})],Ni.prototype,"miterLimit",void 0),Ni=mC=l([E("esri.symbols.SimpleLineSymbol")],Ni);let zm=class extends Mi{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};l([u({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ni}},json:{default:null,write:!0}})],zm.prototype,"outline",void 0),l([u({type:["simple-fill","picture-fill"],readOnly:!0})],zm.prototype,"type",void 0),zm=l([E("esri.symbols.FillSymbol")],zm);function Tfe(t,e,i){return e.imageData?bB({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):kH(e.url,i)}function kH(t,e){if(!qn(t)){const i=Ife(e);if(i)return mh(i,"images",t)}return Lh(t,e)}function kfe(t,e,i,r){if(kc(t)){const n=gh(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&vh(i.url,e,"url",r)}else vh(t,e,"url",r)}const IH={json:{read:{source:["imageData","url"],reader:Tfe},write:{writer(t,e,i,r){kfe(t,e,this.source,r)}}}},EH={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=kH(e.url,i)),r}}}};function Ife(t){var n,s;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(s=t.url)==null?void 0:s.path:null}var gC;let Mn=gC=class extends zm{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=ht(i)),r!=null&&(n.height=ht(r)),n}get width(){return this._get("width")??12}set width(t){this._set("width",t)}get height(){return this._get("height")??12}set height(t){this._set("height",t)}get xoffset(){return this._get("xoffset")??0}set xoffset(t){this._set("xoffset",t)}get yoffset(){return this._get("yoffset")??0}set yoffset(t){this._set("yoffset",t)}clone(){const t=new gC({color:V(this.color),height:this.height,outline:V(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",V(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([Ie({esriPFS:"picture-fill"},{readOnly:!0})],Mn.prototype,"type",void 0),l([u(IH)],Mn.prototype,"url",void 0),l([u({type:Number,json:{write:!0}})],Mn.prototype,"xscale",void 0),l([u({type:Number,json:{write:!0}})],Mn.prototype,"yscale",void 0),l([u({type:Number,cast:ht,json:{write:!0}})],Mn.prototype,"width",null),l([u({type:Number,cast:ht,json:{write:!0}})],Mn.prototype,"height",null),l([u({type:Number,cast:ht,json:{write:!0}})],Mn.prototype,"xoffset",null),l([u({type:Number,cast:ht,json:{write:!0}})],Mn.prototype,"yoffset",null),l([u(EH)],Mn.prototype,"source",void 0),Mn=gC=l([E("esri.symbols.PictureFillSymbol")],Mn);let Gl=class extends Mi{constructor(e){super(e),this.angle=0,this.type=null,this.size=9}get xoffset(){return this._get("xoffset")??0}set xoffset(e){this._set("xoffset",e)}get yoffset(){return this._get("yoffset")??0}set yoffset(e){this._set("yoffset",e)}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([u({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Gl.prototype,"angle",void 0),l([u({type:["simple-marker","picture-marker"],readOnly:!0})],Gl.prototype,"type",void 0),l([u({type:Number,cast:ht,json:{write:!0}})],Gl.prototype,"xoffset",null),l([u({type:Number,cast:ht,json:{write:!0}})],Gl.prototype,"yoffset",null),l([u({cast:t=>t==="auto"?t:on(ht(t)),json:{write:!0}})],Gl.prototype,"size",void 0),Gl=l([E("esri.symbols.MarkerSymbol")],Gl);var yC;let en=yC=class extends Gl{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=ht(e)),i!=null&&(r.height=ht(i)),r}get height(){return this._get("height")??12}set height(t){this._set("height",t)}readHeight(t,e){return e.size||t}get width(){return this._get("width")??12}set width(t){this._set("width",t)}readWidth(t,e){return e.size||t}clone(){const t=new yC({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",V(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([u({json:{write:!1}})],en.prototype,"color",void 0),l([Ie({esriPMS:"picture-marker"},{readOnly:!0})],en.prototype,"type",void 0),l([u(IH)],en.prototype,"url",void 0),l([u(EH)],en.prototype,"source",void 0),l([u({type:Number,cast:ht,json:{write:!0}})],en.prototype,"height",null),l([oe("height",["height","size"])],en.prototype,"readHeight",null),l([u({type:Number,cast:ht,json:{write:!0}})],en.prototype,"width",null),l([u({json:{write:!1}})],en.prototype,"size",void 0),en=yC=l([E("esri.symbols.PictureMarkerSymbol")],en);var Wd;const MH=de.ofType({base:null,key:"type",typeMap:{icon:ur,object:lr,text:Bi}});let an=Wd=class extends Fn{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new MH,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return _H(this)}hasVisibleVerticalOffset(){return $L(this)}clone(){return new Wd({verticalOffset:V(this.verticalOffset),callout:V(this.callout),styleOrigin:V(this.styleOrigin),symbolLayers:V(this.symbolLayers),thumbnail:V(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Wd({symbolLayers:new de([ur.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Wd({symbolLayers:new de([ur.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Wd(i!=null&&i.callout?{symbolLayers:new de([ur.fromCIMSymbol(t)]),callout:new Bl({size:.5,color:new Ue([0,0,0])}),verticalOffset:new wu({screenLength:40})}:{symbolLayers:new de([ur.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Wd({symbolLayers:new de([Bi.fromTextSymbol(t)])})}};l([u({type:wu,json:{write:!0}})],an.prototype,"verticalOffset",void 0),l([u(xH)],an.prototype,"callout",void 0),l([u({type:MH,json:{origins:{"web-scene":{write:!0}}}})],an.prototype,"symbolLayers",void 0),l([Ie({PointSymbol3D:"point-3d"},{readOnly:!0})],an.prototype,"type",void 0),an=Wd=l([E("esri.symbols.PointSymbol3D")],an);var vv;const AH=de.ofType({base:null,key:"type",typeMap:{extrude:Ul,fill:nn,icon:ur,line:rn,object:lr,text:Bi,water:ql}});let Qs=vv=class extends Fn{constructor(t){super(t),this.symbolLayers=new AH,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&_c(ie.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&_c(ie.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Wn(()=>this.symbolLayers,"after-add",({item:e})=>t(e),pr))}clone(){return new vv({styleOrigin:V(this.styleOrigin),symbolLayers:V(this.symbolLayers),thumbnail:V(this.thumbnail)})}static fromJSON(t){var i;const e=new vv;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new vv({symbolLayers:new de([nn.fromSimpleFillSymbol(t)])})}};l([u({type:AH,json:{write:!0}})],Qs.prototype,"symbolLayers",void 0),l([Ie({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Qs.prototype,"type",void 0),Qs=vv=l([E("esri.symbols.PolygonSymbol3D")],Qs);var vC;const HE=new Ze({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let vs=vC=class extends zm{constructor(...t){super(...t),this.color=new Ue([0,0,0,.25]),this.outline=new Ni,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new vC({color:V(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([u()],vs.prototype,"color",void 0),l([u()],vs.prototype,"outline",void 0),l([Ie({esriSFS:"simple-fill"},{readOnly:!0})],vs.prototype,"type",void 0),l([u({type:HE.apiValues,json:{read:HE.read,write:HE.write}})],vs.prototype,"style",void 0),vs=vC=l([E("esri.symbols.SimpleFillSymbol")],vs);var bC;const WE=new Ze({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let er=bC=class extends Gl{constructor(...t){super(...t),this.color=new Ue([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ni}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=ht(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new bC({angle:this.angle,color:V(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};l([u()],er.prototype,"color",void 0),l([le("color")],er.prototype,"writeColor",null),l([Ie({esriSMS:"simple-marker"},{readOnly:!0})],er.prototype,"type",void 0),l([u()],er.prototype,"size",void 0),l([u({type:WE.apiValues,json:{read:WE.read,write:WE.write}})],er.prototype,"style",void 0),l([u({type:String,json:{write:!0}})],er.prototype,"path",null),l([u({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ni}},json:{default:null,write:!0}})],er.prototype,"outline",void 0),er=bC=l([E("esri.symbols.SimpleMarkerSymbol")],er);var wC;let Et=wC=class extends Mi{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new qs,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.angle=0,this.width=null,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}get haloSize(){return this._get("haloSize")??null}set haloSize(t){this._set("haloSize",t)}get xoffset(){return this._get("xoffset")??0}set xoffset(t){this._set("xoffset",t)}get yoffset(){return this._get("yoffset")??0}set yoffset(t){this._set("yoffset",t)}get lineWidth(){return this._get("lineWidth")??192}set lineWidth(t){this._set("lineWidth",t)}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return ht(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new wC({angle:this.angle,backgroundColor:V(this.backgroundColor),borderLineColor:V(this.borderLineColor),borderLineSize:this.borderLineSize,color:V(this.color),font:this.font&&this.font.clone(),haloColor:V(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([u({type:Ue,json:{write:!0}})],Et.prototype,"backgroundColor",void 0),l([u({type:Ue,json:{write:!0}})],Et.prototype,"borderLineColor",void 0),l([u({type:Number,json:{write:!0},cast:ht})],Et.prototype,"borderLineSize",void 0),l([u({type:qs,json:{write:!0}})],Et.prototype,"font",void 0),l([u({...vH,json:{write:!0}})],Et.prototype,"horizontalAlignment",void 0),l([u({type:Boolean,json:{write:!0}})],Et.prototype,"kerning",void 0),l([u({type:Ue,json:{write:!0}})],Et.prototype,"haloColor",void 0),l([u({type:Number,cast:ht,json:{write:!0}})],Et.prototype,"haloSize",null),l([u({type:Boolean,json:{write:!0}})],Et.prototype,"rightToLeft",void 0),l([u({type:Boolean,json:{write:!0}})],Et.prototype,"rotated",void 0),l([u({type:String,json:{write:!0}})],Et.prototype,"text",void 0),l([Ie({esriTS:"text"},{readOnly:!0})],Et.prototype,"type",void 0),l([u({...bH,json:{write:!0}})],Et.prototype,"verticalAlignment",void 0),l([u({type:Number,cast:ht,json:{write:!0}})],Et.prototype,"xoffset",null),l([u({type:Number,cast:ht,json:{write:!0}})],Et.prototype,"yoffset",null),l([u({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Et.prototype,"angle",void 0),l([u({type:Number,json:{write:!0}})],Et.prototype,"width",void 0),l([u({type:Number})],Et.prototype,"lineWidth",null),l([le("lineWidth")],Et.prototype,"writeLineWidth",null),l([ti("lineWidth")],Et.prototype,"castLineWidth",null),l([u(yH)],Et.prototype,"lineHeight",void 0),l([le("lineHeight")],Et.prototype,"writeLineHeight",null),Et=wC=l([E("esri.symbols.TextSymbol")],Et);var _C;let vr=_C=class extends Mi{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:ce.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new _C({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){BU(ie.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if((e==null?void 0:e.type)!=="cim")throw new j("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await Q(()=>import("./webStyleSymbolUtils-DZP4PQg-.js"),__vite__mapDeps([28,29,30]),import.meta.url);Lt(t);const n=r(this,{portal:this.portal},t);n.catch(o=>{ie.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await n;return e!=null&&e.set(i,s.clone()),s}};l([u({json:{write:!1}})],vr.prototype,"color",void 0),l([u({type:String,json:{write:!0}})],vr.prototype,"styleName",void 0),l([u({type:ce,json:{write:!1}})],vr.prototype,"portal",void 0),l([u({type:String,json:{read:Uk,write:vh}})],vr.prototype,"styleUrl",void 0),l([u({type:yb,json:{read:!1}})],vr.prototype,"thumbnail",void 0),l([u({type:String,json:{write:!0}})],vr.prototype,"name",void 0),l([Ie({styleSymbolReference:"web-style"},{readOnly:!0})],vr.prototype,"type",void 0),l([u()],vr.prototype,"_fetchCacheKey",null),vr=_C=l([E("esri.symbols.WebStyleSymbol")],vr);function c6e(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function CH(t){switch(t==null?void 0:t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Au={base:Mi,key:"type",typeMap:{"simple-fill":vs,"picture-fill":Mn,"picture-marker":en,"simple-line":Ni,"simple-marker":er,text:Et,"label-3d":jo,"line-3d":Ko,"mesh-3d":hc,"point-3d":an,"polygon-3d":Qs,"web-style":vr,cim:Nr},errorContext:"symbol"},u6e={base:Mi,key:"type",typeMap:{"picture-marker":en,"simple-marker":er,"point-3d":an,cim:Nr},errorContext:"symbol"},d6e={base:Mi,key:"type",typeMap:{"simple-line":Ni,"line-3d":Ko,cim:Nr},errorContext:"symbol"},p6e={base:Mi,key:"type",typeMap:{"simple-fill":vs,"picture-fill":Mn,"polygon-3d":Qs,cim:Nr},errorContext:"symbol"},Efe={base:Mi,key:"type",typeMap:{"picture-marker":en,"simple-marker":er,text:Et,"web-style":vr,cim:Nr},errorContext:"symbol"},Mfe=Ny({types:Au}),OH={base:Mi,key:"type",typeMap:{"simple-fill":vs,"picture-fill":Mn,"picture-marker":en,"simple-line":Ni,"simple-marker":er,text:Et,"line-3d":Ko,"mesh-3d":hc,"point-3d":an,"polygon-3d":Qs,"web-style":vr,cim:Nr},errorContext:"symbol"},Afe={base:Mi,key:"type",typeMap:{text:Et,"label-3d":jo},errorContext:"symbol"},az={base:Mi,key:"type",typeMap:{"line-3d":Ko,"mesh-3d":hc,"point-3d":an,"polygon-3d":Qs,"web-style":vr,cim:Nr},errorContext:"symbol"},Cfe={base:Mi,key:"type",typeMap:{"label-3d":jo},errorContext:"symbol"},PH=Ka(Au);var xC;function Ofe(t){if(!t)return null;const e={};for(const i in t){const r=ta(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function Pfe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var Eg;let qt=(Eg=class extends Pe(Z){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:vx(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Bie(ie.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new xC({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=xhe(this.origin);if(i)return i.popupTemplate??(e?i.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const n of[r,this.sourceLayer,this.layer])if(n&&typeof n=="object"){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(e&&"defaultPopupTemplate"in n&&n.defaultPopupTemplate!=null)return n.defaultPopupTemplate}return null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=QD(this.origin);if(e)return XD(this,e);const i=this.sourceLayer??this.layer;return i?XD(this,i):null}getGlobalId(){const e=QD(this.origin);if(e!=null&&e.globalIdField)return this.getAttribute(e.globalIdField);const i=this.sourceLayer??this.layer;return i&&"globalIdField"in i&&i.globalIdField?this.getAttribute(i.globalIdField):null}toJSON(){var e;return{aggregateGeometries:Pfe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Yb(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if((i==null?void 0:i.type)==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(s.action=n),e==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([gn(()=>{var e,i;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(i=this.geometry.transform)==null?void 0:i.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),gn(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var i;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(i=e.transform)==null?void 0:i.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,i)=>e===i,sync:!0})])}},xC=Eg,Eg);l([u({value:null,json:{read:Ofe}})],qt.prototype,"aggregateGeometries",null),l([u({value:null})],qt.prototype,"attributes",null),l([u({value:null,types:Dh,json:{read:ta}})],qt.prototype,"geometry",null),l([u({type:Boolean})],qt.prototype,"isAggregate",void 0),l([u({clonable:!1})],qt.prototype,"layer",void 0),l([u({clonable:"reference"})],qt.prototype,"origin",void 0),l([u({type:Rh,value:null})],qt.prototype,"popupTemplate",null),l([u({clonable:"reference"})],qt.prototype,"sourceLayer",void 0),l([u({value:null,types:Au})],qt.prototype,"symbol",null),l([u({clonable:!1,json:{read:!1,write:!1}})],qt.prototype,"_version",void 0),l([u({type:Boolean,value:!0})],qt.prototype,"visible",null),qt=xC=l([E("esri.Graphic")],qt);let Rf=class extends de{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(w9(()=>this._refresh(),pr))}destroy(){this.getCollections=null}_refresh(){var r;const e=(r=this.getCollections)==null?void 0:r.call(this);if(e==null)return void this.removeAll();let i=0;for(const n of e)n!=null&&(i=this._processCollection(i,n));this.splice(i)}_createNewInstance(e){return new de(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};l([Me()],Rf.prototype,"getCollections",void 0),l([Me()],Rf.prototype,"getChildrenFunction",void 0),l([Me()],Rf.prototype,"itemFilterFunction",void 0),Rf=l([wi("esri.core.CollectionFlattener")],Rf);const Th=Rf;let Rfe=class RH{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array($M),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new RH,r=this._originStores[0];r&&r.forEach((n,s)=>{i.set(s,V(n),0)});for(let n=2;n<$M;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{e&&e.has(a)||i.set(a,V(o),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=7){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=7){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const LH=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=mn(this),s=n.store,o=new Rfe;n.store=o,V9(n,s,o)}read(r,n){q9(this,r,n)}getAtOrigin(r,n){const s=ZE(this),o=pc(n);if(typeof r=="string")return s.get(r,o);const a={};return r.forEach(c=>{a[c]=s.get(c,o)}),a}originOf(r){return Hb(this.originIdOf(r))}originIdOf(r){return ZE(this).originOf(r)}revert(r,n){const s=ZE(this),o=pc(n),a=mn(this);let c;c=typeof r=="string"?r==="*"?s.keys(o):[r]:r,c.forEach(d=>{a.invalidate(d),s.revert(d,o),a.commit(d)})}};return i=l([wi("esri.core.ReadOnlyMultiOriginJSONSupport")],i),i};function ZE(t){return mn(t).store}LH(Se);const Lfe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r)}clear(r,n="user"){mn(this).clearOrigin(r,pc(n))}write(r,n){return W9(this,r=r||{},n),r}setAtOrigin(r,n,s){mn(this).setAtOrigin(r,n,pc(s))}removeOrigin(r){const n=lz(this),s=pc(r),o=n.keys(s);for(const a of o)n.originOf(a)===s&&n.set(a,n.get(a,s),7)}updateOrigin(r,n){const s=lz(this),o=pc(n),a=un(this,r);for(let c=o+1;c<$M;++c)s.delete(r,c);s.set(r,a,o)}toJSON(r){return this.write({},r)}};return i=l([E("esri.core.WriteableMultiOriginJSONMixin")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function lz(t){return mn(t).store}const l1=t=>{const e=Lfe(LH(t));let i=class extends e{};return i=l([wi("esri.core.MultiOriginJSONSupport")],i),i},FH=l1(Se);/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var z$=function(){return z$=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},z$.apply(this,arguments)},SC={exports:{}},_i={},$C={exports:{}},jh={};function NH(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function Ffe(t,e,i){}function Nfe(t,e,i){}var Dfe=/javascript\s*\:/img;function zfe(t,e){return Dfe.test(e)?"":e}jh.whiteList=NH();jh.getDefaultWhiteList=NH;jh.onAttr=Ffe;jh.onIgnoreAttr=Nfe;jh.safeAttrValue=zfe;var jfe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},L0=jfe;function Vfe(t,e){t=L0.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,o="";function a(){if(!r){var h=L0.trim(t.slice(n,s)),f=h.indexOf(":");if(f!==-1){var m=L0.trim(h.slice(0,f)),v=L0.trim(h.slice(f+1));if(m){var w=e(n,o.length,m,v,h);w&&(o+=w+"; ")}}}n=s+1}for(;s<i;s++){var c=t[s];if(c==="/"&&t[s+1]==="*"){var d=t.indexOf("*/",s+2);if(d===-1)break;s=d+1,n=s+1,r=!1}else c==="("?r=!0:c===")"?r=!1:c===";"?r||a():c===`
`&&a()}return L0.trim(o)}var Ufe=Vfe,l_=jh,qfe=Ufe;function cz(t){return t==null}function Bfe(t){var e={};for(var i in t)e[i]=t[i];return e}function DH(t){t=Bfe(t||{}),t.whiteList=t.whiteList||l_.whiteList,t.onAttr=t.onAttr||l_.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||l_.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||l_.safeAttrValue,this.options=t}DH.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=qfe(t,function(c,d,h,f,m){var v=r[h],w=!1;if(v===!0?w=v:typeof v=="function"?w=v(f):v instanceof RegExp&&(w=v.test(f)),w!==!0&&(w=!1),f=o(h,f),!!f){var x={position:d,sourcePosition:c,source:m,isWhite:w};if(w){var $=n(h,f,x);return cz($)?h+":"+f:$}else{var $=s(h,f,x);if(!cz($))return $}}});return a};var Gfe=DH;(function(t,e){var i=jh,r=Gfe;function n(o,a){var c=new r(a);return c.process(o)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})($C,$C.exports);var TL=$C.exports,kL={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},Hfe=TL.FilterCSS,Wfe=TL.getDefaultWhiteList,j$=kL;function zH(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var jH=new Hfe;function Zfe(t,e,i){}function Jfe(t,e,i){}function Yfe(t,e,i){}function Kfe(t,e,i){}function VH(t){return t.replace(Xfe,"&lt;").replace(eme,"&gt;")}function Qfe(t,e,i,r){if(i=WH(i),e==="href"||e==="src"){if(i=j$.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(c_.lastIndex=0,c_.test(i))return""}else if(e==="style"){if(uz.lastIndex=0,uz.test(i)||(dz.lastIndex=0,dz.test(i)&&(c_.lastIndex=0,c_.test(i))))return"";r!==!1&&(r=r||jH,i=r.process(i))}return i=ZH(i),i}var Xfe=/</g,eme=/>/g,tme=/"/g,ime=/&quot;/g,rme=/&#([a-zA-Z0-9]*);?/gim,nme=/&colon;?/gim,sme=/&newline;?/gim,c_=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,uz=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,dz=/u\s*r\s*l\s*\(.*/gi;function UH(t){return t.replace(tme,"&quot;")}function qH(t){return t.replace(ime,'"')}function BH(t){return t.replace(rme,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function GH(t){return t.replace(nme,":").replace(sme," ")}function HH(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return j$.trim(e)}function WH(t){return t=qH(t),t=BH(t),t=GH(t),t=HH(t),t}function ZH(t){return t=UH(t),t=VH(t),t}function ome(){return""}function ame(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:j$.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,c){if(r(o))if(c.isClosing){var d="[/removed]",h=c.position+d.length;return n.push([s!==!1?s:c.position,h]),s=!1,d}else return s||(s=c.position),"[removed]";else return e(o,a,c)},remove:function(o){var a="",c=0;return j$.forEach(n,function(d){a+=o.slice(c,d[0]),c=d[1]}),a+=o.slice(c),a}}}function lme(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function cme(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}_i.whiteList=zH();_i.getDefaultWhiteList=zH;_i.onTag=Zfe;_i.onIgnoreTag=Jfe;_i.onTagAttr=Yfe;_i.onIgnoreTagAttr=Kfe;_i.safeAttrValue=Qfe;_i.escapeHtml=VH;_i.escapeQuote=UH;_i.unescapeQuote=qH;_i.escapeHtmlEntities=BH;_i.escapeDangerHtml5Entities=GH;_i.clearNonPrintableCharacter=HH;_i.friendlyAttrValue=WH;_i.escapeAttrValue=ZH;_i.onIgnoreTagStripAll=ome;_i.StripTagBody=ame;_i.stripCommentTag=lme;_i.stripBlankChar=cme;_i.cssFilter=jH;_i.getDefaultCSSWhiteList=Wfe;var iI={},pu=kL;function ume(t){var e=pu.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=pu.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function dme(t){return t.slice(0,2)==="</"}function pme(t,e,i){var r="",n=0,s=!1,o=!1,a=0,c=t.length,d="",h="";e:for(a=0;a<c;a++){var f=t.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){r+=i(t.slice(n,a)),s=a,n=a;continue}if(f===">"){r+=i(t.slice(n,s)),h=t.slice(s,a+1),d=ume(h),r+=e(s,r.length,d,h,dme(h)),n=a+1,s=!1;continue}if(f==='"'||f==="'")for(var m=1,v=t.charAt(a-m);v.trim()===""||v==="=";){if(v==="="){o=f;continue e}v=t.charAt(a-++m)}}else if(f===o){o=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var hme=/[^a-zA-Z0-9\\_:.-]/gim;function fme(t,e){var i=0,r=0,n=[],s=!1,o=t.length;function a(m,v){if(m=pu.trim(m),m=m.replace(hme,"").toLowerCase(),!(m.length<1)){var w=e(m,v||"");w&&n.push(w)}}for(var c=0;c<o;c++){var d=t.charAt(c),h,f;if(s===!1&&d==="="){s=t.slice(i,c),i=c+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:gme(t,c+1);continue}if(s!==!1&&c===r){if(f=t.indexOf(d,c+1),f===-1)break;h=pu.trim(t.slice(r+1,f)),a(s,h),s=!1,c=f,i=c+1;continue}if(/\s|\n|\t/.test(d))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(f=mme(t,c),f===-1){h=pu.trim(t.slice(i,c)),a(h),s=!1,i=c+1;continue}else{c=f-1;continue}else if(f=yme(t,c-1),f===-1){h=pu.trim(t.slice(i,c)),h=pz(h),a(s,h),s=!1,i=c+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,pz(pu.trim(t.slice(i))))),pu.trim(n.join(" "))}function mme(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function gme(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function yme(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function vme(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function pz(t){return vme(t)?t.substr(1,t.length-2):t}iI.parseTag=pme;iI.parseAttr=fme;var bme=TL.FilterCSS,No=_i,JH=iI,wme=JH.parseTag,_me=JH.parseAttr,Xx=kL;function u_(t){return t==null}function xme(t){var e=Xx.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Xx.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=Xx.trim(t.slice(0,-1))),{html:t,closing:i}}function Sme(t){var e={};for(var i in t)e[i]=t[i];return e}function $me(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function YH(t){t=Sme(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=No.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=$me(t.whiteList||t.allowList):t.whiteList=No.whiteList,t.onTag=t.onTag||No.onTag,t.onTagAttr=t.onTagAttr||No.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||No.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||No.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||No.safeAttrValue,t.escapeHtml=t.escapeHtml||No.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new bme(t.css))}YH.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,c=i.safeAttrValue,d=i.escapeHtml,h=e.cssFilter;i.stripBlankChar&&(t=No.stripBlankChar(t)),i.allowCommentTag||(t=No.stripCommentTag(t));var f=!1;i.stripIgnoreTagBody&&(f=No.StripTagBody(i.stripIgnoreTagBody,s),s=f.onIgnoreTag);var m=wme(t,function(v,w,x,$,T){var C={sourcePosition:v,position:w,isClosing:T,isWhite:Object.prototype.hasOwnProperty.call(r,x)},P=n(x,$,C);if(!u_(P))return P;if(C.isWhite){if(C.isClosing)return"</"+x+">";var L=xme($),D=r[x],q=_me(L.html,function(F,ee){var ae=Xx.indexOf(D,F)!==-1,ne=o(x,F,ee,ae);return u_(ne)?ae?(ee=c(x,F,ee,h),ee?F+'="'+ee+'"':F):(ne=a(x,F,ee,ae),u_(ne)?void 0:ne):ne});return $="<"+x,q&&($+=" "+q),L.closing&&($+=" /"),$+=">",$}else return P=s(x,$,C),u_(P)?d($):P},d);return f&&(m=f.remove(m)),m};var Tme=YH;(function(t,e){var i=_i,r=iI,n=Tme;function s(a,c){var d=new n(c);return d.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,function(){for(var a in i)e[a]=i[a];for(var c in r)e[c]=r[c]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(SC,SC.exports);var nf=SC.exports,kme=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},KH=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=z$(z$({},nf.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,c){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):nf.safeAttrValue(s,o,a,c)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new nf.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),c=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||c?nf.escapeAttrValue(e):!s&&!n?nf.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):nf.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,c){var d=r.validate(c,i);return d.isValid?a.concat([c]):(n=!0,a.concat([d.sanitized]))},[]);else if(kme(e)){var o=Object.keys(e);s=o.reduce(function(a,c){var d=e[c],h=r.validate(d,i);return h.isValid?a[c]=d:(n=!0,a[c]=h.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const Ime=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Eme=Ime.reduce((t,e)=>(t[e]=[],t),{}),Mme=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],IL=new KH({whiteList:Eme,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(Mme.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),Ame=new KH({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),QH=96;function hz(t,e){const i=t.extent,r=t.width,n=so(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*eG*QH:0}function f6e(t,e){return t/(so(e)*eG*QH)}function m6e(t,e,i){return Cme(t,e)&&Ome(t,i)}function Cme(t,e){return e===0||Ss(t,e)||t<e}function Ome(t,e){return e===0||Ss(t,e)||t>e}function Pme(t,e){return Ss(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}async function Rme(t){var r;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await Q(async()=>{const{fromItem:n}=await import("./portalLayers-BV6vp3dY.js");return{fromItem:n}},__vite__mapDeps([31,32,33,34,35]),import.meta.url);try{return await i(e)}catch(n){const s=e==null?void 0:e.portalItem,o=(s==null?void 0:s.id)||"unset",a=((r=s==null?void 0:s.portal)==null?void 0:r.url)||Qe.portalUrl;throw ie.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}const fz={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function JE(t,e,i,r=ro){const n=new Hn(AR(r)),s=Te.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":eW(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function g6e(t,e,i="milliseconds"){const r=t.getTime(),n=XH(e,i,"milliseconds");return new Date(r+n)}function mz(t,e,i=ro){const r=new Hn(AR(i)),n=Te.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:a}=o,c=a-a%(e==="decades"?10:100);return o.set({year:c}).toJSDate()}const s=eW(e);return n.startOf(s).toJSDate()}function XH(t,e,i){return t===0?0:t*fz[e]/fz[i]}function y6e(t,e){return t&&e?t.intersection(e):t||e}function eW(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Fs,Mg;let xt=(Mg=class extends Z{static get allTime(){return gz}static get empty(){return Lme}static fromArray(e){return new Fs({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Fs.allTime)}get isEmpty(){return this.equals(Fs.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=(e==null?void 0:e.getTime())??null}clone(){return new Fs({end:this.end,start:this.start})}equals(e){var o,a,c,d;if(!e)return!1;const i=((o=this.start)==null?void 0:o.getTime())??this.start,r=((a=this.end)==null?void 0:a.getTime())??this.end,n=((c=e.start)==null?void 0:c.getTime())??e.start,s=((d=e.end)==null?void 0:d.getTime())??e.end;return i===n&&r===s}expandTo(e,i=ro){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=mz(r,e,i));let n=this.end;if(n){const s=mz(n,e,i);n=n.getTime()===s.getTime()?s:JE(s,1,e,i)}return new Fs({start:r,end:n})}intersection(e){var c,d,h,f;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Fs.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=((c=this.start)==null?void 0:c.getTime())??-1/0,r=((d=this.end)==null?void 0:d.getTime())??1/0,n=((h=e.start)==null?void 0:h.getTime())??-1/0,s=((f=e.end)==null?void 0:f.getTime())??1/0;let o,a;return n>=i&&n<=r?o=n:i>=n&&i<=s&&(o=i),r>=n&&r<=s?a=r:s>=i&&s<=r&&(a=s),o==null||a==null||isNaN(o)||isNaN(a)?Fs.empty:new Fs({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,i,r=ro){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Fs,{start:s,end:o}=this;return s!=null&&(n.start=JE(s,e,i,r)),o!=null&&(n.end=JE(o,e,i,r)),n}toArray(){var e,i;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((i=this.end)==null?void 0:i.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return gz.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Fs({start:i,end:r})}},Fs=Mg,Mg);l([u({type:Date,json:{write:{allowNull:!0}}})],xt.prototype,"end",void 0),l([oe("end")],xt.prototype,"readEnd",null),l([le("end")],xt.prototype,"writeEnd",null),l([u({readOnly:!0,json:{read:!1}})],xt.prototype,"isAllTime",null),l([u({readOnly:!0,json:{read:!1}})],xt.prototype,"isEmpty",null),l([u({type:Date,json:{write:{allowNull:!0}}})],xt.prototype,"start",void 0),l([oe("start")],xt.prototype,"readStart",null),l([le("start")],xt.prototype,"writeStart",null),xt=Fs=l([E("esri.time.TimeExtent")],xt);const gz=new xt,Lme=new xt({start:void 0,end:void 0});let Fme=0,Qt=class extends Ik(cd(zh)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ke(-180,-90,180,90,me.WGS84),this.id=Date.now().toString(16)+"-layer-"+Fme++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=me.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await Q(async()=>{const{fromUrl:r}=await import("./arcgisLayers-gz_PD-bp.js");return{fromUrl:r}},__vite__mapDeps([36,32,33,35]),import.meta.url)).fromUrl(i)}static fromPortalItem(e){return Rme(e)}initialize(){this.when().catch(e=>{hr(e)||ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){var i;const{parent:e}=this;e&&(this.parent=null,(i=e.removeChildLayer)==null||i.call(e,this))}get effectiveVisible(){var e;return this.visible&&(((e=this.parent)==null?void 0:e.effectiveVisible)??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){var i;const{parent:e}=this;e&&((i=e.removeChildLayer)==null||i.call(e,this),this.parent=null)}get parsedUrl(){return zi(this.url)}createLayerView(e,i){return Promise.reject(new j("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Ft(e,{query:{f:"json"},responseType:"json"})).data;throw new j("layer:no-attribution-data","Layer does not have attribution data")}};l([u({type:String})],Qt.prototype,"attributionDataUrl",void 0),l([u({readOnly:!0})],Qt.prototype,"effectiveVisible",null),l([u({type:Ke})],Qt.prototype,"fullExtent",void 0),l([u({readOnly:!0})],Qt.prototype,"hasAttributionData",null),l([u({type:String,clonable:!1})],Qt.prototype,"id",void 0),l([u({type:Boolean,nonNullable:!0})],Qt.prototype,"legendEnabled",void 0),l([u({type:["show","hide","hide-children"]})],Qt.prototype,"listMode",void 0),l([u({type:Number,range:{min:0,max:1},nonNullable:!0})],Qt.prototype,"opacity",void 0),l([u({clonable:!1})],Qt.prototype,"parent",void 0),l([u({readOnly:!0})],Qt.prototype,"parsedUrl",null),l([u({type:Boolean,readOnly:!0})],Qt.prototype,"persistenceEnabled",void 0),l([u({type:Boolean})],Qt.prototype,"popupEnabled",void 0),l([u({type:Boolean})],Qt.prototype,"attributionVisible",void 0),l([u({type:me})],Qt.prototype,"spatialReference",void 0),l([u({type:String})],Qt.prototype,"title",void 0),l([u({readOnly:!0,json:{read:!1}})],Qt.prototype,"type",void 0),l([u()],Qt.prototype,"url",void 0),l([u({type:xt})],Qt.prototype,"visibilityTimeExtent",void 0),l([u({type:Boolean,nonNullable:!0})],Qt.prototype,"visible",void 0),Qt=l([E("esri.layers.Layer")],Qt);const jt=(t=>t)(["operational-layers","basemap-base-layers","basemap-ground-layers","ground"]);function rI(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Nme(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Dme(t,e,i,r,n,s,o,a,c,d,h,f,m,v,w,x){const $=new Float32Array(16);return $[0]=t,$[1]=e,$[2]=i,$[3]=r,$[4]=n,$[5]=s,$[6]=o,$[7]=a,$[8]=c,$[9]=d,$[10]=h,$[11]=f,$[12]=m,$[13]=v,$[14]=w,$[15]=x,$}const zme=rI();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:zme,clone:Nme,create:rI,fromValues:Dme},Symbol.toStringTag,{value:"Module"}));function tW(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function pd(t,e,i,r,n,s,o,a,c,d,h,f,m,v,w,x,$){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=c,t[8]=d,t[9]=h,t[10]=f,t[11]=m,t[12]=v,t[13]=w,t[14]=x,t[15]=$,t}function nI(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hd(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function jme(t,e){return iW(t,e)||nI(t),t}function iW(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],h=e[8],f=e[9],m=e[10],v=e[11],w=e[12],x=e[13],$=e[14],T=e[15],C=i*a-r*o,P=i*c-n*o,L=i*d-s*o,D=r*c-n*a,q=r*d-s*a,F=n*d-s*c,ee=h*x-f*w,ae=h*$-m*w,ne=h*T-v*w,ue=f*$-m*x,X=f*T-v*x,J=m*T-v*$;let H=C*J-P*X+L*ue+D*ne-q*ae+F*ee;return H?(H=1/H,t[0]=(a*J-c*X+d*ue)*H,t[1]=(n*X-r*J-s*ue)*H,t[2]=(x*F-$*q+T*D)*H,t[3]=(m*q-f*F-v*D)*H,t[4]=(c*ne-o*J-d*ae)*H,t[5]=(i*J-n*ne+s*ae)*H,t[6]=($*L-w*F-T*P)*H,t[7]=(h*F-m*L+v*P)*H,t[8]=(o*X-a*ne+d*ee)*H,t[9]=(r*ne-i*X-s*ee)*H,t[10]=(w*q-x*L+T*C)*H,t[11]=(f*L-h*q-v*C)*H,t[12]=(a*ae-o*ue-c*ee)*H,t[13]=(i*ue-r*ae+n*ee)*H,t[14]=(x*P-w*D-$*C)*H,t[15]=(h*D-f*P+m*C)*H,t):null}function Vme(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],h=e[8],f=e[9],m=e[10],v=e[11],w=e[12],x=e[13],$=e[14],T=e[15];return t[0]=a*(m*T-v*$)-f*(c*T-d*$)+x*(c*v-d*m),t[1]=-(r*(m*T-v*$)-f*(n*T-s*$)+x*(n*v-s*m)),t[2]=r*(c*T-d*$)-a*(n*T-s*$)+x*(n*d-s*c),t[3]=-(r*(c*v-d*m)-a*(n*v-s*m)+f*(n*d-s*c)),t[4]=-(o*(m*T-v*$)-h*(c*T-d*$)+w*(c*v-d*m)),t[5]=i*(m*T-v*$)-h*(n*T-s*$)+w*(n*v-s*m),t[6]=-(i*(c*T-d*$)-o*(n*T-s*$)+w*(n*d-s*c)),t[7]=i*(c*v-d*m)-o*(n*v-s*m)+h*(n*d-s*c),t[8]=o*(f*T-v*x)-h*(a*T-d*x)+w*(a*v-d*f),t[9]=-(i*(f*T-v*x)-h*(r*T-s*x)+w*(r*v-s*f)),t[10]=i*(a*T-d*x)-o*(r*T-s*x)+w*(r*d-s*a),t[11]=-(i*(a*v-d*f)-o*(r*v-s*f)+h*(r*d-s*a)),t[12]=-(o*(f*$-m*x)-h*(a*$-c*x)+w*(a*m-c*f)),t[13]=i*(f*$-m*x)-h*(r*$-n*x)+w*(r*m-n*f),t[14]=-(i*(a*$-c*x)-o*(r*$-n*x)+w*(r*c-n*a)),t[15]=i*(a*m-c*f)-o*(r*m-n*f)+h*(r*c-n*a),t}function Ume(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],c=t[7],d=t[8],h=t[9],f=t[10],m=t[11],v=t[12],w=t[13],x=t[14],$=t[15];return(e*o-i*s)*(f*$-m*x)-(e*a-r*s)*(h*$-m*w)+(e*c-n*s)*(h*x-f*w)+(i*a-r*o)*(d*$-m*v)-(i*c-n*o)*(d*x-f*v)+(r*c-n*a)*(d*w-h*v)}function rW(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=e[9],v=e[10],w=e[11],x=e[12],$=e[13],T=e[14],C=e[15];let P=i[0],L=i[1],D=i[2],q=i[3];return t[0]=P*r+L*a+D*f+q*x,t[1]=P*n+L*c+D*m+q*$,t[2]=P*s+L*d+D*v+q*T,t[3]=P*o+L*h+D*w+q*C,P=i[4],L=i[5],D=i[6],q=i[7],t[4]=P*r+L*a+D*f+q*x,t[5]=P*n+L*c+D*m+q*$,t[6]=P*s+L*d+D*v+q*T,t[7]=P*o+L*h+D*w+q*C,P=i[8],L=i[9],D=i[10],q=i[11],t[8]=P*r+L*a+D*f+q*x,t[9]=P*n+L*c+D*m+q*$,t[10]=P*s+L*d+D*v+q*T,t[11]=P*o+L*h+D*w+q*C,P=i[12],L=i[13],D=i[14],q=i[15],t[12]=P*r+L*a+D*f+q*x,t[13]=P*n+L*c+D*m+q*$,t[14]=P*s+L*d+D*v+q*T,t[15]=P*o+L*h+D*w+q*C,t}function qme(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const o=e[0],a=e[1],c=e[2],d=e[3],h=e[4],f=e[5],m=e[6],v=e[7],w=e[8],x=e[9],$=e[10],T=e[11];t[0]=o,t[1]=a,t[2]=c,t[3]=d,t[4]=h,t[5]=f,t[6]=m,t[7]=v,t[8]=w,t[9]=x,t[10]=$,t[11]=T,t[12]=o*r+h*n+w*s+e[12],t[13]=a*r+f*n+x*s+e[13],t[14]=c*r+m*n+$*s+e[14],t[15]=d*r+v*n+T*s+e[15]}return t}function Bme(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Gme(t,e,i,r){let n=r[0],s=r[1],o=r[2],a=Math.sqrt(n*n+s*s+o*o);if(a<=fn())return void tW(t,e);a=1/a,n*=a,s*=a,o*=a;const c=Math.sin(i),d=Math.cos(i),h=1-d,f=e[0],m=e[1],v=e[2],w=e[3],x=e[4],$=e[5],T=e[6],C=e[7],P=e[8],L=e[9],D=e[10],q=e[11],F=n*n*h+d,ee=s*n*h+o*c,ae=o*n*h-s*c,ne=n*s*h-o*c,ue=s*s*h+d,X=o*s*h+n*c,J=n*o*h+s*c,H=s*o*h-n*c,ge=o*o*h+d;t[0]=f*F+x*ee+P*ae,t[1]=m*F+$*ee+L*ae,t[2]=v*F+T*ee+D*ae,t[3]=w*F+C*ee+q*ae,t[4]=f*ne+x*ue+P*X,t[5]=m*ne+$*ue+L*X,t[6]=v*ne+T*ue+D*X,t[7]=w*ne+C*ue+q*X,t[8]=f*J+x*H+P*ge,t[9]=m*J+$*H+L*ge,t[10]=v*J+T*H+D*ge,t[11]=w*J+C*H+q*ge,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function Hme(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],c=e[7],d=e[8],h=e[9],f=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+d*r,t[5]=o*n+h*r,t[6]=a*n+f*r,t[7]=c*n+m*r,t[8]=d*n-s*r,t[9]=h*n-o*r,t[10]=f*n-a*r,t[11]=m*n-c*r,t}function Wme(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],c=e[3],d=e[8],h=e[9],f=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-d*r,t[1]=o*n-h*r,t[2]=a*n-f*r,t[3]=c*n-m*r,t[8]=s*r+d*n,t[9]=o*r+h*n,t[10]=a*r+f*n,t[11]=c*r+m*n,t}function Zme(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],c=e[3],d=e[4],h=e[5],f=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+d*r,t[1]=o*n+h*r,t[2]=a*n+f*r,t[3]=c*n+m*r,t[4]=d*n-s*r,t[5]=h*n-o*r,t[6]=f*n-a*r,t[7]=m*n-c*r,t}function Jme(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Yme(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Kme(t,e,i){if(e===0)return nI(t);let r=i[0],n=i[1],s=i[2],o=Math.sqrt(r*r+n*n+s*s);if(o<=fn())return null;o=1/o,r*=o,n*=o,s*=o;const a=Math.sin(e),c=Math.cos(e),d=1-c;return t[0]=r*r*d+c,t[1]=n*r*d+s*a,t[2]=s*r*d-n*a,t[3]=0,t[4]=r*n*d-s*a,t[5]=n*n*d+c,t[6]=s*n*d+r*a,t[7]=0,t[8]=r*s*d+n*a,t[9]=n*s*d-r*a,t[10]=s*s*d+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qme(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xme(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ege(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nW(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,c=n+n,d=s+s,h=r*a,f=r*c,m=r*d,v=n*c,w=n*d,x=s*d,$=o*a,T=o*c,C=o*d;return t[0]=1-(v+x),t[1]=f+C,t[2]=m-T,t[3]=0,t[4]=f-C,t[5]=1-(h+x),t[6]=w+$,t[7]=0,t[8]=m+T,t[9]=w-$,t[10]=1-(h+v),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function tge(t,e){const i=ige,r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],c=e[5],d=e[6],h=e[7],f=r*r+n*n+s*s+o*o;return f>0?(i[0]=2*(a*o+h*r+c*s-d*n)/f,i[1]=2*(c*o+h*n+d*r-a*s)/f,i[2]=2*(d*o+h*s+a*n-c*r)/f):(i[0]=2*(a*o+h*r+c*s-d*n),i[1]=2*(c*o+h*n+d*r-a*s),i[2]=2*(d*o+h*s+a*n-c*r)),nW(t,e,i),t}const ige=dd();function rge(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function nge(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],c=e[8],d=e[9],h=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(c*c+d*d+h*h),t}function sge(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function oge(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3],c=n+n,d=s+s,h=o+o,f=n*c,m=n*d,v=n*h,w=s*d,x=s*h,$=o*h,T=a*c,C=a*d,P=a*h,L=r[0],D=r[1],q=r[2];return t[0]=(1-(w+$))*L,t[1]=(m+P)*L,t[2]=(v-C)*L,t[3]=0,t[4]=(m-P)*D,t[5]=(1-(f+$))*D,t[6]=(x+T)*D,t[7]=0,t[8]=(v+C)*q,t[9]=(x-T)*q,t[10]=(1-(f+w))*q,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function age(t,e,i,r,n){const s=e[0],o=e[1],a=e[2],c=e[3],d=s+s,h=o+o,f=a+a,m=s*d,v=s*h,w=s*f,x=o*h,$=o*f,T=a*f,C=c*d,P=c*h,L=c*f,D=r[0],q=r[1],F=r[2],ee=n[0],ae=n[1],ne=n[2],ue=(1-(x+T))*D,X=(v+L)*D,J=(w-P)*D,H=(v-L)*q,ge=(1-(m+T))*q,be=($+C)*q,Ee=(w+P)*F,we=($-C)*F,Oe=(1-(m+x))*F;return t[0]=ue,t[1]=X,t[2]=J,t[3]=0,t[4]=H,t[5]=ge,t[6]=be,t[7]=0,t[8]=Ee,t[9]=we,t[10]=Oe,t[11]=0,t[12]=i[0]+ee-(ue*ee+H*ae+Ee*ne),t[13]=i[1]+ae-(X*ee+ge*ae+we*ne),t[14]=i[2]+ne-(J*ee+be*ae+Oe*ne),t[15]=1,t}function lge(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,c=n+n,d=i*o,h=r*o,f=r*a,m=n*o,v=n*a,w=n*c,x=s*o,$=s*a,T=s*c;return t[0]=1-f-w,t[1]=h+T,t[2]=m-$,t[3]=0,t[4]=h-T,t[5]=1-d-w,t[6]=v+x,t[7]=0,t[8]=m+$,t[9]=v-x,t[10]=1-d-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cge(t,e,i,r,n,s,o){const a=1/(i-e),c=1/(n-r),d=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*c,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*c,t[10]=(o+s)*d,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*d,t[15]=0,t}function uge(t,e,i,r,n){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(r-n),t[10]=(n+r)*o,t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t}function dge(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+a),d=2/(n+s);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=-(o-a)*c*.5,t[9]=(n-s)*d*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function pge(t,e,i,r,n,s,o){const a=1/(e-i),c=1/(r-n),d=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*c,t[14]=(o+s)*d,t[15]=1,t}function hge(t,e,i,r){const n=e[0],s=e[1],o=e[2];let a=n-i[0],c=s-i[1],d=o-i[2];const h=fn();if(Math.abs(a)<h&&Math.abs(c)<h&&Math.abs(d)<h)return void nI(t);let f=1/Math.sqrt(a*a+c*c+d*d);a*=f,c*=f,d*=f;const m=r[0],v=r[1],w=r[2];let x=v*d-w*c,$=w*a-m*d,T=m*c-v*a;f=Math.sqrt(x*x+$*$+T*T),f?(f=1/f,x*=f,$*=f,T*=f):(x=0,$=0,T=0);let C=c*T-d*$,P=d*x-a*T,L=a*$-c*x;f=Math.sqrt(C*C+P*P+L*L),f?(f=1/f,C*=f,P*=f,L*=f):(C=0,P=0,L=0),t[0]=x,t[1]=C,t[2]=a,t[3]=0,t[4]=$,t[5]=P,t[6]=c,t[7]=0,t[8]=T,t[9]=L,t[10]=d,t[11]=0,t[12]=-(x*n+$*s+T*o),t[13]=-(C*n+P*s+L*o),t[14]=-(a*n+c*s+d*o),t[15]=1}function fge(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=r[0],c=r[1],d=r[2];let h=n-i[0],f=s-i[1],m=o-i[2],v=h*h+f*f+m*m;v>0&&(v=1/Math.sqrt(v),h*=v,f*=v,m*=v);let w=c*m-d*f,x=d*h-a*m,$=a*f-c*h;return v=w*w+x*x+$*$,v>0&&(v=1/Math.sqrt(v),w*=v,x*=v,$*=v),t[0]=w,t[1]=x,t[2]=$,t[3]=0,t[4]=f*$-m*x,t[5]=m*w-h*$,t[6]=h*x-f*w,t[7]=0,t[8]=h,t[9]=f,t[10]=m,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function mge(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function gge(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function yge(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function sW(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function vge(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function bge(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function wge(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function _ge(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],c=t[6],d=t[7],h=t[8],f=t[9],m=t[10],v=t[11],w=t[12],x=t[13],$=t[14],T=t[15],C=e[0],P=e[1],L=e[2],D=e[3],q=e[4],F=e[5],ee=e[6],ae=e[7],ne=e[8],ue=e[9],X=e[10],J=e[11],H=e[12],ge=e[13],be=e[14],Ee=e[15],we=fn();return Math.abs(i-C)<=we*Math.max(1,Math.abs(i),Math.abs(C))&&Math.abs(r-P)<=we*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(n-L)<=we*Math.max(1,Math.abs(n),Math.abs(L))&&Math.abs(s-D)<=we*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(o-q)<=we*Math.max(1,Math.abs(o),Math.abs(q))&&Math.abs(a-F)<=we*Math.max(1,Math.abs(a),Math.abs(F))&&Math.abs(c-ee)<=we*Math.max(1,Math.abs(c),Math.abs(ee))&&Math.abs(d-ae)<=we*Math.max(1,Math.abs(d),Math.abs(ae))&&Math.abs(h-ne)<=we*Math.max(1,Math.abs(h),Math.abs(ne))&&Math.abs(f-ue)<=we*Math.max(1,Math.abs(f),Math.abs(ue))&&Math.abs(m-X)<=we*Math.max(1,Math.abs(m),Math.abs(X))&&Math.abs(v-J)<=we*Math.max(1,Math.abs(v),Math.abs(J))&&Math.abs(w-H)<=we*Math.max(1,Math.abs(w),Math.abs(H))&&Math.abs(x-ge)<=we*Math.max(1,Math.abs(x),Math.abs(ge))&&Math.abs($-be)<=we*Math.max(1,Math.abs($),Math.abs(be))&&Math.abs(T-Ee)<=we*Math.max(1,Math.abs(T),Math.abs(Ee))}function xge(t){const e=fn(),i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],c=t[8],d=t[9],h=t[10];return Math.abs(1-(i*i+s*s+c*c))<=e&&Math.abs(1-(r*r+o*o+d*d))<=e&&Math.abs(1-(n*n+a*a+h*h))<=e}function Sge(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const $ge=rW,Tge=sW;Object.freeze(Object.defineProperty({__proto__:null,add:yge,adjoint:Vme,copy:tW,determinant:Ume,equals:_ge,exactEquals:wge,frob:gge,fromQuat:lge,fromQuat2:tge,fromRotation:Kme,fromRotationTranslation:nW,fromRotationTranslationScale:oge,fromRotationTranslationScaleOrigin:age,fromScaling:Yme,fromTranslation:Jme,fromXRotation:Qme,fromYRotation:Xme,fromZRotation:ege,frustum:cge,getRotation:sge,getScale:nge,getTranslation:rge,hasIdentityRotation:Sge,identity:nI,invert:iW,invertOrIdentity:jme,isOrthoNormal:xge,lookAt:hge,mul:$ge,multiply:rW,multiplyScalar:vge,multiplyScalarAndAdd:bge,ortho:pge,perspective:uge,perspectiveFromFieldOfView:dge,rotate:Gme,rotateX:Hme,rotateY:Wme,rotateZ:Zme,scale:Bme,set:pd,str:mge,sub:Tge,subtract:sW,targetTo:fge,translate:qme,transpose:hd},Symbol.toStringTag,{value:"Module"}));const kge=(t,e)=>{const i=pd(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return hd(i,i)},Ige=(t,e)=>{const i=pd(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return hd(i,i)},Ege=(t,e)=>{const i=1-e,r=pd(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return hd(r,r)},Mge=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=pd(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return hd(n,n)},Age=(t,e)=>{const i=1-2*e,r=pd(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return hd(r,r)},Cge=(t,e)=>{const i=pd(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return hd(i,i)},Oge=(t,e)=>{const i=1-e,r=pd(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return hd(r,r)};let oW=class aW{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=zn(e.strength,i.strength,r),this.radius=zn(e.radius,i.radius,r),this.threshold=zn(e.threshold,i.threshold,r)}clone(){return new aW(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:vb(this.radius),strength:this.strength,threshold:this.threshold}}},lW=class cW{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(zn(e.radius,i.radius,r))}clone(){return new cW(this.radius)}toJSON(){return{type:"blur",radius:vb(this.radius)}}},TC=class uW{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=zn(e.amount,i.amount,r),this._updateMatrix()}clone(){return new uW(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||rI();switch(this.type){case"brightness":this._colorMatrix=kge(e,this.amount);break;case"contrast":this._colorMatrix=Ige(e,this.amount);break;case"grayscale":this._colorMatrix=Ege(e,this.amount);break;case"invert":this._colorMatrix=Age(e,this.amount);break;case"saturate":this._colorMatrix=Cge(e,this.amount);break;case"sepia":this._colorMatrix=Oge(e,this.amount)}}},dW=class pW{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=zn(e.offsetX,i.offsetX,r),this.offsetY=zn(e.offsetY,i.offsetY,r),this.blurRadius=zn(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(zn(e.color[0],i.color[0],r)),this.color[1]=Math.round(zn(e.color[1],i.color[1],r)),this.color[2]=Math.round(zn(e.color[2],i.color[2],r)),this.color[3]=zn(e.color[3],i.color[3],r)}clone(){return new pW(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:vb(this.offsetX),yoffset:vb(this.offsetY),blurRadius:vb(this.blurRadius),color:e}}},hW=class fW{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=zn(e.angle,i.angle,r),this._updateMatrix()}clone(){return new fW(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||rI();this._colorMatrix=Mge(e,this.angle)}},mW=class gW{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=zn(e.amount,i.amount,r)}clone(){return new gW(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function zn(t,e,i){return t+(e-t)*i}function vb(t){return Math.round(1e3*no(t))/1e3}function Pge(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new TC(t.type,0);case"saturate":case"brightness":case"contrast":return new TC(t.type,1);case"opacity":return new mW(1);case"hue-rotate":return new hW(0);case"blur":return new lW(0);case"drop-shadow":return new dW(0,0,0,[...PR("transparent")]);case"bloom":return new oW(0,0,1)}}function Rge(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function Lge(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(Pge(i[n]))}function Fge(t){const e=t[0];return!!e&&"type"in e}let yz=class extends SyntaxError{constructor(e,i,r,n){super(e),this.expected=i,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const n=e.find(c=>c.source===this.location.source);n&&(r=n.text.split(/\r\n|\n|\r/g));const s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(r){const c=this.location.end,d="".padEnd(o.line.toString().length," "),h=r[s.line-1],f=(s.line===c.line?c.column:h.length+1)-s.column||1;i+=`
 --> `+a+`
`+d+` |
`+o.line+" | "+h+`
`+d+" | "+"".padEnd(s.column-1," ")+"".padEnd(f,"^")}else i+=`
 at `+a}return i}static buildMessage(e,i){function r(m){return m.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(m){return n?m.replace(n,v=>"\\u{"+r(v)+"}"):m}function o(m){return s(m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+r(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+r(v)))}function a(m){return s(m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+r(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+r(v)))}const c={literal:m=>'"'+o(m.text)+'"',class(m){const v=m.parts.map(w=>Array.isArray(w)?a(w[0])+"-"+a(w[1]):a(w));return"["+(m.inverted?"^":"")+v.join("")+"]"+(m.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:m=>m.description};function d(m){return c[m.type](m)}function h(m){const v=m.map(d);if(v.sort(),v.length>0){let w=1;for(let x=1;x<v.length;x++)v[x-1]!==v[x]&&(v[w]=v[x],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function f(m){return m?'"'+o(m)+'"':"end of input"}return"Expected "+h(e)+" but "+f(i)+" found."}};function Nge(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,n={start:R1};let s=R1;const o="none",a=")",c=",",d="(",h="%",f="px",m="cm",v="mm",w="in",x="pt",$="pc",T="deg",C="rad",P="grad",L="turn",D="#",q=".",F="e",ee=/^[ \t\n\r]/,ae=/^[a-z\-]/,ne=/^[0-9a-fA-F]/,ue=/^[+\-]/,X=/^[0-9]/,J=co("none"),H=Nt("none",!1),ge=Nt(")",!1),be=Nt(",",!1),Ee=xd([" ","	",`
`,"\r"],!1,!1,!1),we=co("function"),Oe=Nt("(",!1),yt=co("identifier"),Tt=xd([["a","z"],"-"],!1,!1,!1),Ci=co("percentage"),xr=Nt("%",!1),Zn=co("length"),lo=Nt("px",!1),Ac=Nt("cm",!1),Cc=Nt("mm",!1),Oc=Nt("in",!1),Be=Nt("pt",!1),w1=Nt("pc",!1),md=co("angle"),Gh=Nt("deg",!1),a0=Nt("rad",!1),Hh=Nt("grad",!1),gd=Nt("turn",!1),nl=co("number"),_1=co("color"),yd=Nt("#",!1),x1=xd([["0","9"],["a","f"],["A","F"]],!1,!1,!1),vd=xd(["+","-"],!1,!1,!1),Jn=xd([["0","9"]],!1,!1,!1),S1=Nt(".",!1),$1=Nt("e",!1);function Wh(){return[]}function T1(N,Y){return{type:"function",name:N,parameters:Y||[]}}function bd(N,Y){return Y.length>0?y0(N,Y,3):[N]}function GI(N){return{type:"quantity",value:N.value,unit:N.unit}}function l0(N){return{type:"color",colorType:N.type,value:N.value}}function HI(N){return N}function c0(){return vn()}function u0(N){return{value:N,unit:"%"}}function d0(N){return{value:N,unit:"px"}}function k1(N){return{value:N,unit:"cm"}}function I1(N){return{value:N,unit:"mm"}}function Zh(N){return{value:N,unit:"in"}}function E1(N){return{value:N,unit:"pt"}}function M1(N){return{value:N,unit:"pc"}}function wd(N){return{value:N,unit:"deg"}}function _d(N){return{value:N,unit:"rad"}}function Pc(N){return{value:N,unit:"grad"}}function A1(N){return{value:N,unit:"turn"}}function p0(N){return{value:N,unit:null}}function C1(){return{type:"hex",value:vn()}}function h0(N){return{type:"function",value:N}}function f0(){return{type:"named",value:vn()}}function O1(){return parseFloat(vn())}let K=0|e.peg$currPos,Wt=K;const oa=[{line:1,column:1}];let sl,Yn=K,Jh=e.peg$maxFailExpected||[],Ne=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function vn(){return t.substring(Wt,K)}function ol(N=K){const Y=t.codePointAt(N);return Y===void 0?"":String.fromCodePoint(Y)}function Nt(N,Y){return{type:"literal",text:N,ignoreCase:Y}}function xd(N,Y,he,He){return{type:"class",parts:N,inverted:Y,ignoreCase:he,unicode:He}}function WI(){return{type:"end"}}function co(N){return{type:"other",description:N}}function uo(N){let Y,he=oa[N];if(he)return he;if(N>=oa.length)Y=oa.length-1;else for(Y=N;!oa[--Y];);for(he=oa[Y],he={line:he.line,column:he.column};Y<N;)t.charCodeAt(Y)===10?(he.line++,he.column=1):he.column++,Y++;return oa[N]=he,he}function Ye(N,Y,he){const He=uo(N),St=uo(Y);return{source:r,start:{offset:N,line:He.line,column:He.column},end:{offset:Y,line:St.line,column:St.column}}}function et(N){K<Yn||(K>Yn&&(Yn=K,Jh=[]),Jh.push(N))}function P1(N,Y,he){return new yz(yz.buildMessage(N,Y),N,Y,he)}function R1(){let N;return N=ZI(),N===i&&(N=Sd()),N}function ZI(){let N,Y;return Ne++,N=K,ji(),t.substr(K,4)===o?(Y=o,K+=4):(Y=i,Ne===0&&et(H)),Y!==i?(ji(),Wt=N,N=Wh()):(K=N,N=i),Ne--,N===i&&Ne===0&&et(J),N}function Sd(){let N,Y;if(N=[],Y=$d(),Y!==i)for(;Y!==i;)N.push(Y),Y=$d();else N=i;return N}function $d(){let N,Y,he,He;return N=K,ji(),Y=L1(),Y!==i?(ji(),he=JI(),he===i&&(he=null),ji(),t.charCodeAt(K)===41?(He=a,K++):(He=i,Ne===0&&et(ge)),He!==i?(ji(),Wt=N,N=T1(Y,he)):(K=N,N=i)):(K=N,N=i),N}function JI(){let N,Y,he,He,St,ii,oi,ci;if(N=K,Y=m0(),Y!==i){for(he=[],He=K,St=ji(),t.charCodeAt(K)===44?(ii=c,K++):(ii=i,Ne===0&&et(be)),ii===i&&(ii=null),oi=ji(),ci=m0(),ci!==i?(St=[St,ii,oi,ci],He=St):(K=He,He=i);He!==i;)he.push(He),He=K,St=ji(),t.charCodeAt(K)===44?(ii=c,K++):(ii=i,Ne===0&&et(be)),ii===i&&(ii=null),oi=ji(),ci=m0(),ci!==i?(St=[St,ii,oi,ci],He=St):(K=He,He=i);Wt=N,N=bd(Y,he)}else K=N,N=i;return N}function m0(){let N,Y;return N=K,Y=N1(),Y===i&&(Y=D1(),Y===i&&(Y=Yh(),Y===i&&(Y=z1()))),Y!==i&&(Wt=N,Y=GI(Y)),N=Y,N===i&&(N=K,Y=g0(),Y!==i&&(Wt=N,Y=l0(Y)),N=Y),N}function ji(){let N,Y;for(Ne++,N=[],Y=t.charAt(K),ee.test(Y)?K++:(Y=i,Ne===0&&et(Ee));Y!==i;)N.push(Y),Y=t.charAt(K),ee.test(Y)?K++:(Y=i,Ne===0&&et(Ee));return Ne--,N}function L1(){let N,Y,he;return Ne++,N=K,Y=F1(),Y!==i?(t.charCodeAt(K)===40?(he=d,K++):(he=i,Ne===0&&et(Oe)),he!==i?(Wt=N,N=Y):(K=N,N=i)):(K=N,N=i),Ne--,N===i&&(Y=i,Ne===0&&et(we)),N}function F1(){let N,Y,he;if(Ne++,N=K,Y=[],he=t.charAt(K),ae.test(he)?K++:(he=i,Ne===0&&et(Tt)),he!==i)for(;he!==i;)Y.push(he),he=t.charAt(K),ae.test(he)?K++:(he=i,Ne===0&&et(Tt));else Y=i;return Y!==i&&(Wt=N,Y=c0()),N=Y,Ne--,N===i&&(Y=i,Ne===0&&et(yt)),N}function N1(){let N,Y,he;return Ne++,N=K,ji(),Y=Hr(),Y!==i?(t.charCodeAt(K)===37?(he=h,K++):(he=i,Ne===0&&et(xr)),he!==i?(Wt=N,N=u0(Y)):(K=N,N=i)):(K=N,N=i),Ne--,N===i&&Ne===0&&et(Ci),N}function D1(){let N,Y,he;return Ne++,N=K,ji(),Y=Hr(),Y!==i?(t.substr(K,2)===f?(he=f,K+=2):(he=i,Ne===0&&et(lo)),he!==i?(Wt=N,N=d0(Y)):(K=N,N=i)):(K=N,N=i),N===i&&(N=K,ji(),Y=Hr(),Y!==i?(t.substr(K,2)===m?(he=m,K+=2):(he=i,Ne===0&&et(Ac)),he!==i?(Wt=N,N=k1(Y)):(K=N,N=i)):(K=N,N=i),N===i&&(N=K,ji(),Y=Hr(),Y!==i?(t.substr(K,2)===v?(he=v,K+=2):(he=i,Ne===0&&et(Cc)),he!==i?(Wt=N,N=I1(Y)):(K=N,N=i)):(K=N,N=i),N===i&&(N=K,ji(),Y=Hr(),Y!==i?(t.substr(K,2)===w?(he=w,K+=2):(he=i,Ne===0&&et(Oc)),he!==i?(Wt=N,N=Zh(Y)):(K=N,N=i)):(K=N,N=i),N===i&&(N=K,ji(),Y=Hr(),Y!==i?(t.substr(K,2)===x?(he=x,K+=2):(he=i,Ne===0&&et(Be)),he!==i?(Wt=N,N=E1(Y)):(K=N,N=i)):(K=N,N=i),N===i&&(N=K,ji(),Y=Hr(),Y!==i?(t.substr(K,2)===$?(he=$,K+=2):(he=i,Ne===0&&et(w1)),he!==i?(Wt=N,N=M1(Y)):(K=N,N=i)):(K=N,N=i)))))),Ne--,N===i&&Ne===0&&et(Zn),N}function Yh(){let N,Y,he;return Ne++,N=K,Y=Hr(),Y!==i?(t.substr(K,3)===T?(he=T,K+=3):(he=i,Ne===0&&et(Gh)),he!==i?(Wt=N,N=wd(Y)):(K=N,N=i)):(K=N,N=i),N===i&&(N=K,Y=Hr(),Y!==i?(t.substr(K,3)===C?(he=C,K+=3):(he=i,Ne===0&&et(a0)),he!==i?(Wt=N,N=_d(Y)):(K=N,N=i)):(K=N,N=i),N===i&&(N=K,Y=Hr(),Y!==i?(t.substr(K,4)===P?(he=P,K+=4):(he=i,Ne===0&&et(Hh)),he!==i?(Wt=N,N=Pc(Y)):(K=N,N=i)):(K=N,N=i),N===i&&(N=K,Y=Hr(),Y!==i?(t.substr(K,4)===L?(he=L,K+=4):(he=i,Ne===0&&et(gd)),he!==i?(Wt=N,N=A1(Y)):(K=N,N=i)):(K=N,N=i)))),Ne--,N===i&&(Y=i,Ne===0&&et(md)),N}function z1(){let N,Y;return Ne++,N=K,ji(),Y=Hr(),Y!==i?(Wt=N,N=p0(Y)):(K=N,N=i),Ne--,N===i&&Ne===0&&et(nl),N}function g0(){let N,Y,he,He;if(Ne++,N=K,t.charCodeAt(K)===35?(Y=D,K++):(Y=i,Ne===0&&et(yd)),Y!==i){if(he=[],He=t.charAt(K),ne.test(He)?K++:(He=i,Ne===0&&et(x1)),He!==i)for(;He!==i;)he.push(He),He=t.charAt(K),ne.test(He)?K++:(He=i,Ne===0&&et(x1));else he=i;he!==i?(Wt=N,N=C1()):(K=N,N=i)}else K=N,N=i;return N===i&&(N=K,Y=$d(),Y!==i&&(Wt=N,Y=h0(Y)),N=Y,N===i&&(N=K,Y=F1(),Y!==i&&(Wt=N,Y=f0()),N=Y)),Ne--,N===i&&(Y=i,Ne===0&&et(_1)),N}function Hr(){let N,Y,he,He,St,ii,oi,ci;for(N=K,Y=t.charAt(K),ue.test(Y)?K++:(Y=i,Ne===0&&et(vd)),Y===i&&(Y=null),he=K,He=[],St=t.charAt(K),X.test(St)?K++:(St=i,Ne===0&&et(Jn));St!==i;)He.push(St),St=t.charAt(K),X.test(St)?K++:(St=i,Ne===0&&et(Jn));if(t.charCodeAt(K)===46?(St=q,K++):(St=i,Ne===0&&et(S1)),St!==i){if(ii=[],oi=t.charAt(K),X.test(oi)?K++:(oi=i,Ne===0&&et(Jn)),oi!==i)for(;oi!==i;)ii.push(oi),oi=t.charAt(K),X.test(oi)?K++:(oi=i,Ne===0&&et(Jn));else ii=i;ii!==i?(He=[He,St,ii],he=He):(K=he,he=i)}else K=he,he=i;if(he===i)if(he=[],He=t.charAt(K),X.test(He)?K++:(He=i,Ne===0&&et(Jn)),He!==i)for(;He!==i;)he.push(He),He=t.charAt(K),X.test(He)?K++:(He=i,Ne===0&&et(Jn));else he=i;if(he!==i){if(He=K,t.charCodeAt(K)===101?(St=F,K++):(St=i,Ne===0&&et($1)),St!==i){if(ii=t.charAt(K),ue.test(ii)?K++:(ii=i,Ne===0&&et(vd)),ii===i&&(ii=null),oi=[],ci=t.charAt(K),X.test(ci)?K++:(ci=i,Ne===0&&et(Jn)),ci!==i)for(;ci!==i;)oi.push(ci),ci=t.charAt(K),X.test(ci)?K++:(ci=i,Ne===0&&et(Jn));else oi=i;oi!==i?(St=[St,ii,oi],He=St):(K=He,He=i)}else K=He,He=i;He===i&&(He=null),Wt=N,N=O1()}else K=N,N=i;return N}function YI(N,Y){return N.map(function(he){return he[Y]})}function y0(N,Y,he){return[N].concat(YI(Y,he))}sl=s();const v0=sl!==i&&K===t.length;function Kh(){throw sl!==i&&K<t.length&&et(WI()),P1(Jh,Yn<t.length?ol(Yn):null,Yn<t.length?Ye(Yn,Yn+1):Ye(Yn,Yn))}return e.peg$library?{peg$result:sl,peg$currPos:K,peg$FAILED:i,peg$maxFailExpected:Jh,peg$maxFailPos:Yn,peg$success:v0,peg$throw:v0?void 0:Kh}:v0?sl:void Kh()}function yW(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=vz(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new j("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:vz(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!Rge(e[i].effects,e[i+1].effects))throw new j("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});Lge(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function vz(t){let e;if(!t)return[];try{e=Nge(t)}catch(i){throw new j("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>Dge(i))}function Dge(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return zge(t);case"opacity":return jge(t);case"hue-rotate":return Vge(t);case"blur":return Uge(t);case"drop-shadow":return qge(t);case"bloom":return Bge(t)}}catch(e){throw e.details.filter=t,e}throw new j("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function zge(t){let e=1;return Jy(t.parameters,1),t.parameters.length===1&&(e=Vo(t.parameters[0])),new TC(t.name,e)}function jge(t){let e=1;return Jy(t.parameters,1),t.parameters.length===1&&(e=Vo(t.parameters[0])),new mW(e)}function Vge(t){let e=0;return Jy(t.parameters,1),t.parameters.length===1&&(e=Yge(t.parameters[0])),new hW(e)}function Uge(t){let e=0;return Jy(t.parameters,1),t.parameters.length===1&&(e=AL(t.parameters[0]),c1(e,t.parameters[0])),new lW(e)}function qge(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new j("effect:type-error","Accepts only one color",{});i=Kge(r)}else{const n=AL(r);if(Object.isFrozen(e))throw new j("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&c1(n,r)}if(e.length<2||e.length>3)throw new j("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new dW(e[0],e[1],e[2]||0,i||vW("black"))}function Bge(t){let e=1,i=0,r=0;return Jy(t.parameters,3),t.parameters[0]&&(e=Vo(t.parameters[0])),t.parameters[1]&&(i=AL(t.parameters[1]),c1(i,t.parameters[1])),t.parameters[2]&&(r=Vo(t.parameters[2])),new oW(e,i,r)}function Jy(t,e){if(t.length>e)throw new j("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function sI(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in ML)return"<length>";if(t.unit in EL)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function c1(t,e){if(t<0)throw new j("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function Gge(t){if(t.type!=="quantity"||t.unit!==null)throw new j("effect:type-error",`Expected <double>, Actual: ${sI(t)}`,{term:t})}function Hge(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new j("effect:type-error",`Expected <double> or <percentage>, Actual: ${sI(t)}`,{term:t})}const EL={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Wge(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&EL[t.unit]!=null))throw new j("effect:type-error",`Expected <angle>, Actual: ${sI(t)}`,{term:t})}const ML={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Zge(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&ML[t.unit]!=null))throw new j("effect:type-error",`Expected <length>, Actual: ${sI(t)}`,{term:t})}function Vo(t){Hge(t);const e=t.value;return c1(e,t),t.unit==="%"?.01*e:e}function Jge(t){return Gge(t),c1(t.value,t),t.value}function Yge(t){return Wge(t),t.value*EL[t.unit]||0}function AL(t){return Zge(t),t.value*ML[t.unit]||0}function Kge(t){switch(t.colorType){case"hex":return Lle(t.value);case"named":return vW(t.value);case"function":return eye(t.value)}}function vW(t){if(!jq(t))throw new j("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return Rle(t)}const Qge=/^rgba?/i,Xge=/^hsla?/i;function eye(t){if(Jy(t.parameters,4),Qge.test(t.name))return[Vo(t.parameters[0]),Vo(t.parameters[1]),Vo(t.parameters[2]),t.parameters[3]?Vo(t.parameters[3]):1];if(Xge.test(t.name))return Vq(Jge(t.parameters[0]),Vo(t.parameters[1]),Vo(t.parameters[2]),t.parameters[3]?Vo(t.parameters[3]):1);throw new j("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function dw(t,e,i){var r;try{return iye(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function pw(t,e,i,r){try{const n=tye(t);Ai(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function tye(t){const e=yW(t);return e?Fge(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function iye(t){if(!t||t.length===0)return null;if(rye(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:bz(i.value)});return e}return bz(t)}function rye(t){const e=t[0];return!!e&&"scale"in e}function bz(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[cl(i,"amount")];break;case"blur":r=[cl(i,"radius","pt")];break;case"hue-rotate":r=[cl(i,"angle","deg")];break;case"drop-shadow":r=[cl(i,"xoffset","pt"),cl(i,"yoffset","pt"),cl(i,"blurRadius","pt"),nye(i,"color")];break;case"bloom":r=[cl(i,"strength"),cl(i,"radius","pt"),cl(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;yW(n),e.push(n)}return e.join(" ")}function cl(t,e,i){if(t[e]==null)throw new j("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function nye(t,e){if(t[e]==null)throw new j("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const sye={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:jt}},"portal-item":{read:!0,write:{layerContainerTypes:jt}}}}},wz={read:{reader:dw},write:{allowNull:!0,writer:pw,layerContainerTypes:jt}},oye={json:{read:!1,write:!1,origins:{"web-map":wz,"portal-item":wz}}},bW=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([u(sye)],i.prototype,"blendMode",void 0),l([u(oye)],i.prototype,"effect",void 0),i=l([E("esri.layers.mixins.BlendLayer")],i),i},_z={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},xz={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},Sz={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},aye={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":_z,"web-map/basemap-base-layers":xz,"web-map/tables":Sz,"link-chart/operational-layers":{..._z,LinkChartLayer:!0},"link-chart/basemap-base-layers":xz,"link-chart/tables":Sz,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var kC;let bv=kC=class extends Z{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return Gr(t,e,null,this.expression)}clone(){return new kC({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};l([u({type:String,json:{write:{isRequired:!0}}})],bv.prototype,"expression",void 0),l([u({type:String,json:{write:!0}})],bv.prototype,"title",void 0),bv=kC=l([E("esri.symbols.support.FeatureExpressionInfo")],bv);const $z=bv,oI={unknown:1,inches:ki(1,"meters","inches"),feet:ki(1,"meters","feet"),"us-feet":ki(1,"meters","us-feet"),yards:ki(1,"meters","yards"),miles:ki(1,"meters","miles"),"nautical-miles":ki(1,"meters","nautical-miles"),millimeters:ki(1,"meters","millimeters"),centimeters:ki(1,"meters","centimeters"),decimeters:ki(1,"meters","decimeters"),meters:ki(1,"meters","meters"),kilometers:ki(1,"meters","kilometers"),"decimal-degrees":1/Yue(1,"meters",yi.radius)};function w6e(t){return!!t&&oI[t]!=null}function _6e(t){return 1/(oI[t]||1)}function lye(){const t=Object.keys(oI);return JP(t,"decimal-degrees"),t.sort(),t}const cye=lye(),d_=Wi()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Tz=new Ze({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let _l=class extends Pe(Z){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,n){i[r]=e.write({},n),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Jie(this.featureExpressionInfo,e.featureExpressionInfo)}};l([u({type:$z,json:{write:!0}})],_l.prototype,"featureExpressionInfo",void 0),l([oe("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],_l.prototype,"readFeatureExpressionInfo",null),l([le("featureExpressionInfo",{featureExpressionInfo:{type:$z},"featureExpression.value":{type:[0]}})],_l.prototype,"writeFeatureExpressionInfo",null),l([u({type:d_.apiValues,nonNullable:!0,json:{type:d_.jsonValues,read:d_.read,write:{writer:d_.write,isRequired:!0}}})],_l.prototype,"mode",null),l([u({type:Number,json:{write:!0}})],_l.prototype,"offset",void 0),l([u({type:cye,json:{type:String,read:Tz.read,write:Tz.write}})],_l.prototype,"unit",null),_l=l([E("esri.symbols.support.ElevationInfo")],_l);let Lf=class extends Z{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};l([Me({type:String,json:{write:!0}})],Lf.prototype,"description",void 0),l([Me({type:String,json:{write:!0}})],Lf.prototype,"label",void 0),l([Me()],Lf.prototype,"type",void 0),Lf=l([wi("esri.tables.elements.AttributeTableElement")],Lf);const Yy=Lf;let wv=class extends Pe(Yy){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};l([u({type:["auto"],json:{write:!0}})],wv.prototype,"displayType",void 0),l([u({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],wv.prototype,"type",void 0),wv=l([E("esri.tables.elements.AttributeTableAttachmentElement")],wv);const wW=wv;let Zd=class extends Pe(Yy){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};l([u({type:String,json:{read:!1,write:!1}})],Zd.prototype,"description",void 0),l([u({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Zd.prototype,"fieldName",void 0),l([u({type:String,json:{read:!1,write:!1}})],Zd.prototype,"label",void 0),l([u({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Zd.prototype,"type",void 0),Zd=l([E("esri.tables.elements.AttributeTableFieldElement")],Zd);const _W=Zd;let _v=class extends Pe(Yy){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};l([u({type:Number,json:{type:nt,write:{enabled:!0,isRequired:!0}}})],_v.prototype,"relationshipId",void 0),l([u({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],_v.prototype,"type",void 0),_v=l([E("esri.tables.elements.AttributeTableRelationshipElement")],_v);const xW=_v,SW={base:Yy,key:"type",typeMap:{attachment:wW,field:_W,relationship:xW}};function uye(t){return{typesWithGroup:{base:Yy,key:"type",typeMap:{attachment:wW,field:_W,group:t,relationship:xW}},typesWithoutGroup:SW}}let xv=class extends Pe(Yy){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};l([u({types:[SW],json:{name:"attributeTableElements",write:!0}})],xv.prototype,"elements",void 0),l([u({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],xv.prototype,"type",void 0),xv=l([E("esri.tables.elements.AttributeTableGroupElement")],xv);const dye=xv;let Sv=class extends Pe(Z){constructor(e){super(e),this.field=null,this.order=null}};l([u({type:String,json:{write:!0}})],Sv.prototype,"field",void 0),l([u({type:["asc","desc"],json:{write:!0}})],Sv.prototype,"order",void 0),Sv=l([E("esri.tables.support.FieldOrder")],Sv);const pye=Sv;var IC;const hye=uye(dye);let $v=IC=class extends Z{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new IC({elements:V(this.elements),orderByFields:V(this.orderByFields)})}};l([u({types:[hye.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],$v.prototype,"elements",void 0),l([u({type:[pye],json:{write:!0}})],$v.prototype,"orderByFields",void 0),$v=IC=l([E("esri.tables.AttributeTableTemplate")],$v);const fye=$v,mye={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:jt}}},aI={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},lI={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:jt}}},$W={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:vh}}},TW={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:jt}}},gye={value:null,type:_l,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:jt}}};function M6e(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const kW={write:{enabled:!0,layerContainerTypes:jt},read:!0},EC={type:Number,json:{origins:{"web-document":kW,"portal-item":{write:{layerContainerTypes:jt}}}}},yye={...EC,json:{...EC.json,origins:{"web-document":{...kW,write:{enabled:!0,layerContainerTypes:jt,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var r;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(r=e.layerDefinition)!=null&&r.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?uw(e.layerDefinition.drawingInfo.transparency):void 0:uw(e.drawingInfo.transparency)}}}},A6e={type:Ke,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Ke.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=me.fromJSON(e.spatialReference)),i}}}},read:!1}},vye={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},bye={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:jt}}},wye={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:jt}}},IW={json:{write:{ignoreOrigin:!0,layerContainerTypes:jt},origins:{"web-map":{read:!1,write:!1}}}},_ye={type:fye,json:{name:"attributeTableInfo",write:!0}},EW=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,n,s){var o;return((o=s==null?void 0:s.portalItem)==null?void 0:o.type)==="Group Layer"?void 0:r}writeListMode(r,n,s,o){(o&&o.layerContainerType==="ground"||r&&H9(this,s,{},o))&&(n[s]=r)}writeOperationalLayerType(r,n,s){r&&(n[s]=r)}writeTitle(r,n){n.title=r??"Layer"}readVisibilityTimeExtent(r){return r?xt.fromArray(r):null}writeVisibilityTimeExtent(r,n,s,o){r&&o.layerContainerType!=="tables"&&(r.isEmpty?o!=null&&o.messages&&o.messages.push(new j("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):n[s]=r.toArray())}read(r,n){n&&(n.layer=this),B9(this,r,s=>super.read(r,s),n)}write(r,n){var a,c;if(!this.persistenceEnabled&&!(n!=null&&n.ignorePersistenceEnabled))return null;if(n!=null&&n.origin){const d=`${n.origin}/${n.layerContainerType||"operational-layers"}`,h=aye[d];let f=!!(h!=null&&h[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&d==="web-scene/operational-layers"&&(f=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&d==="web-map/operational-layers"&&(f=!1),!f)return(a=n.messages)==null||a.push(new j("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${d}'`,{layer:this})),null}const s=super.write(r,{...n,layer:this}),o=!!n&&!!n.messages&&!!n.messages.filter(d=>d instanceof j&&d.name==="web-document-write:property-required").length;return Gy(s==null?void 0:s.url)?((c=n==null?void 0:n.messages)==null||c.push(new j("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:s}beforeSave(){}};return l([u({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],i.prototype,"id",void 0),l([oe("id",["id"])],i.prototype,"readId",null),l([u(IW)],i.prototype,"listMode",void 0),l([le("listMode")],i.prototype,"writeListMode",null),l([u({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:jt,isRequired:!0}}}}})],i.prototype,"operationalLayerType",void 0),l([le("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),l([u(EC)],i.prototype,"opacity",void 0),l([u({type:Boolean,readOnly:!1})],i.prototype,"persistenceEnabled",void 0),l([u({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],i.prototype,"title",void 0),l([le("title"),le(["web-scene"],"title")],i.prototype,"writeTitle",null),l([u({type:xt,json:{origins:{"web-scene":{write:{layerContainerTypes:jt}}}}})],i.prototype,"visibilityTimeExtent",void 0),l([oe("visibilityTimeExtent")],i.prototype,"readVisibilityTimeExtent",null),l([le(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[nt,Fy]]}})],i.prototype,"writeVisibilityTimeExtent",null),l([u({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:jt}}})],i.prototype,"visible",void 0),i=l([E("esri.layers.mixins.OperationalLayer")],i),i};function C6e(t,e,i){return nR(t.map((r,n)=>e.apply(i,[r,n])))}async function xye(t,e,i){return(await nR(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function CL(t){return{ok:!0,value:t}}function OL(t){return{ok:!1,error:t}}function Sye(t){return t!=null&&t.ok===!0?t.value:null}function $ye(t){return t!=null&&t.ok===!1?t.error:null}async function PL(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return CL(await t)}catch(e){return OL(e)}}async function Tye(t){try{return CL(await t)}catch(e){return Ho(e),OL(e)}}function u1(t,e){return new Qc(t,e)}let Qc=class extends Se{get value(){return Sye(this._result)}get error(){return $ye(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=ch(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=CL(n),this._cleanup()},n=>{this._result=OL(n),this._cleanup()}),this._abortHandle=io(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Gt(this._abortHandle),this._abortController=null}};l([Me()],Qc.prototype,"value",null),l([Me()],Qc.prototype,"error",null),l([Me()],Qc.prototype,"finished",null),l([Me()],Qc.prototype,"promise",void 0),l([Me()],Qc.prototype,"_result",void 0),Qc=l([wi("esri.core.asyncUtils.ReactiveTask")],Qc);let P6e=class{constructor(){this._sequence=Promise.resolve()}async acquire(){let e;this._sequence=new Promise(r=>{e=this._sequence.then(()=>r,()=>r)});const i=await e;return{[Symbol.dispose]:i}}async run(e){const i={stack:[],error:void 0,hasError:!1};try{return $ie(i,await this.acquire(),!1),await e()}catch(r){i.error=r,i.hasError=!0}finally{kie(i)}}};const p_=new WeakMap;function cI(t){return!t.destroyed&&(p_.has(t)||t.addHandles([ve(()=>{const{parent:e}=t;return!!(e&&e instanceof Qt)&&(e.type==="catalog-dynamic-group"||cI(e))},e=>p_.set(t,e),wr),ct(()=>p_.delete(t))]),p_.get(t))}function kz(t,e){var a;const i=t.parent,{layer:r}=t;if((r==null?void 0:r.type)!=="map-image"||!r.sourceJSON||!i)return!1;const n=r.sourceJSON.layers;if(!n)return!1;const s=n.find(c=>t.id===c.id),o=e==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return(s==null?void 0:s.type)===o&&((a=n.find(c=>c.id===i.id))==null?void 0:a.type)==="Catalog Layer"}const MW=Symbol("BasemapInstance");function L6e(t){return t!=null&&typeof t=="object"&&MW in t}function AW(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function F6e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function kye(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function Iye(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function N6e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function Iz(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function _u(t){return(t==null?void 0:t.type)==="subtype-sublayer"}const D6e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function MC(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function z6e(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function uI(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function j6e(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t==null?void 0:t.source)==null?void 0:i.type)==="feature-layer"}function Eye(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}function V6e(t){return AW(t)&&Eye(t)}async function RL(t,e){const i=We==null?void 0:We.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await Ft(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function CW(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Mye(t){return CW(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Aye(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function Cye(t){return!!Aye(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function U6e(t){const e=new de;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||cI(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function Oye(t,e){return null}function q6e(t){return null}function AC(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function B6e(t,e){!e||!AC(t)||Oye(t.url)}let xl=class extends Se{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:Ez(e.path,e.portalItem)}:e}set path(e){e!=null&&qn(e)?ie.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return Ez(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new j("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:r}=await Q(()=>import("./resourceUtils-Bi9jDoOu.js"),[],import.meta.url);return await r(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function Ez(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&qn(t)&&(t=qR(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}l([u()],xl.prototype,"portalItem",void 0),l([u({type:String,value:null})],xl.prototype,"path",null),l([ti("path")],xl.prototype,"_castPath",null),l([u({type:String,readOnly:!0})],xl.prototype,"url",null),l([u({type:String,readOnly:!0})],xl.prototype,"cdnUrl",null),l([u({type:String,readOnly:!0})],xl.prototype,"itemRelativeUrl",null),xl=l([E("esri.portal.PortalItemResource")],xl);let kp=class extends Se{constructor(e){super(e),this.created=null,this.rating=null}};l([u({type:Date})],kp.prototype,"created",void 0),l([u()],kp.prototype,"rating",void 0),kp=l([E("esri.portal.PortalRating")],kp);var Jd;const Pye=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),Rye=new Set(["KML","GeoJson","CSV"]);let Ge=Jd=class extends $c(zh){static from(t){return Jw(Jd,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Ke(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var v;const t=((v=this.type)==null?void 0:v.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,c=!1,d=!1,h=!1,f=!1,m=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),c=e.includes("Markup"),d=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),n=d&&o?"spatiotemporaltable":o?"table":a?"routelayer":c?"markup":d?"spatiotemporal":h?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(d=e.includes("Spatiotemporal"),f=e.includes("Relational"),n=d||f?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(m=e.includes("Map"),n=m?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",n?Ti(i+n+r+".png"):null}get isLayer(){return this.type!=null&&Pye.has(this.type)}get itemCdnUrl(){return WR(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,r,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.id);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=ce.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof kp?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new kp({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:V(this.applicationProxies),avgRating:this.avgRating,categories:V(this.categories),classification:V(this.classification),created:V(this.created),culture:this.culture,description:this.description,extent:V(this.extent),groupCategories:V(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:V(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:V(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:V(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:V(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Jd({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const r=t[i];r&&(t[i]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new kp(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Jd)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new j("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new j("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:c}=await e.request(`${i}/copy`,a);return new Jd({id:c,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")kc(e)?r.query={data:e}:r.query={url:Vn(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new j("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await Q(()=>import("./resourceUtils-Bi9jDoOu.js"),[],import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await Q(()=>import("./resourceUtils-Bi9jDoOu.js"),[],import.meta.url);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await Q(()=>import("./resourceUtils-Bi9jDoOu.js"),[],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new j("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await Q(()=>import("./resourceUtils-Bi9jDoOu.js"),[],import.meta.url);return e(this,t)}resourceFromPath(t){return new xl({portalItem:this,path:t})}toJSON(){var i,r;const t=this.extent,e={accessInformation:this.accessInformation,categories:V(this.categories),classification:V(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:V(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:V(this.typeKeywords),url:this.url};return Nie(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Jd({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};l([u({type:["private","shared","org","public"]})],Ge.prototype,"access",void 0),l([u()],Ge.prototype,"accessInformation",void 0),l([u({type:String})],Ge.prototype,"apiKey",void 0),l([u({json:{read:{source:"appProxies"}}})],Ge.prototype,"applicationProxies",void 0),l([u()],Ge.prototype,"avgRating",void 0),l([u()],Ge.prototype,"categories",void 0),l([u()],Ge.prototype,"classification",void 0),l([u({type:Date})],Ge.prototype,"created",void 0),l([u()],Ge.prototype,"culture",void 0),l([u()],Ge.prototype,"description",void 0),l([u({readOnly:!0})],Ge.prototype,"displayName",null),l([u({type:Ke})],Ge.prototype,"extent",void 0),l([oe("extent")],Ge.prototype,"readExtent",null),l([u()],Ge.prototype,"groupCategories",void 0),l([u({readOnly:!0})],Ge.prototype,"iconUrl",null),l([u()],Ge.prototype,"id",void 0),l([u({readOnly:!0})],Ge.prototype,"isLayer",null),l([u({type:Boolean,readOnly:!0})],Ge.prototype,"isOrgItem",void 0),l([u()],Ge.prototype,"itemControl",void 0),l([u({readOnly:!0})],Ge.prototype,"itemPageUrl",null),l([u({readOnly:!0})],Ge.prototype,"itemUrl",null),l([u()],Ge.prototype,"licenseInfo",void 0),l([u({type:Date})],Ge.prototype,"modified",void 0),l([u()],Ge.prototype,"name",void 0),l([u()],Ge.prototype,"numComments",void 0),l([u()],Ge.prototype,"numRatings",void 0),l([u()],Ge.prototype,"numViews",void 0),l([u()],Ge.prototype,"owner",void 0),l([u()],Ge.prototype,"ownerFolder",void 0),l([u({type:ce})],Ge.prototype,"portal",void 0),l([u()],Ge.prototype,"screenshots",void 0),l([u()],Ge.prototype,"size",void 0),l([u()],Ge.prototype,"snippet",void 0),l([u()],Ge.prototype,"sourceJSON",void 0),l([u({type:String})],Ge.prototype,"sourceUrl",void 0),l([u({type:String})],Ge.prototype,"spatialReference",void 0),l([u()],Ge.prototype,"tags",void 0),l([u()],Ge.prototype,"thumbnail",void 0),l([u({readOnly:!0})],Ge.prototype,"thumbnailUrl",null),l([u()],Ge.prototype,"title",void 0),l([u()],Ge.prototype,"type",void 0),l([u()],Ge.prototype,"typeKeywords",void 0),l([u({type:String,json:{read(t,e){var i;if(Rye.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],Ge.prototype,"url",void 0),l([u({readOnly:!0})],Ge.prototype,"userItemUrl",null),Ge=Jd=l([E("esri.portal.PortalItem")],Ge);const OW=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ge}},Symbol.toStringTag,{value:"Module"}));var CC;let Ff=CC=class extends Se{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new CC({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};l([u()],Ff.prototype,"isInverse",void 0),l([u()],Ff.prototype,"wkt",void 0),l([u()],Ff.prototype,"wkid",void 0),Ff=CC=l([E("esri.geometry.operators.support.GeographicTransformationStep")],Ff);var OC;let bb=OC=class extends Se{constructor(t){super(t),this.steps=[]}getInverse(){const t=new OC;for(let e=this.steps.length-1;e>=0;e--){const i=this.steps[e];t.steps.push(i.getInverse())}return t}};l([u({type:[Ff],nonNullable:!0})],bb.prototype,"steps",void 0),bb=OC=l([E("esri.geometry.operators.support.GeographicTransformation")],bb);const W6e=Math.PI/180,Z6e=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Bc=yi.radius,yo=yi.eccentricitySquared,Lye={a1:Bc*yo,a2:Bc*yo*Bc*yo,a3:Bc*yo*yo/2,a4:Bc*yo*Bc*yo*2.5,a5:Bc*yo+Bc*yo*yo/2,a6:1-yo},J6e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:yi.radius,f:yi.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:td.radius,f:td.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:qa.radius,f:qa.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:qa.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},Fye={2:{5:ni,7:null,9:null,10:ni,1:_b,6:null,8:null,0:null,3:Km,11:Qm,2:ni,4:tg},5:{5:ni,7:null,9:null,10:ni,1:_b,6:null,8:null,0:null,3:Km,11:Qm,2:ni,4:tg},7:{5:null,7:ni,9:null,10:ni,1:null,6:Cz,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:ni,10:ni,1:null,6:null,8:Az,0:null,3:null,11:null,2:null,4:null},3:{5:wb,7:null,9:null,10:wb,1:Dye,6:null,8:null,0:null,3:ni,11:Vye,2:wb,4:zye},4:{5:ig,7:null,9:null,10:ig,1:Yye,6:null,8:null,0:null,3:Kye,11:Uye,2:ig,4:ni},1:{5:eg,7:null,9:null,10:eg,1:ni,6:null,8:null,0:null,3:Wye,11:qye,2:eg,4:Zye},6:{5:null,7:Pz,9:null,10:Pz,1:null,6:ni,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:Oz,10:Oz,1:null,6:null,8:ni,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:ni,3:null,11:null,2:null,4:null},10:{5:ni,7:ni,9:ni,10:ni,1:_b,6:Cz,8:Az,0:null,3:Km,11:Qm,2:ni,4:tg},11:{5:Xm,7:null,9:null,10:Xm,1:Bye,6:null,8:null,0:null,3:Gye,11:ni,2:Xm,4:Hye}};function PW(t,e){var i;return(i=Nye(t,e))==null?void 0:i.projector}function Nye(t,e){if(t==null||e==null)return null;if(ul.source.spatialReference===t&&ul.dest.spatialReference===e)return ul;const i=Mz(t,ul.source),r=Mz(e,ul.dest);return i===0&&r===0?Hi(t,e)?ul.projector=ni:ul.projector=null:ul.projector=Fye[i][r],ul}function Mz(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=so(t,1)),P$(t)?e.spatialReferenceId=1:wh(t)?e.spatialReferenceId=2:el(t)?e.spatialReferenceId=3:Eue(t)?e.spatialReferenceId=11:t.wkt===Oue.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===eL.wkt?e.spatialReferenceId=6:t.wkt===tL.wkt?e.spatialReferenceId=8:YB(t)?e.spatialReferenceId=7:KB(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function ni(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e]??0)}function wb(t,e,i,r){i[r]=hy*(t[e]/Hp),i[r+1]=hy*(RW-2*Math.atan(Math.exp(-t[e+1]/Hp))),i[r+2]=t[e+2]??0}function Dye(t,e,i,r){const n=t[e]/Hp,s=RW-2*Math.atan(Math.exp(-t[e+1]/Hp)),o=Hp+(t[e+2]??0),a=Math.cos(s)*o;i[r]=Math.cos(n)*a,i[r+1]=Math.sin(n)*a,i[r+2]=Math.sin(s)*o}function zye(t,e,i,r){wb(t,e,i,r),tg(i,r,i,r)}function jye(t,e,i,r,n){const s=.4999999*Math.PI,o=Es(py*t[e+1],-s,s),a=Math.sin(o);i[r++]=py*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]??0}function Km(t,e,i,r){jye(t,e,i,r,yi)}function Qm(t,e,i,r){i[r]=t[e]*Rz,i[r+1]=t[e+1]*Rz,i[r+2]=t[e+2]??0}function Xm(t,e,i,r){i[r]=t[e]*Lz,i[r+1]=t[e+1]*Lz,i[r+2]=t[e+2]??0}function Vye(t,e,i,r){wb(t,e,i,r),Qm(i,r,i,r)}function Uye(t,e,i,r){ig(t,e,i,r),Qm(i,r,i,r)}function qye(t,e,i,r){eg(t,e,i,r),Qm(i,r,i,r)}function Bye(t,e,i,r){Xm(t,e,i,r),_b(i,r,i,r)}function Gye(t,e,i,r){Xm(t,e,i,r),Km(i,r,i,r)}function Hye(t,e,i,r){Xm(t,e,i,r),tg(i,r,i,r)}function LL(t,e,i,r,n){const s=n+(t[e+2]??0),o=py*t[e],a=py*t[e+1],c=Math.cos(a)*s;i[r]=Math.cos(o)*c,i[r+1]=Math.sin(o)*c,i[r+2]=Math.sin(a)*s}function Az(t,e,i,r){LL(t,e,i,r,td.radius)}function Cz(t,e,i,r){LL(t,e,i,r,qa.radius)}function _b(t,e,i,r){LL(t,e,i,r,yi.radius)}function FL(t,e,i,r,n){const s=t[e],o=t[e+1],a=t[e+2]??0,c=Math.sqrt(s*s+o*o+a*a),d=Nle(a/(c===0?1:c)),h=Math.atan2(o,s);i[r++]=hy*h,i[r++]=hy*d,i[r]=c-n}function Oz(t,e,i,r){FL(t,e,i,r,td.radius)}function Pz(t,e,i,r){FL(t,e,i,r,qa.radius)}function eg(t,e,i,r){FL(t,e,i,r,yi.radius)}function Wye(t,e,i,r){eg(t,e,i,r),Km(i,r,i,r)}function Zye(t,e,i,r){eg(t,e,i,r),tg(i,r,i,r)}function Jye(t,e,i,r,n){const s=py*t[e],o=py*t[e+1],a=t[e+2]??0,c=Math.sin(o),d=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*c*c);i[r++]=(h+a)*d*Math.cos(s),i[r++]=(h+a)*d*Math.sin(s),i[r++]=(h*(1-n.eccentricitySquared)+a)*c}function tg(t,e,i,r){Jye(t,e,i,r,yi)}function ig(t,e,i,r){const n=Lye,s=t[e],o=t[e+1],a=t[e+2]??0;let c,d,h,f,m,v,w,x,$,T,C,P,L,D,q,F,ee,ae,ne,ue,X;c=Math.abs(a),d=s*s+o*o,h=Math.sqrt(d),f=d+a*a,m=Math.sqrt(f),ue=Math.atan2(o,s),v=a*a/f,w=d/f,D=n.a2/m,q=n.a3-n.a4/m,w>.3?(x=c/m*(1+w*(n.a1+D+v*q)/m),ne=Math.asin(x),T=x*x,$=Math.sqrt(1-T)):($=h/m*(1-v*(n.a5-D-w*q)/m),ne=Math.acos($),T=1-$*$,x=Math.sqrt(T)),C=1-yi.eccentricitySquared*T,P=yi.radius/Math.sqrt(C),L=n.a6*P,D=h-P*$,q=c-L*x,ee=$*D+x*q,F=$*q-x*D,ae=F/(L/C+ee),ne+=ae,X=ee+F*ae/2,a<0&&(ne=-ne),i[r++]=hy*ue,i[r++]=hy*ne,i[r]=X}function Yye(t,e,i,r){ig(t,e,i,r),_b(i,r,i,r)}function Kye(t,e,i,r){ig(t,e,i,r),Km(i,r,i,r)}const ul={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:ni},py=e1(1),hy=Zq(1),RW=.5*Math.PI,Hp=yi.radius,Rz=Hp*Math.PI/180,Lz=180/(Hp*Math.PI);function d1(t,e,i,r,n,s,o=Math.floor(t.length/3)){const a=PW(e,n);if(a==null)return!1;if(a===ni){if(t===r&&i===s)return!0;const d=i+3*o;for(let h=i,f=s;h<d;h++,f++)r[f]=t[h]??0;return!0}const c=i+3*o;for(let d=i,h=s;d<c;d+=3,h+=3)a(t,d,r,h);return!0}const Y6e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:d1},Symbol.toStringTag,{value:"Module"}));function Fz(t,e,i,r,n,s){return h_[0]=t,h_[1]=e,h_[2]=i,d1(h_,r,0,n,s,0)}const h_=dd();function LW(t,e,i){if(e==null||i==null||i.vcsWkid||Hi(e,i)||rd(e)||rd(i))return null;const r=R$(e)/R$(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>Qye(n,r);case"polyline":case"esriGeometryPolyline":return n=>e0e(n,r);case"polygon":case"esriGeometryPolygon":return n=>Xye(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>t0e(n,r);case"extent":case"esriGeometryEnvelope":return n=>i0e(n,r);default:return null}}function Qye(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function Xye(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function e0e(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function t0e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function i0e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let xb=null,Wp=null,Zp=null,qu=null,PC={};const NL=new zy;function Ic(){return!!(Wp!=null&&Wp.isLoaded()&&(Zp!=null&&Zp.isLoaded())&&(qu!=null&&qu.isLoaded()))}function FW(){return!!Ic()||(Ve(NL),nd(),!1)}function NW(t,e){return!t||!e||ia(t,e)||FW()}function r0e(t,e){return!ia(t,e)&&!Ic()}async function nd(t){xb==null&&(xb=Promise.all([Q(()=>import("./projectOperator-GjeZoSlA.js"),__vite__mapDeps([37,38,39]),import.meta.url).then(e=>(Wp=e,Wp.load())),Q(()=>import("./projectOperator-B-bjN70O.js"),__vite__mapDeps([40,38,39]),import.meta.url).then(e=>(Zp=e,Zp.load())),Q(()=>import("./geographicTransformationUtils-DNbito7i.js"),[],import.meta.url).then(e=>(qu=e,qu.load()))])),await xb,Lt(t),NL.notify()}function Ec(t,e,i){return Array.isArray(t)?t.length===0?[]:(sde(t),RC(t,t[0].spatialReference,e,i)):(ly(t),RC([t],t.spatialReference,e,i)[0])}function RC(t,e,i,r){if(e==null||i==null)return t;if(ia(e,i,r))return t.map(n=>eS(n,e,i));if((r==null?void 0:r.geographicTransformation)==null&&P$(e))return t.map(n=>eS(n,e,me.WGS84)).map(n=>hw(n,i));if((r==null?void 0:r.geographicTransformation)==null&&P$(i))return t.map(n=>hw(n,me.WGS84)).map(n=>eS(n,me.WGS84,i));if(!Ic())throw new zW;if(!(r!=null&&r.geographicTransformation)){if(r!=null&&r.extendedParams)r={...r,geographicTransformation:qu.getTransformation(e,i,r.areaOfInterestExtent)||new bb};else if(!(r!=null&&r.areaOfInterestExtent)){const n=n0e(e,i);let s=PC[n];s||(s=qu.getTransformation(e,i)||new bb,PC[n]=s),r={geographicTransformation:s}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof Xi?Wp.executeMany(t,i,r):Zp.executeMany(t,i,r)}function n0e(t,e){var i,r,n,s,o,a;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((r=t.wkt)==null?void 0:r.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((s=e.wkid)==null?void 0:s.toString())??"-1",((o=e.wkt)==null?void 0:o.toString())??"",((a=e.wkt2)==null?void 0:a.toString())??""].join()}function s0e(t,e){const i=DW([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function DW(t,e){if(!Ic()){for(const i of t)if(i!=null&&!Hi(i.spatialReference,e)&&bs(i.spatialReference)&&bs(e)&&!ia(i.spatialReference,e))return Ve(NL),{pending:nd(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Hi(i.spatialReference,e)?i:bs(i.spatialReference)&&bs(e)?hw(i,e):null)}}let zW=class extends j{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function o0e(){xb=null,Wp=null,Zp=null,qu=null,PC={}}const a0e={get loadPromise(){return xb}};function hw(t,e){try{const i=Ec(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=LW(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof zW))throw i;return null}}async function jW(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await DL(r,e,null,i),hw(t,e)}function ia(t,e,i){return!(i!=null&&i.areaOfInterestExtent||i!=null&&i.extendedParams||i!=null&&i.geographicTransformation)&&(!!Hi(t,e)||bs(t)&&bs(e)&&!!PW(t,e))}function l0e(t,e){if(Hi(t,e))return!0;if(!bs(t)||!bs(e))return!1;const i=wh(t)||el(t)||FD(t),r=wh(e)||el(e)||FD(e);return i&&r}async function DL(t,e,i,r){if(Ic())return u5(r);if(Array.isArray(t)){for(const{source:n,dest:s,options:o}of t)if(n&&s&&!ia(n,s,o))return nd(r)}else if(t&&e&&!ia(t,e,i))return nd(r);return u5(r)}function eS(t,e,i){return t?"x"in t?VW(t,e,new ze,i,0):"xmin"in t?HW(t,e,new Ke,i,0):"rings"in t?GW(t,e,new ei,i,0):"paths"in t?qW(t,e,new hi,i,0):"points"in t?UW(t,e,new Gs,i,0):null:null}function c0e(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&VW(t,t.spatialReference,e,i,r)!=null}function VW(t,e,i,r,n){Lr[0]=t.x,Lr[1]=t.y;const s=t.z;return Lr[2]=s!==void 0?s:n,d1(Lr,e,0,Lr,r,0)?(i.x=Lr[0],i.y=Lr[1],i.spatialReference=r,s!==void 0||rd(r)?(i.z=Lr[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function u0e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&UW(t,t.spatialReference,e,i,r)!=null}function UW(t,e,i,r,n){const{points:s,hasZ:o,hasM:a}=t,c=[],d=s.length,h=[];for(const m of s)h.push(m[0],m[1],o?m[2]:n);if(!d1(h,e,0,h,r,0,d))return null;const f=o||rd(r);for(let m=0;m<d;++m){const v=3*m,w=h[v],x=h[v+1];f&&a?c.push([w,x,h[v+2],s[m][3]]):f?c.push([w,x,h[v+2]]):a?c.push([w,x,s[m][2]]):c.push([w,x])}return i.points=c,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function d0e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&qW(t,t.spatialReference,e,i,r)!=null}function qW(t,e,i,r,n){const{paths:s,hasZ:o,hasM:a}=t,c=[];if(!WW(s,o??!1,a??!1,e,c,r,n))return null;const d=o||rd(r);return i.paths=c,i.spatialReference=r,i.hasZ=d,i.hasM=a,i}function BW(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&GW(t,t.spatialReference,e,i,r)!=null}function GW(t,e,i,r,n){const{rings:s,hasZ:o,hasM:a}=t,c=[];if(!WW(s,o??!1,a??!1,e,c,r,n))return null;const d=o||rd(r);return i.rings=c,i.spatialReference=r,i.hasZ=d,i.hasM=a,i}function p0e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&HW(t,t.spatialReference,e,i,r)!=null}function HW(t,e,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:c,hasZ:d,hasM:h}=t,f=d?t.zmin:n;if(!Fz(s,o,f,e,Lr,r))return null;const m=d||rd(r);i.xmin=Lr[0],i.ymin=Lr[1],m&&(i.zmin=Lr[2]);const v=d?t.zmax:n;return Fz(a,c,v,e,Lr,r)?(i.xmax=Lr[0],i.ymax=Lr[1],m&&(i.zmax=Lr[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function WW(t,e,i,r,n,s,o=0){const a=new Array;for(const h of t)for(const f of h)a.push(f[0],f[1],e?f[2]:o);if(!d1(a,r,0,a,s,0))return!1;let c=0;n.length=0;const d=e||rd(s);for(const h of t){const f=new Array;for(const m of h)d&&i?f.push([a[c++],a[c++],a[c++],m[3]]):d?f.push([a[c++],a[c++],a[c++]]):i?(f.push([a[c++],a[c++],m[2]]),c++):(f.push([a[c++],a[c++]]),c++);n.push(f)}return!0}const Lr=dd(),Q6e=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:ia,initializeProjection:DL,isEqualBaseGCS:l0e,isLoaded:Ic,isLoadedOrLoad:FW,isLoadedOrLoadFor:NW,load:nd,project:Ec,projectExtent:p0e,projectMany:RC,projectMultipoint:u0e,projectOrLoad:s0e,projectOrLoadMany:DW,projectPoint:c0e,projectPolygon:BW,projectPolyline:d0e,projectWithZConversion:jW,projectWithoutEngine:eS,requiresLoad:r0e,test:a0e,tryProjectWithZConversion:hw,unload:o0e},Symbol.toStringTag,{value:"Module"}));async function h0e(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Pm(t);const i=me.WGS84;return await DL(e,i),Ec(t,i)}function f0e(t,e){if(!zL(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function zL(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function X6e(t){return zL(t,jL.HOSTED_SERVICE)}function m0e(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function eVe(t,e,i){i?f0e(t,e):m0e(t,e)}async function tVe(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return h0e(i)}const jL={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function g0e(t){var c;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(c=e.user)==null?void 0:c.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const ZW=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Ot(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}get portalItem(){return this._get("portalItem")}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,n,s){if(n.itemId)return new Ge({id:n.itemId,portal:s==null?void 0:s.portal})}writePortalItem(r,n){r!=null&&r.id&&(n.itemId=r.id)}async loadFromPortal(r,n){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:o}=await Q(()=>import("./layersLoader-X5WNrsxC.js"),__vite__mapDeps([41,33,34,32]),import.meta.url);return Lt(n),await o({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},n)}catch(o){throw hr(o)||ie.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${o}`),o}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(n=>(Ho(n),!0)))}async setUserPrivileges(r,n){if(!Qe.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:s,fullEdit:o},content:{updateItem:a}}=await this._fetchUserPrivileges(r,n);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",a)}catch(s){Ho(s)}}async _fetchUserPrivileges(r,n){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(n);const o=!(We!=null&&We.findCredential(this.url)),a=r===s.id;if(a&&s.portal.user)return this._getUserPrivileges(s,o);let c,d;if(a)c=s.portal.url;else try{c=await RL(this.url,n)}catch(v){Ho(v)}if(!c||!bce(c,s.portal.url))return this._fetchFallbackUserPrivileges(n);try{const v=n!=null?n.signal:null;d=await(We==null?void 0:We.getCredential(`${c}/sharing`,{prompt:!1,signal:v}))}catch(v){Ho(v)}const h=!0,f=!1,m=!1;if(!d)return{features:{edit:h,fullEdit:f},content:{updateItem:m}};try{if(a?await s.reload():(s=new Ge({id:r,portal:{url:c}}),await s.load(n)),s.portal.user)return this._getUserPrivileges(s,o)}catch(v){Ho(v)}return{features:{edit:h,fullEdit:f},content:{updateItem:m}}}_getUserPrivileges(r,n){const s=g0e(r);return n&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(r){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(r)}catch(s){Ho(s)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const n=this.url?We==null?void 0:We.findCredential(this.url):null;if(!n)return!0;const s=f_.credential===n?f_.user:await this._fetchEditingUser(r);return f_.credential=n,f_.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var f,m;const n=(m=(f=this.portalItem)==null?void 0:f.portal)==null?void 0:m.user;if(n)return n;const s=We==null?void 0:We.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const o=`${s.owningSystemUrl}/sharing/rest`,a=ce.getDefault();if(a&&a.loaded&&Qo(a.restUrl)===Qo(o))return a.user;const c=`${o}/community/self`,d=r!=null?r.signal:null,h=await PL(Ft(c,{authMode:"no-prompt",query:{f:"json"},signal:d}));return h.ok?It.fromJSON(h.value.data):null}read(r,n){n&&(n.layer=this),super.read(r,n)}write(r,n){var a;const s=n==null?void 0:n.portal,o=((a=this.portalItem)==null?void 0:a.id)&&(this.portalItem.portal||ce.getDefault());return s&&o&&!vB(o.restUrl,s.restUrl)?(n.messages&&n.messages.push(new j("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...n,layer:this})}};return l([u({type:Ge})],i.prototype,"portalItem",null),l([oe("web-document","portalItem",["itemId"])],i.prototype,"readPortalItem",null),l([le("web-document","portalItem",{itemId:{type:String}})],i.prototype,"writePortalItem",null),l([u({clonable:!1})],i.prototype,"resourceReferences",void 0),l([u({type:Boolean,readOnly:!0})],i.prototype,"userHasEditingPrivileges",void 0),l([u({type:Boolean,readOnly:!0})],i.prototype,"userHasFullEditingPrivileges",void 0),l([u({type:Boolean,readOnly:!0})],i.prototype,"userHasUpdateItemPrivileges",void 0),i=l([E("esri.layers.mixins.PortalLayer")],i),i},f_={credential:null,user:null},Cu=new de,Sb=new WeakMap;function y0e(t){b0e(t)&&Cu.push(new WeakRef(t))}function v0e(t){const e=Cu.find(i=>i.deref()===t);e&&Cu.remove(e)}function b0e(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function JW(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:JW(e,t%e):0}let YE=0,m_=0;function w0e(){const t=Date.now();let e=!1;for(const i of Cu){const r=i.deref();r?r.refreshInterval&&t-(Sb.get(r)??0)+5>=6e4*r.refreshInterval&&(Sb.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=Cu.length-1;i>=0;i--)Cu.at(i).deref()||Cu.removeAt(i)}w9(()=>{const t=Date.now();let e=0;for(const i of Cu){const r=i.deref();r&&(e=JW(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?Sb.get(r)||Sb.set(r,t):Sb.delete(r))}if(e!==m_){if(m_=e,clearInterval(YE),m_===0)return void(YE=0);YE=setInterval(w0e,m_)}},pr);const Nz=.1,YW=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Tk(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||y0e(this)},()=>{})}destroy(){v0e(this)}castRefreshInterval(r){return r>=Nz?r:r<=0?0:Nz}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){Wb(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:n})},n=>{ie.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}get test(){}};return l([u({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:jt}}}}})],i.prototype,"refreshInterval",void 0),l([ti("refreshInterval")],i.prototype,"castRefreshInterval",null),l([u({readOnly:!0})],i.prototype,"refreshTimestamp",void 0),l([u({readOnly:!0})],i.prototype,"refreshParameters",null),i=l([E("esri.layers.mixins.RefreshableLayer")],i),i},KW=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;(n==null?void 0:n.effectiveScaleRange)!==void 0&&_0e(r,n.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return l([u({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minScale",void 0),l([u({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxScale",void 0),l([u({readOnly:!0})],i.prototype,"effectiveScaleRange",null),i=l([E("esri.layers.mixins.ScaleRangeLayer")],i),i};function _0e(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const VL=Wi()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Xs=class extends Pe(Z){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return XH(this.value,this.unit,"milliseconds")}};l([Ie(VL,{nonNullable:!0})],Xs.prototype,"unit",void 0),l([u({type:Number,json:{write:!0},nonNullable:!0})],Xs.prototype,"value",void 0),Xs=l([E("esri.time.TimeInterval")],Xs);function Dz(t,e){return Xs.fromJSON({value:t,unit:e})}let ar=class extends Pe(Z){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?xt.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?Dz(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?Dz(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};l([u({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ar.prototype,"cumulative",void 0),l([u({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ar.prototype,"endField",void 0),l([u({type:xt,json:{write:{enabled:!0,allowNull:!0}}})],ar.prototype,"fullTimeExtent",void 0),l([oe("fullTimeExtent",["timeExtent"])],ar.prototype,"readFullTimeExtent",null),l([le("fullTimeExtent")],ar.prototype,"writeFullTimeExtent",null),l([u({type:Boolean,json:{write:!0}})],ar.prototype,"hasLiveData",void 0),l([u({type:Xs,json:{write:{enabled:!0,allowNull:!0}}})],ar.prototype,"interval",void 0),l([oe("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ar.prototype,"readInterval",null),l([le("interval")],ar.prototype,"writeInterval",null),l([u({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ar.prototype,"startField",void 0),l([u(S$("timeReference",!0))],ar.prototype,"timeZone",void 0),l([u({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ar.prototype,"trackIdField",void 0),l([u({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ar.prototype,"useTime",void 0),l([u({type:[Date],json:{read:!1}})],ar.prototype,"stops",void 0),ar=l([E("esri.layers.support.TimeInfo")],ar);const x0e={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:jt}}},QW=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,n){const s=n.timeInfo.exportOptions;if(!s)return null;const o=s.timeOffset,a=VL.fromJSON(s.timeOffsetUnits);return o&&a?new Xs({value:o,unit:a}):null}get timeInfo(){return this._get("timeInfo")}set timeInfo(r){tq(r,this.fieldsIndex),this._set("timeInfo",r)}};return l([u({type:xt,json:{write:!1}})],i.prototype,"timeExtent",void 0),l([u({type:Xs})],i.prototype,"timeOffset",void 0),l([oe("service","timeOffset",["timeInfo.exportOptions"])],i.prototype,"readOffset",null),l([u({value:null,type:ar,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],i.prototype,"timeInfo",null),l([u(x0e)],i.prototype,"useViewTime",void 0),i=l([E("esri.layers.mixins.TemporalLayer")],i),i},S0e=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function XW(t){return t!=null&&S0e.some(([e,i])=>t>=e&&t<=i)}const $0e={visible:"visibleSublayers"};let Hl=class extends Se{constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",i=>this.notifyChange($0e[i.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:i}=this,r=e==null?void 0:e.sublayers,n=[],s=o=>{const{minScale:a,maxScale:c,sublayers:d,visible:h}=o;h&&(i===0||(a===0||i<=a)&&(c===0||i>=c))&&(d?d.forEach(s):n.push(o))};return r==null||r.forEach(s),n}toJSON(){const{layer:e,layers:i}=this,{imageFormat:r,imageTransparency:n,version:s}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:n?"TRUE":"FALSE",version:s,layers:i}}};l([u()],Hl.prototype,"layer",null),l([u({readOnly:!0})],Hl.prototype,"layers",null),l([u({type:Number})],Hl.prototype,"scale",void 0),l([u({readOnly:!0})],Hl.prototype,"version",null),l([u({readOnly:!0})],Hl.prototype,"visibleSublayers",null),Hl=l([E("esri.layers.support.ExportWMSImageParameters")],Hl);async function T0e(t,e,i){let r;try{r=await createImageBitmap(t)}catch(n){throw new j("request:server",`Unable to load ${e}`,{url:e,error:n})}return Lt(i),r}async function sVe(t,e,i,r,n){let s;try{s=await createImageBitmap(t)}catch(o){throw new j("request:server",`Unable to load tile ${e}/${i}/${r}`,{error:o,level:e,row:i,col:r})}return Lt(n),s}var tS;let k0e=0,Yt=tS=class extends cd(FH){constructor(t){super(t),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.spatialReferences=null,this.title=null,this.addHandles([Wn(()=>this.sublayers,"after-add",({item:e})=>{e.parent=this,e.layer=this.layer},pr),Wn(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},pr),ve(()=>this.sublayers,(e,i)=>{if(i)for(const r of i)r.layer=r.parent=null;if(e)for(const r of e)r.parent=this,r.layer=this.layer},pr),ve(()=>this.layer,e=>{if(this.sublayers)for(const i of this.sublayers)i.layer=e},pr)])}get id(){return this._get("id")??k0e++}set id(t){this._set("id",t)}readLegendUrl(t,e){return e.legendUrl??e.legendURL??null}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}get sublayers(){return this._get("sublayers")}set sublayers(t){this._set("sublayers",t)}castSublayers(t){return gi(de.ofType(tS),t)}set visible(t){this._setAndNotifyLayer("visible",t)}clone(){var e,i,r;const t=new tS;return this.hasOwnProperty("description")&&(t.description=this.description),this.hasOwnProperty("fullExtent")&&(t.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(t.fullExtents=((e=this.fullExtents)==null?void 0:e.map(n=>n.clone()))??null),this.hasOwnProperty("legendUrl")&&(t.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(t.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(t.layer=this.layer),this.hasOwnProperty("name")&&(t.name=this.name),this.hasOwnProperty("parent")&&(t.parent=this.parent),this.hasOwnProperty("queryable")&&(t.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(t.sublayers=(i=this.sublayers)==null?void 0:i.map(n=>n.clone())),this.hasOwnProperty("spatialReferences")&&(t.spatialReferences=(r=this.spatialReferences)==null?void 0:r.map(n=>n)),this.hasOwnProperty("visible")&&(t.visible=this.visible),this.hasOwnProperty("title")&&(t.title=this.title),t}_setAndNotifyLayer(t,e){const i=this.layer;this._get(t)!==e&&(this._set(t,e),i&&i.emit("wms-sublayer-update",{propertyName:t,id:this.id}))}};l([u()],Yt.prototype,"description",void 0),l([u({readOnly:!0})],Yt.prototype,"dimensions",void 0),l([u({type:Ke,json:{name:"extent"}})],Yt.prototype,"fullExtent",void 0),l([u()],Yt.prototype,"fullExtents",void 0),l([u({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],Yt.prototype,"id",null),l([u({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],Yt.prototype,"legendUrl",void 0),l([oe("legendUrl",["legendUrl","legendURL"])],Yt.prototype,"readLegendUrl",null),l([u({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],Yt.prototype,"legendEnabled",void 0),l([u()],Yt.prototype,"layer",void 0),l([u()],Yt.prototype,"maxScale",void 0),l([u()],Yt.prototype,"minScale",void 0),l([u({readOnly:!0})],Yt.prototype,"effectiveScaleRange",null),l([u({type:String,json:{write:{ignoreOrigin:!0}}})],Yt.prototype,"name",void 0),l([u()],Yt.prototype,"parent",void 0),l([u({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],Yt.prototype,"popupEnabled",void 0),l([u({type:Boolean,json:{write:{ignoreOrigin:!0}}})],Yt.prototype,"queryable",void 0),l([u()],Yt.prototype,"sublayers",null),l([ti("sublayers")],Yt.prototype,"castSublayers",null),l([u({type:[Number],json:{read:{source:"spatialReferences"}}})],Yt.prototype,"spatialReferences",void 0),l([u({type:String,json:{write:{ignoreOrigin:!0}}})],Yt.prototype,"title",void 0),l([u({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],Yt.prototype,"visible",null),Yt=tS=l([E("esri.layers.support.WMSSublayer")],Yt);const zz={84:4326,83:4269,27:4267};function I0e(t){if(!t)return null;const e={idCounter:-1};typeof t=="string"&&(t=new DOMParser().parseFromString(t,"text/xml"));const i=t.documentElement;if(i.nodeName==="ServiceExceptionReport"){const we=Array.prototype.slice.call(i.childNodes).map(Oe=>Oe.textContent).join(`\r
`);throw new j("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",we)}const r=jr("Capability",i),n=jr("Service",i),s=r&&jr("Request",r);if(!r||!n||!s)return null;const o=jr("Layer",r);if(!o)return null;const a=i.nodeName==="WMS_Capabilities"||i.nodeName==="WMT_MS_Capabilities"?i.getAttribute("version"):"1.3.0",c=Da("Title",n,"")||Da("Name",n,""),d=Da("AccessConstraints",n,""),h=/^none$/i.test(d)?"":d,f=Da("Abstract",n,""),m=parseInt(Da("MaxWidth",n,"5000"),10),v=parseInt(Da("MaxHeight",n,"5000"),10),w=Vz(s,"GetMap"),x=jz(s,"GetMap"),$=Tv(o,a,e);if(!$)return null;let T,C=0;const P=Array.prototype.slice.call(r.childNodes),L=$.sublayers??[],D=we=>{we!=null&&L.push(we)};P.forEach(we=>{we.nodeName==="Layer"&&(C===0?T=we:(C===1&&$.name&&($.name="",D(Tv(T,a,e))),D(Tv(we,a,e))),C++)});const q=$.sublayers??[],F=$.fullExtents??[];q.length===0&&q.push($),$.extent??($.extent=q[0].extent);const ee=$.spatialReferences.length>0?$.spatialReferences:eZ($),ae=jz(s,"GetFeatureInfo"),ne=ae?Vz(s,"GetFeatureInfo"):null,ue=tZ(q),X=$.minScale||0,J=$.maxScale||0,H=$.dimensions??[],ge=ue.reduce((we,Oe)=>we.concat(Oe.dimensions??[]),[]),be=H.concat(ge).filter(rZ);let Ee=null;if(be.length){const we=be.map(Tt=>{const{extent:Ci}=Tt;return A0e(Ci)?Ci.map(xr=>xr.getTime()):Ci==null?void 0:Ci.map(xr=>[xr.min.getTime(),xr.max.getTime()])}).flat(2).filter(_r),{start:Oe,end:yt}=we.reduce((Tt,Ci)=>({start:Math.min(Tt.start,Ci),end:Math.max(Tt.end,Ci)}),{start:1/0,end:-1/0});Ee={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Oe,yt]}}return{copyright:h,description:f,dimensions:H,extent:$.extent,fullExtents:F,featureInfoFormats:ne,featureInfoUrl:ae,mapUrl:x,maxWidth:m,maxHeight:v,maxScale:J,minScale:X,layers:ue,spatialReferences:ee,supportedImageFormatTypes:w,timeInfo:Ee,title:c,version:a}}function E0e(t){const e=t.filter(i=>i.popupEnabled&&i.name&&i.queryable);return e.length?e.map(({name:i})=>i).join():null}function eZ(t){if(t.spatialReferences.length>0)return t.spatialReferences;if(t.sublayers)for(const e of t.sublayers){const i=eZ(e);if(i.length>0)return i}return[]}function tZ(t){var i;let e=[];for(const r of t)e.push(r),(i=r.sublayers)!=null&&i.length&&(e=e.concat(tZ(r.sublayers)),delete r.sublayers);return e}function iS(t,e,i){return e.getAttribute(t)??i}function M0e(t,e,i,r){const n=jr(t,i);return n?iS(e,n,r):r}function jr(t,e){for(let i=0;i<e.childNodes.length;i++){const r=e.childNodes[i];if(iZ(r)&&r.nodeName===t)return r}return null}function rS(t,e){if(e==null)return[];const i=[];for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes[r];iZ(n)&&n.nodeName===t&&i.push(n)}return i}function Da(t,e,i){var r;return((r=jr(t,e))==null?void 0:r.textContent)??i}function KE(t,e,i){const r=parseFloat(t.getAttribute("minx")??"0"),n=parseFloat(t.getAttribute("miny")??"0"),s=parseFloat(t.getAttribute("maxx")??"0"),o=parseFloat(t.getAttribute("maxy")??"0");return{xmin:i?isNaN(n)?-Number.MAX_VALUE:n:isNaN(r)?-Number.MAX_VALUE:r,ymin:i?isNaN(r)?-Number.MAX_VALUE:r:isNaN(n)?-Number.MAX_VALUE:n,xmax:i?isNaN(o)?Number.MAX_VALUE:o:isNaN(s)?Number.MAX_VALUE:s,ymax:i?isNaN(s)?Number.MAX_VALUE:s:isNaN(o)?Number.MAX_VALUE:o,spatialReference:{wkid:e}}}function jz(t,e){const i=jr(e,t);if(i){const r=jr("DCPType",i);if(r){const n=jr("HTTP",r);if(n){const s=jr("Get",n);if(s){let o=M0e("OnlineResource","xlink:href",s,null);if(o){const a=o.indexOf("&");return a!==-1&&a===o.length-1&&(o=o.slice(0,-1)),O0e(o,["service","request"])}}}}}return null}function Vz(t,e){const i=rS("Operation",t);if(!i.length)return rS("Format",jr(e,t)).map(({textContent:n})=>n).filter(_r);const r=[];for(const n of i)if(n.getAttribute("name")===e){const s=rS("Format",n);for(const{textContent:o}of s)o!=null&&r.push(o)}return r}function Uz(t,e,i){const r=jr(e,t);if(!r)return i;const{textContent:n}=r;if(n==null||n==="")return i;const s=Number(n);return isNaN(s)?i:s}function Tv(t,e,i){var h;if(!t)return null;const r=(h=t.getAttribute("queryable"))==null?void 0:h.toLowerCase(),n=r==="1"||r==="true",s={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:n,spatialReferences:[],sublayers:null},o=jr("LatLonBoundingBox",t),a=jr("EX_GeographicBoundingBox",t),c=o?KE(o,4326):a?{xmin:parseFloat(Da("westBoundLongitude",a,"0")),ymin:parseFloat(Da("southBoundLatitude",a,"0")),xmax:parseFloat(Da("eastBoundLongitude",a,"0")),ymax:parseFloat(Da("northBoundLatitude",a,"0")),spatialReference:{wkid:4326}}:{xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:{wkid:4326}};s.minScale=Uz(t,"MaxScaleDenominator",0),s.maxScale=Uz(t,"MinScaleDenominator",0);const d=["1.0.0","1.1.0","1.1.1"].includes(e)?"SRS":"CRS";return Array.prototype.slice.call(t.childNodes).forEach(f=>{var m;if(f.nodeName==="Name")s.name=f.textContent||"";else if(f.nodeName==="Title")s.title=f.textContent||"";else if(f.nodeName==="Abstract")s.description=f.textContent||"";else if(f.nodeName==="BoundingBox"){const v=f.getAttribute(d),w=v==null?void 0:v.indexOf(":");if(w&&w>-1){let x=parseInt(v.slice(w+1),10);x===0||isNaN(x)||(x=zz[x]??x);const $=e==="1.3.0"?KE(f,x,XW(x)):KE(f,x);$&&s.fullExtents&&s.fullExtents.push($)}}else if(f.nodeName===d)(((m=f.textContent)==null?void 0:m.split(" "))??[]).forEach(v=>{let w=NaN;if(v.includes(":")){const[x,$]=v.toUpperCase().split(":");x!=="CRS"&&x!=="EPSG"||(w=parseInt($,10))}else w=parseInt(v,10);if(w!==0&&!isNaN(w)){const x=zz[w]??w;s.spatialReferences.includes(x)||s.spatialReferences.push(x)}});else if(f.nodeName!=="Style"||s.legendUrl){if(f.nodeName==="Layer"){const v=Tv(f,e,i);v&&(v.parentLayerId=s.id,s.sublayers||(s.sublayers=[]),s.sublayers.push(v))}}else{const v=jr("LegendURL",f);if(v){const w=jr("OnlineResource",v);w&&(s.legendUrl=w.getAttribute("xlink:href"))}}}),s.extent=c,s.dimensions=rS("Dimension",t).filter(f=>f.getAttribute("name")&&f.getAttribute("units")&&f.textContent).map(f=>{const m=f.getAttribute("name"),v=f.getAttribute("units"),w=f.textContent,x=f.getAttribute("unitSymbol")??void 0,$=f.getAttribute("default")??void 0,T=iS("default",f,"0")!=="0",C=iS("nearestValue",f,"0")!=="0",P=iS("current",f,"0")!=="0";return rZ({name:m,units:v})?{name:"time",units:"ISO8601",extent:Gz(w),default:Gz($),multipleValues:T,nearestValue:C,current:P}:C0e({name:m,units:v})?{name:"elevation",units:v,extent:qz(w),unitSymbol:x,default:qz($),multipleValues:T,nearestValue:C}:{name:m,units:v,extent:Bz(w),unitSymbol:x,default:Bz($),multipleValues:T,nearestValue:C}}),s}function A0e(t){return Array.isArray(t)&&t.length>0&&t[0]instanceof Date}function iZ(t){return t.nodeType===Node.ELEMENT_NODE}function C0e(t){return/^elevation$/i.test(t.name)&&/^(epsg|crs):\d+$/i.test(t.units)}function rZ(t){return/^time$/i.test(t.name)&&/^iso8601$/i.test(t.units)}function O0e(t,e){const i=[],r=zi(t);for(const n in r.query)r.query.hasOwnProperty(n)&&(e.includes(n.toLowerCase())||i.push(n+"="+r.query[n]));return r.path+(i.length?"?"+i.join("&"):"")}function qz(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const n=r.split("/");return n.length<2?null:{min:parseFloat(n[0]),max:parseFloat(n[1]),resolution:n.length>=3&&n[2]!=="0"?parseFloat(n[2]):void 0}}).filter(_r):i.map(r=>parseFloat(r))}function Bz(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const n=r.split("/");return n.length<2?null:{min:n[0],max:n[1],resolution:n.length>=3&&n[2]!=="0"?n[2]:void 0}}).filter(_r):i}function Gz(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const n=r.split("/");return n.length<2?null:{min:QE(n[0]),max:QE(n[1]),resolution:n.length>=3&&n[2]!=="0"?P0e(n[2]):void 0}}).filter(_r):i.map(r=>QE(r))}function QE(t){return Te.fromISO(t,{zone:Di.utcInstance}).toJSDate()}function P0e(t){const e=/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i,i=t.match(e);return i?{years:sf(i[1]),months:sf(i[2]),days:sf(i[3]),hours:sf(i[4]),minutes:sf(i[5]),seconds:sf(i[6])}:null}function sf(t){if(!t)return 0;const e=/(?:\d+(?:\.|,)\d+|\d+)/,i=t.match(e);if(!i)return 0;const r=i[0].replace(",",".");return Number(r)}function XE(t){return t.toISOString().replace(/\.[0-9]{3}/,"")}const R0e="0000-01-01T00:00:00Z",L0e="9999-12-31T23:59:59Z";function Hz(t){if(!t||t.isAllTime||t.isEmpty)return;const{start:e,end:i}=t;return e&&i&&e.getTime()===i.getTime()?`${XE(e)}`:`${e?XE(e):R0e}/${i?XE(i):L0e}`}const Wz=new Set([102100,3857,102113,900913]),F0e=new Set([3395,54004]);function N0e(t,e){let i=t.wkid;return e==null?i:(i!=null&&e.includes(i)||!t.latestWkid||(i=t.latestWkid),i!=null&&Wz.has(i)?e.find(r=>Wz.has(r))||e.find(r=>F0e.has(r))||102100:i)}const e2=new Ze({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function Zz(t){return t==="text/html"}function Jz(t){return t==="text/plain"}let lt=class extends bW(QW(YW(KW(EW(ZW(l1(Qt))))))){constructor(...e){super(...e),this.allSublayers=new Th({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([Wn(()=>this.sublayers,"after-add",({item:i})=>{i.parent=i.layer=this},pr),Wn(()=>this.sublayers,"after-remove",({item:i})=>{i.layer=i.parent=null},pr),ve(()=>this.sublayers,(i,r)=>{if(r)for(const n of r)n.layer=n.parent=null;if(i)for(const n of i)n.parent=n.layer=this},pr)])}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}destroy(){this.allSublayers.destroy()}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},e).catch(Ho).then(()=>this._fetchService(i)).then(()=>this._checkLayerValidity())),Promise.resolve(this)}get timeInfo(){return super.timeInfo}set timeInfo(e){super.timeInfo=e}readFullExtentFromItemOrMap(e,i){const r=i.extent;return r?new Ke({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(e,i){i.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}get featureInfoFormat(){return this.featureInfoFormats==null?null:this.featureInfoFormats.find(Zz)??this.featureInfoFormats.find(Jz)??null}set featureInfoFormat(e){e==null?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):(Zz(e)||Jz(e))&&this._override("featureInfoFormat",e)}readImageFormat(e,i){const r=i.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,i){return new me(i.spatialReferences[0])}writeSpatialReferences(e,i){var n;const r=(n=this.spatialReference)==null?void 0:n.wkid;e&&r?(i.spatialReferences=e.filter(s=>s!==r),i.spatialReferences.unshift(r)):i.spatialReferences=e}readSublayersFromItemOrMap(e,i,r){return Yz(i.layers,r,i.visibleLayers)}readSublayers(e,i,r){return Yz(i.layers,r)}writeSublayers(e,i,r,n){var a,c;i.layers=[];const s=new Map,o=e.flatten(({sublayers:d})=>d??[]);for(const d of o)if(typeof((a=d.parent)==null?void 0:a.id)=="number"){const h=s.get(d.parent.id);h!=null?h.push(d.id):s.set(d.parent.id,[d.id])}for(const d of o){const h={sublayer:d,...n},f=d.write({parentLayerId:typeof((c=d.parent)==null?void 0:c.id)=="number"?d.parent.id:-1},h);if(s.has(d.id)&&(f.sublayerIds=s.get(d.id)),!d.sublayers&&d.name){const m=d.write({},h);delete m.id,i.layers.push(m)}}i.visibleLayers=o.filter(({visible:d,sublayers:h})=>d&&!h).map(({name:d})=>d).toArray()}set url(e){if(!e)return void this._set("url",e);const{path:i,query:r}=zi(e);for(const s in r)/^(request|service)$/i.test(s)&&delete r[s];const n=db(i,r??{});this._set("url",n)}createExportImageParameters(e,i,r,n){const s=(n==null?void 0:n.pixelRatio)??1,o=hz({extent:e,width:i})*s,a=new Hl({layer:this,scale:o}),{xmin:c,ymin:d,xmax:h,ymax:f,spatialReference:m}=e,v=N0e(m,this.spatialReferences),w=this.version==="1.3.0"&&XW(v)?`${d},${c},${f},${h}`:`${c},${d},${h},${f}`,x=a.toJSON(),$=this.version==="1.3.0"?"crs":"srs";return{bbox:w,[$]:v==null||isNaN(v)?void 0:"EPSG:"+v,...x}}async fetchImage(e,i,r,n){const s=this.mapUrl,o=this.createExportImageParameters(e,i,r,n);if(!o.layers){const d=document.createElement("canvas");return d.width=i,d.height=r,d}const a=Hz(n==null?void 0:n.timeExtent),c={responseType:"image",query:this._mixCustomParameters({width:i,height:r,...o,time:a,...this.refreshParameters}),signal:n==null?void 0:n.signal};return Ft(s??"",c).then(d=>d.data)}async fetchImageBitmap(e,i,r,n){const s=this.mapUrl??"",o=this.createExportImageParameters(e,i,r,n);if(!o.layers){const h=document.createElement("canvas");return h.width=i,h.height=r,h}const a=Hz(n==null?void 0:n.timeExtent),c={responseType:"blob",query:this._mixCustomParameters({width:i,height:r,...o,time:a,...this.refreshParameters}),signal:n==null?void 0:n.signal},{data:d}=await Ft(s,c);return T0e(d,s,n==null?void 0:n.signal)}fetchFeatureInfo(e,i,r,n,s){const o=hz({extent:e,width:i}),a=new Hl({layer:this,scale:o}),c=E0e(a.visibleSublayers);if(this.featureInfoUrl==null||c==null)return Promise.resolve([]);if(this.fetchFeatureInfoFunction==null&&this.featureInfoFormat==null)return Promise.resolve([]);const d=this.version==="1.3.0"?{I:n,J:s}:{x:n,y:s},h={query_layers:c,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:i,height:r,...d},f={...this.createExportImageParameters(e,i,r),...h},m=this._mixCustomParameters(f);return this.fetchFeatureInfoFunction!=null?this.fetchFeatureInfoFunction(m):this._defaultFetchFeatureInfoFunction(db(this.featureInfoUrl,m))}findSublayerById(e){return this.allSublayers.find(i=>i.id===e)}findSublayerByName(e){return this.allSublayers.find(i=>i.name===e)}serviceSupportsSpatialReference(e){return Kce(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(i=>{const r=i===900913?me.WebMercator:new me({wkid:i});return Hi(r,e)})}_defaultFetchFeatureInfoFunction(e){const i=document.createElement("iframe");i.src=yce(IL.sanitizeUrl(Vn(e))),i.style.border="none",i.style.margin="0",i.style.width="100%",i.setAttribute("sandbox","");const r=new Rh({title:this.title,content:i}),n=new qt({sourceLayer:this,popupTemplate:r});return Promise.resolve([n])}async _fetchService(e){var i;if(!this.resourceInfo&&((i=this.parsedUrl)!=null&&i.path)){const{path:r,query:n}=this.parsedUrl,{data:s}=await Ft(r,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...n,...this.customParameters},responseType:"xml",signal:e});this.resourceInfo=I0e(s)}if(this.parsedUrl){const r=new Uu(this.parsedUrl.path),{httpsDomains:n}=Qe.request;r.scheme!=="https"||r.port&&r.port!=="443"||!r.host||n.includes(r.host)||n.push(r.host)}this.read(this.resourceInfo,{origin:"service"})}_checkLayerValidity(){if(!this.allSublayers.length)throw new j("wmslayer:empty-layer","The layer doesn't have any sublayer")}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const i={...this.customParameters,...this.customLayerParameters};for(const r in i)e[r.toLowerCase()]=i[r];return e}};function D0e(t,e){return t.some(i=>{for(const r in i)if(H9(i,r,null,e))return!0;return!1})}function Yz(t,e,i){t=t??[];const r=new Map;t.every(s=>s.id==null)&&(t=V(t)).forEach((s,o)=>s.id=o);for(const s of t){const o=new Yt;o.read(s,e),i&&!i.includes(o.name)&&(o.visible=!1),r.set(o.id,o)}const n=[];for(const s of t){const o=s.id!=null?r.get(s.id):null;if(o)if(s.parentLayerId!=null&&s.parentLayerId>=0){const a=r.get(s.parentLayerId);if(!a)continue;a.sublayers||(a.sublayers=new de),a.sublayers.push(o)}else n.push(o)}return n}l([u({type:xt})],lt.prototype,"timeExtent",void 0),l([u({type:Xs})],lt.prototype,"timeOffset",void 0),l([u({readOnly:!0})],lt.prototype,"allSublayers",void 0),l([u({json:{type:Object,write:!0}})],lt.prototype,"customParameters",void 0),l([u({json:{type:Object,write:!0}})],lt.prototype,"customLayerParameters",void 0),l([u({type:String,json:{write:!0}})],lt.prototype,"copyright",void 0),l([u()],lt.prototype,"description",void 0),l([u({readOnly:!0})],lt.prototype,"dimensions",void 0),l([u({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],lt.prototype,"fullExtent",void 0),l([oe(["web-document","portal-item"],"fullExtent",["extent"])],lt.prototype,"readFullExtentFromItemOrMap",null),l([le(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],lt.prototype,"writeFullExtent",null),l([u({type:[Ke]})],lt.prototype,"fullExtents",void 0),l([u({type:String,json:{write:{ignoreOrigin:!0}}})],lt.prototype,"featureInfoFormat",null),l([u({type:[String],readOnly:!0})],lt.prototype,"featureInfoFormats",void 0),l([u({type:String,json:{write:{ignoreOrigin:!0}}})],lt.prototype,"featureInfoUrl",void 0),l([u()],lt.prototype,"fetchFeatureInfoFunction",void 0),l([u({type:String,json:{origins:{"web-document":{default:"image/png",type:e2.jsonValues,read:{reader:e2.read,source:"format"},write:{writer:e2.write,target:"format"}}}}})],lt.prototype,"imageFormat",void 0),l([oe("imageFormat",["supportedImageFormatTypes"])],lt.prototype,"readImageFormat",null),l([u({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],lt.prototype,"imageMaxHeight",void 0),l([u({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],lt.prototype,"imageMaxWidth",void 0),l([u()],lt.prototype,"imageTransparency",void 0),l([u(TW)],lt.prototype,"legendEnabled",void 0),l([u({type:["show","hide","hide-children"]})],lt.prototype,"listMode",void 0),l([u({type:String,json:{write:{ignoreOrigin:!0}}})],lt.prototype,"mapUrl",void 0),l([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],lt.prototype,"isReference",void 0),l([u({type:["WMS"]})],lt.prototype,"operationalLayerType",void 0),l([u()],lt.prototype,"resourceInfo",void 0),l([u({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],lt.prototype,"spatialReference",void 0),l([oe(["web-document","portal-item"],"spatialReference",["spatialReferences"])],lt.prototype,"readSpatialReferenceFromItemOrDocument",null),l([u({type:[nt],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],lt.prototype,"spatialReferences",void 0),l([le(["web-document","portal-item"],"spatialReferences")],lt.prototype,"writeSpatialReferences",null),l([u({type:de.ofType(Yt),json:{write:{target:"layers",overridePolicy(t,e,i){if(D0e(this.allSublayers,i))return{ignoreOrigin:!0}}}}})],lt.prototype,"sublayers",void 0),l([oe(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],lt.prototype,"readSublayersFromItemOrMap",null),l([oe("service","sublayers",["layers"])],lt.prototype,"readSublayers",null),l([le("sublayers",{layers:{type:[Yt]},visibleLayers:{type:[String]}})],lt.prototype,"writeSublayers",null),l([u({json:{read:!1},readOnly:!0,value:"wms"})],lt.prototype,"type",void 0),l([u($W)],lt.prototype,"url",null),l([u({type:String,json:{write:{ignoreOrigin:!0}}})],lt.prototype,"version",void 0),lt=l([E("esri.layers.WMSLayer")],lt);const nZ=lt,aVe=Object.freeze(Object.defineProperty({__proto__:null,default:nZ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pt=yk(class extends vk{constructor(){super(...arguments),this.key=Je}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(sie(t),this.key=e),i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function z0e(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Ky=()=>z0e([2,1,1,1,3]);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var j0e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],LC=j0e.join(","),sZ=typeof Element>"u",fw=sZ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,V$=!sZ&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},U$=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},V0e=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},oZ=function(e,i,r){if(U$(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(LC));return i&&fw.call(e,LC)&&n.unshift(e),n=n.filter(r),n},aZ=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!U$(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),c=a.length?a:o.children,d=t(c,!0,r);r.flatten?n.push.apply(n,d):n.push({scopeParent:o,candidates:d})}else{var h=fw.call(o,LC);h&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!U$(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&m){var v=t(f===!0?o.children:f.children,!0,r);r.flatten?n.push.apply(n,v):n.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return n},lZ=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},cZ=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||V0e(e))&&!lZ(e)?0:e.tabIndex},U0e=function(e,i){var r=cZ(e);return r<0&&i&&!lZ(e)?0:r},q0e=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},uZ=function(e){return e.tagName==="INPUT"},B0e=function(e){return uZ(e)&&e.type==="hidden"},G0e=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},H0e=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},W0e=function(e){if(!e.name)return!0;var i=e.form||V$(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=H0e(n,e.form);return!s||s===e},Z0e=function(e){return uZ(e)&&e.type==="radio"},J0e=function(e){return Z0e(e)&&!W0e(e)},Y0e=function(e){var i,r=e&&V$(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,c;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!s&&n;){var d,h,f;r=V$(n),n=(d=r)===null||d===void 0?void 0:d.host,s=!!((h=n)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return s},Kz=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},K0e=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=fw.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(fw.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var c=e.parentElement,d=V$(e);if(c&&!c.shadowRoot&&n(c)===!0)return Kz(e);e.assignedSlot?e=e.assignedSlot:!c&&d!==e.ownerDocument?e=d.host:e=c}e=a}if(Y0e(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Kz(e);return!1},Q0e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return fw.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},FC=function(e,i){return!(i.disabled||U$(i)||B0e(i)||K0e(i,e)||G0e(i)||Q0e(i))},Qz=function(e,i){return!(J0e(i)||cZ(i)<0||!FC(e,i))},X0e=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},eve=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,c=U0e(a,o),d=o?t(n.candidates):a;c===0?o?i.push.apply(i,d):i.push(a):r.push({documentOrder:s,tabIndex:c,item:n,isScope:o,content:d})}),r.sort(q0e).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},tve=function(e,i){i=i||{};var r;return i.getShadowRoot?r=aZ([e],i.includeContainer,{filter:Qz.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:X0e}):r=oZ(e,i.includeContainer,Qz.bind(null,i)),eve(r)},ive=function(e,i){i=i||{};var r;return i.getShadowRoot?r=aZ([e],i.includeContainer,{filter:FC.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=oZ(e,i.includeContainer,FC.bind(null,i)),r};const UL={getShadowRoot:!0};function Bu(t){const e="dir",i=`[${e}]`,r=Qy(t,i);return r?r.getAttribute(e):"ltr"}function dI(t){return t.getRootNode()}function lVe(t){const e=dI(t);return"host"in e?e:null}function dZ(t){return t.host||null}function pI(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=dI(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||pI(dZ(r),{selector:e,id:i})}function Qy(t,e){return t?t.closest(e)||Qy(dZ(dI(t)),e):null}function rve(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function hI(t,e=!1,i="tabbable",r,n){return t?rve(t)&&r!==t?t.setFocus(n):(i==="tabbable"?sve:ave)(t,e,n):void 0}function nve(t,e){if(t)return tve(t,{...UL,includeContainer:e})[0]??t}function sve(t,e,i){var r;(r=nve(t,e))==null||r.focus(i)}function ove(t,e){if(t)return ive(t,{...UL,includeContainer:e})[0]??t}function ave(t,e,i){var r;(r=ove(t,e))==null||r.focus(i)}function lve(t,e){return t.filter(i=>i.matches(e))}function NC(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function Xz(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function qL(t){return(!!t).toString()}function cve(t){return mt(t)||pve(t)}function uve(t){return hve(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function dve(t){var e;for(const i of t.childNodes)if(i.nodeType===Node.TEXT_NODE&&((e=i.textContent)==null?void 0:e.trim())!==""||i.nodeType===Node.ELEMENT_NODE)return!0;return!1}function pve(t){return!!uve(t)}function hve(t){return t.currentTarget.assignedNodes({flatten:!0})}function mt(t){return!!fc(t).length}function fc(t,e){return fve(t.currentTarget,e)}function fve(t,e){const i=t.assignedElements({flatten:!0});return e?lve(i,e):i}function nS(t){return!!(t.isPrimary&&t.button===0)}function mve(t){return t.detail===0}const cVe=(t,e,i,r=!0,n=!0,s=!1)=>{const o=t.indexOf(e),a=o===0,c=o===t.length-1;r&&(i=i==="previous"&&a?"last":i==="next"&&c?"first":i);let d;return i==="previous"?d=t[o-1]||t[r?t.length-1:o]:i==="next"?d=t[o+1]||t[r?0:o]:i==="last"?d=t[t.length-1]:d=t[0],hI(d,n,"tabbable",s?d:void 0),d};function gve(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function uVe(t,e){return pZ(t,e,"animation")}async function yve(t,e){return pZ(t,e,"transition")}function ej(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(n=>n[r]===i)}async function pZ(t,e,i){let r=ej(t,i,e);if(r||(await vve(),r=ej(t,i,e)),!!r)try{await r.finished}catch{}}async function vve(){await new Promise(t=>requestAnimationFrame(()=>t()))}function of(t){return t.endsWith("px")?parseFloat(t):t.endsWith("vw")?tj(parseFloat(t),window.innerWidth):t.endsWith("vh")?tj(parseFloat(t),window.innerHeight):0}function tj(t,e){return t*e/100}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const bve=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:var(--calcite-border-width-sm);border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-none);border-inline-end-width:var(--calcite-border-width-none);border-style:solid}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-sm);border-inline-end-width:var(--calcite-border-width-sm)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0,5px,0)}to{opacity:1;transform:translateZ(0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:.25rem;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);inset-block-end:.5rem;inset-inline:var(--calcite-shell-tip-spacing, 26vw)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}slot[name=modals]::slotted(calcite-modal){position:absolute}:host([hidden]){display:none}[hidden]{display:none}`,ca={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},vo={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},GT=class GT extends vi{constructor(){super(),this.hasAlerts=!1,this.hasDialogs=!1,this.hasFooter=!1,this.hasHeader=!1,this.hasModals=!1,this.hasOnlyPanelBottom=!1,this.hasPanelBottom=!1,this.hasPanelTop=!1,this.hasSheets=!1,this.panelIsResizing=!1,this.contentBehind=!1,this.listen("calciteInternalShellPanelResizeStart",this.handleCalciteInternalShellPanelResizeStart),this.listen("calciteInternalShellPanelResizeEnd",this.handleCalciteInternalShellPanelResizeEnd)}willUpdate(e){(e.has("hasPanelTop")&&(this.hasUpdated||this.hasPanelTop!==!1)||e.has("hasPanelBottom")&&(this.hasUpdated||this.hasPanelBottom!==!1))&&(this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom)}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}handleHeaderSlotChange(e){this.hasHeader=!!mt(e)}handleFooterSlotChange(e){this.hasFooter=!!mt(e)}handleAlertsSlotChange(e){var i;this.hasAlerts=!!mt(e),(i=fc(e))==null||i.map(r=>{r.tagName==="CALCITE-ALERT"&&(r.embedded=!0)})}handleSheetsSlotChange(e){var i;this.hasSheets=!!mt(e),(i=fc(e))==null||i.map(r=>{r.tagName==="CALCITE-SHEET"&&(r.embedded=!0)})}handleModalsSlotChange(e){var i;this.hasModals=!!mt(e),(i=fc(e))==null||i.map(r=>{r.tagName==="CALCITE-MODAL"&&(r.embedded=!0)})}handlePanelTopChange(e){this.hasPanelTop=mt(e)}handlePanelBottomChange(e){this.hasPanelBottom=mt(e)}handleDialogsSlotChange(e){var i;this.hasDialogs=!!mt(e),(i=fc(e))==null||i.map(r=>{r.tagName==="CALCITE-DIALOG"&&(r.embedded=!0)})}renderHeader(){return te`<div .hidden=${!this.hasHeader}>${pt("header",te`<slot name=${vo.header} @slotchange=${this.handleHeaderSlotChange}></slot>`)}</div>`}renderFooter(){return pt("footer",te`<div class=${se(ca.footer)} .hidden=${!this.hasFooter}><slot name=${vo.footer} @slotchange=${this.handleFooterSlotChange}></slot></div>`)}renderAlerts(){return te`<div .hidden=${!this.hasAlerts}>${pt("alerts",te`<slot name=${vo.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</div>`}renderSheets(){return te`<div .hidden=${!this.hasSheets}>${pt("sheets",te`<slot name=${vo.sheets} @slotchange=${this.handleSheetsSlotChange}></slot>`)}</div>`}renderModals(){return te`<div .hidden=${!this.hasModals}>${pt("modals",te`<slot name=${vo.modals} @slotchange=${this.handleModalsSlotChange}></slot>`)}</div>`}renderDialogs(){return te`<div .hidden=${!this.hasDialogs}>${pt("dialogs",te`<slot name=${vo.dialogs} @slotchange=${this.handleDialogsSlotChange}></slot>`)}</div>`}renderContent(){const{panelIsResizing:e}=this,i=pt("default-slot",te`<slot></slot>`),r=e?te`<div class=${se(ca.contentNonInteractive)}>${i}</div>`:i,n=pt("center-row-slot",te`<slot name=${vo.centerRow}></slot>`),s=pt("panel-bottom-slot",te`<slot name=${vo.panelBottom} @slotchange=${this.handlePanelBottomChange}></slot>`),o=pt("panel-top-slot",te`<slot name=${vo.panelTop} @slotchange=${this.handlePanelTopChange}></slot>`),a="content-container";return this.contentBehind?[pt(a,te`<div class=${se({[ca.content]:!0,[ca.contentBehind]:!0})}>${r}</div>`),te`<div class=${se({[ca.contentBehindCenterContent]:!0,[ca.contentBottom]:this.hasOnlyPanelBottom})}>${o}${s}${n}</div>`]:[pt(a,te`<div class=${se({[ca.content]:!0,[ca.contentBottom]:this.hasOnlyPanelBottom})}>${o}${r}${s}${n}</div>`)]}renderMain(){return te`<div class=${se(ca.main)}><slot name=${vo.panelStart}></slot>${this.renderContent()}<slot name=${vo.panelEnd}></slot></div>`}renderPositionedSlots(){return te`<div class=${se(ca.positionedSlotWrapper)}>${this.renderAlerts()}${this.renderModals()}${this.renderDialogs()}${this.renderSheets()}</div>`}render(){return te`${this.renderHeader()}${this.renderMain()}${this.renderFooter()}${this.renderPositionedSlots()}`}};GT.properties={hasAlerts:[16,{},{state:!0}],hasDialogs:[16,{},{state:!0}],hasFooter:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],hasModals:[16,{},{state:!0}],hasOnlyPanelBottom:[16,{},{state:!0}],hasPanelBottom:[16,{},{state:!0}],hasPanelTop:[16,{},{state:!0}],hasSheets:[16,{},{state:!0}],panelIsResizing:[16,{},{state:!0}],contentBehind:[7,{},{reflect:!0,type:Boolean}]},GT.styles=bve;let DC=GT;bi("calcite-shell",DC);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function ra(t,e,i){const r=wve(t);return new r(e,i)}function wve(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}function hZ(t,e,i,r){if(t&&(e&&t.unobserve(e),!!i)){if(t instanceof MutationObserver){t.observe(i,r);return}t.observe(i)}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ij=new Set,rj={trace:0,debug:1,info:2,warn:4,error:8,off:10};function _ve(t){return rj[t]>=rj[vie]}function Nf(t,...e){if(!_ve(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let t2;const fZ={debug:t=>Nf("debug",t),info:t=>Nf("info",t),warn:t=>Nf("warn",t),error:t=>Nf("error",t),trace:t=>Nf("trace",t),deprecated:xve};function xve(t,{component:e,name:i,suggested:r,removalVersion:n}){const s=`${t}:${t==="component"?"":e}${i}`;if(ij.has(s))return;ij.add(s);const o=Array.isArray(r);o&&!t2&&(t2=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const a=`[${i}] ${t} is deprecated and will be removed in ${n==="future"?"a future version":`v${n}`}.${r?` Use ${o?t2.format(r.map(c=>`"${c}"`)):`"${r}"`} instead.`:""}`;Nf("warn",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const nj={flipRtl:"flip-rtl",svg:"svg"},mZ={},i2={},gZ={s:16,m:24,l:32};function yZ({icon:t,scale:e}){const i=gZ[e],r=Tve(t),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function Sve(t){const e=yZ(t),i=vZ(e);if(i)return i;i2[e]||(i2[e]=fetch(kU(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(fZ.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await i2[e];return mZ[e]=r,r}function $ve(t){return vZ(yZ(t))}function vZ(t){return mZ[t]}function Tve(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((s,o)=>s.replace(n,function(c,d){return o===0&&d===0?c:c.toUpperCase()})).join("")}return e?`i${t}`:t}const kve=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,HT=class HT extends vi{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const n={icon:e,scale:i},s=$ve(n)||await Sve(n);e===this.icon&&(this.pathData=s)}waitUntilVisible(e){if(this.intersectionObserver=ra("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,o=Bu(e),a=gZ[n],c=!!s,d=[].concat(r||"");return this.el.ariaHidden=qL(!c),this.el.ariaLabel=c?s:null,this.el.role=c?"img":null,te`<svg aria-hidden=true class=${se({[nj.flipRtl]:o==="rtl"&&i,[nj.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${a} ${a}`} width=100% xmlns=http://www.w3.org/2000/svg>${d.map(h=>typeof h=="string"?Ln`<path d=${h??Je} />`:Ln`<path d=${h.d??Je} opacity=${("opacity"in h?h.opacity:1)??Je} />`)}</svg>`}};HT.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},HT.styles=kve;let q$=HT;bi("calcite-icon",q$);const bZ=Object.freeze(Object.defineProperty({__proto__:null,Icon:q$},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Ive(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kv={exports:{}},Eve=kv.exports,sj;function Mve(){return sj||(sj=1,function(t,e){(function(i,r){t.exports=r()})(Eve,function(){function i(y,g){var b=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);g&&(_=_.filter(function(S){return Object.getOwnPropertyDescriptor(y,S).enumerable})),b.push.apply(b,_)}return b}function r(y){for(var g=1;g<arguments.length;g++){var b=arguments[g]!=null?arguments[g]:{};g%2?i(Object(b),!0).forEach(function(_){c(y,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):i(Object(b)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(b,_))})}return y}function n(y){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},n(y)}function s(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function o(y,g){for(var b=0;b<g.length;b++){var _=g[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,x(_.key),_)}}function a(y,g,b){return g&&o(y.prototype,g),Object.defineProperty(y,"prototype",{writable:!1}),y}function c(y,g,b){return(g=x(g))in y?Object.defineProperty(y,g,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[g]=b,y}function d(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),g&&f(y,g)}function h(y){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},h(y)}function f(y,g){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,_){return b.__proto__=_,b},f(y,g)}function m(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function v(y){var g=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var b,_=h(y);if(g){var S=h(this).constructor;b=Reflect.construct(_,arguments,S)}else b=_.apply(this,arguments);return function(k,M){if(M&&(typeof M=="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(k)}(this,b)}}function w(){return w=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(y,g,b){var _=function(k,M){for(;!Object.prototype.hasOwnProperty.call(k,M)&&(k=h(k))!==null;);return k}(y,g);if(_){var S=Object.getOwnPropertyDescriptor(_,g);return S.get?S.get.call(arguments.length<3?y:b):S.value}},w.apply(this,arguments)}function x(y){var g=function(b,_){if(typeof b!="object"||b===null)return b;var S=b[Symbol.toPrimitive];if(S!==void 0){var k=S.call(b,_);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(y,"string");return typeof g=="symbol"?g:g+""}var $=function(y){return!(!y||!y.Window)&&y instanceof y.Window},T=void 0,C=void 0;function P(y){T=y;var g=y.document.createTextNode("");g.ownerDocument!==y.document&&typeof y.wrap=="function"&&y.wrap(g)===g&&(y=y.wrap(y)),C=y}function L(y){return $(y)?y:(y.ownerDocument||y).defaultView||C.window}typeof window<"u"&&window&&P(window);var D=function(y){return!!y&&n(y)==="object"},q=function(y){return typeof y=="function"},F={window:function(y){return y===C||$(y)},docFrag:function(y){return D(y)&&y.nodeType===11},object:D,func:q,number:function(y){return typeof y=="number"},bool:function(y){return typeof y=="boolean"},string:function(y){return typeof y=="string"},element:function(y){if(!y||n(y)!=="object")return!1;var g=L(y)||C;return/object|function/.test(typeof Element>"u"?"undefined":n(Element))?y instanceof Element||y instanceof g.Element:y.nodeType===1&&typeof y.nodeName=="string"},plainObject:function(y){return D(y)&&!!y.constructor&&/function Object\b/.test(y.constructor.toString())},array:function(y){return D(y)&&y.length!==void 0&&q(y.splice)}};function ee(y){var g=y.interaction;if(g.prepared.name==="drag"){var b=g.prepared.axis;b==="x"?(g.coords.cur.page.y=g.coords.start.page.y,g.coords.cur.client.y=g.coords.start.client.y,g.coords.velocity.client.y=0,g.coords.velocity.page.y=0):b==="y"&&(g.coords.cur.page.x=g.coords.start.page.x,g.coords.cur.client.x=g.coords.start.client.x,g.coords.velocity.client.x=0,g.coords.velocity.page.x=0)}}function ae(y){var g=y.iEvent,b=y.interaction;if(b.prepared.name==="drag"){var _=b.prepared.axis;if(_==="x"||_==="y"){var S=_==="x"?"y":"x";g.page[S]=b.coords.start.page[S],g.client[S]=b.coords.start.client[S],g.delta[S]=0}}}var ne={id:"actions/drag",install:function(y){var g=y.actions,b=y.Interactable,_=y.defaults;b.prototype.draggable=ne.draggable,g.map.drag=ne,g.methodDict.drag="draggable",_.actions.drag=ne.defaults},listeners:{"interactions:before-action-move":ee,"interactions:action-resume":ee,"interactions:action-move":ae,"auto-start:check":function(y){var g=y.interaction,b=y.interactable,_=y.buttons,S=b.options.drag;if(S&&S.enabled&&(!g.pointerIsDown||!/mouse|pointer/.test(g.pointerType)||_&b.options.drag.mouseButtons))return y.action={name:"drag",axis:S.lockAxis==="start"?S.startAxis:S.lockAxis},!1}},draggable:function(y){return F.object(y)?(this.options.drag.enabled=y.enabled!==!1,this.setPerAction("drag",y),this.setOnEvents("drag",y),/^(xy|x|y|start)$/.test(y.lockAxis)&&(this.options.drag.lockAxis=y.lockAxis),/^(xy|x|y)$/.test(y.startAxis)&&(this.options.drag.startAxis=y.startAxis),this):F.bool(y)?(this.options.drag.enabled=y,this):this.options.drag},beforeMove:ee,move:ae,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(y){return y.search("drag")===0}},ue=ne,X={init:function(y){var g=y;X.document=g.document,X.DocumentFragment=g.DocumentFragment||J,X.SVGElement=g.SVGElement||J,X.SVGSVGElement=g.SVGSVGElement||J,X.SVGElementInstance=g.SVGElementInstance||J,X.Element=g.Element||J,X.HTMLElement=g.HTMLElement||X.Element,X.Event=g.Event,X.Touch=g.Touch||J,X.PointerEvent=g.PointerEvent||g.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function J(){}var H=X,ge={init:function(y){var g=H.Element,b=y.navigator||{};ge.supportsTouch="ontouchstart"in y||F.func(y.DocumentTouch)&&H.document instanceof y.DocumentTouch,ge.supportsPointerEvent=b.pointerEnabled!==!1&&!!H.PointerEvent,ge.isIOS=/iP(hone|od|ad)/.test(b.platform),ge.isIOS7=/iP(hone|od|ad)/.test(b.platform)&&/OS 7[^\d]/.test(b.appVersion),ge.isIe9=/MSIE 9/.test(b.userAgent),ge.isOperaMobile=b.appName==="Opera"&&ge.supportsTouch&&/Presto/.test(b.userAgent),ge.prefixedMatchesSelector="matches"in g.prototype?"matches":"webkitMatchesSelector"in g.prototype?"webkitMatchesSelector":"mozMatchesSelector"in g.prototype?"mozMatchesSelector":"oMatchesSelector"in g.prototype?"oMatchesSelector":"msMatchesSelector",ge.pEventTypes=ge.supportsPointerEvent?H.PointerEvent===y.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,ge.wheelEvent=H.document&&"onmousewheel"in H.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},be=ge;function Ee(y,g){if(y.contains)return y.contains(g);for(;g;){if(g===y)return!0;g=g.parentNode}return!1}function we(y,g){for(;F.element(y);){if(yt(y,g))return y;y=Oe(y)}return null}function Oe(y){var g=y.parentNode;if(F.docFrag(g)){for(;(g=g.host)&&F.docFrag(g););return g}return g}function yt(y,g){return C!==T&&(g=g.replace(/\/deep\//g," ")),y[be.prefixedMatchesSelector](g)}var Tt=function(y){return y.parentNode||y.host};function Ci(y,g){for(var b,_=[],S=y;(b=Tt(S))&&S!==g&&b!==S.ownerDocument;)_.unshift(S),S=b;return _}function xr(y,g,b){for(;F.element(y);){if(yt(y,g))return!0;if((y=Oe(y))===b)return yt(y,g)}return!1}function Zn(y){return y.correspondingUseElement||y}function lo(y){var g=y instanceof H.SVGElement?y.getBoundingClientRect():y.getClientRects()[0];return g&&{left:g.left,right:g.right,top:g.top,bottom:g.bottom,width:g.width||g.right-g.left,height:g.height||g.bottom-g.top}}function Ac(y){var g,b=lo(y);if(!be.isIOS7&&b){var _={x:(g=(g=L(y))||C).scrollX||g.document.documentElement.scrollLeft,y:g.scrollY||g.document.documentElement.scrollTop};b.left+=_.x,b.right+=_.x,b.top+=_.y,b.bottom+=_.y}return b}function Cc(y){for(var g=[];y;)g.push(y),y=Oe(y);return g}function Oc(y){return!!F.string(y)&&(H.document.querySelector(y),!0)}function Be(y,g){for(var b in g)y[b]=g[b];return y}function w1(y,g,b){return y==="parent"?Oe(b):y==="self"?g.getRect(b):we(b,y)}function md(y,g,b,_){var S=y;return F.string(S)?S=w1(S,g,b):F.func(S)&&(S=S.apply(void 0,_)),F.element(S)&&(S=Ac(S)),S}function Gh(y){return y&&{x:"x"in y?y.x:y.left,y:"y"in y?y.y:y.top}}function a0(y){return!y||"x"in y&&"y"in y||((y=Be({},y)).x=y.left||0,y.y=y.top||0,y.width=y.width||(y.right||0)-y.x,y.height=y.height||(y.bottom||0)-y.y),y}function Hh(y,g,b){y.left&&(g.left+=b.x),y.right&&(g.right+=b.x),y.top&&(g.top+=b.y),y.bottom&&(g.bottom+=b.y),g.width=g.right-g.left,g.height=g.bottom-g.top}function gd(y,g,b){var _=b&&y.options[b];return Gh(md(_&&_.origin||y.options.origin,y,g,[y&&g]))||{x:0,y:0}}function nl(y,g){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(O){return!0},_=arguments.length>3?arguments[3]:void 0;if(_=_||{},F.string(y)&&y.search(" ")!==-1&&(y=_1(y)),F.array(y))return y.forEach(function(O){return nl(O,g,b,_)}),_;if(F.object(y)&&(g=y,y=""),F.func(g)&&b(y))_[y]=_[y]||[],_[y].push(g);else if(F.array(g))for(var S=0,k=g;S<k.length;S++){var M=k[S];nl(y,M,b,_)}else if(F.object(g))for(var A in g)nl(_1(A).map(function(O){return"".concat(y).concat(O)}),g[A],b,_);return _}function _1(y){return y.trim().split(/ +/)}var yd=function(y,g){return Math.sqrt(y*y+g*g)},x1=["webkit","moz"];function vd(y,g){y.__set||(y.__set={});var b=function(S){if(x1.some(function(k){return S.indexOf(k)===0}))return 1;typeof y[S]!="function"&&S!=="__set"&&Object.defineProperty(y,S,{get:function(){return S in y.__set?y.__set[S]:y.__set[S]=g[S]},set:function(k){y.__set[S]=k},configurable:!0})};for(var _ in g)b(_);return y}function Jn(y,g){y.page=y.page||{},y.page.x=g.page.x,y.page.y=g.page.y,y.client=y.client||{},y.client.x=g.client.x,y.client.y=g.client.y,y.timeStamp=g.timeStamp}function S1(y){y.page.x=0,y.page.y=0,y.client.x=0,y.client.y=0}function $1(y){return y instanceof H.Event||y instanceof H.Touch}function Wh(y,g,b){return y=y||"page",(b=b||{}).x=g[y+"X"],b.y=g[y+"Y"],b}function T1(y,g){return g=g||{x:0,y:0},be.isOperaMobile&&$1(y)?(Wh("screen",y,g),g.x+=window.scrollX,g.y+=window.scrollY):Wh("page",y,g),g}function bd(y){return F.number(y.pointerId)?y.pointerId:y.identifier}function GI(y,g,b){var _=g.length>1?HI(g):g[0];T1(_,y.page),function(S,k){k=k||{},be.isOperaMobile&&$1(S)?Wh("screen",S,k):Wh("client",S,k)}(_,y.client),y.timeStamp=b}function l0(y){var g=[];return F.array(y)?(g[0]=y[0],g[1]=y[1]):y.type==="touchend"?y.touches.length===1?(g[0]=y.touches[0],g[1]=y.changedTouches[0]):y.touches.length===0&&(g[0]=y.changedTouches[0],g[1]=y.changedTouches[1]):(g[0]=y.touches[0],g[1]=y.touches[1]),g}function HI(y){for(var g={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},b=0;b<y.length;b++){var _=y[b];for(var S in g)g[S]+=_[S]}for(var k in g)g[k]/=y.length;return g}function c0(y){if(!y.length)return null;var g=l0(y),b=Math.min(g[0].pageX,g[1].pageX),_=Math.min(g[0].pageY,g[1].pageY),S=Math.max(g[0].pageX,g[1].pageX),k=Math.max(g[0].pageY,g[1].pageY);return{x:b,y:_,left:b,top:_,right:S,bottom:k,width:S-b,height:k-_}}function u0(y,g){var b=g+"X",_=g+"Y",S=l0(y),k=S[0][b]-S[1][b],M=S[0][_]-S[1][_];return yd(k,M)}function d0(y,g){var b=g+"X",_=g+"Y",S=l0(y),k=S[1][b]-S[0][b],M=S[1][_]-S[0][_];return 180*Math.atan2(M,k)/Math.PI}function k1(y){return F.string(y.pointerType)?y.pointerType:F.number(y.pointerType)?[void 0,void 0,"touch","pen","mouse"][y.pointerType]:/touch/.test(y.type||"")||y instanceof H.Touch?"touch":"mouse"}function I1(y){var g=F.func(y.composedPath)?y.composedPath():y.path;return[Zn(g?g[0]:y.target),Zn(y.currentTarget)]}var Zh=function(){function y(g){s(this,y),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=g}return a(y,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),y}();Object.defineProperty(Zh.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var E1=function(y,g){for(var b=0;b<g.length;b++){var _=g[b];y.push(_)}return y},M1=function(y){return E1([],y)},wd=function(y,g){for(var b=0;b<y.length;b++)if(g(y[b],b,y))return b;return-1},_d=function(y,g){return y[wd(y,g)]},Pc=function(y){d(b,y);var g=v(b);function b(_,S,k){var M;s(this,b),(M=g.call(this,S._interaction)).dropzone=void 0,M.dragEvent=void 0,M.relatedTarget=void 0,M.draggable=void 0,M.propagationStopped=!1,M.immediatePropagationStopped=!1;var A=k==="dragleave"?_.prev:_.cur,O=A.element,z=A.dropzone;return M.type=k,M.target=O,M.currentTarget=O,M.dropzone=z,M.dragEvent=S,M.relatedTarget=S.target,M.draggable=S.interactable,M.timeStamp=S.timeStamp,M}return a(b,[{key:"reject",value:function(){var _=this,S=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&S.cur.dropzone===this.dropzone&&S.cur.element===this.target)if(S.prev.dropzone=this.dropzone,S.prev.element=this.target,S.rejected=!0,S.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var k=S.activeDrops,M=wd(k,function(O){var z=O.dropzone,R=O.element;return z===_.dropzone&&R===_.target});S.activeDrops.splice(M,1);var A=new b(S,this.dragEvent,"dropdeactivate");A.dropzone=this.dropzone,A.target=this.target,this.dropzone.fire(A)}else this.dropzone.fire(new b(S,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),b}(Zh);function A1(y,g){for(var b=0,_=y.slice();b<_.length;b++){var S=_[b],k=S.dropzone,M=S.element;g.dropzone=k,g.target=M,k.fire(g),g.propagationStopped=g.immediatePropagationStopped=!1}}function p0(y,g){for(var b=function(k,M){for(var A=[],O=0,z=k.interactables.list;O<z.length;O++){var R=z[O];if(R.options.drop.enabled){var W=R.options.drop.accept;if(!(F.element(W)&&W!==M||F.string(W)&&!yt(M,W)||F.func(W)&&!W({dropzone:R,draggableElement:M})))for(var re=0,fe=R.getAllElements();re<fe.length;re++){var pe=fe[re];pe!==M&&A.push({dropzone:R,element:pe,rect:R.getRect(pe)})}}}return A}(y,g),_=0;_<b.length;_++){var S=b[_];S.rect=S.dropzone.getRect(S.element)}return b}function C1(y,g,b){for(var _=y.dropState,S=y.interactable,k=y.element,M=[],A=0,O=_.activeDrops;A<O.length;A++){var z=O[A],R=z.dropzone,W=z.element,re=z.rect,fe=R.dropCheck(g,b,S,k,W,re);M.push(fe?W:null)}var pe=function(ye){for(var Re,Ae,qe,ot=[],ft=0;ft<ye.length;ft++){var Xe=ye[ft],at=ye[Re];if(Xe&&ft!==Re)if(at){var Zr=Tt(Xe),ai=Tt(at);if(Zr!==Xe.ownerDocument)if(ai!==Xe.ownerDocument)if(Zr!==ai){ot=ot.length?ot:Ci(at);var Kn=void 0;if(at instanceof H.HTMLElement&&Xe instanceof H.SVGElement&&!(Xe instanceof H.SVGSVGElement)){if(Xe===ai)continue;Kn=Xe.ownerSVGElement}else Kn=Xe;for(var po=Ci(Kn,at.ownerDocument),al=0;po[al]&&po[al]===ot[al];)al++;var H1=[po[al-1],po[al],ot[al]];if(H1[0])for(var S0=H1[0].lastChild;S0;){if(S0===H1[1]){Re=ft,ot=po;break}if(S0===H1[2])break;S0=S0.previousSibling}}else qe=at,(parseInt(L(Ae=Xe).getComputedStyle(Ae).zIndex,10)||0)>=(parseInt(L(qe).getComputedStyle(qe).zIndex,10)||0)&&(Re=ft);else Re=ft}else Re=ft}return Re}(M);return _.activeDrops[pe]||null}function h0(y,g,b){var _=y.dropState,S={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return b.type==="dragstart"&&(S.activate=new Pc(_,b,"dropactivate"),S.activate.target=null,S.activate.dropzone=null),b.type==="dragend"&&(S.deactivate=new Pc(_,b,"dropdeactivate"),S.deactivate.target=null,S.deactivate.dropzone=null),_.rejected||(_.cur.element!==_.prev.element&&(_.prev.dropzone&&(S.leave=new Pc(_,b,"dragleave"),b.dragLeave=S.leave.target=_.prev.element,b.prevDropzone=S.leave.dropzone=_.prev.dropzone),_.cur.dropzone&&(S.enter=new Pc(_,b,"dragenter"),b.dragEnter=_.cur.element,b.dropzone=_.cur.dropzone)),b.type==="dragend"&&_.cur.dropzone&&(S.drop=new Pc(_,b,"drop"),b.dropzone=_.cur.dropzone,b.relatedTarget=_.cur.element),b.type==="dragmove"&&_.cur.dropzone&&(S.move=new Pc(_,b,"dropmove"),b.dropzone=_.cur.dropzone)),S}function f0(y,g){var b=y.dropState,_=b.activeDrops,S=b.cur,k=b.prev;g.leave&&k.dropzone.fire(g.leave),g.enter&&S.dropzone.fire(g.enter),g.move&&S.dropzone.fire(g.move),g.drop&&S.dropzone.fire(g.drop),g.deactivate&&A1(_,g.deactivate),b.prev.dropzone=S.dropzone,b.prev.element=S.element}function O1(y,g){var b=y.interaction,_=y.iEvent,S=y.event;if(_.type==="dragmove"||_.type==="dragend"){var k=b.dropState;g.dynamicDrop&&(k.activeDrops=p0(g,b.element));var M=_,A=C1(b,M,S);k.rejected=k.rejected&&!!A&&A.dropzone===k.cur.dropzone&&A.element===k.cur.element,k.cur.dropzone=A&&A.dropzone,k.cur.element=A&&A.element,k.events=h0(b,0,M)}}var K={id:"actions/drop",install:function(y){var g=y.actions,b=y.interactStatic,_=y.Interactable,S=y.defaults;y.usePlugin(ue),_.prototype.dropzone=function(k){return function(M,A){if(F.object(A)){if(M.options.drop.enabled=A.enabled!==!1,A.listeners){var O=nl(A.listeners),z=Object.keys(O).reduce(function(W,re){return W[/^(enter|leave)/.test(re)?"drag".concat(re):/^(activate|deactivate|move)/.test(re)?"drop".concat(re):re]=O[re],W},{}),R=M.options.drop.listeners;R&&M.off(R),M.on(z),M.options.drop.listeners=z}return F.func(A.ondrop)&&M.on("drop",A.ondrop),F.func(A.ondropactivate)&&M.on("dropactivate",A.ondropactivate),F.func(A.ondropdeactivate)&&M.on("dropdeactivate",A.ondropdeactivate),F.func(A.ondragenter)&&M.on("dragenter",A.ondragenter),F.func(A.ondragleave)&&M.on("dragleave",A.ondragleave),F.func(A.ondropmove)&&M.on("dropmove",A.ondropmove),/^(pointer|center)$/.test(A.overlap)?M.options.drop.overlap=A.overlap:F.number(A.overlap)&&(M.options.drop.overlap=Math.max(Math.min(1,A.overlap),0)),"accept"in A&&(M.options.drop.accept=A.accept),"checker"in A&&(M.options.drop.checker=A.checker),M}return F.bool(A)?(M.options.drop.enabled=A,M):M.options.drop}(this,k)},_.prototype.dropCheck=function(k,M,A,O,z,R){return function(W,re,fe,pe,ye,Re,Ae){var qe=!1;if(!(Ae=Ae||W.getRect(Re)))return!!W.options.drop.checker&&W.options.drop.checker(re,fe,qe,W,Re,pe,ye);var ot=W.options.drop.overlap;if(ot==="pointer"){var ft=gd(pe,ye,"drag"),Xe=T1(re);Xe.x+=ft.x,Xe.y+=ft.y;var at=Xe.x>Ae.left&&Xe.x<Ae.right,Zr=Xe.y>Ae.top&&Xe.y<Ae.bottom;qe=at&&Zr}var ai=pe.getRect(ye);if(ai&&ot==="center"){var Kn=ai.left+ai.width/2,po=ai.top+ai.height/2;qe=Kn>=Ae.left&&Kn<=Ae.right&&po>=Ae.top&&po<=Ae.bottom}return ai&&F.number(ot)&&(qe=Math.max(0,Math.min(Ae.right,ai.right)-Math.max(Ae.left,ai.left))*Math.max(0,Math.min(Ae.bottom,ai.bottom)-Math.max(Ae.top,ai.top))/(ai.width*ai.height)>=ot),W.options.drop.checker&&(qe=W.options.drop.checker(re,fe,qe,W,Re,pe,ye)),qe}(this,k,M,A,O,z,R)},b.dynamicDrop=function(k){return F.bool(k)?(y.dynamicDrop=k,b):y.dynamicDrop},Be(g.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),g.methodDict.drop="dropzone",y.dynamicDrop=!1,S.actions.drop=K.defaults},listeners:{"interactions:before-action-start":function(y){var g=y.interaction;g.prepared.name==="drag"&&(g.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(y,g){var b=y.interaction,_=(y.event,y.iEvent);if(b.prepared.name==="drag"){var S=b.dropState;S.activeDrops=[],S.events={},S.activeDrops=p0(g,b.element),S.events=h0(b,0,_),S.events.activate&&(A1(S.activeDrops,S.events.activate),g.fire("actions/drop:start",{interaction:b,dragEvent:_}))}},"interactions:action-move":O1,"interactions:after-action-move":function(y,g){var b=y.interaction,_=y.iEvent;if(b.prepared.name==="drag"){var S=b.dropState;f0(b,S.events),g.fire("actions/drop:move",{interaction:b,dragEvent:_}),S.events={}}},"interactions:action-end":function(y,g){if(y.interaction.prepared.name==="drag"){var b=y.interaction,_=y.iEvent;O1(y,g),f0(b,b.dropState.events),g.fire("actions/drop:end",{interaction:b,dragEvent:_})}},"interactions:stop":function(y){var g=y.interaction;if(g.prepared.name==="drag"){var b=g.dropState;b&&(b.activeDrops=null,b.events=null,b.cur.dropzone=null,b.cur.element=null,b.prev.dropzone=null,b.prev.element=null,b.rejected=!1)}}},getActiveDrops:p0,getDrop:C1,getDropEvents:h0,fireDropEvents:f0,filterEventType:function(y){return y.search("drag")===0||y.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Wt=K;function oa(y){var g=y.interaction,b=y.iEvent,_=y.phase;if(g.prepared.name==="gesture"){var S=g.pointers.map(function(z){return z.pointer}),k=_==="start",M=_==="end",A=g.interactable.options.deltaSource;if(b.touches=[S[0],S[1]],k)b.distance=u0(S,A),b.box=c0(S),b.scale=1,b.ds=0,b.angle=d0(S,A),b.da=0,g.gesture.startDistance=b.distance,g.gesture.startAngle=b.angle;else if(M||g.pointers.length<2){var O=g.prevEvent;b.distance=O.distance,b.box=O.box,b.scale=O.scale,b.ds=0,b.angle=O.angle,b.da=0}else b.distance=u0(S,A),b.box=c0(S),b.scale=b.distance/g.gesture.startDistance,b.angle=d0(S,A),b.ds=b.scale-g.gesture.scale,b.da=b.angle-g.gesture.angle;g.gesture.distance=b.distance,g.gesture.angle=b.angle,F.number(b.scale)&&b.scale!==1/0&&!isNaN(b.scale)&&(g.gesture.scale=b.scale)}}var sl={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(y){var g=y.actions,b=y.Interactable,_=y.defaults;b.prototype.gesturable=function(S){return F.object(S)?(this.options.gesture.enabled=S.enabled!==!1,this.setPerAction("gesture",S),this.setOnEvents("gesture",S),this):F.bool(S)?(this.options.gesture.enabled=S,this):this.options.gesture},g.map.gesture=sl,g.methodDict.gesture="gesturable",_.actions.gesture=sl.defaults},listeners:{"interactions:action-start":oa,"interactions:action-move":oa,"interactions:action-end":oa,"interactions:new":function(y){y.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(y){if(!(y.interaction.pointers.length<2)){var g=y.interactable.options.gesture;if(g&&g.enabled)return y.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(y){return y.search("gesture")===0}},Yn=sl;function Jh(y,g,b,_,S,k,M){if(!g)return!1;if(g===!0){var A=F.number(k.width)?k.width:k.right-k.left,O=F.number(k.height)?k.height:k.bottom-k.top;if(M=Math.min(M,Math.abs((y==="left"||y==="right"?A:O)/2)),A<0&&(y==="left"?y="right":y==="right"&&(y="left")),O<0&&(y==="top"?y="bottom":y==="bottom"&&(y="top")),y==="left"){var z=A>=0?k.left:k.right;return b.x<z+M}if(y==="top"){var R=O>=0?k.top:k.bottom;return b.y<R+M}if(y==="right")return b.x>(A>=0?k.right:k.left)-M;if(y==="bottom")return b.y>(O>=0?k.bottom:k.top)-M}return!!F.element(_)&&(F.element(g)?g===_:xr(_,g,S))}function Ne(y){var g=y.iEvent,b=y.interaction;if(b.prepared.name==="resize"&&b.resizeAxes){var _=g;b.interactable.options.resize.square?(b.resizeAxes==="y"?_.delta.x=_.delta.y:_.delta.y=_.delta.x,_.axes="xy"):(_.axes=b.resizeAxes,b.resizeAxes==="x"?_.delta.y=0:b.resizeAxes==="y"&&(_.delta.x=0))}}var vn,ol,Nt={id:"actions/resize",before:["actions/drag"],install:function(y){var g=y.actions,b=y.browser,_=y.Interactable,S=y.defaults;Nt.cursors=function(k){return k.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(b),Nt.defaultMargin=b.supportsTouch||b.supportsPointerEvent?20:10,_.prototype.resizable=function(k){return function(M,A,O){return F.object(A)?(M.options.resize.enabled=A.enabled!==!1,M.setPerAction("resize",A),M.setOnEvents("resize",A),F.string(A.axis)&&/^x$|^y$|^xy$/.test(A.axis)?M.options.resize.axis=A.axis:A.axis===null&&(M.options.resize.axis=O.defaults.actions.resize.axis),F.bool(A.preserveAspectRatio)?M.options.resize.preserveAspectRatio=A.preserveAspectRatio:F.bool(A.square)&&(M.options.resize.square=A.square),M):F.bool(A)?(M.options.resize.enabled=A,M):M.options.resize}(this,k,y)},g.map.resize=Nt,g.methodDict.resize="resizable",S.actions.resize=Nt.defaults},listeners:{"interactions:new":function(y){y.interaction.resizeAxes="xy"},"interactions:action-start":function(y){(function(g){var b=g.iEvent,_=g.interaction;if(_.prepared.name==="resize"&&_.prepared.edges){var S=b,k=_.rect;_._rects={start:Be({},k),corrected:Be({},k),previous:Be({},k),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},S.edges=_.prepared.edges,S.rect=_._rects.corrected,S.deltaRect=_._rects.delta}})(y),Ne(y)},"interactions:action-move":function(y){(function(g){var b=g.iEvent,_=g.interaction;if(_.prepared.name==="resize"&&_.prepared.edges){var S=b,k=_.interactable.options.resize.invert,M=k==="reposition"||k==="negate",A=_.rect,O=_._rects,z=O.start,R=O.corrected,W=O.delta,re=O.previous;if(Be(re,R),M){if(Be(R,A),k==="reposition"){if(R.top>R.bottom){var fe=R.top;R.top=R.bottom,R.bottom=fe}if(R.left>R.right){var pe=R.left;R.left=R.right,R.right=pe}}}else R.top=Math.min(A.top,z.bottom),R.bottom=Math.max(A.bottom,z.top),R.left=Math.min(A.left,z.right),R.right=Math.max(A.right,z.left);for(var ye in R.width=R.right-R.left,R.height=R.bottom-R.top,R)W[ye]=R[ye]-re[ye];S.edges=_.prepared.edges,S.rect=R,S.deltaRect=W}})(y),Ne(y)},"interactions:action-end":function(y){var g=y.iEvent,b=y.interaction;if(b.prepared.name==="resize"&&b.prepared.edges){var _=g;_.edges=b.prepared.edges,_.rect=b._rects.corrected,_.deltaRect=b._rects.delta}},"auto-start:check":function(y){var g=y.interaction,b=y.interactable,_=y.element,S=y.rect,k=y.buttons;if(S){var M=Be({},g.coords.cur.page),A=b.options.resize;if(A&&A.enabled&&(!g.pointerIsDown||!/mouse|pointer/.test(g.pointerType)||k&A.mouseButtons)){if(F.object(A.edges)){var O={left:!1,right:!1,top:!1,bottom:!1};for(var z in O)O[z]=Jh(z,A.edges[z],M,g._latestPointer.eventTarget,_,S,A.margin||Nt.defaultMargin);O.left=O.left&&!O.right,O.top=O.top&&!O.bottom,(O.left||O.right||O.top||O.bottom)&&(y.action={name:"resize",edges:O})}else{var R=A.axis!=="y"&&M.x>S.right-Nt.defaultMargin,W=A.axis!=="x"&&M.y>S.bottom-Nt.defaultMargin;(R||W)&&(y.action={name:"resize",axes:(R?"x":"")+(W?"y":"")})}return!y.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(y){var g=y.edges,b=y.axis,_=y.name,S=Nt.cursors,k=null;if(b)k=S[_+b];else if(g){for(var M="",A=0,O=["top","bottom","left","right"];A<O.length;A++){var z=O[A];g[z]&&(M+=z)}k=S[M]}return k},filterEventType:function(y){return y.search("resize")===0},defaultMargin:null},xd=Nt,WI={id:"actions",install:function(y){y.usePlugin(Yn),y.usePlugin(xd),y.usePlugin(ue),y.usePlugin(Wt)}},co=0,uo={request:function(y){return vn(y)},cancel:function(y){return ol(y)},init:function(y){if(vn=y.requestAnimationFrame,ol=y.cancelAnimationFrame,!vn)for(var g=["ms","moz","webkit","o"],b=0;b<g.length;b++){var _=g[b];vn=y["".concat(_,"RequestAnimationFrame")],ol=y["".concat(_,"CancelAnimationFrame")]||y["".concat(_,"CancelRequestAnimationFrame")]}vn=vn&&vn.bind(y),ol=ol&&ol.bind(y),vn||(vn=function(S){var k=Date.now(),M=Math.max(0,16-(k-co)),A=y.setTimeout(function(){S(k+M)},M);return co=k+M,A},ol=function(S){return clearTimeout(S)})}},Ye={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(y){Ye.isScrolling=!0,uo.cancel(Ye.i),y.autoScroll=Ye,Ye.interaction=y,Ye.prevTime=Ye.now(),Ye.i=uo.request(Ye.scroll)},stop:function(){Ye.isScrolling=!1,Ye.interaction&&(Ye.interaction.autoScroll=null),uo.cancel(Ye.i)},scroll:function(){var y=Ye.interaction,g=y.interactable,b=y.element,_=y.prepared.name,S=g.options[_].autoScroll,k=et(S.container,g,b),M=Ye.now(),A=(M-Ye.prevTime)/1e3,O=S.speed*A;if(O>=1){var z={x:Ye.x*O,y:Ye.y*O};if(z.x||z.y){var R=P1(k);F.window(k)?k.scrollBy(z.x,z.y):k&&(k.scrollLeft+=z.x,k.scrollTop+=z.y);var W=P1(k),re={x:W.x-R.x,y:W.y-R.y};(re.x||re.y)&&g.fire({type:"autoscroll",target:b,interactable:g,delta:re,interaction:y,container:k})}Ye.prevTime=M}Ye.isScrolling&&(uo.cancel(Ye.i),Ye.i=uo.request(Ye.scroll))},check:function(y,g){var b;return(b=y.options[g].autoScroll)==null?void 0:b.enabled},onInteractionMove:function(y){var g=y.interaction,b=y.pointer;if(g.interacting()&&Ye.check(g.interactable,g.prepared.name))if(g.simulation)Ye.x=Ye.y=0;else{var _,S,k,M,A=g.interactable,O=g.element,z=g.prepared.name,R=A.options[z].autoScroll,W=et(R.container,A,O);if(F.window(W))M=b.clientX<Ye.margin,_=b.clientY<Ye.margin,S=b.clientX>W.innerWidth-Ye.margin,k=b.clientY>W.innerHeight-Ye.margin;else{var re=lo(W);M=b.clientX<re.left+Ye.margin,_=b.clientY<re.top+Ye.margin,S=b.clientX>re.right-Ye.margin,k=b.clientY>re.bottom-Ye.margin}Ye.x=S?1:M?-1:0,Ye.y=k?1:_?-1:0,Ye.isScrolling||(Ye.margin=R.margin,Ye.speed=R.speed,Ye.start(g))}}};function et(y,g,b){return(F.string(y)?w1(y,g,b):y)||L(b)}function P1(y){return F.window(y)&&(y=window.document.body),{x:y.scrollLeft,y:y.scrollTop}}var R1={id:"auto-scroll",install:function(y){var g=y.defaults,b=y.actions;y.autoScroll=Ye,Ye.now=function(){return y.now()},b.phaselessTypes.autoscroll=!0,g.perAction.autoScroll=Ye.defaults},listeners:{"interactions:new":function(y){y.interaction.autoScroll=null},"interactions:destroy":function(y){y.interaction.autoScroll=null,Ye.stop(),Ye.interaction&&(Ye.interaction=null)},"interactions:stop":Ye.stop,"interactions:action-move":function(y){return Ye.onInteractionMove(y)}}},ZI=R1;function Sd(y,g){var b=!1;return function(){return b||(C.console.warn(g),b=!0),y.apply(this,arguments)}}function $d(y,g){return y.name=g.name,y.axis=g.axis,y.edges=g.edges,y}function JI(y){return F.bool(y)?(this.options.styleCursor=y,this):y===null?(delete this.options.styleCursor,this):this.options.styleCursor}function m0(y){return F.func(y)?(this.options.actionChecker=y,this):y===null?(delete this.options.actionChecker,this):this.options.actionChecker}var ji={id:"auto-start/interactableMethods",install:function(y){var g=y.Interactable;g.prototype.getAction=function(b,_,S,k){var M=function(A,O,z,R,W){var re=A.getRect(R),fe=O.buttons||{0:1,1:4,3:8,4:16}[O.button],pe={action:null,interactable:A,interaction:z,element:R,rect:re,buttons:fe};return W.fire("auto-start:check",pe),pe.action}(this,_,S,k,y);return this.options.actionChecker?this.options.actionChecker(b,_,M,this,k,S):M},g.prototype.ignoreFrom=Sd(function(b){return this._backCompatOption("ignoreFrom",b)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),g.prototype.allowFrom=Sd(function(b){return this._backCompatOption("allowFrom",b)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),g.prototype.actionChecker=m0,g.prototype.styleCursor=JI}};function L1(y,g,b,_,S){return g.testIgnoreAllow(g.options[y.name],b,_)&&g.options[y.name].enabled&&Yh(g,b,y,S)?y:null}function F1(y,g,b,_,S,k,M){for(var A=0,O=_.length;A<O;A++){var z=_[A],R=S[A],W=z.getAction(g,b,y,R);if(W){var re=L1(W,z,R,k,M);if(re)return{action:re,interactable:z,element:R}}}return{action:null,interactable:null,element:null}}function N1(y,g,b,_,S){var k=[],M=[],A=_;function O(R){k.push(R),M.push(A)}for(;F.element(A);){k=[],M=[],S.interactables.forEachMatch(A,O);var z=F1(y,g,b,k,M,_,S);if(z.action&&!z.interactable.options[z.action.name].manualStart)return z;A=Oe(A)}return{action:null,interactable:null,element:null}}function D1(y,g,b){var _=g.action,S=g.interactable,k=g.element;_=_||{name:null},y.interactable=S,y.element=k,$d(y.prepared,_),y.rect=S&&_.name?S.getRect(k):null,Hr(y,b),b.fire("autoStart:prepared",{interaction:y})}function Yh(y,g,b,_){var S=y.options,k=S[b.name].max,M=S[b.name].maxPerElement,A=_.autoStart.maxInteractions,O=0,z=0,R=0;if(!(k&&M&&A))return!1;for(var W=0,re=_.interactions.list;W<re.length;W++){var fe=re[W],pe=fe.prepared.name;if(fe.interacting()&&(++O>=A||fe.interactable===y&&((z+=pe===b.name?1:0)>=k||fe.element===g&&(R++,pe===b.name&&R>=M))))return!1}return A>0}function z1(y,g){return F.number(y)?(g.autoStart.maxInteractions=y,this):g.autoStart.maxInteractions}function g0(y,g,b){var _=b.autoStart.cursorElement;_&&_!==y&&(_.style.cursor=""),y.ownerDocument.documentElement.style.cursor=g,y.style.cursor=g,b.autoStart.cursorElement=g?y:null}function Hr(y,g){var b=y.interactable,_=y.element,S=y.prepared;if(y.pointerType==="mouse"&&b&&b.options.styleCursor){var k="";if(S.name){var M=b.options[S.name].cursorChecker;k=F.func(M)?M(S,b,_,y._interacting):g.actions.map[S.name].getCursor(S)}g0(y.element,k||"",g)}else g.autoStart.cursorElement&&g0(g.autoStart.cursorElement,"",g)}var YI={id:"auto-start/base",before:["actions"],install:function(y){var g=y.interactStatic,b=y.defaults;y.usePlugin(ji),b.base.actionChecker=null,b.base.styleCursor=!0,Be(b.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),g.maxInteractions=function(_){return z1(_,y)},y.autoStart={maxInteractions:1/0,withinInteractionLimit:Yh,cursorElement:null}},listeners:{"interactions:down":function(y,g){var b=y.interaction,_=y.pointer,S=y.event,k=y.eventTarget;b.interacting()||D1(b,N1(b,_,S,k,g),g)},"interactions:move":function(y,g){(function(b,_){var S=b.interaction,k=b.pointer,M=b.event,A=b.eventTarget;S.pointerType!=="mouse"||S.pointerIsDown||S.interacting()||D1(S,N1(S,k,M,A,_),_)})(y,g),function(b,_){var S=b.interaction;if(S.pointerIsDown&&!S.interacting()&&S.pointerWasMoved&&S.prepared.name){_.fire("autoStart:before-start",b);var k=S.interactable,M=S.prepared.name;M&&k&&(k.options[M].manualStart||!Yh(k,S.element,S.prepared,_)?S.stop():(S.start(S.prepared,k,S.element),Hr(S,_)))}}(y,g)},"interactions:stop":function(y,g){var b=y.interaction,_=b.interactable;_&&_.options.styleCursor&&g0(b.element,"",g)}},maxInteractions:z1,withinInteractionLimit:Yh,validateAction:L1},y0=YI,v0={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(y,g){var b=y.interaction,_=y.eventTarget,S=y.dx,k=y.dy;if(b.prepared.name==="drag"){var M=Math.abs(S),A=Math.abs(k),O=b.interactable.options.drag,z=O.startAxis,R=M>A?"x":M<A?"y":"xy";if(b.prepared.axis=O.lockAxis==="start"?R[0]:O.lockAxis,R!=="xy"&&z!=="xy"&&z!==R){b.prepared.name=null;for(var W=_,re=function(pe){if(pe!==b.interactable){var ye=b.interactable.options.drag;if(!ye.manualStart&&pe.testIgnoreAllow(ye,W,_)){var Re=pe.getAction(b.downPointer,b.downEvent,b,W);if(Re&&Re.name==="drag"&&function(Ae,qe){if(!qe)return!1;var ot=qe.options.drag.startAxis;return Ae==="xy"||ot==="xy"||ot===Ae}(R,pe)&&y0.validateAction(Re,pe,W,_,g))return pe}}};F.element(W);){var fe=g.interactables.forEachMatch(W,re);if(fe){b.prepared.name="drag",b.interactable=fe,b.element=W;break}W=Oe(W)}}}}}};function Kh(y){var g=y.prepared&&y.prepared.name;if(!g)return null;var b=y.interactable.options;return b[g].hold||b[g].delay}var N={id:"auto-start/hold",install:function(y){var g=y.defaults;y.usePlugin(y0),g.perAction.hold=0,g.perAction.delay=0},listeners:{"interactions:new":function(y){y.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(y){var g=y.interaction,b=Kh(g);b>0&&(g.autoStartHoldTimer=setTimeout(function(){g.start(g.prepared,g.interactable,g.element)},b))},"interactions:move":function(y){var g=y.interaction,b=y.duplicate;g.autoStartHoldTimer&&g.pointerWasMoved&&!b&&(clearTimeout(g.autoStartHoldTimer),g.autoStartHoldTimer=null)},"autoStart:before-start":function(y){var g=y.interaction;Kh(g)>0&&(g.prepared.name=null)}},getHoldDuration:Kh},Y=N,he={id:"auto-start",install:function(y){y.usePlugin(y0),y.usePlugin(Y),y.usePlugin(v0)}},He=function(y){return/^(always|never|auto)$/.test(y)?(this.options.preventDefault=y,this):F.bool(y)?(this.options.preventDefault=y?"always":"never",this):this.options.preventDefault};function St(y){var g=y.interaction,b=y.event;g.interactable&&g.interactable.checkAndPreventDefault(b)}var ii={id:"core/interactablePreventDefault",install:function(y){var g=y.Interactable;g.prototype.preventDefault=He,g.prototype.checkAndPreventDefault=function(b){return function(_,S,k){var M=_.options.preventDefault;if(M!=="never")if(M!=="always"){if(S.events.supportsPassive&&/^touch(start|move)$/.test(k.type)){var A=L(k.target).document,O=S.getDocOptions(A);if(!O||!O.events||O.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(k.type)||F.element(k.target)&&yt(k.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||k.preventDefault()}else k.preventDefault()}(this,y,b)},y.interactions.docEvents.push({type:"dragstart",listener:function(b){for(var _=0,S=y.interactions.list;_<S.length;_++){var k=S[_];if(k.element&&(k.element===b.target||Ee(k.element,b.target)))return void k.interactable.checkAndPreventDefault(b)}}})},listeners:["down","move","up","cancel"].reduce(function(y,g){return y["interactions:".concat(g)]=St,y},{})};function oi(y,g){if(g.phaselessTypes[y])return!0;for(var b in g.map)if(y.indexOf(b)===0&&y.substr(b.length)in g.phases)return!0;return!1}function ci(y){var g={};for(var b in y){var _=y[b];F.plainObject(_)?g[b]=ci(_):F.array(_)?g[b]=M1(_):g[b]=_}return g}var KI=function(){function y(g){s(this,y),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=g,this.result=j1(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return a(y,[{key:"start",value:function(g,b){var _,S,k=g.phase,M=this.interaction,A=function(z){var R=z.interactable.options[z.prepared.name],W=R.modifiers;return W&&W.length?W:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(re){var fe=R[re];return fe&&fe.enabled&&{options:fe,methods:fe._methods}}).filter(function(re){return!!re})}(M);this.prepareStates(A),this.startEdges=Be({},M.edges),this.edges=Be({},this.startEdges),this.startOffset=(_=M.rect,S=b,_?{left:S.x-_.left,top:S.y-_.top,right:_.right-S.x,bottom:_.bottom-S.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var O=this.fillArg({phase:k,pageCoords:b,preEnd:!1});return this.result=j1(),this.startAll(O),this.result=this.setAll(O)}},{key:"fillArg",value:function(g){var b=this.interaction;return g.interaction=b,g.interactable=b.interactable,g.element=b.element,g.rect||(g.rect=b.rect),g.edges||(g.edges=this.startEdges),g.startOffset=this.startOffset,g}},{key:"startAll",value:function(g){for(var b=0,_=this.states;b<_.length;b++){var S=_[b];S.methods.start&&(g.state=S,S.methods.start(g))}}},{key:"setAll",value:function(g){var b=g.phase,_=g.preEnd,S=g.skipModifiers,k=g.rect,M=g.edges;g.coords=Be({},g.pageCoords),g.rect=Be({},k),g.edges=Be({},M);for(var A=S?this.states.slice(S):this.states,O=j1(g.coords,g.rect),z=0;z<A.length;z++){var R,W=A[z],re=W.options,fe=Be({},g.coords),pe=null;(R=W.methods)!=null&&R.set&&this.shouldDo(re,_,b)&&(g.state=W,pe=W.methods.set(g),Hh(g.edges,g.rect,{x:g.coords.x-fe.x,y:g.coords.y-fe.y})),O.eventProps.push(pe)}Be(this.edges,g.edges),O.delta.x=g.coords.x-g.pageCoords.x,O.delta.y=g.coords.y-g.pageCoords.y,O.rectDelta.left=g.rect.left-k.left,O.rectDelta.right=g.rect.right-k.right,O.rectDelta.top=g.rect.top-k.top,O.rectDelta.bottom=g.rect.bottom-k.bottom;var ye=this.result.coords,Re=this.result.rect;if(ye&&Re){var Ae=O.rect.left!==Re.left||O.rect.right!==Re.right||O.rect.top!==Re.top||O.rect.bottom!==Re.bottom;O.changed=Ae||ye.x!==O.coords.x||ye.y!==O.coords.y}return O}},{key:"applyToInteraction",value:function(g){var b=this.interaction,_=g.phase,S=b.coords.cur,k=b.coords.start,M=this.result,A=this.startDelta,O=M.delta;_==="start"&&Be(this.startDelta,M.delta);for(var z=0,R=[[k,A],[S,O]];z<R.length;z++){var W=R[z],re=W[0],fe=W[1];re.page.x+=fe.x,re.page.y+=fe.y,re.client.x+=fe.x,re.client.y+=fe.y}var pe=this.result.rectDelta,ye=g.rect||b.rect;ye.left+=pe.left,ye.right+=pe.right,ye.top+=pe.top,ye.bottom+=pe.bottom,ye.width=ye.right-ye.left,ye.height=ye.bottom-ye.top}},{key:"setAndApply",value:function(g){var b=this.interaction,_=g.phase,S=g.preEnd,k=g.skipModifiers,M=this.setAll(this.fillArg({preEnd:S,phase:_,pageCoords:g.modifiedCoords||b.coords.cur.page}));if(this.result=M,!M.changed&&(!k||k<this.states.length)&&b.interacting())return!1;if(g.modifiedCoords){var A=b.coords.cur.page,O={x:g.modifiedCoords.x-A.x,y:g.modifiedCoords.y-A.y};M.coords.x+=O.x,M.coords.y+=O.y,M.delta.x+=O.x,M.delta.y+=O.y}this.applyToInteraction(g)}},{key:"beforeEnd",value:function(g){var b=g.interaction,_=g.event,S=this.states;if(S&&S.length){for(var k=!1,M=0;M<S.length;M++){var A=S[M];g.state=A;var O=A.options,z=A.methods,R=z.beforeEnd&&z.beforeEnd(g);if(R)return this.endResult=R,!1;k=k||!k&&this.shouldDo(O,!0,g.phase,!0)}k&&b.move({event:_,preEnd:!0})}}},{key:"stop",value:function(g){var b=g.interaction;if(this.states&&this.states.length){var _=Be({states:this.states,interactable:b.interactable,element:b.element,rect:null},g);this.fillArg(_);for(var S=0,k=this.states;S<k.length;S++){var M=k[S];_.state=M,M.methods.stop&&M.methods.stop(_)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(g){this.states=[];for(var b=0;b<g.length;b++){var _=g[b],S=_.options,k=_.methods,M=_.name;this.states.push({options:S,methods:k,index:b,name:M})}return this.states}},{key:"restoreInteractionCoords",value:function(g){var b=g.interaction,_=b.coords,S=b.rect,k=b.modification;if(k.result){for(var M=k.startDelta,A=k.result,O=A.delta,z=A.rectDelta,R=0,W=[[_.start,M],[_.cur,O]];R<W.length;R++){var re=W[R],fe=re[0],pe=re[1];fe.page.x-=pe.x,fe.page.y-=pe.y,fe.client.x-=pe.x,fe.client.y-=pe.y}S.left-=z.left,S.right-=z.right,S.top-=z.top,S.bottom-=z.bottom}}},{key:"shouldDo",value:function(g,b,_,S){return!(!g||g.enabled===!1||S&&!g.endOnly||g.endOnly&&!b||_==="start"&&!g.setStart)}},{key:"copyFrom",value:function(g){this.startOffset=g.startOffset,this.startDelta=g.startDelta,this.startEdges=g.startEdges,this.edges=g.edges,this.states=g.states.map(function(b){return ci(b)}),this.result=j1(Be({},g.result.coords),Be({},g.result.rect))}},{key:"destroy",value:function(){for(var g in this)this[g]=null}}]),y}();function j1(y,g){return{rect:g,coords:y,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Rc(y,g){var b=y.defaults,_={start:y.start,set:y.set,beforeEnd:y.beforeEnd,stop:y.stop},S=function(k){var M=k||{};for(var A in M.enabled=M.enabled!==!1,b)A in M||(M[A]=b[A]);var O={options:M,methods:_,name:g,enable:function(){return M.enabled=!0,O},disable:function(){return M.enabled=!1,O}};return O};return g&&typeof g=="string"&&(S._defaults=b,S._methods=_),S}function b0(y){var g=y.iEvent,b=y.interaction.modification.result;b&&(g.modifiers=b.eventProps)}var xee={id:"modifiers/base",before:["actions"],install:function(y){y.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(y){var g=y.interaction;g.modification=new KI(g)},"interactions:before-action-start":function(y){var g=y.interaction,b=y.interaction.modification;b.start(y,g.coords.start.page),g.edges=b.edges,b.applyToInteraction(y)},"interactions:before-action-move":function(y){var g=y.interaction,b=g.modification,_=b.setAndApply(y);return g.edges=b.edges,_},"interactions:before-action-end":function(y){var g=y.interaction,b=g.modification,_=b.beforeEnd(y);return g.edges=b.startEdges,_},"interactions:action-start":b0,"interactions:action-move":b0,"interactions:action-end":b0,"interactions:after-action-start":function(y){return y.interaction.modification.restoreInteractionCoords(y)},"interactions:after-action-move":function(y){return y.interaction.modification.restoreInteractionCoords(y)},"interactions:stop":function(y){return y.interaction.modification.stop(y)}}},lN=xee,cN={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},QI=function(y){d(b,y);var g=v(b);function b(_,S,k,M,A,O,z){var R;s(this,b),(R=g.call(this,_)).relatedTarget=null,R.screenX=void 0,R.screenY=void 0,R.button=void 0,R.buttons=void 0,R.ctrlKey=void 0,R.shiftKey=void 0,R.altKey=void 0,R.metaKey=void 0,R.page=void 0,R.client=void 0,R.delta=void 0,R.rect=void 0,R.x0=void 0,R.y0=void 0,R.t0=void 0,R.dt=void 0,R.duration=void 0,R.clientX0=void 0,R.clientY0=void 0,R.velocity=void 0,R.speed=void 0,R.swipe=void 0,R.axes=void 0,R.preEnd=void 0,A=A||_.element;var W=_.interactable,re=(W&&W.options||cN).deltaSource,fe=gd(W,A,k),pe=M==="start",ye=M==="end",Re=pe?m(R):_.prevEvent,Ae=pe?_.coords.start:ye?{page:Re.page,client:Re.client,timeStamp:_.coords.cur.timeStamp}:_.coords.cur;return R.page=Be({},Ae.page),R.client=Be({},Ae.client),R.rect=Be({},_.rect),R.timeStamp=Ae.timeStamp,ye||(R.page.x-=fe.x,R.page.y-=fe.y,R.client.x-=fe.x,R.client.y-=fe.y),R.ctrlKey=S.ctrlKey,R.altKey=S.altKey,R.shiftKey=S.shiftKey,R.metaKey=S.metaKey,R.button=S.button,R.buttons=S.buttons,R.target=A,R.currentTarget=A,R.preEnd=O,R.type=z||k+(M||""),R.interactable=W,R.t0=pe?_.pointers[_.pointers.length-1].downTime:Re.t0,R.x0=_.coords.start.page.x-fe.x,R.y0=_.coords.start.page.y-fe.y,R.clientX0=_.coords.start.client.x-fe.x,R.clientY0=_.coords.start.client.y-fe.y,R.delta=pe||ye?{x:0,y:0}:{x:R[re].x-Re[re].x,y:R[re].y-Re[re].y},R.dt=_.coords.delta.timeStamp,R.duration=R.timeStamp-R.t0,R.velocity=Be({},_.coords.velocity[re]),R.speed=yd(R.velocity.x,R.velocity.y),R.swipe=ye||M==="inertiastart"?R.getSwipe():null,R}return a(b,[{key:"getSwipe",value:function(){var _=this._interaction;if(_.prevEvent.speed<600||this.timeStamp-_.prevEvent.timeStamp>150)return null;var S=180*Math.atan2(_.prevEvent.velocityY,_.prevEvent.velocityX)/Math.PI;S<0&&(S+=360);var k=112.5<=S&&S<247.5,M=202.5<=S&&S<337.5;return{up:M,down:!M&&22.5<=S&&S<157.5,left:k,right:!k&&(292.5<=S||S<67.5),angle:S,speed:_.prevEvent.speed,velocity:{x:_.prevEvent.velocityX,y:_.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),b}(Zh);Object.defineProperties(QI.prototype,{pageX:{get:function(){return this.page.x},set:function(y){this.page.x=y}},pageY:{get:function(){return this.page.y},set:function(y){this.page.y=y}},clientX:{get:function(){return this.client.x},set:function(y){this.client.x=y}},clientY:{get:function(){return this.client.y},set:function(y){this.client.y=y}},dx:{get:function(){return this.delta.x},set:function(y){this.delta.x=y}},dy:{get:function(){return this.delta.y},set:function(y){this.delta.y=y}},velocityX:{get:function(){return this.velocity.x},set:function(y){this.velocity.x=y}},velocityY:{get:function(){return this.velocity.y},set:function(y){this.velocity.y=y}}});var See=a(function y(g,b,_,S,k){s(this,y),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=g,this.pointer=b,this.event=_,this.downTime=S,this.downTarget=k}),$ee=function(y){return y.interactable="",y.element="",y.prepared="",y.pointerIsDown="",y.pointerWasMoved="",y._proxy="",y}({}),uN=function(y){return y.start="",y.move="",y.end="",y.stop="",y.interacting="",y}({}),Tee=0,kee=function(){function y(g){var b=this,_=g.pointerType,S=g.scopeFire;s(this,y),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Sd(function(R){this.move(R)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Tee++,this._scopeFire=S,this.pointerType=_;var k=this;this._proxy={};var M=function(R){Object.defineProperty(b._proxy,R,{get:function(){return k[R]}})};for(var A in $ee)M(A);var O=function(R){Object.defineProperty(b._proxy,R,{value:function(){return k[R].apply(k,arguments)}})};for(var z in uN)O(z);this._scopeFire("interactions:new",{interaction:this})}return a(y,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(g,b,_){var S=this.updatePointer(g,b,_,!0),k=this.pointers[S];this._scopeFire("interactions:down",{pointer:g,event:b,eventTarget:_,pointerIndex:S,pointerInfo:k,type:"down",interaction:this})}},{key:"start",value:function(g,b,_){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(g.name==="gesture"?2:1)||!b.options[g.name].enabled)&&($d(this.prepared,g),this.interactable=b,this.element=_,this.rect=b.getRect(_),this.edges=this.prepared.edges?Be({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(g,b,_){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(g,b,_,!1);var S,k,M=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(S=this.coords.cur.client.x-this.coords.start.client.x,k=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=yd(S,k)>this.pointerMoveTolerance);var A,O,z,R=this.getPointerIndex(g),W={pointer:g,pointerIndex:R,pointerInfo:this.pointers[R],event:b,type:"move",eventTarget:_,dx:S,dy:k,duplicate:M,interaction:this};M||(A=this.coords.velocity,O=this.coords.delta,z=Math.max(O.timeStamp/1e3,.001),A.page.x=O.page.x/z,A.page.y=O.page.y/z,A.client.x=O.client.x/z,A.client.y=O.client.y/z,A.timeStamp=z),this._scopeFire("interactions:move",W),M||this.simulation||(this.interacting()&&(W.type=null,this.move(W)),this.pointerWasMoved&&Jn(this.coords.prev,this.coords.cur))}},{key:"move",value:function(g){g&&g.event||S1(this.coords.delta),(g=Be({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},g||{})).phase="move",this._doPhase(g)}},{key:"pointerUp",value:function(g,b,_,S){var k=this.getPointerIndex(g);k===-1&&(k=this.updatePointer(g,b,_,!1));var M=/cancel$/i.test(b.type)?"cancel":"up";this._scopeFire("interactions:".concat(M),{pointer:g,pointerIndex:k,pointerInfo:this.pointers[k],event:b,eventTarget:_,type:M,curEventTarget:S,interaction:this}),this.simulation||this.end(b),this.removePointer(g,b)}},{key:"documentBlur",value:function(g){this.end(g),this._scopeFire("interactions:blur",{event:g,type:"blur",interaction:this})}},{key:"end",value:function(g){var b;this._ending=!0,g=g||this._latestPointer.event,this.interacting()&&(b=this._doPhase({event:g,interaction:this,phase:"end"})),this._ending=!1,b===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(g){var b=bd(g);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:wd(this.pointers,function(_){return _.id===b})}},{key:"getPointerInfo",value:function(g){return this.pointers[this.getPointerIndex(g)]}},{key:"updatePointer",value:function(g,b,_,S){var k,M,A,O=bd(g),z=this.getPointerIndex(g),R=this.pointers[z];return S=S!==!1&&(S||/(down|start)$/i.test(b.type)),R?R.pointer=g:(R=new See(O,g,b,null,null),z=this.pointers.length,this.pointers.push(R)),GI(this.coords.cur,this.pointers.map(function(W){return W.pointer}),this._now()),k=this.coords.delta,M=this.coords.prev,A=this.coords.cur,k.page.x=A.page.x-M.page.x,k.page.y=A.page.y-M.page.y,k.client.x=A.client.x-M.client.x,k.client.y=A.client.y-M.client.y,k.timeStamp=A.timeStamp-M.timeStamp,S&&(this.pointerIsDown=!0,R.downTime=this.coords.cur.timeStamp,R.downTarget=_,vd(this.downPointer,g),this.interacting()||(Jn(this.coords.start,this.coords.cur),Jn(this.coords.prev,this.coords.cur),this.downEvent=b,this.pointerWasMoved=!1)),this._updateLatestPointer(g,b,_),this._scopeFire("interactions:update-pointer",{pointer:g,event:b,eventTarget:_,down:S,pointerInfo:R,pointerIndex:z,interaction:this}),z}},{key:"removePointer",value:function(g,b){var _=this.getPointerIndex(g);if(_!==-1){var S=this.pointers[_];this._scopeFire("interactions:remove-pointer",{pointer:g,event:b,eventTarget:null,pointerIndex:_,pointerInfo:S,interaction:this}),this.pointers.splice(_,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(g,b,_){this._latestPointer.pointer=g,this._latestPointer.event=b,this._latestPointer.eventTarget=_}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(g,b,_,S){return new QI(this,g,this.prepared.name,b,this.element,_,S)}},{key:"_fireEvent",value:function(g){var b;(b=this.interactable)==null||b.fire(g),(!this.prevEvent||g.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=g)}},{key:"_doPhase",value:function(g){var b=g.event,_=g.phase,S=g.preEnd,k=g.type,M=this.rect;if(M&&_==="move"&&(Hh(this.edges,M,this.coords.delta[this.interactable.options.deltaSource]),M.width=M.right-M.left,M.height=M.bottom-M.top),this._scopeFire("interactions:before-action-".concat(_),g)===!1)return!1;var A=g.iEvent=this._createPreparedEvent(b,_,S,k);return this._scopeFire("interactions:action-".concat(_),g),_==="start"&&(this.prevEvent=A),this._fireEvent(A),this._scopeFire("interactions:after-action-".concat(_),g),!0}},{key:"_now",value:function(){return Date.now()}}]),y}();function dN(y){pN(y.interaction)}function pN(y){if(!function(b){return!(!b.offset.pending.x&&!b.offset.pending.y)}(y))return!1;var g=y.offset.pending;return XI(y.coords.cur,g),XI(y.coords.delta,g),Hh(y.edges,y.rect,g),g.x=0,g.y=0,!0}function Iee(y){var g=y.x,b=y.y;this.offset.pending.x+=g,this.offset.pending.y+=b,this.offset.total.x+=g,this.offset.total.y+=b}function XI(y,g){var b=y.page,_=y.client,S=g.x,k=g.y;b.x+=S,b.y+=k,_.x+=S,_.y+=k}uN.offsetBy="";var Eee={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(y){y.Interaction.prototype.offsetBy=Iee},listeners:{"interactions:new":function(y){y.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(y){return function(g){g.pointerIsDown&&(XI(g.coords.cur,g.offset.total),g.offset.pending.x=0,g.offset.pending.y=0)}(y.interaction)},"interactions:before-action-start":dN,"interactions:before-action-move":dN,"interactions:before-action-end":function(y){var g=y.interaction;if(pN(g))return g.move({offset:!0}),g.end(),!1},"interactions:stop":function(y){var g=y.interaction;g.offset.total.x=0,g.offset.total.y=0,g.offset.pending.x=0,g.offset.pending.y=0}}},hN=Eee,Mee=function(){function y(g){s(this,y),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=g}return a(y,[{key:"start",value:function(g){var b=this.interaction,_=V1(b);if(!_||!_.enabled)return!1;var S=b.coords.velocity.client,k=yd(S.x,S.y),M=this.modification||(this.modification=new KI(b));if(M.copyFrom(b.modification),this.t0=b._now(),this.allowResume=_.allowResume,this.v0=k,this.currentOffset={x:0,y:0},this.startCoords=b.coords.cur.page,this.modifierArg=M.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-b.coords.cur.timeStamp<50&&k>_.minSpeed&&k>_.endSpeed)this.startInertia();else{if(M.result=M.setAll(this.modifierArg),!M.result.changed)return!1;this.startSmoothEnd()}return b.modification.result.rect=null,b.offsetBy(this.targetOffset),b._doPhase({interaction:b,event:g,phase:"inertiastart"}),b.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),b.modification.result.rect=null,this.active=!0,b.simulation=this,!0}},{key:"startInertia",value:function(){var g=this,b=this.interaction.coords.velocity.client,_=V1(this.interaction),S=_.resistance,k=-Math.log(_.endSpeed/this.v0)/S;this.targetOffset={x:(b.x-k)/S,y:(b.y-k)/S},this.te=k,this.lambda_v0=S/this.v0,this.one_ve_v0=1-_.endSpeed/this.v0;var M=this.modification,A=this.modifierArg;A.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},M.result=M.setAll(A),M.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+M.result.delta.x,y:this.targetOffset.y+M.result.delta.y}),this.onNextFrame(function(){return g.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var g=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return g.smoothEndTick()})}},{key:"onNextFrame",value:function(g){var b=this;this.timeout=uo.request(function(){b.active&&g()})}},{key:"inertiaTick",value:function(){var g,b,_,S,k,M,A,O=this,z=this.interaction,R=V1(z).resistance,W=(z._now()-this.t0)/1e3;if(W<this.te){var re,fe=1-(Math.exp(-R*W)-this.lambda_v0)/this.one_ve_v0;this.isModified?(g=0,b=0,_=this.targetOffset.x,S=this.targetOffset.y,k=this.modifiedOffset.x,M=this.modifiedOffset.y,re={x:fN(A=fe,g,_,k),y:fN(A,b,S,M)}):re={x:this.targetOffset.x*fe,y:this.targetOffset.y*fe};var pe={x:re.x-this.currentOffset.x,y:re.y-this.currentOffset.y};this.currentOffset.x+=pe.x,this.currentOffset.y+=pe.y,z.offsetBy(pe),z.move(),this.onNextFrame(function(){return O.inertiaTick()})}else z.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var g=this,b=this.interaction,_=b._now()-this.t0,S=V1(b).smoothEndDuration;if(_<S){var k={x:mN(_,0,this.targetOffset.x,S),y:mN(_,0,this.targetOffset.y,S)},M={x:k.x-this.currentOffset.x,y:k.y-this.currentOffset.y};this.currentOffset.x+=M.x,this.currentOffset.y+=M.y,b.offsetBy(M),b.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return g.smoothEndTick()})}else b.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(g){var b=g.pointer,_=g.event,S=g.eventTarget,k=this.interaction;k.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),k.updatePointer(b,_,S,!0),k._doPhase({interaction:k,event:_,phase:"resume"}),Jn(k.coords.prev,k.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,uo.cancel(this.timeout)}}]),y}();function V1(y){var g=y.interactable,b=y.prepared;return g&&g.options&&b.name&&g.options[b.name].inertia}var Aee={id:"inertia",before:["modifiers","actions"],install:function(y){var g=y.defaults;y.usePlugin(hN),y.usePlugin(lN),y.actions.phases.inertiastart=!0,y.actions.phases.resume=!0,g.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(y){var g=y.interaction;g.inertia=new Mee(g)},"interactions:before-action-end":function(y){var g=y.interaction,b=y.event;return(!g._interacting||g.simulation||!g.inertia.start(b))&&null},"interactions:down":function(y){var g=y.interaction,b=y.eventTarget,_=g.inertia;if(_.active)for(var S=b;F.element(S);){if(S===g.element){_.resume(y);break}S=Oe(S)}},"interactions:stop":function(y){var g=y.interaction.inertia;g.active&&g.stop()},"interactions:before-action-resume":function(y){var g=y.interaction.modification;g.stop(y),g.start(y,y.interaction.coords.cur.page),g.applyToInteraction(y)},"interactions:before-action-inertiastart":function(y){return y.interaction.modification.setAndApply(y)},"interactions:action-resume":b0,"interactions:action-inertiastart":b0,"interactions:after-action-inertiastart":function(y){return y.interaction.modification.restoreInteractionCoords(y)},"interactions:after-action-resume":function(y){return y.interaction.modification.restoreInteractionCoords(y)}}};function fN(y,g,b,_){var S=1-y;return S*S*g+2*S*y*b+y*y*_}function mN(y,g,b,_){return-b*(y/=_)*(y-2)+g}var Cee=Aee;function gN(y,g){for(var b=0;b<g.length;b++){var _=g[b];if(y.immediatePropagationStopped)break;_(y)}}var yN=function(){function y(g){s(this,y),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=Be({},g||{})}return a(y,[{key:"fire",value:function(g){var b,_=this.global;(b=this.types[g.type])&&gN(g,b),!g.propagationStopped&&_&&(b=_[g.type])&&gN(g,b)}},{key:"on",value:function(g,b){var _=nl(g,b);for(g in _)this.types[g]=E1(this.types[g]||[],_[g])}},{key:"off",value:function(g,b){var _=nl(g,b);for(g in _){var S=this.types[g];if(S&&S.length)for(var k=0,M=_[g];k<M.length;k++){var A=M[k],O=S.indexOf(A);O!==-1&&S.splice(O,1)}}}},{key:"getRect",value:function(g){return null}}]),y}(),Oee=function(){function y(g){s(this,y),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=g,vd(this,g)}return a(y,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),y}();function w0(y){return F.object(y)?{capture:!!y.capture,passive:!!y.passive}:{capture:!!y,passive:!1}}function U1(y,g){return y===g||(typeof y=="boolean"?!!g.capture===y&&!g.passive:!!y.capture==!!g.capture&&!!y.passive==!!g.passive)}var Pee={id:"events",install:function(y){var g,b=[],_={},S=[],k={add:M,remove:A,addDelegate:function(R,W,re,fe,pe){var ye=w0(pe);if(!_[re]){_[re]=[];for(var Re=0;Re<S.length;Re++){var Ae=S[Re];M(Ae,re,O),M(Ae,re,z,!0)}}var qe=_[re],ot=_d(qe,function(ft){return ft.selector===R&&ft.context===W});ot||(ot={selector:R,context:W,listeners:[]},qe.push(ot)),ot.listeners.push({func:fe,options:ye})},removeDelegate:function(R,W,re,fe,pe){var ye,Re=w0(pe),Ae=_[re],qe=!1;if(Ae)for(ye=Ae.length-1;ye>=0;ye--){var ot=Ae[ye];if(ot.selector===R&&ot.context===W){for(var ft=ot.listeners,Xe=ft.length-1;Xe>=0;Xe--){var at=ft[Xe];if(at.func===fe&&U1(at.options,Re)){ft.splice(Xe,1),ft.length||(Ae.splice(ye,1),A(W,re,O),A(W,re,z,!0)),qe=!0;break}}if(qe)break}}},delegateListener:O,delegateUseCapture:z,delegatedEvents:_,documents:S,targets:b,supportsOptions:!1,supportsPassive:!1};function M(R,W,re,fe){if(R.addEventListener){var pe=w0(fe),ye=_d(b,function(Re){return Re.eventTarget===R});ye||(ye={eventTarget:R,events:{}},b.push(ye)),ye.events[W]||(ye.events[W]=[]),_d(ye.events[W],function(Re){return Re.func===re&&U1(Re.options,pe)})||(R.addEventListener(W,re,k.supportsOptions?pe:pe.capture),ye.events[W].push({func:re,options:pe}))}}function A(R,W,re,fe){if(R.addEventListener&&R.removeEventListener){var pe=wd(b,function(Zr){return Zr.eventTarget===R}),ye=b[pe];if(ye&&ye.events)if(W!=="all"){var Re=!1,Ae=ye.events[W];if(Ae){if(re==="all"){for(var qe=Ae.length-1;qe>=0;qe--){var ot=Ae[qe];A(R,W,ot.func,ot.options)}return}for(var ft=w0(fe),Xe=0;Xe<Ae.length;Xe++){var at=Ae[Xe];if(at.func===re&&U1(at.options,ft)){R.removeEventListener(W,re,k.supportsOptions?ft:ft.capture),Ae.splice(Xe,1),Ae.length===0&&(delete ye.events[W],Re=!0);break}}}Re&&!Object.keys(ye.events).length&&b.splice(pe,1)}else for(W in ye.events)ye.events.hasOwnProperty(W)&&A(R,W,"all")}}function O(R,W){for(var re=w0(W),fe=new Oee(R),pe=_[R.type],ye=I1(R)[0],Re=ye;F.element(Re);){for(var Ae=0;Ae<pe.length;Ae++){var qe=pe[Ae],ot=qe.selector,ft=qe.context;if(yt(Re,ot)&&Ee(ft,ye)&&Ee(ft,Re)){var Xe=qe.listeners;fe.currentTarget=Re;for(var at=0;at<Xe.length;at++){var Zr=Xe[at];U1(Zr.options,re)&&Zr.func(fe)}}}Re=Oe(Re)}}function z(R){return O(R,!0)}return(g=y.document)==null||g.createElement("div").addEventListener("test",null,{get capture(){return k.supportsOptions=!0},get passive(){return k.supportsPassive=!0}}),y.events=k,k}},eE={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(y){for(var g=0,b=eE.methodOrder;g<b.length;g++){var _=b[g],S=eE[_](y);if(S)return S}return null},simulationResume:function(y){var g=y.pointerType,b=y.eventType,_=y.eventTarget,S=y.scope;if(!/down|start/i.test(b))return null;for(var k=0,M=S.interactions.list;k<M.length;k++){var A=M[k],O=_;if(A.simulation&&A.simulation.allowResume&&A.pointerType===g)for(;O;){if(O===A.element)return A;O=Oe(O)}}return null},mouseOrPen:function(y){var g,b=y.pointerId,_=y.pointerType,S=y.eventType,k=y.scope;if(_!=="mouse"&&_!=="pen")return null;for(var M=0,A=k.interactions.list;M<A.length;M++){var O=A[M];if(O.pointerType===_){if(O.simulation&&!vN(O,b))continue;if(O.interacting())return O;g||(g=O)}}if(g)return g;for(var z=0,R=k.interactions.list;z<R.length;z++){var W=R[z];if(!(W.pointerType!==_||/down/i.test(S)&&W.simulation))return W}return null},hasPointer:function(y){for(var g=y.pointerId,b=0,_=y.scope.interactions.list;b<_.length;b++){var S=_[b];if(vN(S,g))return S}return null},idle:function(y){for(var g=y.pointerType,b=0,_=y.scope.interactions.list;b<_.length;b++){var S=_[b];if(S.pointers.length===1){var k=S.interactable;if(k&&(!k.options.gesture||!k.options.gesture.enabled))continue}else if(S.pointers.length>=2)continue;if(!S.interacting()&&g===S.pointerType)return S}return null}};function vN(y,g){return y.pointers.some(function(b){return b.id===g})}var Ree=eE,tE=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function bN(y,g){return function(b){var _=g.interactions.list,S=k1(b),k=I1(b),M=k[0],A=k[1],O=[];if(/^touch/.test(b.type)){g.prevTouchTime=g.now();for(var z=0,R=b.changedTouches;z<R.length;z++){var W=R[z],re={pointer:W,pointerId:bd(W),pointerType:S,eventType:b.type,eventTarget:M,curEventTarget:A,scope:g},fe=wN(re);O.push([re.pointer,re.eventTarget,re.curEventTarget,fe])}}else{var pe=!1;if(!be.supportsPointerEvent&&/mouse/.test(b.type)){for(var ye=0;ye<_.length&&!pe;ye++)pe=_[ye].pointerType!=="mouse"&&_[ye].pointerIsDown;pe=pe||g.now()-g.prevTouchTime<500||b.timeStamp===0}if(!pe){var Re={pointer:b,pointerId:bd(b),pointerType:S,eventType:b.type,curEventTarget:A,eventTarget:M,scope:g},Ae=wN(Re);O.push([Re.pointer,Re.eventTarget,Re.curEventTarget,Ae])}}for(var qe=0;qe<O.length;qe++){var ot=O[qe],ft=ot[0],Xe=ot[1],at=ot[2];ot[3][y](ft,b,Xe,at)}}}function wN(y){var g=y.pointerType,b=y.scope,_={interaction:Ree.search(y),searchDetails:y};return b.fire("interactions:find",_),_.interaction||b.interactions.new({pointerType:g})}function iE(y,g){var b=y.doc,_=y.scope,S=y.options,k=_.interactions.docEvents,M=_.events,A=M[g];for(var O in _.browser.isIOS&&!S.events&&(S.events={passive:!1}),M.delegatedEvents)A(b,O,M.delegateListener),A(b,O,M.delegateUseCapture,!0);for(var z=S&&S.events,R=0;R<k.length;R++){var W=k[R];A(b,W.type,W.listener,z)}}var Lee={id:"core/interactions",install:function(y){for(var g={},b=0;b<tE.length;b++){var _=tE[b];g[_]=bN(_,y)}var S,k=be.pEventTypes;function M(){for(var A=0,O=y.interactions.list;A<O.length;A++){var z=O[A];if(z.pointerIsDown&&z.pointerType==="touch"&&!z._interacting)for(var R=function(){var fe=re[W];y.documents.some(function(pe){return Ee(pe.doc,fe.downTarget)})||z.removePointer(fe.pointer,fe.event)},W=0,re=z.pointers;W<re.length;W++)R()}}(S=H.PointerEvent?[{type:k.down,listener:M},{type:k.down,listener:g.pointerDown},{type:k.move,listener:g.pointerMove},{type:k.up,listener:g.pointerUp},{type:k.cancel,listener:g.pointerUp}]:[{type:"mousedown",listener:g.pointerDown},{type:"mousemove",listener:g.pointerMove},{type:"mouseup",listener:g.pointerUp},{type:"touchstart",listener:M},{type:"touchstart",listener:g.pointerDown},{type:"touchmove",listener:g.pointerMove},{type:"touchend",listener:g.pointerUp},{type:"touchcancel",listener:g.pointerUp}]).push({type:"blur",listener:function(A){for(var O=0,z=y.interactions.list;O<z.length;O++)z[O].documentBlur(A)}}),y.prevTouchTime=0,y.Interaction=function(A){d(z,A);var O=v(z);function z(){return s(this,z),O.apply(this,arguments)}return a(z,[{key:"pointerMoveTolerance",get:function(){return y.interactions.pointerMoveTolerance},set:function(R){y.interactions.pointerMoveTolerance=R}},{key:"_now",value:function(){return y.now()}}]),z}(kee),y.interactions={list:[],new:function(A){A.scopeFire=function(z,R){return y.fire(z,R)};var O=new y.Interaction(A);return y.interactions.list.push(O),O},listeners:g,docEvents:S,pointerMoveTolerance:1},y.usePlugin(ii)},listeners:{"scope:add-document":function(y){return iE(y,"add")},"scope:remove-document":function(y){return iE(y,"remove")},"interactable:unset":function(y,g){for(var b=y.interactable,_=g.interactions.list.length-1;_>=0;_--){var S=g.interactions.list[_];S.interactable===b&&(S.stop(),g.fire("interactions:destroy",{interaction:S}),S.destroy(),g.interactions.list.length>2&&g.interactions.list.splice(_,1))}}},onDocSignal:iE,doOnInteractions:bN,methodNames:tE},Fee=Lee,Lc=function(y){return y[y.On=0]="On",y[y.Off=1]="Off",y}(Lc||{}),Nee=function(){function y(g,b,_,S){s(this,y),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new yN,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=b.actions,this.target=g,this._context=b.context||_,this._win=L(Oc(g)?this._context:g),this._doc=this._win.document,this._scopeEvents=S,this.set(b)}return a(y,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(g,b){return F.func(b.onstart)&&this.on("".concat(g,"start"),b.onstart),F.func(b.onmove)&&this.on("".concat(g,"move"),b.onmove),F.func(b.onend)&&this.on("".concat(g,"end"),b.onend),F.func(b.oninertiastart)&&this.on("".concat(g,"inertiastart"),b.oninertiastart),this}},{key:"updatePerActionListeners",value:function(g,b,_){var S,k=this,M=(S=this._actions.map[g])==null?void 0:S.filterEventType,A=function(O){return(M==null||M(O))&&oi(O,k._actions)};(F.array(b)||F.object(b))&&this._onOff(Lc.Off,g,b,void 0,A),(F.array(_)||F.object(_))&&this._onOff(Lc.On,g,_,void 0,A)}},{key:"setPerAction",value:function(g,b){var _=this._defaults;for(var S in b){var k=S,M=this.options[g],A=b[k];k==="listeners"&&this.updatePerActionListeners(g,M.listeners,A),F.array(A)?M[k]=M1(A):F.plainObject(A)?(M[k]=Be(M[k]||{},ci(A)),F.object(_.perAction[k])&&"enabled"in _.perAction[k]&&(M[k].enabled=A.enabled!==!1)):F.bool(A)&&F.object(_.perAction[k])?M[k].enabled=A:M[k]=A}}},{key:"getRect",value:function(g){return g=g||(F.element(this.target)?this.target:null),F.string(this.target)&&(g=g||this._context.querySelector(this.target)),Ac(g)}},{key:"rectChecker",value:function(g){var b=this;return F.func(g)?(this.getRect=function(_){var S=Be({},g.apply(b,_));return"width"in S||(S.width=S.right-S.left,S.height=S.bottom-S.top),S},this):g===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(g,b){if(Oc(b)||F.object(b)){for(var _ in this.options[g]=b,this._actions.map)this.options[_][g]=b;return this}return this.options[g]}},{key:"origin",value:function(g){return this._backCompatOption("origin",g)}},{key:"deltaSource",value:function(g){return g==="page"||g==="client"?(this.options.deltaSource=g,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var g=this.target;return F.string(g)?Array.from(this._context.querySelectorAll(g)):F.func(g)&&g.getAllElements?g.getAllElements():F.element(g)?[g]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(g){return this._context===g.ownerDocument||Ee(this._context,g)}},{key:"testIgnoreAllow",value:function(g,b,_){return!this.testIgnore(g.ignoreFrom,b,_)&&this.testAllow(g.allowFrom,b,_)}},{key:"testAllow",value:function(g,b,_){return!g||!!F.element(_)&&(F.string(g)?xr(_,g,b):!!F.element(g)&&Ee(g,_))}},{key:"testIgnore",value:function(g,b,_){return!(!g||!F.element(_))&&(F.string(g)?xr(_,g,b):!!F.element(g)&&Ee(g,_))}},{key:"fire",value:function(g){return this.events.fire(g),this}},{key:"_onOff",value:function(g,b,_,S,k){F.object(b)&&!F.array(b)&&(S=_,_=null);var M=nl(b,_,k);for(var A in M){A==="wheel"&&(A=be.wheelEvent);for(var O=0,z=M[A];O<z.length;O++){var R=z[O];oi(A,this._actions)?this.events[g===Lc.On?"on":"off"](A,R):F.string(this.target)?this._scopeEvents[g===Lc.On?"addDelegate":"removeDelegate"](this.target,this._context,A,R,S):this._scopeEvents[g===Lc.On?"add":"remove"](this.target,A,R,S)}}return this}},{key:"on",value:function(g,b,_){return this._onOff(Lc.On,g,b,_)}},{key:"off",value:function(g,b,_){return this._onOff(Lc.Off,g,b,_)}},{key:"set",value:function(g){var b=this._defaults;for(var _ in F.object(g)||(g={}),this.options=ci(b.base),this._actions.methodDict){var S=_,k=this._actions.methodDict[S];this.options[S]={},this.setPerAction(S,Be(Be({},b.perAction),b.actions[S])),this[k](g[S])}for(var M in g)M!=="getRect"?F.func(this[M])&&this[M](g[M]):this.rectChecker(g.getRect);return this}},{key:"unset",value:function(){if(F.string(this.target))for(var g in this._scopeEvents.delegatedEvents)for(var b=this._scopeEvents.delegatedEvents[g],_=b.length-1;_>=0;_--){var S=b[_],k=S.selector,M=S.context,A=S.listeners;k===this.target&&M===this._context&&b.splice(_,1);for(var O=A.length-1;O>=0;O--)this._scopeEvents.removeDelegate(this.target,this._context,g,A[O][0],A[O][1])}else this._scopeEvents.remove(this.target,"all")}}]),y}(),Dee=function(){function y(g){var b=this;s(this,y),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=g,g.addListeners({"interactable:unset":function(_){var S=_.interactable,k=S.target,M=F.string(k)?b.selectorMap[k]:k[b.scope.id],A=wd(M,function(O){return O===S});M.splice(A,1)}})}return a(y,[{key:"new",value:function(g,b){b=Be(b||{},{actions:this.scope.actions});var _=new this.scope.Interactable(g,b,this.scope.document,this.scope.events);return this.scope.addDocument(_._doc),this.list.push(_),F.string(g)?(this.selectorMap[g]||(this.selectorMap[g]=[]),this.selectorMap[g].push(_)):(_.target[this.scope.id]||Object.defineProperty(g,this.scope.id,{value:[],configurable:!0}),g[this.scope.id].push(_)),this.scope.fire("interactable:new",{target:g,options:b,interactable:_,win:this.scope._win}),_}},{key:"getExisting",value:function(g,b){var _=b&&b.context||this.scope.document,S=F.string(g),k=S?this.selectorMap[g]:g[this.scope.id];if(k)return _d(k,function(M){return M._context===_&&(S||M.inContext(g))})}},{key:"forEachMatch",value:function(g,b){for(var _=0,S=this.list;_<S.length;_++){var k=S[_],M=void 0;if((F.string(k.target)?F.element(g)&&yt(g,k.target):g===k.target)&&k.inContext(g)&&(M=b(k)),M!==void 0)return M}}}]),y}(),zee=function(){function y(){var g=this;s(this,y),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=be,this.defaults=ci(cN),this.Eventable=yN,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(_){var S=function k(M,A){var O=_.interactables.getExisting(M,A);return O||((O=_.interactables.new(M,A)).events.global=k.globalEvents),O};return S.getPointerAverage=HI,S.getTouchBBox=c0,S.getTouchDistance=u0,S.getTouchAngle=d0,S.getElementRect=Ac,S.getElementClientRect=lo,S.matchesSelector=yt,S.closest=we,S.globalEvents={},S.version="1.10.27",S.scope=_,S.use=function(k,M){return this.scope.usePlugin(k,M),this},S.isSet=function(k,M){return!!this.scope.interactables.get(k,M&&M.context)},S.on=Sd(function(k,M,A){if(F.string(k)&&k.search(" ")!==-1&&(k=k.trim().split(/ +/)),F.array(k)){for(var O=0,z=k;O<z.length;O++){var R=z[O];this.on(R,M,A)}return this}if(F.object(k)){for(var W in k)this.on(W,k[W],M);return this}return oi(k,this.scope.actions)?this.globalEvents[k]?this.globalEvents[k].push(M):this.globalEvents[k]=[M]:this.scope.events.add(this.scope.document,k,M,{options:A}),this},"The interact.on() method is being deprecated"),S.off=Sd(function(k,M,A){if(F.string(k)&&k.search(" ")!==-1&&(k=k.trim().split(/ +/)),F.array(k)){for(var O=0,z=k;O<z.length;O++){var R=z[O];this.off(R,M,A)}return this}if(F.object(k)){for(var W in k)this.off(W,k[W],M);return this}var re;return oi(k,this.scope.actions)?k in this.globalEvents&&(re=this.globalEvents[k].indexOf(M))!==-1&&this.globalEvents[k].splice(re,1):this.scope.events.remove(this.scope.document,k,M,A),this},"The interact.off() method is being deprecated"),S.debug=function(){return this.scope},S.supportsTouch=function(){return be.supportsTouch},S.supportsPointerEvent=function(){return be.supportsPointerEvent},S.stop=function(){for(var k=0,M=this.scope.interactions.list;k<M.length;k++)M[k].stop();return this},S.pointerMoveTolerance=function(k){return F.number(k)?(this.scope.interactions.pointerMoveTolerance=k,this):this.scope.interactions.pointerMoveTolerance},S.addDocument=function(k,M){this.scope.addDocument(k,M)},S.removeDocument=function(k){this.scope.removeDocument(k)},S}(this),this.InteractEvent=QI,this.Interactable=void 0,this.interactables=new Dee(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(_){return g.removeDocument(_.target)};var b=this;this.Interactable=function(_){d(k,_);var S=v(k);function k(){return s(this,k),S.apply(this,arguments)}return a(k,[{key:"_defaults",get:function(){return b.defaults}},{key:"set",value:function(M){return w(h(k.prototype),"set",this).call(this,M),b.fire("interactable:set",{options:M,interactable:this}),this}},{key:"unset",value:function(){w(h(k.prototype),"unset",this).call(this);var M=b.interactables.list.indexOf(this);M<0||(b.interactables.list.splice(M,1),b.fire("interactable:unset",{interactable:this}))}}]),k}(Nee)}return a(y,[{key:"addListeners",value:function(g,b){this.listenerMaps.push({id:b,map:g})}},{key:"fire",value:function(g,b){for(var _=0,S=this.listenerMaps;_<S.length;_++){var k=S[_].map[g];if(k&&k(b,this,g)===!1)return!1}}},{key:"init",value:function(g){return this.isInitialized?this:function(b,_){return b.isInitialized=!0,F.window(_)&&P(_),H.init(_),be.init(_),uo.init(_),b.window=_,b.document=_.document,b.usePlugin(Fee),b.usePlugin(Pee),b}(this,g)}},{key:"pluginIsInstalled",value:function(g){var b=g.id;return b?!!this._plugins.map[b]:this._plugins.list.indexOf(g)!==-1}},{key:"usePlugin",value:function(g,b){if(!this.isInitialized)return this;if(this.pluginIsInstalled(g))return this;if(g.id&&(this._plugins.map[g.id]=g),this._plugins.list.push(g),g.install&&g.install(this,b),g.listeners&&g.before){for(var _=0,S=this.listenerMaps.length,k=g.before.reduce(function(A,O){return A[O]=!0,A[_N(O)]=!0,A},{});_<S;_++){var M=this.listenerMaps[_].id;if(M&&(k[M]||k[_N(M)]))break}this.listenerMaps.splice(_,0,{id:g.id,map:g.listeners})}else g.listeners&&this.listenerMaps.push({id:g.id,map:g.listeners});return this}},{key:"addDocument",value:function(g,b){if(this.getDocIndex(g)!==-1)return!1;var _=L(g);b=b?Be({},b):{},this.documents.push({doc:g,options:b}),this.events.documents.push(g),g!==this.document&&this.events.add(_,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:g,window:_,scope:this,options:b})}},{key:"removeDocument",value:function(g){var b=this.getDocIndex(g),_=L(g),S=this.documents[b].options;this.events.remove(_,"unload",this.onWindowUnload),this.documents.splice(b,1),this.events.documents.splice(b,1),this.fire("scope:remove-document",{doc:g,window:_,scope:this,options:S})}},{key:"getDocIndex",value:function(g){for(var b=0;b<this.documents.length;b++)if(this.documents[b].doc===g)return b;return-1}},{key:"getDocOptions",value:function(g){var b=this.getDocIndex(g);return b===-1?null:this.documents[b].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),y}();function _N(y){return y&&y.replace(/\/.*$/,"")}var xN=new zee,Wr=xN.interactStatic,jee=typeof globalThis<"u"?globalThis:window;xN.init(jee);var Vee=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(y){var g=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(_){var S=_[0],k=_[1];return S in y||k in y}),b=function(_,S){for(var k=y.range,M=y.limits,A=M===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:M,O=y.offset,z=O===void 0?{x:0,y:0}:O,R={range:k,grid:y,x:null,y:null},W=0;W<g.length;W++){var re=g[W],fe=re[0],pe=re[1],ye=Math.round((_-z.x)/y[fe]),Re=Math.round((S-z.y)/y[pe]);R[fe]=Math.max(A.left,Math.min(A.right,ye*y[fe]+z.x)),R[pe]=Math.max(A.top,Math.min(A.bottom,Re*y[pe]+z.y))}return R};return b.grid=y,b.coordFields=g,b}}),Uee={id:"snappers",install:function(y){var g=y.interactStatic;g.snappers=Be(g.snappers||{},Vee),g.createSnapGrid=g.snappers.grid}},qee=Uee,Bee={start:function(y){var g=y.state,b=y.rect,_=y.edges,S=y.pageCoords,k=g.options,M=k.ratio,A=k.enabled,O=g.options,z=O.equalDelta,R=O.modifiers;M==="preserve"&&(M=b.width/b.height),g.startCoords=Be({},S),g.startRect=Be({},b),g.ratio=M,g.equalDelta=z;var W=g.linkedEdges={top:_.top||_.left&&!_.bottom,left:_.left||_.top&&!_.right,bottom:_.bottom||_.right&&!_.top,right:_.right||_.bottom&&!_.left};if(g.xIsPrimaryAxis=!(!_.left&&!_.right),g.equalDelta){var re=(W.left?1:-1)*(W.top?1:-1);g.edgeSign={x:re,y:re}}else g.edgeSign={x:W.left?-1:1,y:W.top?-1:1};if(A!==!1&&Be(_,W),R!=null&&R.length){var fe=new KI(y.interaction);fe.copyFrom(y.interaction.modification),fe.prepareStates(R),g.subModification=fe,fe.startAll(r({},y))}},set:function(y){var g=y.state,b=y.rect,_=y.coords,S=g.linkedEdges,k=Be({},_),M=g.equalDelta?Gee:Hee;if(Be(y.edges,S),M(g,g.xIsPrimaryAxis,_,b),!g.subModification)return null;var A=Be({},b);Hh(S,A,{x:_.x-k.x,y:_.y-k.y});var O=g.subModification.setAll(r(r({},y),{},{rect:A,edges:S,pageCoords:_,prevCoords:_,prevRect:A})),z=O.delta;return O.changed&&(M(g,Math.abs(z.x)>Math.abs(z.y),O.coords,O.rect),Be(_,O.coords)),O.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Gee(y,g,b){var _=y.startCoords,S=y.edgeSign;g?b.y=_.y+(b.x-_.x)*S.y:b.x=_.x+(b.y-_.y)*S.x}function Hee(y,g,b,_){var S=y.startRect,k=y.startCoords,M=y.ratio,A=y.edgeSign;if(g){var O=_.width/M;b.y=k.y+(O-S.height)*A.y}else{var z=_.height*M;b.x=k.x+(z-S.width)*A.x}}var Wee=Rc(Bee,"aspectRatio"),SN=function(){};SN._defaults={};var q1=SN;function Td(y,g,b){return F.func(y)?md(y,g.interactable,g.element,[b.x,b.y,g]):md(y,g.interactable,g.element)}var B1={start:function(y){var g=y.rect,b=y.startOffset,_=y.state,S=y.interaction,k=y.pageCoords,M=_.options,A=M.elementRect,O=Be({left:0,top:0,right:0,bottom:0},M.offset||{});if(g&&A){var z=Td(M.restriction,S,k);if(z){var R=z.right-z.left-g.width,W=z.bottom-z.top-g.height;R<0&&(O.left+=R,O.right+=R),W<0&&(O.top+=W,O.bottom+=W)}O.left+=b.left-g.width*A.left,O.top+=b.top-g.height*A.top,O.right+=b.right-g.width*(1-A.right),O.bottom+=b.bottom-g.height*(1-A.bottom)}_.offset=O},set:function(y){var g=y.coords,b=y.interaction,_=y.state,S=_.options,k=_.offset,M=Td(S.restriction,b,g);if(M){var A=function(O){return!O||"left"in O&&"top"in O||((O=Be({},O)).left=O.x||0,O.top=O.y||0,O.right=O.right||O.left+O.width,O.bottom=O.bottom||O.top+O.height),O}(M);g.x=Math.max(Math.min(A.right-k.right,g.x),A.left+k.left),g.y=Math.max(Math.min(A.bottom-k.bottom,g.y),A.top+k.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Zee=Rc(B1,"restrict"),$N={top:1/0,left:1/0,bottom:-1/0,right:-1/0},TN={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function kN(y,g){for(var b=0,_=["top","left","bottom","right"];b<_.length;b++){var S=_[b];S in y||(y[S]=g[S])}return y}var _0={noInner:$N,noOuter:TN,start:function(y){var g,b=y.interaction,_=y.startOffset,S=y.state,k=S.options;k&&(g=Gh(Td(k.offset,b,b.coords.start.page))),g=g||{x:0,y:0},S.offset={top:g.y+_.top,left:g.x+_.left,bottom:g.y-_.bottom,right:g.x-_.right}},set:function(y){var g=y.coords,b=y.edges,_=y.interaction,S=y.state,k=S.offset,M=S.options;if(b){var A=Be({},g),O=Td(M.inner,_,A)||{},z=Td(M.outer,_,A)||{};kN(O,$N),kN(z,TN),b.top?g.y=Math.min(Math.max(z.top+k.top,A.y),O.top+k.top):b.bottom&&(g.y=Math.max(Math.min(z.bottom+k.bottom,A.y),O.bottom+k.bottom)),b.left?g.x=Math.min(Math.max(z.left+k.left,A.x),O.left+k.left):b.right&&(g.x=Math.max(Math.min(z.right+k.right,A.x),O.right+k.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Jee=Rc(_0,"restrictEdges"),Yee=Be({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(y){}},B1.defaults),Kee=Rc({start:B1.start,set:B1.set,defaults:Yee},"restrictRect"),Qee={width:-1/0,height:-1/0},Xee={width:1/0,height:1/0},ete=Rc({start:function(y){return _0.start(y)},set:function(y){var g=y.interaction,b=y.state,_=y.rect,S=y.edges,k=b.options;if(S){var M=a0(Td(k.min,g,y.coords))||Qee,A=a0(Td(k.max,g,y.coords))||Xee;b.options={endOnly:k.endOnly,inner:Be({},_0.noInner),outer:Be({},_0.noOuter)},S.top?(b.options.inner.top=_.bottom-M.height,b.options.outer.top=_.bottom-A.height):S.bottom&&(b.options.inner.bottom=_.top+M.height,b.options.outer.bottom=_.top+A.height),S.left?(b.options.inner.left=_.right-M.width,b.options.outer.left=_.right-A.width):S.right&&(b.options.inner.right=_.left+M.width,b.options.outer.right=_.left+A.width),_0.set(y),b.options=k}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),rE={start:function(y){var g,b=y.interaction,_=y.interactable,S=y.element,k=y.rect,M=y.state,A=y.startOffset,O=M.options,z=O.offsetWithOrigin?function(re){var fe=re.interaction.element,pe=Gh(md(re.state.options.origin,null,null,[fe])),ye=pe||gd(re.interactable,fe,re.interaction.prepared.name);return ye}(y):{x:0,y:0};if(O.offset==="startCoords")g={x:b.coords.start.page.x,y:b.coords.start.page.y};else{var R=md(O.offset,_,S,[b]);(g=Gh(R)||{x:0,y:0}).x+=z.x,g.y+=z.y}var W=O.relativePoints;M.offsets=k&&W&&W.length?W.map(function(re,fe){return{index:fe,relativePoint:re,x:A.left-k.width*re.x+g.x,y:A.top-k.height*re.y+g.y}}):[{index:0,relativePoint:null,x:g.x,y:g.y}]},set:function(y){var g=y.interaction,b=y.coords,_=y.state,S=_.options,k=_.offsets,M=gd(g.interactable,g.element,g.prepared.name),A=Be({},b),O=[];S.offsetWithOrigin||(A.x-=M.x,A.y-=M.y);for(var z=0,R=k;z<R.length;z++)for(var W=R[z],re=A.x-W.x,fe=A.y-W.y,pe=0,ye=S.targets.length;pe<ye;pe++){var Re=S.targets[pe],Ae=void 0;(Ae=F.func(Re)?Re(re,fe,g._proxy,W,pe):Re)&&O.push({x:(F.number(Ae.x)?Ae.x:re)+W.x,y:(F.number(Ae.y)?Ae.y:fe)+W.y,range:F.number(Ae.range)?Ae.range:S.range,source:Re,index:pe,offset:W})}for(var qe={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},ot=0;ot<O.length;ot++){var ft=O[ot],Xe=ft.range,at=ft.x-A.x,Zr=ft.y-A.y,ai=yd(at,Zr),Kn=ai<=Xe;Xe===1/0&&qe.inRange&&qe.range!==1/0&&(Kn=!1),qe.target&&!(Kn?qe.inRange&&Xe!==1/0?ai/Xe<qe.distance/qe.range:Xe===1/0&&qe.range!==1/0||ai<qe.distance:!qe.inRange&&ai<qe.distance)||(qe.target=ft,qe.distance=ai,qe.range=Xe,qe.inRange=Kn,qe.delta.x=at,qe.delta.y=Zr)}return qe.inRange&&(b.x=qe.target.x,b.y=qe.target.y),_.closest=qe,qe},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},tte=Rc(rE,"snap"),G1={start:function(y){var g=y.state,b=y.edges,_=g.options;if(!b)return null;y.state={options:{targets:null,relativePoints:[{x:b.left?0:1,y:b.top?0:1}],offset:_.offset||"self",origin:{x:0,y:0},range:_.range}},g.targetFields=g.targetFields||[["width","height"],["x","y"]],rE.start(y),g.offsets=y.state.offsets,y.state=g},set:function(y){var g=y.interaction,b=y.state,_=y.coords,S=b.options,k=b.offsets,M={x:_.x-k[0].x,y:_.y-k[0].y};b.options=Be({},S),b.options.targets=[];for(var A=0,O=S.targets||[];A<O.length;A++){var z=O[A],R=void 0;if(R=F.func(z)?z(M.x,M.y,g):z){for(var W=0,re=b.targetFields;W<re.length;W++){var fe=re[W],pe=fe[0],ye=fe[1];if(pe in R||ye in R){R.x=R[pe],R.y=R[ye];break}}b.options.targets.push(R)}}var Re=rE.set(y);return b.options=S,Re},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},ite=Rc(G1,"snapSize"),nE={aspectRatio:Wee,restrictEdges:Jee,restrict:Zee,restrictRect:Kee,restrictSize:ete,snapEdges:Rc({start:function(y){var g=y.edges;return g?(y.state.targetFields=y.state.targetFields||[[g.left?"left":"right",g.top?"top":"bottom"]],G1.start(y)):null},set:G1.set,defaults:Be(ci(G1.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:tte,snapSize:ite,spring:q1,avoid:q1,transform:q1,rubberband:q1},rte={id:"modifiers",install:function(y){var g=y.interactStatic;for(var b in y.usePlugin(lN),y.usePlugin(qee),g.modifiers=nE,nE){var _=nE[b],S=_._defaults,k=_._methods;S._methods=k,y.defaults.perAction[b]=S}}},nte=rte,IN=function(y){d(b,y);var g=v(b);function b(_,S,k,M,A,O){var z;if(s(this,b),vd(m(z=g.call(this,A)),k),k!==S&&vd(m(z),S),z.timeStamp=O,z.originalEvent=k,z.type=_,z.pointerId=bd(S),z.pointerType=k1(S),z.target=M,z.currentTarget=null,_==="tap"){var R=A.getPointerIndex(S);z.dt=z.timeStamp-A.pointers[R].downTime;var W=z.timeStamp-A.tapTime;z.double=!!A.prevTap&&A.prevTap.type!=="doubletap"&&A.prevTap.target===z.target&&W<500}else _==="doubletap"&&(z.dt=S.timeStamp-A.tapTime,z.double=!0);return z}return a(b,[{key:"_subtractOrigin",value:function(_){var S=_.x,k=_.y;return this.pageX-=S,this.pageY-=k,this.clientX-=S,this.clientY-=k,this}},{key:"_addOrigin",value:function(_){var S=_.x,k=_.y;return this.pageX+=S,this.pageY+=k,this.clientX+=S,this.clientY+=k,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),b}(Zh),x0={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(y){y.pointerEvents=x0,y.defaults.actions.pointerEvents=x0.defaults,Be(y.actions.phaselessTypes,x0.types)},listeners:{"interactions:new":function(y){var g=y.interaction;g.prevTap=null,g.tapTime=0},"interactions:update-pointer":function(y){var g=y.down,b=y.pointerInfo;!g&&b.hold||(b.hold={duration:1/0,timeout:null})},"interactions:move":function(y,g){var b=y.interaction,_=y.pointer,S=y.event,k=y.eventTarget;y.duplicate||b.pointerIsDown&&!b.pointerWasMoved||(b.pointerIsDown&&sE(y),Fc({interaction:b,pointer:_,event:S,eventTarget:k,type:"move"},g))},"interactions:down":function(y,g){(function(b,_){for(var S=b.interaction,k=b.pointer,M=b.event,A=b.eventTarget,O=b.pointerIndex,z=S.pointers[O].hold,R=Cc(A),W={interaction:S,pointer:k,event:M,eventTarget:A,type:"hold",targets:[],path:R,node:null},re=0;re<R.length;re++){var fe=R[re];W.node=fe,_.fire("pointerEvents:collect-targets",W)}if(W.targets.length){for(var pe=1/0,ye=0,Re=W.targets;ye<Re.length;ye++){var Ae=Re[ye].eventable.options.holdDuration;Ae<pe&&(pe=Ae)}z.duration=pe,z.timeout=setTimeout(function(){Fc({interaction:S,eventTarget:A,pointer:k,event:M,type:"hold"},_)},pe)}})(y,g),Fc(y,g)},"interactions:up":function(y,g){sE(y),Fc(y,g),function(b,_){var S=b.interaction,k=b.pointer,M=b.event,A=b.eventTarget;S.pointerWasMoved||Fc({interaction:S,eventTarget:A,pointer:k,event:M,type:"tap"},_)}(y,g)},"interactions:cancel":function(y,g){sE(y),Fc(y,g)}},PointerEvent:IN,fire:Fc,collectEventTargets:EN,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Fc(y,g){var b=y.interaction,_=y.pointer,S=y.event,k=y.eventTarget,M=y.type,A=y.targets,O=A===void 0?EN(y,g):A,z=new IN(M,_,S,k,b,g.now());g.fire("pointerEvents:new",{pointerEvent:z});for(var R={interaction:b,pointer:_,event:S,eventTarget:k,targets:O,type:M,pointerEvent:z},W=0;W<O.length;W++){var re=O[W];for(var fe in re.props||{})z[fe]=re.props[fe];var pe=gd(re.eventable,re.node);if(z._subtractOrigin(pe),z.eventable=re.eventable,z.currentTarget=re.node,re.eventable.fire(z),z._addOrigin(pe),z.immediatePropagationStopped||z.propagationStopped&&W+1<O.length&&O[W+1].node!==z.currentTarget)break}if(g.fire("pointerEvents:fired",R),M==="tap"){var ye=z.double?Fc({interaction:b,pointer:_,event:S,eventTarget:k,type:"doubletap"},g):z;b.prevTap=ye,b.tapTime=ye.timeStamp}return z}function EN(y,g){var b=y.interaction,_=y.pointer,S=y.event,k=y.eventTarget,M=y.type,A=b.getPointerIndex(_),O=b.pointers[A];if(M==="tap"&&(b.pointerWasMoved||!O||O.downTarget!==k))return[];for(var z=Cc(k),R={interaction:b,pointer:_,event:S,eventTarget:k,type:M,path:z,targets:[],node:null},W=0;W<z.length;W++){var re=z[W];R.node=re,g.fire("pointerEvents:collect-targets",R)}return M==="hold"&&(R.targets=R.targets.filter(function(fe){var pe,ye;return fe.eventable.options.holdDuration===((pe=b.pointers[A])==null||(ye=pe.hold)==null?void 0:ye.duration)})),R.targets}function sE(y){var g=y.interaction,b=y.pointerIndex,_=g.pointers[b].hold;_&&_.timeout&&(clearTimeout(_.timeout),_.timeout=null)}var ste=Object.freeze({__proto__:null,default:x0});function ote(y){var g=y.interaction;g.holdIntervalHandle&&(clearInterval(g.holdIntervalHandle),g.holdIntervalHandle=null)}var ate={id:"pointer-events/holdRepeat",install:function(y){y.usePlugin(x0);var g=y.pointerEvents;g.defaults.holdRepeatInterval=0,g.types.holdrepeat=y.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(y,g){return y["pointerEvents:".concat(g)]=ote,y},{"pointerEvents:new":function(y){var g=y.pointerEvent;g.type==="hold"&&(g.count=(g.count||0)+1)},"pointerEvents:fired":function(y,g){var b=y.interaction,_=y.pointerEvent,S=y.eventTarget,k=y.targets;if(_.type==="hold"&&k.length){var M=k[0].eventable.options.holdRepeatInterval;M<=0||(b.holdIntervalHandle=setTimeout(function(){g.pointerEvents.fire({interaction:b,eventTarget:S,type:"hold",pointer:_,event:_},g)},M))}}})},lte=ate,cte={id:"pointer-events/interactableTargets",install:function(y){var g=y.Interactable;g.prototype.pointerEvents=function(_){return Be(this.events.options,_),this};var b=g.prototype._backCompatOption;g.prototype._backCompatOption=function(_,S){var k=b.call(this,_,S);return k===this&&(this.events.options[_]=S),k}},listeners:{"pointerEvents:collect-targets":function(y,g){var b=y.targets,_=y.node,S=y.type,k=y.eventTarget;g.interactables.forEachMatch(_,function(M){var A=M.events,O=A.options;A.types[S]&&A.types[S].length&&M.testIgnoreAllow(O,_,k)&&b.push({node:_,eventable:A,props:{interactable:M}})})},"interactable:new":function(y){var g=y.interactable;g.events.getRect=function(b){return g.getRect(b)}},"interactable:set":function(y,g){var b=y.interactable,_=y.options;Be(b.events.options,g.pointerEvents.defaults),Be(b.events.options,_.pointerEvents||{})}}},ute=cte,dte={id:"pointer-events",install:function(y){y.usePlugin(ste),y.usePlugin(lte),y.usePlugin(ute)}},pte=dte,hte={id:"reflow",install:function(y){var g=y.Interactable;y.actions.phases.reflow=!0,g.prototype.reflow=function(b){return function(_,S,k){for(var M=_.getAllElements(),A=k.window.Promise,O=A?[]:null,z=function(){var W=M[R],re=_.getRect(W);if(!re)return 1;var fe,pe=_d(k.interactions.list,function(Ae){return Ae.interacting()&&Ae.interactable===_&&Ae.element===W&&Ae.prepared.name===S.name});if(pe)pe.move(),O&&(fe=pe._reflowPromise||new A(function(Ae){pe._reflowResolve=Ae}));else{var ye=a0(re),Re=function(Ae){return{coords:Ae,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:ye.x,y:ye.y},client:{x:ye.x,y:ye.y},timeStamp:k.now()});fe=function(Ae,qe,ot,ft,Xe){var at=Ae.interactions.new({pointerType:"reflow"}),Zr={interaction:at,event:Xe,pointer:Xe,eventTarget:ot,phase:"reflow"};at.interactable=qe,at.element=ot,at.prevEvent=Xe,at.updatePointer(Xe,Xe,ot,!0),S1(at.coords.delta),$d(at.prepared,ft),at._doPhase(Zr);var ai=Ae.window,Kn=ai.Promise,po=Kn?new Kn(function(al){at._reflowResolve=al}):void 0;return at._reflowPromise=po,at.start(ft,qe,ot),at._interacting?(at.move(Zr),at.end(Xe)):(at.stop(),at._reflowResolve()),at.removePointer(Xe,Xe),po}(k,_,W,S,Re)}O&&O.push(fe)},R=0;R<M.length&&!z();R++);return O&&A.all(O).then(function(){return _})}(this,b,y)}},listeners:{"interactions:stop":function(y,g){var b=y.interaction;b.pointerType==="reflow"&&(b._reflowResolve&&b._reflowResolve(),function(_,S){_.splice(_.indexOf(S),1)}(g.interactions.list,b))}}},fte=hte;if(Wr.use(ii),Wr.use(hN),Wr.use(pte),Wr.use(Cee),Wr.use(nte),Wr.use(he),Wr.use(WI),Wr.use(ZI),Wr.use(fte),Wr.default=Wr,n(t)==="object"&&t)try{t.exports=Wr}catch{}return Wr.default=Wr,Wr})}(kv,kv.exports)),kv.exports}var Ave=Mve();const oj=Ive(Ave);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wZ=(t,e,i)=>Math.max(e,Math.min(t,i)),Cve=new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),aj=t=>{const e=(""+t).match(Cve);return!e||parseInt(e[1])===0?0:Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function lj(t,e,i){return e?`${t}-${e}`:i?`${t}-${i}`:`${t}-m`}const Ove=t=>(...e)=>{const i=eU(),r=new t(...e),n=r.exports;X8(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),bte(r);const o=[r.component,...i].reverse();return fU(o,a=>a===void 0?void 0:Pve(r,a,n),n)},Pve=(t,{host:e,key:i,isReactive:r},n)=>{var f;const s=e,o=s[i]!==t.exports,a=s[i]!==n,c=n!==t.exports;if(o&&!a&&c&&(s[i]=t.exports),e===t.component){if(r){const m=t.component.manager;a&&m.W(t,s[i]),t.onUpdate(v=>{if(v.has(i)){const w=s[i];w!==t.exports&&m.W(t,w)}})}t.O=r?void 0:i}const h=(f=t.component.constructor.elementProperties.get(i))==null?void 0:f.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(h?Ste(()=>{s[i]=t.exports}):s[i]=t.exports)})},Rve=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},Lve=(t,e,i)=>{const r=Fve(e).subscribe;return r(n=>{n.some(o=>Rve(t,o.target))&&i()})},r2={},Fve=t=>{const e=t.join(","),i=r2[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),r2[e]=void 0)})};return r2[e]=s,s},Nve=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return;i=o.host}},Dve=(t,e,i)=>{const r=Nve(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},zve="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),jve=new Set(zve),B$="en",Vve={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},Uve=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return n2[n]??(n2[n]=_Z(t,r)),await n2[n]},n2={},_Z=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===B$?{}:await _Z(B$,e)},xZ=t=>{var i;const e=Dve(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||B$);return{lang:e,t9nLocale:SZ(e)}},SZ=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=Vve[n]??n,jve.has(n)?n:i?SZ(r):B$},qve=(t,e,i,r)=>{let n;const s=()=>Bve(t,e(),r).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&i(o),n=o}).catch(console.error);return queueMicrotask(s),Lve(t,["lang"],s)},Bve=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=xZ(t),s=`${e}/${i}/t9n`,a=i===null?{}:await Uve(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:a}},Gve=t=>$Z(void 0,t),BL=t=>e=>$Z(e,t);let Hve=class extends WP{constructor(e,i){super(e);const r=this.exports;try{Mm(this.component);const n=i(this.component,this),s=this.exports!==r;if(vte(n)){s||this.setProvisionalExports(n);const o=n.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}};const $Z=Ove(Hve),Wve=(t,e)=>new Zve(t,e);var Ag,Cg,Rw;class Zve extends WP{constructor(i,r){super();Le(this,Ag);Le(this,Cg);Le(this,Rw);ke(this,Cg,i),ke(this,Rw,r),ke(this,Ag,new MutationObserver(n=>{n.forEach(s=>{i.includes(s.attributeName)&&r.call(this.component,this.component.el.getAttribute(s.attributeName),s.oldValue,s.attributeName)})}))}hostConnected(){G(this,Cg).forEach(i=>{this.component.el.hasAttribute(i)&&G(this,Rw).call(this.component,null,this.component.el.getAttribute(i),i)}),G(this,Ag).observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:G(this,Cg)})}hostDisconnected(){G(this,Ag).disconnect()}}Ag=new WeakMap,Cg=new WeakMap,Rw=new WeakMap;const Jve=t=>(e={})=>Gve((i,r)=>{const n=xZ(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>qve(i.el,()=>t("./assets"),({t9nLocale:c,t9nStrings:d,lang:h})=>{const f={...d,_lang:h,_t9nLocale:c,_loading:!1};r.exports=f;const m=d.componentLabel;typeof m=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=m)),a(o.messageOverrides)},e.name));const a=c=>{const d=r.exports,h=d._original??d,f=TZ(h,c);c&&(f._original=h),r.exports=f};return"messageOverrides"in o&&r.onUpdate(c=>{c.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),TZ=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=TZ(t[r],n):i[r]=n??t[r]}),i};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ms=Jve(kU);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const bo={container:"container",actionBarContainer:"action-bar-container",contentContainer:"content-container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentOverlay:"content--overlay",floatAll:"float-all",floatContent:"float--content",resizeHandle:"resize-handle",resizeHandleBar:"resize-handle-bar"},cj={actionBar:"action-bar",header:"header"},uj={dragVertical:"drag-resize-vertical",dragHorizontal:"drag-resize-horizontal"},Yve=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-max-height: unset;--calcite-internal-shell-panel-shadow-block-start: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-block-end: 0 -4px 8px -1px rgba(0, 0, 0, .08), 0 -2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-start: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical]:not([display-mode=float-all])) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][display-mode=float-all]) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical]:not([display-mode=float-all])) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][display-mode=float-all]) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical]:not([display-mode=float-all])) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][display-mode=float-all]) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 30vh)}:host([layout=horizontal]) .height-s{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 20vh)}:host([layout=horizontal]) .height-l{--calcite-internal-shell-panel-height: var(--calcite-shell-panel-height);--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 40vh)}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-shell-panel-text-color, var(--calcite-color-text-2))}.container *{box-sizing:border-box}.container.float-all{margin-block:var(--calcite-spacing-sm);margin-inline:var(--calcite-spacing-sm)}.float-all{max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) );box-shadow:var(--calcite-shell-panel-shadow, var(--calcite-shadow-sm));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));overflow:hidden}:host([layout=vertical][position=start]) .float-all{border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-panel-border-color, var(--calcite-color-border-3))}:host([layout=vertical][position=end]) .float-all{border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .float-all{border-inline:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}.resize-handle{position:absolute;box-sizing:border-box;display:flex;-webkit-user-select:none;user-select:none;align-items:center;justify-content:center;outline:2px solid transparent;outline-offset:2px;--calcite-internal-shell-panel-resize-handle-offset: calc( (var(--calcite-size-fixed-xxl) - var(--calcite-size-fixed-sm-plus)) / 2 * -1 );z-index:var(--calcite-z-index-header)}.resize-handle:active .resize-handle-bar,.resize-handle:hover .resize-handle-bar{color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-text-1));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-foreground-3))}.resize-handle-bar{pointer-events:none;display:flex;align-items:center;justify-content:center;color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-border-input));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-background))}.resize-handle:focus .resize-handle-bar{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-color:transparent;outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus)}:host([position=start][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-end:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=start][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-start:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=end][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=start][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-end:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=start][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-start:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=end][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.action-bar-container{pointer-events:auto;box-sizing:border-box;display:flex;flex:1 1 auto}.content-container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;align-items:stretch;align-self:stretch}:host([layout=horizontal]) .action-bar-container,:host([layout=horizontal]) .content-container{flex-direction:column}.content{pointer-events:auto;position:relative;box-sizing:border-box;display:flex;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;padding:0;background-color:var(--calcite-shell-panel-background-color, var(--calcite-color-background));transition:max-block-size var(--calcite-animation-timing),max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}:host([resizable][layout=vertical][position=start]) .content{padding-inline-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=vertical][position=end]) .content{padding-inline-start:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=start]) .content{padding-block-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=end]) .content{padding-block-start:var(--calcite-size-fixed-sm-plus)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-block-end:auto;block-size:auto;overflow:hidden;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));margin-inline:var(--calcite-spacing-sm);margin-block-start:var(--calcite-spacing-sm);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) )}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:var(--calcite-spacing-sm)}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start]:not([slot=panel-end])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([resizable][layout=vertical]) .content ::slotted(calcite-flow),:host([resizable][layout=vertical]) .content ::slotted(calcite-panel){border-inline-start:none;border-inline-end:none}:host([resizable][layout=horizontal]) .content ::slotted(calcite-flow),:host([resizable][layout=horizontal]) .content ::slotted(calcite-panel){border-block-start:none;border-block-end:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,WT=class WT extends vi{constructor(){super(...arguments),this.actionBars=[],this.contentRef=ks(),this.messages=Ms(),this.resizeValues={inlineSize:null,blockSize:null,minInlineSize:null,minBlockSize:null,maxInlineSize:null,maxBlockSize:null},this.hasHeader=!1,this.collapsed=!1,this.displayMode="dock",this.layout="vertical",this.position="start",this.resizable=!1,this.widthScale="m",this.calciteInternalShellPanelResizeEnd=dt({cancelable:!1}),this.calciteInternalShellPanelResizeStart=dt({cancelable:!1}),this.calciteShellPanelCollapse=dt({cancelable:!1}),this.calciteShellPanelExpand=dt({cancelable:!1})}willUpdate(e){e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.setActionBarsLayout(this.actionBars),e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calciteShellPanelCollapse.emit():this.calciteShellPanelExpand.emit())}disconnectedCallback(){super.disconnectedCallback(),this.cleanupInteractions()}getContentElDOMRect(){return this.contentRef.value.getBoundingClientRect()}handleKeyDown(e){const{key:i,defaultPrevented:r,shiftKey:n}=e,{position:s,layout:o,resizable:a,contentRef:c,el:d,resizeValues:{maxBlockSize:h,maxInlineSize:f,minBlockSize:m,minInlineSize:v}}=this,x=[...o==="horizontal"?["ArrowUp","ArrowDown"]:["ArrowLeft","ArrowRight"],"Home","End"];if(!a||!c.value||r||!x.includes(i))return;const $=this.getContentElDOMRect(),T=Bu(d)==="rtl"?-1:1,C=n?gie:mie;switch(i){case"ArrowUp":this.updateSize({size:$.height+(o==="horizontal"&&s==="end"?C:-C),type:"blockSize"}),e.preventDefault();break;case"ArrowDown":this.updateSize({size:$.height+(o==="horizontal"&&s==="end"?-C:C),type:"blockSize"}),e.preventDefault();break;case"ArrowLeft":this.updateSize({size:$.width+(o==="vertical"&&s==="end"?C:-C)*T,type:"inlineSize"}),e.preventDefault();break;case"ArrowRight":this.updateSize({size:$.width+(o==="vertical"&&s==="end"?-C:C)*T,type:"inlineSize"}),e.preventDefault();break;case"Home":this.updateSize({size:o==="horizontal"?m:v,type:o==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break;case"End":this.updateSize({size:o==="horizontal"?h:f,type:o==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break}}updateSize({type:e,size:i}){const{contentRef:r,resizeValues:n}=this;if(!r.value)return;const s=e==="blockSize"?"minBlockSize":"minInlineSize",o=e==="blockSize"?"maxBlockSize":"maxInlineSize",a=n[s]&&n[o]?wZ(i,n[s],n[o]):i,c=Math.round(a);this.resizeValues={...n,[e]:c},r.value.style[e]=i!==null?`${c}px`:null}cleanupInteractions(){var e;(e=this.interaction)==null||e.unset()}async setupInteractions(){this.cleanupInteractions();const{el:e,contentRef:i,resizable:r,position:n,collapsed:s,resizeHandleEl:o,layout:a}=this;if(!i.value||s||!r||!o)return;await this.el.componentOnReady();const{inlineSize:c,minInlineSize:d,blockSize:h,minBlockSize:f,maxInlineSize:m,maxBlockSize:v}=window.getComputedStyle(i.value),w={inlineSize:of(c),blockSize:of(h),minInlineSize:of(d),minBlockSize:of(f),maxInlineSize:of(m)||window.innerWidth,maxBlockSize:of(v)||window.innerHeight};this.resizeValues=w;const x=Bu(e)==="rtl";this.interaction=oj(i.value,{context:e.ownerDocument}).resizable({edges:{top:n==="end"&&a==="horizontal"?o:!1,right:n===(x?"end":"start")&&a==="vertical"?o:!1,bottom:n==="start"&&a==="horizontal"?o:!1,left:n===(x?"start":"end")&&a==="vertical"?o:!1},modifiers:[oj.modifiers.restrictSize({min:{width:w.minInlineSize,height:w.minBlockSize},max:{width:w.maxInlineSize,height:w.maxBlockSize}})],listeners:{resizestart:()=>{this.calciteInternalShellPanelResizeStart.emit()},resizeend:()=>{this.calciteInternalShellPanelResizeEnd.emit()},move:({rect:$})=>{const T=a==="horizontal";this.updateSize({size:T?$.height:$.width,type:T?"blockSize":"inlineSize"})}}})}setResizeHandleEl(e){this.resizeHandleEl=e,this.setupInteractions()}setActionBarsLayout(e){e.forEach(i=>i.layout=this.layout)}handleActionBarSlotChange(e){const i=fc(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)}handleHeaderSlotChange(e){this.hasHeader=mt(e)}getResizeIcon(){const{layout:e}=this;return e==="horizontal"?uj.dragVertical:uj.dragHorizontal}renderHeader(){return pt("header",te`<div class=${se(bo.contentHeader)} .hidden=${!this.hasHeader}><slot name=${cj.header} @slotchange=${this.handleHeaderSlotChange}></slot></div>`)}render(){const{collapsed:e,position:i,resizable:r,layout:n,displayMode:s,resizeValues:o}=this,a=Bu(this.el),c=!e&&r?pt("resize-handle",te`<div .ariaLabel=${this.messages.resize} .ariaOrientation=${n==="horizontal"?"vertical":"horizontal"} .ariaValueMax=${n=="horizontal"?o.maxBlockSize:o.maxInlineSize} .ariaValueMin=${n=="horizontal"?o.minBlockSize:o.minInlineSize} .ariaValueNow=${n=="horizontal"?o.blockSize:o.inlineSize} class=${se(bo.resizeHandle)} @keydown=${this.handleKeyDown} role=separator tabindex=0 touch-action=none ${Bt(this.setResizeHandleEl)}><div class=${se(bo.resizeHandleBar)}><calcite-icon .icon=${this.getResizeIcon()} scale=s></calcite-icon></div></div>`):null,d=()=>n==="horizontal"?i==="start"?Nd.calciteAnimateInDown:Nd.calciteAnimateInUp:a==="ltr"&&i==="end"||a==="rtl"&&i==="start"?Nd.calciteAnimateInLeft:Nd.calciteAnimateInRight,h=te`<div class=${se(bo.contentContainer)}>${pt("content",te`<div class=${se({[Nd.rtl]:a==="rtl",[bo.content]:!0,[bo.contentOverlay]:s==="overlay",[bo.floatContent]:s==="float-content"||s==="float",[Nd.calciteAnimate]:s==="overlay",[d()]:s==="overlay",[lj("width",this.width,this.widthScale)]:!!(this.width||this.widthScale),[lj("height",this.height,this.heightScale)]:!!(this.height||this.heightScale)})} .hidden=${e} ${Bt(this.contentRef)}>${this.renderHeader()}<div class=${se(bo.contentBody)}><slot></slot></div>${c}</div>`)}</div>`,m=[pt("action-bar-container",te`<div class=${se(bo.actionBarContainer)}><slot name=${cj.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`),h];return i==="end"&&m.reverse(),te`<div class=${se({[bo.container]:!0,[bo.floatAll]:s==="float-all"})}>${m}</div>`}};WT.properties={resizeValues:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],collapsed:[7,{},{reflect:!0,type:Boolean}],displayMode:[3,{},{reflect:!0}],heightScale:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:[3,{},{reflect:!0}],resizable:[7,{},{reflect:!0,type:Boolean}],height:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},WT.styles=Yve;let zC=WT;bi("calcite-shell-panel",zC);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const af={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},Kve=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,ZT=class ZT extends vi{constructor(){super(...arguments),this.messages=Ms({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:n,type:s,value:o}=this,a=e.id||Ky(),c=s!=="indeterminate",d=Math.floor(o);return this.el.ariaLabel=r,this.el.ariaValueMax=c?"100":void 0,this.el.ariaValueMin=c?"0":void 0,this.el.ariaValueNow=c?d.toString():void 0,bk(this.el,"id",a),this.el.role="progressbar",te`<div class=${se(af.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&c&&te`<div class=${se(af.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&n&&te`<div class=${se(af.text)}>${n}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:n}=this,s=i?this.getInlineSize(r):this.getSize(r),a=s*.45;let c;if(e==="progress"){const d=2*a*Math.PI,h=(this.type.startsWith("determinate")?n:24)/100*d,f=d-h;c={"stroke-dasharray":`${h} ${f}`}}return te`<svg aria-hidden=true class=${se({[af.ring]:!0,[af.trackRing]:e==="track",[af.progressRing]:e==="progress"})} style=${fx(c)} viewBox=${`0 0 ${s} ${s}`}>${Ln`<circle cx=${s/2} cy=${s/2} r=${a??Je} />`}</svg>`}};ZT.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},ZT.styles=Kve;let G$=ZT;bi("calcite-loader",G$);const pVe=Object.freeze(Object.defineProperty({__proto__:null,Loader:G$},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Qve(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function kZ(t){t.target.disabled&&t.preventDefault()}const IZ=["mousedown","mouseup","click"];function EZ(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const H$={capture:!0};function Vh(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),Xve(t);return}tbe(t),t.el.removeAttribute("aria-disabled")}function Xve(t){t.el.click=Qve,ebe(t.el)}function ebe(t){t.addEventListener("pointerdown",kZ,H$),IZ.forEach(e=>t.addEventListener(e,EZ,H$))}function tbe(t){delete t.el.click,ibe(t.el)}function ibe(t){t.removeEventListener("pointerdown",kZ,H$),IZ.forEach(e=>t.removeEventListener(e,EZ,H$))}const rbe={container:"interaction-container"},Uh=({children:t,disabled:e})=>te`<div class=${se(rbe.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Ga(t){return t==="l"?"m":"s"}async function nbe(t){await t.componentOnReady(),await t.updateComplete}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const yn=()=>BL((t,e)=>{let i;function r(){i==null||i.abort()}return e.onLoad(()=>{t.listen("focus",()=>{i=new AbortController,t.el.addEventListener("focusout",r,{signal:i.signal})})}),e.onDisconnected(()=>{t.el.removeEventListener("focusout",r)}),async(n,s)=>{if(t.disabled)return;const o=obe(n());if(!o)return;const{target:a,includeContainer:c,strategy:d}=o,h=dI(t.el),f=h.activeElement;if(await nbe(t),!(f!==h.activeElement||i&&!(i!=null&&i.signal.aborted)))return t.el.removeEventListener("focus",r),hI(a,c,d,t.el,s)}});function sbe(t){return"target"in t&&("includeContainer"in t||"strategy"in t)}function obe(t){if(t)return sbe(t)?t:{target:t}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const abe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function lbe(t){return`${t.split("-").map((r,n)=>n===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${abe.includes(t)?"Input":"Change"}`}const jC="hidden-form-input";function GL(t){return"checked"in t}const VC=new WeakMap,HL=new WeakSet;function cbe(t,e){if(Qy(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(r,s=>{n=s.composedPath().some(o=>HL.has(o)),s.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}function ube(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function MZ(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?Qy(t,"calcite-radio-button-group"):t}const dbe=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function dj(t){var a;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,r=MZ(e==null?void 0:e.parentElement);if(!r)return;const n=(a=r==null?void 0:r.nodeName)==null?void 0:a.toLowerCase(),s=n==null?void 0:n.split("-");if(s.length<2||s[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in r&&(r.validity=e==null?void 0:e.validity),r.dispatchEvent(dbe),ube(r,{message:i,icon:!0,status:"invalid"});const o=lbe(n);r.addEventListener(o,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e==null?void 0:e.validity)},{once:!0})}function AZ(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",dj,!0),e.requestSubmit(),e.removeEventListener("invalid",dj,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function CZ(t){var e;(e=t.formEl)==null||e.reset()}function OZ(t){const{el:e,value:i}=t,r=WL(t);if(!r||cbe(r,e))return;t.formEl=r,t.defaultValue=i,GL(t)&&(t.defaultChecked=t.checked);const n=pbe.bind(t);r.addEventListener("reset",n),VC.set(t.el,n),HL.add(e)}function WL(t){const{el:e,form:i}=t;return i?pI(e,{id:i}):Qy(e,"form")}function pbe(){var t;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),GL(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(t=this.onFormReset)==null||t.call(this)}function PZ(t){const{el:e,formEl:i}=t;if(!i)return;const r=VC.get(e);i.removeEventListener("reset",r),VC.delete(e),t.formEl=null,HL.delete(e)}function hbe(t,e){t.defaultValue=e}const fbe="calciteInternalHiddenInputInput",RZ=t=>{t.target.dispatchEvent(new CustomEvent(fbe,{bubbles:!0}))},pj=t=>t.removeEventListener("input",RZ);function mbe(t){const{el:e,formEl:i,name:r,value:n}=t,{ownerDocument:s}=e,o=e.querySelectorAll(`input[slot="${jC}"]`);if(!i||!r){o.forEach(f=>{pj(f),f.remove()});return}const a=Array.isArray(n)?n:[n],c=[],d=new Set;o.forEach(f=>{const m=a.find(v=>v==f.value);m!=null?(d.add(m),hj(t,f,m)):c.push(f)});let h;a.forEach(f=>{if(d.has(f))return;let m=c.pop();m||(m=s.createElement("input"),m.ariaHidden="true",m.slot=jC),h||(h=s.createDocumentFragment()),h.append(m),m.addEventListener("input",RZ),hj(t,m,f)}),h&&e.append(h),c.forEach(f=>{pj(f),f.remove()})}function hj(t,e,i){var d;const{defaultValue:r,disabled:n,form:s,name:o,required:a}=t;e.defaultValue=r,e.disabled=n,e.name=o,e.required=a,e.tabIndex=-1,s?e.setAttribute("form",s):e.removeAttribute("form"),GL(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(d=t.syncHiddenFormInput)==null||d.call(t,e);const c=MZ(t.el);if(c&&"validity"in c)for(const h in{...e==null?void 0:e.validity})c.validity[h]=e.validity[h]}const LZ=({component:t})=>(mbe(t),te`<slot name=${jC}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wo={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},fj="calcite-action",gbe={button:t=>`${fj}-${t}-button`,indicator:t=>`${fj}-${t}-indicator`},ybe={tooltip:"tooltip"},vbe=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3);border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.interaction-container{border-radius:inherit}:host([width=full]){flex:1 0 auto}:host([width=full]) .button{justify-content:center}:host([width=full]) .button .text-container--visible{flex:none}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}.button{border-radius:inherit;position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-3));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}:host([active]) .button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([active-descendant]) .button{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,JT=class JT extends vi{constructor(){super(...arguments),this.guid=Ky(),this.buttonEl=ks(),this.buttonId=gbe.button(this.guid),this.mutationObserver=ra("mutation",()=>this.requestUpdate()),this.messages=Ms({blocking:!0}),this.focusSetter=yn()(this),this.active=!1,this.activeDescendant=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.scale="m",this.width="auto",this.textEnabled=!1,this.type="button"}async setFocus(e){return this.focusSetter(()=>this.buttonEl.value,e)}connectedCallback(){var e;super.connectedCallback(),this.formEl=WL(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}updated(){Vh(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this.formEl=null,(e=this.mutationObserver)==null||e.disconnect()}handleClick(){const{type:e}=this;e==="submit"?AZ(this):e==="reset"&&CZ(this)}handleTooltipSlotChange(e){const r=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl.value)}storeIndicatorEl(e){this.indicatorEl=e}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[wo.textContainer]:!0,[wo.textContainerVisible]:i};return e?pt("text-container",te`<div class=${se(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,buttonId:r}=this;return te`<div aria-labelledby=${r??Mt} aria-live=polite class=${se(wo.indicatorText)} role=region ${Bt(this.storeIndicatorEl)}>${e?i.indicator:null}</div>`}renderIconContainer(){var v;const{loading:e,icon:i,scale:r,el:n,iconFlipRtl:s,indicator:o}=this,a=r==="l"?"l":"m",c=e?te`<calcite-loader inline .label=${this.messages.loading} .scale=${a}></calcite-loader>`:null,d=i?te`<calcite-icon class=${se({[wo.indicatorWithIcon]:o})} .flipRtl=${s} .icon=${i} .scale=${Ga(this.scale)}></calcite-icon>`:null,h=c||d,f=h||((v=n.children)==null?void 0:v.length),m=te`<div class=${se({[wo.slotContainer]:!0,[wo.slotContainerHidden]:e})}><slot></slot></div>`;return f?pt("icon-container",te`<div aria-hidden=true class=${se(wo.iconContainer)}>${h}${m}</div>`):null}renderButton(){var C,P,L,D,q,F,ee,ae,ne,ue,X,J,H;const{compact:e,disabled:i,icon:r,loading:n,textEnabled:s,label:o,text:a,indicator:c,indicatorEl:d,buttonId:h,messages:f}=this,m=o||a||"",v=c?f.indicatorLabel.replace("{label}",m):m,w={[wo.button]:!0,[wo.buttonTextVisible]:s,[wo.buttonCompact]:e},x=te`${this.renderIconContainer()}${this.renderTextContainer()}${!r&&c&&pt("indicator-no-icon",te`<div class=${se(wo.indicatorWithoutIcon)}></div>`)||""}`,$=c&&d?[d]:[],T=[...((C=this.aria)==null?void 0:C.controlsElements)??[],...$];return this.dragHandle?te`<span .ariaBusy=${n} .ariaControlsElements=${T} .ariaDescribedByElements=${(P=this.aria)==null?void 0:P.describedByElements} .ariaExpanded=${(L=this.aria)==null?void 0:L.expanded} .ariaHasPopup=${(D=this.aria)==null?void 0:D.hasPopup} .ariaLabel=${v} .ariaLabelledByElements=${(q=this.aria)==null?void 0:q.labelledByElements} .ariaOwnsElements=${(F=this.aria)==null?void 0:F.ownsElements} .ariaPressed=${(ee=this.aria)==null?void 0:ee.pressed} class=${se(w)} id=${h??Mt} role=button tabindex=${this.disabled?null:0} ${Bt(this.buttonEl)}>${x}</span>`:te`<button .ariaBusy=${n} .ariaControlsElements=${T} .ariaDescribedByElements=${(ae=this.aria)==null?void 0:ae.describedByElements} .ariaExpanded=${(ne=this.aria)==null?void 0:ne.expanded} .ariaHasPopup=${(ue=this.aria)==null?void 0:ue.hasPopup} .ariaLabel=${v} .ariaLabelledByElements=${(X=this.aria)==null?void 0:X.labelledByElements} .ariaOwnsElements=${(J=this.aria)==null?void 0:J.ownsElements} .ariaPressed=${(H=this.aria)==null?void 0:H.pressed} class=${se(w)} .disabled=${i} id=${h??Mt} @click=${this.handleClick} ${Bt(this.buttonEl)}>${x}</button>`}render(){return Uh({disabled:this.disabled,children:te`${this.renderButton()}<slot name=${ybe.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}};JT.properties={aria:[0,{},{attribute:!1}],active:[7,{},{reflect:!0,type:Boolean}],activeDescendant:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],compact:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],indicator:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}],text:1,textEnabled:[7,{},{reflect:!0,type:Boolean}],type:[3,{},{reflect:!0}]},JT.styles=vbe;let W$=JT;bi("calcite-action",W$);const FZ=Object.freeze(Object.defineProperty({__proto__:null,Action:W$},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const dl={container:"container",containerContent:"container-content",hasProgress:"progress-bar",hide:"hide",primary:"primary",secondary:"secondary",tertiary:"tertiary"},Sr={logo:"logo",user:"user",progress:"progress",navigationAction:"navigation-action",contentStart:"content-start",contentEnd:"content-end",contentCenter:"content-center",navSecondary:"navigation-secondary",navTertiary:"navigation-tertiary"},bbe={hamburger:"hamburger"},wbe=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([hidden]){display:none}[hidden]{display:none}:host{display:block}.container{display:flex;inline-size:100%;flex-direction:column;margin-block:0;margin-inline:auto;background-color:var(--calcite-navigation-background-color, var(--calcite-navigation-background, var(--calcite-color-foreground-1)))}.container.primary,.container.secondary,.container.tertiary{border-block-end:1px solid;border-block-end-color:var(--calcite-navigation-border-color, var(--calcite-color-border-3))}.user,.logo{display:flex}.hide{display:none}.primary{block-size:4rem}.secondary,.tertiary{block-size:3rem}.container-content{margin-inline:auto;display:flex;block-size:100%;inline-size:100%;margin-block:0;inline-size:var(--calcite-navigation-width, 100%);max-inline-size:100%}.container-content.progress-bar{margin-block-start:.125rem}slot[name]{display:flex;flex-direction:row}slot[name=navigation-secondary]::slotted(calcite-navigation),slot[name=navigation-tertiary]::slotted(calcite-navigation){inline-size:100%}slot[name=content-start]::slotted(*),slot[name=content-center]::slotted(*),slot[name=content-end]::slotted(*){display:flex;flex-direction:row;align-items:center}slot[name=progress],slot[name=progress] calcite-progress{inset-block-start:0;inset-inline:0}slot[name=content-end]{margin-inline-start:auto}slot[name=content-start]{margin-inline-end:auto}slot[name=content-end],slot[name=logo]~slot[name=user],slot[name=user]:only-child{margin-inline-start:auto}slot[name=content-center]{margin-inline-start:auto;margin-inline-end:auto}slot[name=content-start]~slot[name=content-center]{margin-inline-start:0px}slot[name=content-start]~slot[name=content-end],slot[name=content-center]~slot[name=content-end],slot[name=content-center]~slot[name=user],slot[name=content-end]~slot[name=user]{margin:0}`,YT=class YT extends vi{constructor(){super(...arguments),this.navigationActionEl=ks(),this.focusSetter=yn()(this),this.navigationAction=!1,this.calciteNavigationActionSelect=dt({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.navigationActionEl.value,e)}actionClickHandler(){this.calciteNavigationActionSelect.emit()}handleUserSlotChange(e){this.isPrimaryLevel()&&(this.userSlotHasElements=mt(e))}handleLogoSlotChange(e){this.isPrimaryLevel()&&(this.logoSlotHasElements=mt(e))}handleContentStartSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentStartSlotHasElements=mt(e))}handleContentEndSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentEndSlotHasElements=mt(e))}handleContentCenterSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentCenterSlotHasElements=mt(e))}handleSecondarySlotChange(e){this.secondarySlotHasElements=mt(e)}handleTertiarySlotChange(e){this.tertiarySlotHasElements=mt(e)}handleMenuActionSlotChange(e){this.isPrimaryLevel()&&(this.navigationActionSlotHasElements=mt(e),this.navigationActionSlotHasElements&&(this.navigationAction=!1))}handleProgressSlotChange(e){this.isPrimaryLevel()&&(this.progressSlotHasElement=mt(e))}isPrimaryLevel(){return this.el.slot!==Sr.navSecondary&&this.el.slot!==Sr.navTertiary}renderMenuAction(){return te`<slot name=${Sr.navigationAction} @slotchange=${this.handleMenuActionSlotChange}>${this.navigationAction&&te`<calcite-action .icon=${bbe.hamburger} @click=${this.actionClickHandler} .text=${this.label} ${Bt(this.navigationActionEl)}></calcite-action>`||""}</slot>`}render(){const e=this.logoSlotHasElements||this.userSlotHasElements||this.navigationActionSlotHasElements||this.primaryContentCenterSlotHasElements||this.primaryContentEndSlotHasElements||this.primaryContentStartSlotHasElements||this.navigationAction,i=this.el.slot;return te`<div class=${se({[dl.container]:!0,[dl.secondary]:i===Sr.navSecondary,[dl.tertiary]:i===Sr.navTertiary,[dl.primary]:e})}><div class=${se({[dl.hide]:!this.progressSlotHasElement,[Sr.progress]:!0})}><slot name=${Sr.progress} @slotchange=${this.handleProgressSlotChange}></slot></div><div class=${se({[dl.containerContent]:!0,[dl.hasProgress]:this.progressSlotHasElement})}>${this.renderMenuAction()}<div class=${se({[dl.hide]:!this.logoSlotHasElements,[Sr.logo]:!0})}><slot name=${Sr.logo} @slotchange=${this.handleLogoSlotChange}></slot></div><slot name=${Sr.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot><slot name=${Sr.contentCenter} @slotchange=${this.handleContentCenterSlotChange}></slot><slot name=${Sr.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot><div class=${se({[dl.hide]:!this.userSlotHasElements,[Sr.user]:!0})}><slot name=${Sr.user} @slotchange=${this.handleUserSlotChange}></slot></div></div></div><slot name=${Sr.navSecondary} @slotchange=${this.handleSecondarySlotChange}></slot><slot name=${Sr.navTertiary} @slotchange=${this.handleTertiarySlotChange}></slot>`}};YT.properties={logoSlotHasElements:[16,{},{state:!0}],navigationActionSlotHasElements:[16,{},{state:!0}],primaryContentCenterSlotHasElements:[16,{},{state:!0}],primaryContentEndSlotHasElements:[16,{},{state:!0}],primaryContentStartSlotHasElements:[16,{},{state:!0}],progressSlotHasElement:[16,{},{state:!0}],secondarySlotHasElements:[16,{},{state:!0}],tertiarySlotHasElements:[16,{},{state:!0}],userSlotHasElements:[16,{},{state:!0}],label:1,navigationAction:[7,{},{reflect:!0,type:Boolean}]},YT.styles=wbe;let UC=YT;bi("calcite-navigation",UC);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ZL=Symbol.for(""),_be=t=>{if((t==null?void 0:t.r)===ZL)return t==null?void 0:t._$litStatic$},xbe=t=>({_$litStatic$:t,r:ZL}),mw=(t,...e)=>({_$litStatic$:e.reduce((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1],t[0]),r:ZL}),mj=new Map,Sbe=t=>(e,...i)=>{const r=i.length;let n,s;const o=[],a=[];let c,d=0,h=!1;for(;d<r;){for(c=e[d];d<r&&(s=i[d],(n=_be(s))!==void 0);)c+=n+e[++d],h=!0;d!==r&&a.push(s),o.push(c),d++}if(d===r&&o.push(e[r]),h){const f=o.join("$$lit$$");(e=mj.get(f))===void 0&&(o.raw=o,mj.set(f,e=o)),i=a}return t(e,...i)},JL=Sbe(te);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const YL=({children:t,...e})=>{const i=e.level?xbe(`h${e.level}`):mw`div`;return pt(e.key,JL`<${i} class=${se(e.class)}>${t}</${i}>`)};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Os={container:"container",containerLink:"container--link",textContainer:"text-container",heading:"heading",description:"description",image:"image",standalone:"standalone",icon:"icon"},$be=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex}.container{margin:0;display:flex;align-items:center;justify-content:center;font-size:var(--calcite-font-size-0);line-height:1.25rem;background-color:var(--calcite-navigation-background-color, var(--calcite-internal-navigation-logo-background-color, var(--calcite-color-foreground-1)));border-block-end:2px solid var(--calcite-color-transparent);transition-property:background-color;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.container--link{cursor:pointer;text-decoration-line:none;outline-color:transparent}:host(:focus) .container--link{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.image,.icon{margin:0;display:flex;block-size:1.75rem;padding-inline:1rem;color:var(--calcite-navigation-logo-text-color, var(--calcite-icon-color, var(--calcite-internal-navigation-logo-text-color, inherit)))}.image~.icon{padding-inline-start:0px}.image~.text-container,.icon~.text-container{padding-inline-start:0px}:host([href]:hover),:host([href]:focus){--calcite-internal-navigation-logo-background-color: var(--calcite-color-foreground-2)}:host([href]:active){--calcite-internal-navigation-logo-background-color: var(--calcite-color-foreground-3)}:host([active]) .container{border-block-end-color:var(--calcite-navigation-accent-color, var(--calcite-color-brand))}:host([active]),:host([href]:active){--calcite-internal-navigation-logo-text-color: var(--calcite-color-brand)}.text-container{margin-block-start:.125rem;display:flex;flex-direction:column;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-inline:1rem;text-align:start}.heading{margin-inline-start:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-navigation-logo-heading-text-color, var(--calcite-color-text-1))}.standalone{font-size:var(--calcite-font-size-1)}.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--calcite-color-text-2);color:var(--calcite-navigation-logo-text-color, var(--calcite-color-text-2));font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`,zb=class zb extends vi{constructor(){super(...arguments),this.focusSetter=yn()(this),this.iconFlipRtl=!1}async setFocus(e){return this.focusSetter(()=>{if(this.href)return this.el},e)}renderIcon(){return te`<calcite-icon class=${se(Os.icon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} scale=l></calcite-icon>`}renderHeaderContent(){const{heading:e,headingLevel:i,description:r}=this,n=e?pt(Os.heading,YL({class:{[Os.heading]:!0,[Os.standalone]:!this.description},level:i,children:e})):null,s=r?pt(Os.description,te`<span class=${se(Os.description)}>${r}</span>`):null;return n||s?pt(Os.textContainer,te`<div class=${se(Os.textContainer)}>${n}${s}</div>`):null}render(){const{icon:e,href:i,label:r,rel:n,target:s,thumbnail:o}=this,a=te`${o&&te`<img alt=${(r||"")??Mt} class=${se(Os.image)} src=${o??Mt}>`||""}${e&&this.renderIcon()||""}${this.renderHeaderContent()}`;return i?te`<a class=${se({[Os.container]:!0,[Os.containerLink]:!0})} href=${i??Mt} rel=${n??Mt} target=${s??Mt}>${a}</a>`:te`<div class=${se(Os.container)}>${a}</div>`}};zb.properties={active:[7,{},{reflect:!0,type:Boolean}],description:1,heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],href:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,rel:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],thumbnail:1},zb.shadowRootOptions={mode:"open",delegatesFocus:!0},zb.styles=$be;let qC=zb;bi("calcite-navigation-logo",qC);const NZ=["top","right","bottom","left"],gj=["start","end"],yj=NZ.reduce((t,e)=>t.concat(e,e+"-"+gj[0],e+"-"+gj[1]),[]),fy=Math.min,Jp=Math.max,Z$=Math.round,g_=Math.floor,Ha=t=>({x:t,y:t}),Tbe={left:"right",right:"left",bottom:"top",top:"bottom"},kbe={start:"end",end:"start"};function BC(t,e,i){return Jp(t,fy(e,i))}function qh(t,e){return typeof t=="function"?t(e):t}function xc(t){return t.split("-")[0]}function Wa(t){return t.split("-")[1]}function DZ(t){return t==="x"?"y":"x"}function KL(t){return t==="y"?"height":"width"}function my(t){return["top","bottom"].includes(xc(t))?"y":"x"}function QL(t){return DZ(my(t))}function zZ(t,e,i){i===void 0&&(i=!1);const r=Wa(t),n=QL(t),s=KL(n);let o=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Y$(o)),[o,Y$(o)]}function Ibe(t){const e=Y$(t);return[J$(t),e,J$(e)]}function J$(t){return t.replace(/start|end/g,e=>kbe[e])}function Ebe(t,e,i){const r=["left","right"],n=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?n:r:e?r:n;case"left":case"right":return e?s:o;default:return[]}}function Mbe(t,e,i,r){const n=Wa(t);let s=Ebe(xc(t),i==="start",r);return n&&(s=s.map(o=>o+"-"+n),e&&(s=s.concat(s.map(J$)))),s}function Y$(t){return t.replace(/left|right|bottom|top/g,e=>Tbe[e])}function Abe(t){return{top:0,right:0,bottom:0,left:0,...t}}function jZ(t){return typeof t!="number"?Abe(t):{top:t,right:t,bottom:t,left:t}}function K$(t){const{x:e,y:i,width:r,height:n}=t;return{width:r,height:n,top:i,left:e,right:e+r,bottom:i+n,x:e,y:i}}function vj(t,e,i){let{reference:r,floating:n}=t;const s=my(e),o=QL(e),a=KL(o),c=xc(e),d=s==="y",h=r.x+r.width/2-n.width/2,f=r.y+r.height/2-n.height/2,m=r[a]/2-n[a]/2;let v;switch(c){case"top":v={x:h,y:r.y-n.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-n.width,y:f};break;default:v={x:r.x,y:r.y}}switch(Wa(e)){case"start":v[o]-=m*(i&&d?-1:1);break;case"end":v[o]+=m*(i&&d?-1:1);break}return v}const Cbe=async(t,e,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:o}=i,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:h,y:f}=vj(d,r,c),m=r,v={},w=0;for(let x=0;x<a.length;x++){const{name:$,fn:T}=a[x],{x:C,y:P,data:L,reset:D}=await T({x:h,y:f,initialPlacement:r,placement:m,strategy:n,middlewareData:v,rects:d,platform:o,elements:{reference:t,floating:e}});h=C??h,f=P??f,v={...v,[$]:{...v[$],...L}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(d=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):D.rects),{x:h,y:f}=vj(d,m,c)),x=-1)}return{x:h,y:f,placement:m,strategy:n,middlewareData:v}};async function gw(t,e){var i;e===void 0&&(e={});const{x:r,y:n,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=qh(e,t),w=jZ(v),$=a[m?f==="floating"?"reference":"floating":f],T=K$(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement($)))==null||i?$:$.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:d,rootBoundary:h,strategy:c})),C=f==="floating"?{x:r,y:n,width:o.floating.width,height:o.floating.height}:o.reference,P=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),L=await(s.isElement==null?void 0:s.isElement(P))?await(s.getScale==null?void 0:s.getScale(P))||{x:1,y:1}:{x:1,y:1},D=K$(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:P,strategy:c}):C);return{top:(T.top-D.top+w.top)/L.y,bottom:(D.bottom-T.bottom+w.bottom)/L.y,left:(T.left-D.left+w.left)/L.x,right:(D.right-T.right+w.right)/L.x}}const Obe=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:n,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:d,padding:h=0}=qh(t,e)||{};if(d==null)return{};const f=jZ(h),m={x:i,y:r},v=QL(n),w=KL(v),x=await o.getDimensions(d),$=v==="y",T=$?"top":"left",C=$?"bottom":"right",P=$?"clientHeight":"clientWidth",L=s.reference[w]+s.reference[v]-m[v]-s.floating[w],D=m[v]-s.reference[v],q=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let F=q?q[P]:0;(!F||!await(o.isElement==null?void 0:o.isElement(q)))&&(F=a.floating[P]||s.floating[w]);const ee=L/2-D/2,ae=F/2-x[w]/2-1,ne=fy(f[T],ae),ue=fy(f[C],ae),X=ne,J=F-x[w]-ue,H=F/2-x[w]/2+ee,ge=BC(X,H,J),be=!c.arrow&&Wa(n)!=null&&H!==ge&&s.reference[w]/2-(H<X?ne:ue)-x[w]/2<0,Ee=be?H<X?H-X:H-J:0;return{[v]:m[v]+Ee,data:{[v]:ge,centerOffset:H-ge-Ee,...be&&{alignmentOffset:Ee}},reset:be}}});function Pbe(t,e,i){return(t?[...i.filter(n=>Wa(n)===t),...i.filter(n=>Wa(n)!==t)]:i.filter(n=>xc(n)===n)).filter(n=>t?Wa(n)===t||(e?J$(n)!==n:!1):!0)}const Rbe=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,n;const{rects:s,middlewareData:o,placement:a,platform:c,elements:d}=e,{crossAxis:h=!1,alignment:f,allowedPlacements:m=yj,autoAlignment:v=!0,...w}=qh(t,e),x=f!==void 0||m===yj?Pbe(f||null,v,m):m,$=await gw(e,w),T=((i=o.autoPlacement)==null?void 0:i.index)||0,C=x[T];if(C==null)return{};const P=zZ(C,s,await(c.isRTL==null?void 0:c.isRTL(d.floating)));if(a!==C)return{reset:{placement:x[0]}};const L=[$[xc(C)],$[P[0]],$[P[1]]],D=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:C,overflows:L}],q=x[T+1];if(q)return{data:{index:T+1,overflows:D},reset:{placement:q}};const F=D.map(ne=>{const ue=Wa(ne.placement);return[ne.placement,ue&&h?ne.overflows.slice(0,2).reduce((X,J)=>X+J,0):ne.overflows[0],ne.overflows]}).sort((ne,ue)=>ne[1]-ue[1]),ae=((n=F.filter(ne=>ne[2].slice(0,Wa(ne[0])?2:3).every(ue=>ue<=0))[0])==null?void 0:n[0])||F[0][0];return ae!==a?{data:{index:T+1,overflows:D},reset:{placement:ae}}:{}}}},Lbe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:n,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:x=!0,...$}=qh(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const T=xc(n),C=my(a),P=xc(a)===a,L=await(c.isRTL==null?void 0:c.isRTL(d.floating)),D=m||(P||!x?[Y$(a)]:Ibe(a)),q=w!=="none";!m&&q&&D.push(...Mbe(a,x,w,L));const F=[a,...D],ee=await gw(e,$),ae=[];let ne=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&ae.push(ee[T]),f){const H=zZ(n,o,L);ae.push(ee[H[0]],ee[H[1]])}if(ne=[...ne,{placement:n,overflows:ae}],!ae.every(H=>H<=0)){var ue,X;const H=(((ue=s.flip)==null?void 0:ue.index)||0)+1,ge=F[H];if(ge)return{data:{index:H,overflows:ne},reset:{placement:ge}};let be=(X=ne.filter(Ee=>Ee.overflows[0]<=0).sort((Ee,we)=>Ee.overflows[1]-we.overflows[1])[0])==null?void 0:X.placement;if(!be)switch(v){case"bestFit":{var J;const Ee=(J=ne.filter(we=>{if(q){const Oe=my(we.placement);return Oe===C||Oe==="y"}return!0}).map(we=>[we.placement,we.overflows.filter(Oe=>Oe>0).reduce((Oe,yt)=>Oe+yt,0)]).sort((we,Oe)=>we[1]-Oe[1])[0])==null?void 0:J[0];Ee&&(be=Ee);break}case"initialPlacement":be=a;break}if(n!==be)return{reset:{placement:be}}}return{}}}};function bj(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function wj(t){return NZ.some(e=>t[e]>=0)}const Fbe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:r="referenceHidden",...n}=qh(t,e);switch(r){case"referenceHidden":{const s=await gw(e,{...n,elementContext:"reference"}),o=bj(s,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:wj(o)}}}case"escaped":{const s=await gw(e,{...n,altBoundary:!0}),o=bj(s,i.floating);return{data:{escapedOffsets:o,escaped:wj(o)}}}default:return{}}}}};async function Nbe(t,e){const{placement:i,platform:r,elements:n}=t,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),o=xc(i),a=Wa(i),c=my(i)==="y",d=["left","top"].includes(o)?-1:1,h=s&&c?-1:1,f=qh(e,t);let{mainAxis:m,crossAxis:v,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof w=="number"&&(v=a==="end"?w*-1:w),c?{x:v*h,y:m*d}:{x:m*d,y:v*h}}const Dbe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:n,y:s,placement:o,middlewareData:a}=e,c=await Nbe(e,t);return o===((i=a.offset)==null?void 0:i.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:n+c.x,y:s+c.y,data:{...c,placement:o}}}}},zbe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:$=>{let{x:T,y:C}=$;return{x:T,y:C}}},...c}=qh(t,e),d={x:i,y:r},h=await gw(e,c),f=my(xc(n)),m=DZ(f);let v=d[m],w=d[f];if(s){const $=m==="y"?"top":"left",T=m==="y"?"bottom":"right",C=v+h[$],P=v-h[T];v=BC(C,v,P)}if(o){const $=f==="y"?"top":"left",T=f==="y"?"bottom":"right",C=w+h[$],P=w-h[T];w=BC(C,w,P)}const x=a.fn({...e,[m]:v,[f]:w});return{...x,data:{x:x.x-i,y:x.y-r,enabled:{[m]:s,[f]:o}}}}}};function fI(){return typeof window<"u"}function Xy(t){return VZ(t)?(t.nodeName||"").toLowerCase():"#document"}function Ts(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function rl(t){var e;return(e=(VZ(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function VZ(t){return fI()?t instanceof Node||t instanceof Ts(t).Node:!1}function na(t){return fI()?t instanceof Element||t instanceof Ts(t).Element:!1}function il(t){return fI()?t instanceof HTMLElement||t instanceof Ts(t).HTMLElement:!1}function _j(t){return!fI()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ts(t).ShadowRoot}function p1(t){const{overflow:e,overflowX:i,overflowY:r,display:n}=sa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!["inline","contents"].includes(n)}function jbe(t){return["table","td","th"].includes(Xy(t))}function mI(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function gI(t){const e=XL(),i=na(t)?sa(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(i.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(i.contain||"").includes(r))}function Vbe(t){let e=sd(t);for(;il(e)&&!gy(e);){if(gI(e))return e;if(mI(e))return null;e=sd(e)}return null}function XL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function gy(t){return["html","body","#document"].includes(Xy(t))}function sa(t){return Ts(t).getComputedStyle(t)}function yI(t){return na(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function sd(t){if(Xy(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_j(t)&&t.host||rl(t);return _j(e)?e.host:e}function UZ(t){const e=sd(t);return gy(e)?t.ownerDocument?t.ownerDocument.body:t.body:il(e)&&p1(e)?e:UZ(e)}function yw(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=UZ(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=Ts(n);if(s){const a=GC(o);return e.concat(o,o.visualViewport||[],p1(n)?n:[],a&&i?yw(a):[])}return e.concat(n,yw(n,[],i))}function GC(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function qZ(t){const e=sa(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=il(t),s=n?t.offsetWidth:i,o=n?t.offsetHeight:r,a=Z$(i)!==s||Z$(r)!==o;return a&&(i=s,r=o),{width:i,height:r,$:a}}function eF(t){return na(t)?t:t.contextElement}function rg(t){const e=eF(t);if(!il(e))return Ha(1);const i=e.getBoundingClientRect(),{width:r,height:n,$:s}=qZ(e);let o=(s?Z$(i.width):i.width)/r,a=(s?Z$(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Ube=Ha(0);function BZ(t){const e=Ts(t);return!XL()||!e.visualViewport?Ube:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qbe(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==Ts(t)?!1:e}function kh(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),s=eF(t);let o=Ha(1);e&&(r?na(r)&&(o=rg(r)):o=rg(t));const a=qbe(s,i,r)?BZ(s):Ha(0);let c=(n.left+a.x)/o.x,d=(n.top+a.y)/o.y,h=n.width/o.x,f=n.height/o.y;if(s){const m=Ts(s),v=r&&na(r)?Ts(r):r;let w=m,x=GC(w);for(;x&&r&&v!==w;){const $=rg(x),T=x.getBoundingClientRect(),C=sa(x),P=T.left+(x.clientLeft+parseFloat(C.paddingLeft))*$.x,L=T.top+(x.clientTop+parseFloat(C.paddingTop))*$.y;c*=$.x,d*=$.y,h*=$.x,f*=$.y,c+=P,d+=L,w=Ts(x),x=GC(w)}}return K$({width:h,height:f,x:c,y:d})}function tF(t,e){const i=yI(t).scrollLeft;return e?e.left+i:kh(rl(t)).left+i}function GZ(t,e,i){i===void 0&&(i=!1);const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-(i?0:tF(t,r)),s=r.top+e.scrollTop;return{x:n,y:s}}function Bbe(t){let{elements:e,rect:i,offsetParent:r,strategy:n}=t;const s=n==="fixed",o=rl(r),a=e?mI(e.floating):!1;if(r===o||a&&s)return i;let c={scrollLeft:0,scrollTop:0},d=Ha(1);const h=Ha(0),f=il(r);if((f||!f&&!s)&&((Xy(r)!=="body"||p1(o))&&(c=yI(r)),il(r))){const v=kh(r);d=rg(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const m=o&&!f&&!s?GZ(o,c,!0):Ha(0);return{width:i.width*d.x,height:i.height*d.y,x:i.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:i.y*d.y-c.scrollTop*d.y+h.y+m.y}}function Gbe(t){return Array.from(t.getClientRects())}function Hbe(t){const e=rl(t),i=yI(t),r=t.ownerDocument.body,n=Jp(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Jp(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-i.scrollLeft+tF(t);const a=-i.scrollTop;return sa(r).direction==="rtl"&&(o+=Jp(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:o,y:a}}function Wbe(t,e){const i=Ts(t),r=rl(t),n=i.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(n){s=n.width,o=n.height;const d=XL();(!d||d&&e==="fixed")&&(a=n.offsetLeft,c=n.offsetTop)}return{width:s,height:o,x:a,y:c}}function Zbe(t,e){const i=kh(t,!0,e==="fixed"),r=i.top+t.clientTop,n=i.left+t.clientLeft,s=il(t)?rg(t):Ha(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=n*s.x,d=r*s.y;return{width:o,height:a,x:c,y:d}}function xj(t,e,i){let r;if(e==="viewport")r=Wbe(t,i);else if(e==="document")r=Hbe(rl(t));else if(na(e))r=Zbe(e,i);else{const n=BZ(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return K$(r)}function HZ(t,e){const i=sd(t);return i===e||!na(i)||gy(i)?!1:sa(i).position==="fixed"||HZ(i,e)}function Jbe(t,e){const i=e.get(t);if(i)return i;let r=yw(t,[],!1).filter(a=>na(a)&&Xy(a)!=="body"),n=null;const s=sa(t).position==="fixed";let o=s?sd(t):t;for(;na(o)&&!gy(o);){const a=sa(o),c=gI(o);!c&&a.position==="fixed"&&(n=null),(s?!c&&!n:!c&&a.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||p1(o)&&!c&&HZ(t,o))?r=r.filter(h=>h!==o):n=a,o=sd(o)}return e.set(t,r),r}function Ybe(t){let{element:e,boundary:i,rootBoundary:r,strategy:n}=t;const o=[...i==="clippingAncestors"?mI(e)?[]:Jbe(e,this._c):[].concat(i),r],a=o[0],c=o.reduce((d,h)=>{const f=xj(e,h,n);return d.top=Jp(f.top,d.top),d.right=fy(f.right,d.right),d.bottom=fy(f.bottom,d.bottom),d.left=Jp(f.left,d.left),d},xj(e,a,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Kbe(t){const{width:e,height:i}=qZ(t);return{width:e,height:i}}function Qbe(t,e,i){const r=il(e),n=rl(e),s=i==="fixed",o=kh(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=Ha(0);if(r||!r&&!s)if((Xy(e)!=="body"||p1(n))&&(a=yI(e)),r){const m=kh(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else n&&(c.x=tF(n));const d=n&&!r&&!s?GZ(n,a):Ha(0),h=o.left+a.scrollLeft-c.x-d.x,f=o.top+a.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function s2(t){return sa(t).position==="static"}function Sj(t,e){if(!il(t)||sa(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return rl(t)===i&&(i=i.ownerDocument.body),i}function WZ(t,e){const i=Ts(t);if(mI(t))return i;if(!il(t)){let n=sd(t);for(;n&&!gy(n);){if(na(n)&&!s2(n))return n;n=sd(n)}return i}let r=Sj(t,e);for(;r&&jbe(r)&&s2(r);)r=Sj(r,e);return r&&gy(r)&&s2(r)&&!gI(r)?i:r||Vbe(t)||i}const Xbe=async function(t){const e=this.getOffsetParent||WZ,i=this.getDimensions,r=await i(t.floating);return{reference:Qbe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ewe(t){return sa(t).direction==="rtl"}const HC={convertOffsetParentRelativeRectToViewportRelativeRect:Bbe,getDocumentElement:rl,getClippingRect:Ybe,getOffsetParent:WZ,getElementRects:Xbe,getClientRects:Gbe,getDimensions:Kbe,getScale:rg,isElement:na,isRTL:ewe};function ZZ(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function twe(t,e){let i=null,r;const n=rl(t);function s(){var a;clearTimeout(r),(a=i)==null||a.disconnect(),i=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:v}=d;if(a||e(),!m||!v)return;const w=g_(f),x=g_(n.clientWidth-(h+m)),$=g_(n.clientHeight-(f+v)),T=g_(h),P={rootMargin:-w+"px "+-x+"px "+-$+"px "+-T+"px",threshold:Jp(0,fy(1,c))||1};let L=!0;function D(q){const F=q[0].intersectionRatio;if(F!==c){if(!L)return o();F?o(!1,F):r=setTimeout(()=>{o(!1,1e-7)},1e3)}F===1&&!ZZ(d,t.getBoundingClientRect())&&o(),L=!1}try{i=new IntersectionObserver(D,{...P,root:n.ownerDocument})}catch{i=new IntersectionObserver(D,P)}i.observe(t)}return o(!0),s}function iwe(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=eF(t),h=n||s?[...d?yw(d):[],...yw(e)]:[];h.forEach(T=>{n&&T.addEventListener("scroll",i,{passive:!0}),s&&T.addEventListener("resize",i)});const f=d&&a?twe(d,i):null;let m=-1,v=null;o&&(v=new ResizeObserver(T=>{let[C]=T;C&&C.target===d&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var P;(P=v)==null||P.observe(e)})),i()}),d&&!c&&v.observe(d),v.observe(e));let w,x=c?kh(t):null;c&&$();function $(){const T=kh(t);x&&!ZZ(x,T)&&i(),x=T,w=requestAnimationFrame($)}return i(),()=>{var T;h.forEach(C=>{n&&C.removeEventListener("scroll",i),s&&C.removeEventListener("resize",i)}),f==null||f(),(T=v)==null||T.disconnect(),v=null,c&&cancelAnimationFrame(w)}}const rwe=Dbe,nwe=Rbe,swe=zbe,$j=Lbe,owe=Fbe,awe=Obe,lwe=(t,e,i)=>{const r=new Map,n={platform:HC,...i},s={...n.platform,_c:r};return Cbe(t,e,{...n,platform:s})};function JZ(t,e,{signal:i,edges:r}={}){let n,s=null;const o=r!=null&&r.includes("leading"),a=r==null||r.includes("trailing"),c=()=>{s!==null&&(t.apply(n,s),n=void 0,s=null)},d=()=>{a&&c(),v()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,d()},e)},m=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{m(),n=void 0,s=null},w=()=>{c()},x=function(...$){if(i!=null&&i.aborted)return;n=this,s=$;const T=h==null;f(),o&&T&&c()};return x.schedule=f,x.cancel=v,x.flush=w,i==null||i.addEventListener("abort",v,{once:!0}),x}function cwe(t){return uwe(t)}function o2(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function uwe(t){for(let e=t;e;e=o2(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=o2(t);e;e=o2(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||gI(i)||e.tagName==="BODY"))return e}return null}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */(function(){{const e=HC.getOffsetParent;HC.getOffsetParent=i=>e(i,cwe)}})();function Tj(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const YZ=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:n,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:c,arrowEl:d,type:h})=>{var L;if(!e||!i)return;const f=Bu(i)==="rtl",{x:m,y:v,placement:w,strategy:x,middlewareData:$}=await lwe(e,i,{strategy:r,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:Ij(n,f),middleware:hwe({placement:n,flipDisabled:s,flipPlacements:o==null?void 0:o.map(D=>Ij(D,f)),offsetDistance:a,offsetSkidding:c,arrowEl:d,type:h})});if(d&&$.arrow){const{x:D,y:q}=$.arrow,F=w.split("-")[0],ee=D!=null?"left":"top",ae=vwe[F],ne={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=F==="left"||F==="right"?"horizontal":"vertical"),Object.assign(d.style,{...ne,[ee]:`${ee=="left"?D:q}px`,[F]:"100%",transform:ae})}const C=((L=$.hide)==null?void 0:L.referenceHidden)?"hidden":null,P=C?"none":null;i.setAttribute(dwe,w),Object.assign(i.style,{pointerEvents:P,position:x,transform:`translate(${Tj(m)}px,${Tj(v)}px)`,visibility:C})},dwe="data-placement",KZ=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],hVe="bottom-start",pwe="bottom-end",kj={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function hwe({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:n,arrowEl:s,type:o}){const a=[swe(),owe()];return o==="menu"&&a.push($j({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})),a.push(rwe({mainAxis:typeof r=="number"?r:0,crossAxis:typeof n=="number"?n:0})),t==="auto"||t==="auto-start"||t==="auto-end"?a.push(nwe({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||a.push($j(i?{fallbackPlacements:i}:{})),s&&a.push(awe({element:s})),a}function fwe(t){return KZ.includes(t)}function mwe(t,e){const i=t.filter(fwe);return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${KZ.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function Ij(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function gwe(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(Object.assign(e.floatingEl.style,{display:"block",position:e.overlayPositioning??"absolute"}),!vw.get(t))return QZ(t);await(i?ywe(t):YZ)(t,e)}function ywe(t){let e=Q$.get(t);return e||(e=JZ(YZ,TU.reposition,{edges:["leading","trailing"]}),Q$.set(t,e),e)}const vwe={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},vw=new WeakMap,Q$=new WeakMap;async function QZ(t){const{referenceEl:e,floatingEl:i}=t;if(!i.isConnected)return;const r=iwe;vw.set(t,{state:"pending"});let n;const s=r(e,i,()=>{const o=t.reposition();n||(n=o)});return vw.set(t,{state:"active",cleanUp:s}),n}function XZ(t){const{floatingEl:e}=t;e&&Object.assign(e.style,{display:"",pointerEvents:"",position:"",transform:"",visibility:""})}async function bwe(t){const{floatingEl:e,referenceEl:i}=t;if(XZ(t),!(!e||!i)&&(eJ(t),!!t.open))return QZ(t)}function eJ(t){var i;const e=vw.get(t);(e==null?void 0:e.state)==="active"&&e.cleanUp(),vw.delete(t),(i=Q$.get(t))==null||i.cancel(),Q$.delete(t)}const Ej=4,Mj=Math.ceil(Math.hypot(Ej,Ej));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Aj(t){return t[t.openProp||"open"]}async function tJ(t){await t.updateComplete,Aj(t)?t.onBeforeOpen():t.onBeforeClose(),await t.updateComplete,t.transitionEl&&await yve(t.transitionEl,t.transitionProp),Aj(t)?t.onOpen():t.onClose()}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Cj={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},wwe={width:12,height:6,strokeWidth:1},_we=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:n,strokeWidth:s}=wwe,o=r/2,a=t==="vertical",c=`M0,0 H${r} L${r-o},${n} Q${o},${n} ${o},${n} Z`;return pt(e,te`<svg aria-hidden=true class=${se(Cj.arrow)} height=${r} viewBox=${`0 0 ${r} ${r+(a?0:s)}`} width=${r+(a?s:0)} ${Bt(i)}>${Ln`${Ln`<path class=${se(Cj.arrowStroke)} d=${c??Je} fill=none stroke-width=${s+1} />`||""}<path d=${c??Je} stroke=none />`}</svg>`)};/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var iJ=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],X$=iJ.join(","),rJ=typeof Element>"u",Ih=rJ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,eT=!rJ&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},bw=function(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&bw(e.parentNode);return o},xwe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},nJ=function(e,i,r){if(bw(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(X$));return i&&Ih.call(e,X$)&&n.unshift(e),n=n.filter(r),n},tT=function(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!bw(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),c=a.length?a:o.children,d=tT(c,!0,r);r.flatten?n.push.apply(n,d):n.push({scopeParent:o,candidates:d})}else{var h=Ih.call(o,X$);h&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!bw(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&m){var v=tT(f===!0?o.children:f.children,!0,r);r.flatten?n.push.apply(n,v):n.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return n},sJ=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},gp=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||xwe(e))&&!sJ(e)?0:e.tabIndex},Swe=function(e,i){var r=gp(e);return r<0&&i&&!sJ(e)?0:r},$we=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},oJ=function(e){return e.tagName==="INPUT"},Twe=function(e){return oJ(e)&&e.type==="hidden"},kwe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},Iwe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},Ewe=function(e){if(!e.name)return!0;var i=e.form||eT(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=Iwe(n,e.form);return!s||s===e},Mwe=function(e){return oJ(e)&&e.type==="radio"},Awe=function(e){return Mwe(e)&&!Ewe(e)},Cwe=function(e){var i,r=e&&eT(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,c;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!s&&n;){var d,h,f;r=eT(n),n=(d=r)===null||d===void 0?void 0:d.host,s=!!((h=n)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return s},Oj=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},Owe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var o=Ih.call(e,"details>summary:first-of-type"),a=o?e.parentElement:e;if(Ih.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof n=="function"){for(var c=e;e;){var d=e.parentElement,h=eT(e);if(d&&!d.shadowRoot&&n(d)===!0)return Oj(e);e.assignedSlot?e=e.assignedSlot:!d&&h!==e.ownerDocument?e=h.host:e=d}e=c}if(Cwe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Oj(e);return!1},Pwe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return Ih.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},iT=function(e,i){return!(i.disabled||bw(i)||Twe(i)||Owe(i,e)||kwe(i)||Pwe(i))},WC=function(e,i){return!(Awe(i)||gp(i)<0||!iT(e,i))},Rwe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},aJ=function(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,c=Swe(a,o),d=o?aJ(n.candidates):a;c===0?o?i.push.apply(i,d):i.push(a):r.push({documentOrder:s,tabIndex:c,item:n,isScope:o,content:d})}),r.sort($we).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},Lwe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=tT([e],i.includeContainer,{filter:WC.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Rwe}):r=nJ(e,i.includeContainer,WC.bind(null,i)),aJ(r)},Fwe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=tT([e],i.includeContainer,{filter:iT.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=nJ(e,i.includeContainer,iT.bind(null,i)),r},lf=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Ih.call(e,X$)===!1?!1:WC(i,e)},Nwe=iJ.concat("iframe").join(","),a2=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Ih.call(e,Nwe)===!1?!1:iT(i,e)};/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ZC(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function Dwe(t){if(Array.isArray(t))return ZC(t)}function zwe(t,e,i){return(e=Bwe(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function jwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pj(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Rj(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Pj(Object(i),!0).forEach(function(r){zwe(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Pj(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Uwe(t){return Dwe(t)||jwe(t)||Gwe(t)||Vwe()}function qwe(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bwe(t){var e=qwe(t,"string");return typeof e=="symbol"?e:e+""}function Gwe(t,e){if(t){if(typeof t=="string")return ZC(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ZC(t,e):void 0}}var Lj={activateTrap:function(e,i){if(e.length>0){var r=e[e.length-1];r!==i&&r._setPausedState(!0)}var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},Hwe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Wwe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},$b=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Zwe=function(e){return $b(e)&&!e.shiftKey},Jwe=function(e){return $b(e)&&e.shiftKey},Fj=function(e){return setTimeout(e,0)},F0=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,r):e},y_=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ywe=[],Kwe=function(e,i){var r=(i==null?void 0:i.document)||document,n=(i==null?void 0:i.trapStack)||Ywe,s=Rj({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Zwe,isKeyBackward:Jwe},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(J,H,ge){return J&&J[H]!==void 0?J[H]:s[ge||H]},d=function(J,H){var ge=typeof(H==null?void 0:H.composedPath)=="function"?H.composedPath():void 0;return o.containerGroups.findIndex(function(be){var Ee=be.container,we=be.tabbableNodes;return Ee.contains(J)||(ge==null?void 0:ge.includes(Ee))||we.find(function(Oe){return Oe===J})})},h=function(J){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=H.hasFallback,be=ge===void 0?!1:ge,Ee=H.params,we=Ee===void 0?[]:Ee,Oe=s[J];if(typeof Oe=="function"&&(Oe=Oe.apply(void 0,Uwe(we))),Oe===!0&&(Oe=void 0),!Oe){if(Oe===void 0||Oe===!1)return Oe;throw new Error("`".concat(J,"` was specified but was not a node, or did not return a node"))}var yt=Oe;if(typeof Oe=="string"){try{yt=r.querySelector(Oe)}catch(Tt){throw new Error("`".concat(J,'` appears to be an invalid selector; error="').concat(Tt.message,'"'))}if(!yt&&!be)throw new Error("`".concat(J,"` as selector refers to no known node"))}return yt},f=function(){var J=h("initialFocus",{hasFallback:!0});if(J===!1)return!1;if(J===void 0||J&&!a2(J,s.tabbableOptions))if(d(r.activeElement)>=0)J=r.activeElement;else{var H=o.tabbableGroups[0],ge=H&&H.firstTabbableNode;J=ge||h("fallbackFocus")}else J===null&&(J=h("fallbackFocus"));if(!J)throw new Error("Your focus-trap needs to have at least one focusable element");return J},m=function(){if(o.containerGroups=o.containers.map(function(J){var H=Lwe(J,s.tabbableOptions),ge=Fwe(J,s.tabbableOptions),be=H.length>0?H[0]:void 0,Ee=H.length>0?H[H.length-1]:void 0,we=ge.find(function(Tt){return lf(Tt)}),Oe=ge.slice().reverse().find(function(Tt){return lf(Tt)}),yt=!!H.find(function(Tt){return gp(Tt)>0});return{container:J,tabbableNodes:H,focusableNodes:ge,posTabIndexesFound:yt,firstTabbableNode:be,lastTabbableNode:Ee,firstDomTabbableNode:we,lastDomTabbableNode:Oe,nextTabbableNode:function(Ci){var xr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Zn=H.indexOf(Ci);return Zn<0?xr?ge.slice(ge.indexOf(Ci)+1).find(function(lo){return lf(lo)}):ge.slice(0,ge.indexOf(Ci)).reverse().find(function(lo){return lf(lo)}):H[Zn+(xr?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(J){return J.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(J){return J.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function(J){var H=J.activeElement;if(H)return H.shadowRoot&&H.shadowRoot.activeElement!==null?v(H.shadowRoot):H},w=function(J){if(J!==!1&&J!==v(document)){if(!J||!J.focus){w(f());return}J.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=J,Hwe(J)&&J.select()}},x=function(J){var H=h("setReturnFocus",{params:[J]});return H||(H===!1?!1:J)},$=function(J){var H=J.target,ge=J.event,be=J.isBackward,Ee=be===void 0?!1:be;H=H||y_(ge),m();var we=null;if(o.tabbableGroups.length>0){var Oe=d(H,ge),yt=Oe>=0?o.containerGroups[Oe]:void 0;if(Oe<0)Ee?we=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:we=o.tabbableGroups[0].firstTabbableNode;else if(Ee){var Tt=o.tabbableGroups.findIndex(function(Cc){var Oc=Cc.firstTabbableNode;return H===Oc});if(Tt<0&&(yt.container===H||a2(H,s.tabbableOptions)&&!lf(H,s.tabbableOptions)&&!yt.nextTabbableNode(H,!1))&&(Tt=Oe),Tt>=0){var Ci=Tt===0?o.tabbableGroups.length-1:Tt-1,xr=o.tabbableGroups[Ci];we=gp(H)>=0?xr.lastTabbableNode:xr.lastDomTabbableNode}else $b(ge)||(we=yt.nextTabbableNode(H,!1))}else{var Zn=o.tabbableGroups.findIndex(function(Cc){var Oc=Cc.lastTabbableNode;return H===Oc});if(Zn<0&&(yt.container===H||a2(H,s.tabbableOptions)&&!lf(H,s.tabbableOptions)&&!yt.nextTabbableNode(H))&&(Zn=Oe),Zn>=0){var lo=Zn===o.tabbableGroups.length-1?0:Zn+1,Ac=o.tabbableGroups[lo];we=gp(H)>=0?Ac.firstTabbableNode:Ac.firstDomTabbableNode}else $b(ge)||(we=yt.nextTabbableNode(H))}}else we=h("fallbackFocus");return we},T=function(J){var H=y_(J);if(!(d(H,J)>=0)){if(F0(s.clickOutsideDeactivates,J)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}F0(s.allowOutsideClick,J)||J.preventDefault()}},C=function(J){var H=y_(J),ge=d(H,J)>=0;if(ge||H instanceof Document)ge&&(o.mostRecentlyFocusedNode=H);else{J.stopImmediatePropagation();var be,Ee=!0;if(o.mostRecentlyFocusedNode)if(gp(o.mostRecentlyFocusedNode)>0){var we=d(o.mostRecentlyFocusedNode),Oe=o.containerGroups[we].tabbableNodes;if(Oe.length>0){var yt=Oe.findIndex(function(Tt){return Tt===o.mostRecentlyFocusedNode});yt>=0&&(s.isKeyForward(o.recentNavEvent)?yt+1<Oe.length&&(be=Oe[yt+1],Ee=!1):yt-1>=0&&(be=Oe[yt-1],Ee=!1))}}else o.containerGroups.some(function(Tt){return Tt.tabbableNodes.some(function(Ci){return gp(Ci)>0})})||(Ee=!1);else Ee=!1;Ee&&(be=$({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),w(be||o.mostRecentlyFocusedNode||f())}o.recentNavEvent=void 0},P=function(J){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=J;var ge=$({event:J,isBackward:H});ge&&($b(J)&&J.preventDefault(),w(ge))},L=function(J){(s.isKeyForward(J)||s.isKeyBackward(J))&&P(J,s.isKeyBackward(J))},D=function(J){Wwe(J)&&F0(s.escapeDeactivates,J)!==!1&&(J.preventDefault(),a.deactivate())},q=function(J){var H=y_(J);d(H,J)>=0||F0(s.clickOutsideDeactivates,J)||F0(s.allowOutsideClick,J)||(J.preventDefault(),J.stopImmediatePropagation())},F=function(){if(o.active)return Lj.activateTrap(n,a),o.delayInitialFocusTimer=s.delayInitialFocus?Fj(function(){w(f())}):w(f()),r.addEventListener("focusin",C,!0),r.addEventListener("mousedown",T,{capture:!0,passive:!1}),r.addEventListener("touchstart",T,{capture:!0,passive:!1}),r.addEventListener("click",q,{capture:!0,passive:!1}),r.addEventListener("keydown",L,{capture:!0,passive:!1}),r.addEventListener("keydown",D),a},ee=function(){if(o.active)return r.removeEventListener("focusin",C,!0),r.removeEventListener("mousedown",T,!0),r.removeEventListener("touchstart",T,!0),r.removeEventListener("click",q,!0),r.removeEventListener("keydown",L,!0),r.removeEventListener("keydown",D),a},ae=function(J){var H=J.some(function(ge){var be=Array.from(ge.removedNodes);return be.some(function(Ee){return Ee===o.mostRecentlyFocusedNode})});H&&w(f())},ne=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ae):void 0,ue=function(){ne&&(ne.disconnect(),o.active&&!o.paused&&o.containers.map(function(J){ne.observe(J,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(J){if(o.active)return this;var H=c(J,"onActivate"),ge=c(J,"onPostActivate"),be=c(J,"checkCanFocusTrap");be||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=v(r),H==null||H();var Ee=function(){be&&m(),F(),ue(),ge==null||ge()};return be?(be(o.containers.concat()).then(Ee,Ee),this):(Ee(),this)},deactivate:function(J){if(!o.active)return this;var H=Rj({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},J);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,ee(),o.active=!1,o.paused=!1,ue(),Lj.deactivateTrap(n,a);var ge=c(H,"onDeactivate"),be=c(H,"onPostDeactivate"),Ee=c(H,"checkCanReturnFocus"),we=c(H,"returnFocus","returnFocusOnDeactivate");ge==null||ge();var Oe=function(){Fj(function(){we&&w(x(o.nodeFocusedBeforeActivation)),be==null||be()})};return we&&Ee?(Ee(x(o.nodeFocusedBeforeActivation)).then(Oe,Oe),this):(Oe(),this)},pause:function(J){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,J)):this},unpause:function(J){return o.active?(o.manuallyPaused=!1,n[n.length-1]!==this?this:this._setPausedState(!1,J)):this},updateContainerElements:function(J){var H=[].concat(J).filter(Boolean);return o.containers=H.map(function(ge){return typeof ge=="string"?r.querySelector(ge):ge}),o.active&&m(),ue(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(J,H){if(o.paused===J)return this;if(o.paused=J,J){var ge=c(H,"onPause"),be=c(H,"onPostPause");ge==null||ge(),ee(),ue(),be==null||be()}else{var Ee=c(H,"onUnpause"),we=c(H,"onPostUnpause");Ee==null||Ee(),m(),F(),ue(),we==null||we()}return this}}}),a.updateContainerElements(e),a};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const sS=new WeakSet;function Qwe(t,e){return sS.has(t)||hI(e),!1}function Xwe(t,e){const i=(e==null?void 0:e.fallbackFocus)||t,r=(e==null?void 0:e.clickOutsideDeactivates)??!0;return{fallbackFocus:i,...e,document:t.ownerDocument,tabbableOptions:UL,trapStack:yie,clickOutsideDeactivates:n=>(sS.has(t)||sS.add(t),typeof r=="function"?r(n):r),onPostDeactivate:()=>{sS.delete(t)},setReturnFocus:n=>{const s=typeof(e==null?void 0:e.setReturnFocus)=="function"?e.setReturnFocus(n):e==null?void 0:e.setReturnFocus;return s===void 0?Qwe(t,n):s}}}function Nj(t,{focusTrapOptions:e},i){return!(e!=null&&e.extraContainers)&&!i?t:[t,...Dj(e==null?void 0:e.extraContainers),...Dj(i)]}function Dj(t=[]){return Array.isArray(t)?t:[t]}const e1e=t=>BL((e,i)=>{let r,n,s;const o=t.focusTrapOptions;i.onConnected(()=>{e[t.triggerProp]&&r&&a.activate()}),i.onUpdate(c=>{e.hasUpdated&&c.has("focusTrapDisabled")&&(e.focusTrapDisabled?a.deactivate():a.activate())}),i.onDisconnected(()=>a.deactivate());const a={activate:()=>{const c=n||e.el;if(c.isConnected){if(!r){const d={...o,...e.focusTrapOptions};s||(s=Nj(c,e)),r=Kwe(s,Xwe(c,d))}(typeof e.focusTrapDisabledOverride=="function"?!e.focusTrapDisabledOverride():!e.focusTrapDisabled)&&r.activate()}},deactivate:()=>r==null?void 0:r.deactivate(),overrideFocusTrapEl:c=>{if(r)throw new Error("Focus trap already created");n=c},setExtraContainers:c=>{const d=n||e.el;s=Nj(d,e,c)},updateContainerElements:()=>r==null?void 0:r.updateContainerElements(s)};return a});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function vI(t){return t==="Enter"||t===" "}const iF=["0","1","2","3","4","5","6","7","8","9"];/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const t1e=5;function i1e({startX:t,startY:e,endX:i,endY:r}){return Math.hypot(i-t,r-e)>t1e}class r1e{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(n=>n!==r&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():vI(e.key)&&this.togglePopovers(e))},this.pointerDownHandler=e=>{if(e.defaultPrevented||!nS(e))return;const{clientX:i,clientY:r}=e;this.pointerDownPosition={x:i,y:r}},this.clickHandler=e=>{mve(e)||e.defaultPrevented||this.pointerDownPosition&&i1e({endY:e.clientY,endX:e.clientX,startY:this.pointerDownPosition.y,startX:this.pointerDownPosition.x})||(this.pointerDownPosition=void 0,this.togglePopovers(e))}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.pointerDownHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("pointerdown",this.pointerDownHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const _o={positionContainer:"position-container",container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"header-container",heading:"heading"},zj="auto",jj="aria-controls",Vj="aria-expanded",n1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-popover-z-index, var(--calcite-z-index-popup))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-popover-max-size-x, 100vw)}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding:.5rem .75rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding:.75rem 1rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding:1rem 1.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-bottom-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container{position:relative;display:flex;height:100%;flex-direction:row;flex-wrap:nowrap;border-radius:.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container.has-header{flex-direction:column}.content{display:flex;height:100%;width:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}:host([hidden]){display:none}[hidden]{display:none}`,Uj=new r1e,KT=class KT extends vi{constructor(){super(...arguments),this.focusTrap=e1e({triggerProp:"open",focusTrapOptions:{allowOutsideClick:!0,escapeDeactivates:e=>(e.defaultPrevented||(this.open=!1,e.preventDefault()),!1)}})(this),this.guid=`calcite-popover-${Ky()}`,this.hasLoaded=!1,this.mutationObserver=ra("mutation",()=>this.focusTrap.updateContainerElements()),this.transitionProp="opacity",this.messages=Ms(),this.focusSetter=yn()(this),this.floatingLayout="vertical",this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.offsetDistance=Mj,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=zj,this.pointerDisabled=!1,this.scale="m",this.triggerDisabled=!1,this.calcitePopoverBeforeClose=dt({cancelable:!1}),this.calcitePopoverBeforeOpen=dt({cancelable:!1}),this.calcitePopoverClose=dt({cancelable:!1}),this.calcitePopoverOpen=dt({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:n,flipDisabled:s,filteredFlipPlacements:o,offsetDistance:a,offsetSkidding:c,arrowEl:d,floatingEl:h}=this;return gwe(this,{floatingEl:h,referenceEl:i,overlayPositioning:n,placement:r,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:c,arrowEl:d,type:"popover"},e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async updateFocusTrapElements(){this.focusTrap.updateContainerElements()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}willUpdate(e){e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==Mj)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==zj))&&this.reposition(!0),e.has("referenceElement")&&this.referenceElementHandler()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),eJ(this)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}openHandler(){tJ(this),this.reposition(!0),this.setExpandedAttr()}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?mwe(i,e):null}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=this.getReferenceElement(),bwe(this);const{el:i,referenceElement:r,referenceEl:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}setExpandedAttr(){const{referenceEl:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(Vj,qL(i))}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(jj,i),Uj.registerElement(e,this.el),this.setExpandedAttr()}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(jj),e.removeAttribute(Vj)),Uj.unregisterElement(e))}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?pI(i,{id:e}):e)||null}hide(){this.open=!1}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),this.focusTrap.activate()}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),XZ(this),this.focusTrap.deactivate()}storeArrowEl(e){this.arrowEl=e,this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?pt(_o.closeButtonContainer,te`<div class=${se(_o.closeButtonContainer)}><calcite-action appearance=transparent class=${se(_o.closeButton)} @click=${this.hide} .scale=${this.scale} .text=${e.close}><calcite-icon icon=x .scale=${Ga(this.scale)}></calcite-icon></calcite-action></div>`):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?YL({class:_o.heading,level:i,children:e}):null;return r?pt(_o.header,te`<div class=${se(_o.header)}>${r}${this.renderCloseButton()}</div>`):null}render(){const{referenceEl:e,heading:i,label:r,open:n,pointerDisabled:s,floatingLayout:o}=this,a=e&&n,c=!a,d=s?null:pt("floating-arrow",_we({floatingLayout:o,ref:this.storeArrowEl}));return this.el.inert=c,this.el.ariaLabel=r,this.el.ariaLive="polite",bk(this.el,"id",this.getId()),this.el.role="dialog",te`<div class=${se(_o.positionContainer)} ${Bt(this.setFloatingEl)}><div class=${se({[_o.container]:!0,[kj.animation]:!0,[kj.animationActive]:a})} ${Bt(this.setTransitionEl)}>${d}<div class=${se({[_o.hasHeader]:!!i,[_o.headerContainer]:!0})}>${this.renderHeader()}<div class=${se(_o.content)}><slot></slot></div>${i?null:this.renderCloseButton()}</div></div></div>`}};KT.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],autoClose:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],flipDisabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],pointerDisabled:[7,{},{reflect:!0,type:Boolean}],referenceElement:1,scale:[3,{},{reflect:!0}],triggerDisabled:[7,{},{reflect:!0,type:Boolean}]},KT.styles=n1e;let JC=KT;bi("calcite-popover",JC);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function rT(t,e){return(t+e)%e}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const qj={menu:"menu",defaultTrigger:"default-trigger"},l2="calcite-action-menu",c2={button:t=>`${l2}-${t}-menu-button`,menu:t=>`${l2}-${t}-menu`,action:(t,e)=>`${l2}-${t}-action-${e}`},yy={tooltip:"tooltip",trigger:"trigger"},s1e={menu:"ellipsis"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const o1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`,a1e=["ArrowUp","ArrowDown","End","Home"],QT=class QT extends vi{constructor(){super(...arguments),this.guid=Ky(),this.actionElements=[],this.menuButtonClick=()=>{this.toggleOpen()},this.menuButtonId=c2.button(this.guid),this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:n,open:s}=this;if(r.length){if(vI(i)){if(e.preventDefault(),!s){this.toggleOpen();return}const o=r[n];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.menuId=c2.menu(this.guid),this._open=!1,this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:n}=this,s=c2.action(r,i);e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=s),e.activeDescendant=i===n},this.focusSetter=yn()(this),this.activeMenuItemIndex=-1,this.appearance="solid",this.expanded=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale="m",this.calciteActionMenuCollapse=dt({cancelable:!1}),this.calciteActionMenuExpand=dt({cancelable:!1}),this.calciteActionMenuOpen=dt({cancelable:!1})}get open(){return this._open}set open(e){const i=this._open;e!==i&&(this._open=e,this.openHandler(e))}async setFocus(e){return this.focusSetter(()=>this.menuButtonEl,e)}connectedCallback(){super.connectedCallback(),this.connectMenuButtonEl()}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.expandedHandler(),e.has("activeMenuItemIndex")&&(this.hasUpdated||this.activeMenuItemIndex!==-1)&&this.updateActions(this.actionElements),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteActionMenuExpand.emit():this.calciteActionMenuCollapse.emit())}disconnectedCallback(){super.disconnectedCallback(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.menuButtonEl&&(this.menuButtonEl.active=e,this.menuButtonEl.aria={expanded:e}),this.popoverEl&&(this.popoverEl.open=e),this.activeMenuItemIndex=this.open?0:-1,this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}connectMenuButtonEl(){const{menuButtonId:e,menuId:i,open:r,label:n}=this,s=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==s&&(this.disconnectMenuButtonEl(),this.menuButtonEl=s,this.setTooltipReferenceElement(),s&&(s.active=r,s.setAttribute("aria-controls",i),s.setAttribute("aria-expanded",qL(r)),s.setAttribute("aria-haspopup","true"),s.id||(s.id=e),s.label||(s.label=n),s.text||(s.text=n),s.addEventListener("click",this.menuButtonClick),s.addEventListener("keydown",this.menuButtonKeyDown)))}disconnectMenuButtonEl(){const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown),this.menuButtonEl=null)}setMenuButtonEl(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()}setDefaultMenuButtonEl(e){this.defaultMenuButtonEl=e,this.connectMenuButtonEl()}setPopoverEl(e){e&&(this.popoverEl=e,e.open=this.open)}handleCalciteActionClick(){this.open=!1,this.setFocus()}updateTooltip(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()}setTooltipReferenceElement(){const{tooltipEl:e,expanded:i,menuButtonEl:r,open:n}=this;e&&(e.referenceElement=!i&&!n?r:null)}updateActions(e){e==null||e.forEach(this.updateAction)}async handleDefaultSlotChange(e){const i=e.target.assignedElements({flatten:!0}).reduce((r,n)=>n!=null&&n.matches("calcite-action")?(r.push(n),r):n!=null&&n.matches("calcite-action-group")?r.concat(Array.from(n.querySelectorAll("calcite-action"))):r,[]);await this.componentOnReady(),this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)}isValidKey(e,i){return!!i.find(r=>r===e)}handleActionNavigation(e,i,r){if(!this.isValidKey(i,a1e))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=rT(Math.max(n-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=rT(n+1,r.length))}toggleOpen(e=!this.open){this.open=e}handlePopoverOpen(e){e.stopPropagation(),this.open=!0,this.setFocus()}handlePopoverClose(e){e.stopPropagation(),this.open=!1}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:n}=this;return te`<slot name=${yy.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${e} .aria=${{expanded:n}} class=${se(qj.defaultTrigger)} .icon=${s1e.menu} .scale=${r} .text=${i} .textEnabled=${n} ${Bt(this.setDefaultMenuButtonEl)}></calcite-action></slot>`}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,menuId:r,menuButtonEl:n,label:s,placement:o,overlayPositioning:a,flipPlacements:c}=this,d=e[i],h=(d==null?void 0:d.id)||null;return te`<calcite-popover auto-close .flipPlacements=${c} focus-trap-disabled .label=${s} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${a} .placement=${o} pointer-disabled .referenceElement=${n} trigger-disabled ${Bt(this.setPopoverEl)}><div aria-activedescendant=${h??Je} aria-labelledby=${(n==null?void 0:n.id)??Je} class=${se(qj.menu)} id=${r??Je} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`}render(){return te`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${yy.tooltip} @slotchange=${this.updateTooltip}></slot>`}};QT.properties={activeMenuItemIndex:[16,{},{state:!0}],menuButtonEl:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},QT.styles=o1e;let nT=QT;bi("calcite-action-menu",nT);const l1e=Object.freeze(Object.defineProperty({__proto__:null,ActionMenu:nT},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ww={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},c1e={menu:"ellipsis"},u1e={container:"container"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const d1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns: 1}:host([columns="2"]){--calcite-internal-action-group-columns: 2}:host([columns="3"]){--calcite-internal-action-group-columns: 3}:host([columns="4"]){--calcite-internal-action-group-columns: 4}:host([columns="5"]){--calcite-internal-action-group-columns: 5}:host([columns="6"]){--calcite-internal-action-group-columns: 6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)),auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-inline-end:var(--calcite-size-px)}:host([hidden]){display:none}[hidden]{display:none}`,jb=class jb extends vi{constructor(){super(...arguments),this.messages=Ms(),this.focusSetter=yn()(this),this.hasMenuActions=!1,this.expanded=!1,this.layout="vertical",this.menuOpen=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionGroupCollapse=dt({cancelable:!1}),this.calciteActionGroupExpand=dt({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}willUpdate(e){e.has("expanded")&&((this.hasUpdated||this.expanded!==!1)&&(this.menuOpen=!1),this.hasUpdated&&(this.expanded?this.calciteActionGroupExpand.emit():this.calciteActionGroupCollapse.emit()))}setMenuOpen(e){this.menuOpen=!!e.currentTarget.open}handleMenuActionsSlotChange(e){this.hasMenuActions=mt(e)}renderMenu(){const{expanded:e,menuOpen:i,scale:r,layout:n,messages:s,overlayPositioning:o,hasMenuActions:a,menuFlipPlacements:c,menuPlacement:d}=this;return te`<calcite-action-menu .expanded=${e} .flipPlacements=${c??(n==="horizontal"?["top","bottom"]:["left","right"])} .hidden=${!a} .label=${s.more} @calciteActionMenuOpen=${this.setMenuOpen} .open=${i} .overlayPositioning=${o} .placement=${d??(n==="horizontal"?"bottom-start":"leading-start")} .scale=${r}><calcite-action .aria=${{expanded:e}} .icon=${c1e.menu} .scale=${r} slot=${yy.trigger} .text=${s.more} .textEnabled=${e}></calcite-action><slot name=${ww.menuActions} @slotchange=${this.handleMenuActionsSlotChange}></slot><slot name=${ww.menuTooltip} slot=${yy.tooltip}></slot></calcite-action-menu>`}render(){return te`<div .ariaLabel=${this.label} class=${se(u1e.container)} role=group><slot></slot>${this.renderMenu()}</div>`}};jb.properties={hasMenuActions:[16,{},{state:!0}],columns:[11,{},{type:Number,reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],label:1,layout:[3,{},{reflect:!0}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},jb.shadowRootOptions={mode:"open",delegatesFocus:!0},jb.styles=d1e;let sT=jb;bi("calcite-action-group",sT);const p1e=Object.freeze(Object.defineProperty({__proto__:null,ActionGroup:sT},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const rF=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===yy.trigger:!0),h1e=({actionGroups:t,expanded:e,overflowCount:i})=>{let r=i;t.reverse().forEach(n=>{let s=0;const o=rF(n).reverse();o.forEach(a=>{a.slot===ww.menuActions&&(a.removeAttribute("slot"),a.textEnabled=e)}),r>0&&o.some(a=>(o.filter(d=>!d.slot).length>1&&o.length>2&&!a.closest("calcite-action-menu")&&(a.textEnabled=!0,a.setAttribute("slot",ww.menuActions),s++,s>1&&r--),r<1)),n.manager.component.requestUpdate()})},Bj={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function f1e(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function m1e({el:t,expanded:e}){rF(t).filter(i=>i.slot!==ww.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const g1e=({tooltip:t,referenceElement:e,expanded:i,ref:r})=>(t&&(t.referenceElement=!i&&e?e:null),r&&r(e),e),y1e=({expanded:t,expandText:e,collapseText:i,expandLabel:r,collapseLabel:n,toggle:s,el:o,position:a,tooltip:c,ref:d,scale:h})=>{const f=Bu(o)==="rtl",m=t?i:e,v=t?n:r,w=[Bj.chevronsLeft,Bj.chevronsRight];f&&w.reverse();const x=f1e(a,o)==="end",$=x?w[1]:w[0],T=x?w[0]:w[1];return te`<calcite-action .aria=${{expanded:t}} .icon=${t?$:T} id=expand-toggle .label=${v} @click=${s} .scale=${h} .text=${m} .textEnabled=${t} title=${(!t&&!c?m:null)??Je} ${Bt(P=>g1e({tooltip:c,referenceElement:P,expanded:t,ref:d}))}></calcite-action>`};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const v1e=()=>BL((t,e)=>{const i=new Set;return e.onDisconnected(()=>{i.forEach(r=>r.cancel())}),{add:r=>{[r].flat().forEach(n=>i.add(n))},resources:i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const b1e=({bufferSize:t=0,containerSize:e,itemSizes:i})=>{const r=e-t;let n=i.length,s=0;for(const[o,a]of i.entries())if(s=s+a,s>r){n=o;break}else continue;return n},w1e=({bufferSize:t=0,containerSize:e,itemSizes:i})=>Math.max(i.length-b1e({bufferSize:t,itemSizes:i,containerSize:e}),0),Gj={container:"container",actionGroupEnd:"action-group--end"},u2={actionsEnd:"actions-end",bottomActions:"bottom-actions",expandTooltip:"expand-tooltip"},_1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:inline-flex;align-self:stretch;background:transparent}.container{display:inline-flex;flex:1 1 auto;flex-direction:column;gap:var(--calcite-action-bar-items-space, 0);background-color:var(--calcite-action-bar-background-color, var(--calcite-color-foreground-1))}@keyframes in{0%{opacity:0}to{opacity:1}}:host([floating]) .container{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;overflow:hidden;border-radius:var(--calcite-action-bar-corner-radius, var(--calcite-corner-radius-round));--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-action-bar-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]):host([overflow-actions-disabled]) .container{overflow-y:auto}:host([layout=vertical]):host([expanded]) .container{max-inline-size:var(--calcite-action-bar-expanded-max-width, auto)}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]):host([overflow-actions-disabled]) .container{overflow-x:auto}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=horizontal]) ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:var(--calcite-border-width-sm)}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}`,XT=class XT extends vi{constructor(){super(),this.mutationObserver=ra("mutation",()=>this.mutationObserverHandler()),this.cancelable=v1e()(this),this.resize=JZ(({width:e,height:i})=>{const{expanded:r,expandDisabled:n,layout:s,overflowActionsDisabled:o,actionGroups:a}=this;if(o||s==="vertical"&&!i||s==="horizontal"&&!e)return;const c=this.getItemSizes();this.updateGroups();const d=this.hasActionsEnd||this.hasBottomActions||!n?a.length+1:a.length,h=w1e({bufferSize:d,containerSize:s==="horizontal"?e:i,itemSizes:c});h1e({actionGroups:a,expanded:r,overflowCount:h})},TU.resize),this.resizeHandler=e=>{const{width:i,height:r}=e.contentRect;this.resize({width:i,height:r})},this.resizeObserver=ra("resize",e=>this.resizeHandlerEntries(e)),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.messages=Ms(),this.focusSetter=yn()(this),this.hasActionsEnd=!1,this.hasBottomActions=!1,this.floating=!1,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionBarCollapse=dt({cancelable:!1}),this.calciteActionBarExpand=dt({cancelable:!1}),this.calciteActionBarToggle=dt({cancelable:!1}),this.listen("calciteActionMenuOpen",this.actionMenuOpenHandler)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){var e;super.connectedCallback(),this.updateGroups(),this.overflowActions(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.overflowActionsDisabledHandler(this.overflowActionsDisabled),this.cancelable.add(this.resize)}willUpdate(e){e.has("expandDisabled")&&(this.hasUpdated||this.expandDisabled!==!1)&&this.overflowActions(),e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.updateGroups(),e.has("overflowActionsDisabled")&&(this.hasUpdated||this.overflowActionsDisabled!==!1)&&this.overflowActionsDisabledHandler(this.overflowActionsDisabled),e.has("expanded")&&this.hasUpdated&&(this.expandedHandler(),this.expanded?this.calciteActionBarExpand.emit():this.calciteActionBarCollapse.emit())}loaded(){this.overflowActions()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect()}getItemSizes(){const{el:e,layout:i,expandToggleEl:r}=this,n=rF(e);r&&n.push(r);const s=i==="horizontal"?"clientWidth":"clientHeight",o=Math.max(...n.map(a=>a[s]||0));return n.map(a=>a[s]||o)}expandedHandler(){const{el:e,expanded:i}=this;m1e({el:e,expanded:i}),this.overflowActions()}overflowActionsDisabledHandler(e){var i,r;if(e){(i=this.resizeObserver)==null||i.disconnect();return}(r=this.resizeObserver)==null||r.observe(this.el),this.overflowActions()}actionMenuOpenHandler(e){var i;if(e.target.menuOpen){const r=e.composedPath();(i=this.actionGroups)==null||i.forEach(n=>{r.includes(n)||(n.menuOpen=!1)})}}mutationObserverHandler(){this.updateGroups(),this.overflowActions()}resizeHandlerEntries(e){e.forEach(this.resizeHandler)}updateGroups(){const e=Array.from(this.el.querySelectorAll("calcite-action-group"));this.actionGroups=e,e.forEach(i=>{i.layout=this.layout,i.scale=this.scale})}handleDefaultSlotChange(){this.updateGroups()}handleActionsEndSlotChange(e){this.hasActionsEnd=mt(e)}handleBottomActionsSlotChange(e){this.hasBottomActions=mt(e)}handleTooltipSlotChange(e){const i=fc(e).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.expandTooltip=i[0]}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,el:r,position:n,toggleExpand:s,scale:o,layout:a,messages:c,actionsEndGroupLabel:d,overlayPositioning:h}=this,f=i?null:y1e({collapseLabel:c.collapseLabel,collapseText:c.collapse,el:r,expandLabel:c.expandLabel,expandText:c.expand,expanded:e,position:n,ref:m=>this.expandToggleEl=m,scale:o,toggle:s,tooltip:this.expandTooltip});return te`<calcite-action-group class=${se(Gj.actionGroupEnd)} .hidden=${this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions)} .label=${d} .layout=${a} .overlayPositioning=${h} .scale=${o}><slot name=${u2.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot><slot name=${u2.bottomActions} @slotchange=${this.handleBottomActionsSlotChange}></slot><slot name=${u2.expandTooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${f}</calcite-action-group>`}render(){return te`<div class=${se(Gj.container)}><slot @slotchange=${this.handleDefaultSlotChange}></slot>${this.renderBottomActionGroup()}</div>`}};XT.properties={expandTooltip:[16,{},{state:!0}],hasActionsEnd:[16,{},{state:!0}],hasBottomActions:[16,{},{state:!0}],actionsEndGroupLabel:1,floating:[7,{},{reflect:!0,type:Boolean}],expandDisabled:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overflowActionsDisabled:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},XT.styles=_1e;let oT=XT;bi("calcite-action-bar",oT);const fVe=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:oT},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Hj={scrim:"scrim",content:"content"},Wj={s:72,l:480},x1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0}to{--tw-text-opacity: 1}}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,ek=class ek extends vi{constructor(){super(...arguments),this.loaderRef=ks(),this.resizeObserver=ra("resize",()=>this.handleResize()),this.messages=Ms(),this.hasContent=!1,this.loading=!1}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}handleDefaultSlotChange(e){this.hasContent=cve(e)}getScale(e){return e<Wj.s?"s":e>=Wj.l?"l":"m"}handleResize(){const{el:e}=this;this.loaderScale=this.getScale(Math.min(e.clientHeight,e.clientWidth)??0)}render(){const{hasContent:e,loading:i,loaderScale:r,messages:n}=this;return te`<div class=${se(Hj.scrim)}>${i&&r?te`<calcite-loader .label=${n.loading} .scale=${r} ${Bt(this.loaderRef)}></calcite-loader>`:null}<div class=${se(Hj.content)} .hidden=${!e}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};ek.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},ek.styles=x1e;let YC=ek;bi("calcite-scrim",YC);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Vt={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",headingTextContent:"heading-text-content",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",icon:"icon",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end",headerSlottedContent:"header--slotted-content",headerNonSlottedContent:"header--non-slotted-content",menuAction:"menu-action"},Zj={close:"close",collapse:"collapse"},v_={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},Qn={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const S1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height: calc(var(--calcite-icon-size) * 3);border-radius:var(--calcite-panel-corner-radius, var(--calcite-corner-radius-sharp))}slot[name=alerts]::slotted(calcite-alert){block-size:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}:host([scale=s]){--calcite-internal-panel-default-space: var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-sm-plus)}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1)}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2)}:host([scale=s]) .header-content .icon{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]){--calcite-internal-panel-default-space: var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-md-plus)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0)}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1)}:host([scale=m]) .header-content .icon{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-panel-default-space: var(--calcite-spacing-lg);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-xl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1)}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0)}:host([scale=l]) .header-content .icon{margin-inline-end:var(--calcite-spacing-lg)}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;padding:var(--calcite-internal-panel-default-space);border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));background-color:var(--calcite-panel-background-color, var(--calcite-color-foreground-1))}.container{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;overflow:hidden;background-color:var(--calcite-color-background);padding:0;color:var(--calcite-color-text-2);transition:max-block-size var(--calcite-animation-timing),inline-size var(--calcite-animation-timing);box-sizing:border-box;font-size:var(--calcite-font-size--1)}.container *{box-sizing:border-box}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-panel-header-background-color, var(--calcite-color-foreground-1));border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-panel-header-border-block-end, var(--calcite-color-border-3)))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3))}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:.75rem;padding-block:.875rem;margin-inline-end:auto;justify-content:center}.header-content .heading-text-content{flex:1 1 auto;overflow:hidden}.header-content .heading,.header-content .description{display:block;flex:none;overflow-wrap:break-word;padding:0;line-height:var(--calcite-font-line-height-relative-snug)}.header-content .heading{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-panel-heading-text-color, var(--calcite-color-text-1))}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-panel-description-text-color, var(--calcite-color-text-2))}#close,#collapse,.back-button,calcite-action-menu{--calcite-action-background-color: var(--calcite-panel-header-action-background-color);--calcite-action-background-color-hover: var(--calcite-panel-header-action-background-color-hover);--calcite-action-background-color-press: var(--calcite-panel-header-action-background-color-press);--calcite-action-text-color: var(--calcite-panel-header-action-text-color);--calcite-action-text-color-press: var(--calcite-panel-header-action-text-color-press)}.back-button{border-width:0px;border-style:solid;border-inline-end-width:1px;border-color:var(--calcite-panel-border-color, var(--calcite-color-border-3))}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{position:relative;display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;color:var(--calcite-color-text-2);outline-color:transparent;padding:var(--calcite-panel-space, var(--calcite-panel-content-space, 0));background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.header-content{flex:1 1 auto;justify-content:center;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-space)}.header-content.header--slotted-content{padding:var(--calcite-panel-header-content-space, var(--calcite-internal-panel-header-vertical-padding) var(--calcite-internal-panel-default-space))}.header-content.header--non-slotted-content{align-items:center;flex-direction:row}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));padding:var(--calcite-panel-footer-space, var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-space)));background-color:var(--calcite-panel-footer-background-color, var(--calcite-color-foreground-1))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-space)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-space)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-space)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:.5rem;inset-inline:0;inline-size:fit-content}calcite-icon{--calcite-icon-color: var(--calcite-panel-icon-color, var(--calcite-color-text-1))}:host([hidden]){display:none}[hidden]{display:none}`,tk=class tk extends vi{constructor(){super(),this.containerRef=ks(),this.resizeObserver=ra("resize",()=>this.resizeHandler()),this.messages=Ms(),this._closed=!1,this.focusSetter=yn()(this),this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasEndActions=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.hasHeaderContent=!1,this.hasMenuItems=!1,this.hasStartActions=!1,this.showHeaderContent=!1,this.closable=!1,this.collapseDirection="down",this.collapsed=!1,this.collapsible=!1,this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.menuOpen=!1,this.menuPlacement=pwe,this.overlayPositioning="absolute",this.scale="m",this.calcitePanelClose=dt({cancelable:!0}),this.calcitePanelCollapse=dt({cancelable:!1}),this.calcitePanelExpand=dt({cancelable:!1}),this.calcitePanelScroll=dt({cancelable:!1}),this.calcitePanelToggle=dt({cancelable:!1}),this.listen("keydown",this.panelKeyDownHandler),this.listen("calcitePanelClose",this.panelCloseHandler)}get closed(){return this._closed}set closed(e){const i=this._closed;e!==i&&this.setClosedState(e)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}willUpdate(e){e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calcitePanelCollapse.emit():this.calcitePanelExpand.emit())}updated(){Vh(this)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}async setClosedState(e){var i;if(this.beforeClose&&e)try{await((i=this.beforeClose)==null?void 0:i.call(this))}catch{return}this._closed=e}resizeHandler(){const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}closeClickHandler(){this.emitCloseEvent()}emitCloseEvent(){this.calcitePanelClose.emit()}panelKeyDownHandler(e){this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.emitCloseEvent(),e.preventDefault())}panelCloseHandler(e){e.defaultPrevented||e.target!==this.el||(this.closed=!0)}collapse(){this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()}panelScrollHandler(){this.calcitePanelScroll.emit()}handleHeaderActionsStartSlotChange(e){this.hasStartActions=mt(e)}handleHeaderActionsEndSlotChange(e){this.hasEndActions=mt(e)}handleHeaderMenuActionsSlotChange(e){this.hasMenuItems=mt(e)}handleActionBarSlotChange(e){const i=fc(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));i.forEach(r=>r.layout="horizontal"),this.hasActionBar=!!i.length}handleHeaderContentSlotChange(e){this.hasHeaderContent=mt(e)}handleFabSlotChange(e){this.hasFab=mt(e)}handleFooterActionsSlotChange(e){this.hasFooterActions=mt(e)}handleFooterEndSlotChange(e){this.hasFooterEndContent=mt(e)}handleFooterStartSlotChange(e){this.hasFooterStartContent=mt(e)}handleFooterSlotChange(e){this.hasFooterContent=mt(e)}contentBottomSlotChangeHandler(e){this.hasContentBottom=mt(e)}contentTopSlotChangeHandler(e){this.hasContentTop=mt(e)}setPanelScrollEl(e){hZ(this.resizeObserver,this.panelScrollEl,e),this.panelScrollEl=e}handleAlertsSlotChange(e){var i;(i=fc(e))==null||i.map(r=>{r.nodeName==="CALCITE-ALERT"&&(r.embedded=!0)})}renderHeaderContent(){const{heading:e,headingLevel:i,description:r,hasHeaderContent:n,icon:s,scale:o}=this,a=s?te`<calcite-icon class=${se(Vt.icon)} .flipRtl=${this.iconFlipRtl} .icon=${s} .scale=${Ga(o)}></calcite-icon>`:null,c=e?YL({class:Vt.heading,level:i,children:e}):null,d=r?te`<span class=${se(Vt.description)}>${r}</span>`:null;return!n&&(c||d)?pt("header-content",te`<div class=${se({[Vt.headerContent]:!0,[Vt.headerNonSlottedContent]:!0})}>${a}<div class=${se(Vt.headingTextContent)}>${c}${d}</div></div>`):null}renderActionBar(){return te`<div class=${se(Vt.actionBarContainer)} .hidden=${!this.hasActionBar}><slot name=${Qn.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`}renderHeaderSlottedContent(){return pt("slotted-header-content",te`<div class=${se({[Vt.headerContent]:!0,[Vt.headerSlottedContent]:!0})} .hidden=${!this.hasHeaderContent}><slot name=${Qn.headerContent} @slotchange=${this.handleHeaderContentSlotChange}></slot></div>`)}renderHeaderStartActions(){const{hasStartActions:e}=this;return pt("header-actions-start",te`<div class=${se({[Vt.headerActionsStart]:!0,[Vt.headerActions]:!0})} .hidden=${!e}><slot name=${Qn.headerActionsStart} @slotchange=${this.handleHeaderActionsStartSlotChange}></slot></div>`)}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:r,collapsed:n,collapseDirection:s,collapsible:o,hasMenuItems:a}=this,{collapse:c,expand:d,close:h}=i,f=[v_.expand,v_.collapse];s==="up"&&f.reverse();const m=o?te`<calcite-action .aria=${{expanded:!n}} .icon=${n?f[0]:f[1]} id=${Zj.collapse} .label=${c} @click=${this.collapse} .scale=${this.scale} .text=${c} title=${(n?d:c)??Je}></calcite-action>`:null,v=r?te`<calcite-action .ariaLabel=${h} .icon=${v_.close} id=${Zj.close} @click=${this.closeClickHandler} .scale=${this.scale} .text=${h} title=${h??Je}></calcite-action>`:null,w=te`<slot name=${Qn.headerActionsEnd} @slotchange=${this.handleHeaderActionsEndSlotChange}></slot>`,x=e||m||v||a;return pt("header-actions-end",te`<div class=${se({[Vt.headerActionsEnd]:!0,[Vt.headerActions]:!0})} .hidden=${!x}>${w}${this.renderMenu()}${m}${v}</div>`)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:r,menuFlipPlacements:n,menuPlacement:s}=this;return pt("menu",te`<calcite-action-menu .flipPlacements=${n??["top","bottom"]} .hidden=${!e} .label=${i.options} .open=${r} .overlayPositioning=${this.overlayPositioning} .placement=${s}><calcite-action class=${se(Vt.menuAction)} .icon=${v_.menu} .scale=${this.scale} slot=${yy.trigger} .text=${i.options}></calcite-action><slot name=${Qn.headerMenuActions} @slotchange=${this.handleHeaderMenuActionsSlotChange}></slot></calcite-action-menu>`)}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:r,closable:n,collapsible:s,hasMenuItems:o,hasActionBar:a,hasContentTop:c}=this,d=this.renderHeaderContent(),h=e||!!d||i||r||s||n||o||a||c;return this.showHeaderContent=h,te`<header class=${se(Vt.header)} .hidden=${!(h||a||c)}><div class=${se({[Vt.headerContainer]:!0,[Vt.headerContainerBorderEnd]:a})} .hidden=${!h}>${this.renderHeaderStartActions()}${this.renderHeaderSlottedContent()}${d}${this.renderHeaderActionsEnd()}</div>${this.renderActionBar()}${this.renderContentTop()}</header>`}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:r,hasFooterActions:n}=this,s=i||e||r||n;return te`<footer class=${se(Vt.footer)} .hidden=${!s}><div class=${se(Vt.footerContent)} .hidden=${!r}><slot name=${Qn.footer} @slotchange=${this.handleFooterSlotChange}></slot></div><div class=${se(Vt.footerStart)} .hidden=${r||!i}><slot name=${Qn.footerStart} @slotchange=${this.handleFooterStartSlotChange}></slot></div><div class=${se(Vt.footerEnd)} .hidden=${r||!e}><slot name=${Qn.footerEnd} @slotchange=${this.handleFooterEndSlotChange}></slot></div><div class=${se(Vt.footerActions)} .hidden=${r||!n}>${pt("footer-actions-slot",te`<slot name=${Qn.footerActions} @slotchange=${this.handleFooterActionsSlotChange}></slot>`)}</div></footer>`}renderContent(){return te`<div class=${se(Vt.contentWrapper)} .hidden=${this.collapsible&&this.collapsed} @scroll=${this.panelScrollHandler} ${Bt(this.setPanelScrollEl)}><slot></slot>${this.renderFab()}</div>`}renderContentBottom(){return te`<div class=${se(Vt.contentBottom)} .hidden=${!this.hasContentBottom}><slot name=${Qn.contentBottom} @slotchange=${this.contentBottomSlotChangeHandler}></slot></div>`}renderContentTop(){return te`<div class=${se(Vt.contentTop)} .hidden=${!this.hasContentTop}><slot name=${Qn.contentTop} @slotchange=${this.contentTopSlotChangeHandler}></slot></div>`}renderFab(){return te`<div class=${se(Vt.fabContainer)} .hidden=${!this.hasFab}><slot name=${Qn.fab} @slotchange=${this.handleFabSlotChange}></slot></div>`}render(){const{disabled:e,loading:i,closed:r}=this,n=te`<article .ariaBusy=${i} class=${se(Vt.container)} .hidden=${r} ${Bt(this.containerRef)}>${this.renderHeaderNode()}${this.renderContent()}${this.renderContentBottom()}${this.renderFooterNode()}${pt("alerts",te`<slot name=${Qn.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</article>`;return Uh({disabled:e,children:te`${i?te`<calcite-scrim .loading=${i}></calcite-scrim>`:null}${n}`})}};tk.properties={hasActionBar:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasFab:[16,{},{state:!0}],hasFooterActions:[16,{},{state:!0}],hasFooterContent:[16,{},{state:!0}],hasFooterEndContent:[16,{},{state:!0}],hasFooterStartContent:[16,{},{state:!0}],hasHeaderContent:[16,{},{state:!0}],hasMenuItems:[16,{},{state:!0}],hasStartActions:[16,{},{state:!0}],showHeaderContent:[16,{},{state:!0}],beforeClose:[0,{},{attribute:!1}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],collapseDirection:1,collapsed:[7,{},{reflect:!0,type:Boolean}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],loading:[7,{},{reflect:!0,type:Boolean}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},tk.styles=S1e;let KC=tk;bi("calcite-panel",KC);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const lJ="calciteInternalLabelClick",bI="calciteInternalLabelConnected",aT="calciteInternalLabelDisconnected",Jj="calcite-label",vy=new WeakMap,Tb=new WeakMap,_w=new WeakMap,lT=new WeakMap,Yp=new Set,$1e=t=>{const{id:e}=t,i=e&&pI(t,{selector:`${Jj}[for="${e}"]`});if(i)return i;const r=Qy(t,Jj);return!r||T1e(r,t)?null:r};function T1e(t,e){let i;const r="custom-element-ancestor-check",n=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(r,n,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,n),i.filter(o=>o!==e&&o!==t).filter(o=>{var a;return(a=o.tagName)==null?void 0:a.includes("-")}).length>0}function h1(t){if(!t)return;const e=$1e(t.el);if(Tb.has(e)&&e===t.labelEl||!e&&Yp.has(t))return;const i=I1e.bind(t);if(e){t.labelEl=e;const r=vy.get(e)||[];r.push(t),vy.set(e,r.sort(cJ)),Tb.has(t.labelEl)||(Tb.set(t.labelEl,Yj),t.labelEl.addEventListener(lJ,Yj)),Yp.delete(t),document.removeEventListener(bI,_w.get(t)),lT.set(t,i),document.addEventListener(aT,i)}else Yp.has(t)||(i(),document.removeEventListener(aT,lT.get(t)))}function nF(t){if(!t||(Yp.delete(t),document.removeEventListener(bI,_w.get(t)),document.removeEventListener(aT,lT.get(t)),_w.delete(t),lT.delete(t),!t.labelEl))return;const e=vy.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(lJ,Tb.get(t.labelEl)),Tb.delete(t.labelEl)),vy.set(t.labelEl,e.filter(i=>i!==t).sort(cJ)),t.labelEl=null}function cJ(t,e){return gve(t.el,e.el)?-1:1}function sF(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function Yj(t){const e=t.detail.sourceEvent.target,i=vy.get(this),r=i.find(o=>o.el===e);if(i.includes(r))return;const s=i[0];s.disabled||s.onLabelClick(t)}function k1e(){Yp.has(this)&&h1(this)}function I1e(){Yp.add(this);const t=_w.get(this)||k1e.bind(this);_w.set(this,t),document.addEventListener(bI,t)}async function E1e(t){var r;if(await t.componentOnReady(),vy.has(t))return;const i=(r=t.ownerDocument)==null?void 0:r.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const n of Yp)if(n.el===i){h1(n);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Xn={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},M1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;box-shadow:var(--calcite-button-shadow, var(--calcite-shadow-none));background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}.icon--start,.icon--end{color:var(--calcite-button-icon-color, var(--calcite-icon-color, var(--calcite-ui-icon-color)))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,ik=class ik extends vi{constructor(){super(...arguments),this.attributeWatch=Wve(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentRef=ks(),this.mutationObserver=ra("mutation",()=>this.updateHasContent()),this.resizeObserver=ra("resize",()=>this.setTooltipText()),this.focusSetter=yn()(this),this.messages=Ms(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(e){return this.focusSetter(()=>this.childEl,e)}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),h1(this),this.formEl=WL(this)}async load(){this.updateHasContent()}updated(){Vh(this)}loaded(){this.setTooltipText()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),nF(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=dve(this.el)}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?AZ(this):e==="reset"&&CZ(this))}setTooltipText(){const{contentRef:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){hZ(this.resizeObserver,this.childEl,e),this.childEl=e}render(){const e=this.href?"a":"button",i=this.href?mw`a`:mw`button`,r=this.loading?te`<div class=${se(Xn.buttonLoader)}><calcite-loader class=${se(this.loading?Xn.loadingIn:Xn.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,n=!this.iconStart&&!this.iconEnd,s=te`<calcite-icon class=${se({[Xn.icon]:!0,[Xn.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${Ga(this.scale)}></calcite-icon>`,o=te`<calcite-icon class=${se({[Xn.icon]:!0,[Xn.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${Ga(this.scale)}></calcite-icon>`,a=te`<span class=${se(Xn.content)} ${Bt(this.contentRef)}><slot></slot></span>`;return Uh({disabled:this.disabled,children:JL`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:sF(this)} aria-live=polite class=${se({[Xn.buttonPadding]:n,[Xn.buttonPaddingShrunk]:!n,[Xn.contentSlotted]:this.hasContent,[Xn.iconStartEmpty]:!this.iconStart,[Xn.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??Je} href=${(e==="a"&&this.href)??Je} name=${(e==="button"&&this.name)??Je} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??Je} tabindex=${(this.disabled?-1:null)??Je} target=${(e==="a"&&this.target)??Je} title=${this.tooltipText??Je} type=${(e==="button"?this.type:null)??Je} ${Bt(this.setChildEl)}>${r}${this.iconStart?s:null}${this.hasContent?a:null}${this.iconEnd?o:null}</${i}>`})}};ik.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:My},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},ik.styles=M1e;let cT=ik;bi("calcite-button",cT);const wI=Object.freeze(Object.defineProperty({__proto__:null,Button:cT},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Kj={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},A1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,C1e={inputMessageIcon:"calcite-input-message-icon"},rk=class rk extends vi{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=NC(Kj,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=NC(Kj,this.icon,this.status))}render(){const e=this.el.hidden;return bk(this.el,"calcite-hydrated-hidden",e),te`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return te`<calcite-icon class=${se(C1e.inputMessageIcon)} .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};rk.properties={icon:[3,{converter:My},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}]},rk.styles=A1e;let uT=rk;bi("calcite-input-message",uT);const mVe=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:uT},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function O1e(t,e,i){const r=e[0]-t[0],n=i[0]-e[0],s=e[1]-t[1],o=i[1]-e[1],a=s/(r||n<0&&0),c=o/(n||r<0&&0),d=(a*n+c*r)/(r+n);return(Math.sign(a)+Math.sign(c))*Math.min(Math.abs(a),Math.abs(c),.5*Math.abs(d))||0}function Qj(t,e,i){const r=e[0]-t[0],n=e[1]-t[1];return r?(3*n/r-i)/2:i}function Xj(t,e,i,r,n){const[s,o]=t,[a,c]=e,d=(a-s)/3,h=n([s+d,o+d*i]).join(","),f=n([a-d,c-d*r]).join(","),m=n([a,c]).join(",");return`C ${h} ${f} ${m}`}function P1e({width:t,height:e,min:i,max:r}){const n=r[0]-i[0],s=r[1]-i[1];return o=>{const a=(o[0]-i[0])/n*t,c=e-(o[1]-i[1])/s*e;return[a,c]}}function R1e(t){const[e,i]=t[0],r=[e,i],n=[e,i];return t.reduce(({min:s,max:o},[a,c])=>({min:[Math.min(s[0],a),Math.min(s[1],c)],max:[Math.max(o[0],a),Math.max(o[1],c)]}),{min:r,max:n})}function L1e({data:t,min:e,max:i,t:r}){if(t.length===0)return"";const[n,s]=r(t[0]),[o,a]=r(e),[c]=r(i);let d,h,f;const m=t.reduce((x,$,T)=>{if(h=t[T-2],f=t[T-1],T>1){const C=O1e(h,f,$),P=d===void 0?Qj(h,f,C):d,L=Xj(h,f,P,C,r);return d=C,`${x} ${L}`}return x},`M ${o},${a} L ${o},${s} L ${n},${s}`),v=t[t.length-1],w=Xj(f,v,d,Qj(f,v,d),r);return`${m} ${w} L ${c},${a} Z`}const F1e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;block-size:100%}.svg{fill:currentColor;stroke:transparent;margin:0;display:block;block-size:100%;inline-size:100%;padding:0}.svg .graph-path--highlight{fill:var(--calcite-graph-highlight-fill-color, var(--calcite-color-brand));opacity:.5}:host([hidden]){display:none}[hidden]{display:none}`,cf={svg:"svg",graphPath:"graph-path",graphPathHighlight:"graph-path--highlight"},d2="calcite-graph",Gc={host:t=>`${d2}-${t}`,linearGradient:t=>`linear-gradient-${d2}-${t}`,mask:(t,e)=>`${d2}-${t}${e}`},nk=class nk extends vi{constructor(){super(...arguments),this.graphId=Ky(),this.resizeObserver=ra("resize",()=>this.requestUpdate()),this.data=[]}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}render(){const{data:e,colorStops:i,el:r,highlightMax:n,highlightMin:s,min:o,max:a}=this,c=this.graphId,{clientHeight:d,clientWidth:h}=r;if(!e||e.length===0)return te`<svg aria-hidden=true class=${se(cf.svg)} height=${d??Mt} preserveAspectRatio=none viewBox=${`0 0 ${h} ${d}`} width=${h??Mt}></svg>`;const{min:f,max:m}=R1e(e);let v=f,w=m;(o<f[0]||o>f[0])&&(v=[o,0]),(a>m[0]||a<m[0])&&(w=[a,m[1]]);const x=P1e({min:v,max:w,width:h,height:d}),[$]=x([s,w[1]]),[T]=x([n,w[1]]),C=L1e({data:e,min:f,max:m,t:x}),P=i?`url(#${Gc.linearGradient(c)})`:void 0;return te`<svg aria-hidden=true class=${se(cf.svg)} height=${d??Mt} preserveAspectRatio=none viewBox=${`0 0 ${h} ${d}`} width=${h??Mt}>${i?Ln`<defs><linearGradient id=${Gc.linearGradient(c)??Mt} x1=0 x2=1 y1=0 y2=0>${i.map(({offset:L,color:D,opacity:q})=>Ln`<stop offset=${`${L*100}%`} stop-color=${D??Mt} stop-opacity=${q??Mt} />`)}</linearGradient></defs>`:null}${s!==void 0?[Ln`<mask height=100% id=${Gc.mask(c,1)??Mt} width=100% x=0% y=0%><path d=${`
            M 0,0
            L ${$-1},0
            L ${$-1},${d}
            L 0,${d}
            Z
          `} fill=white /></mask>`,Ln`<mask height=100% id=${Gc.mask(c,2)??Mt} width=100% x=0% y=0%><path d=${`
            M ${$+1},0
            L ${T-1},0
            L ${T-1},${d}
            L ${$+1}, ${d}
            Z
          `} fill=white /></mask>`,Ln`<mask height=100% id=${Gc.mask(c,3)??Mt} width=100% x=0% y=0%><path d=${`
                M ${T+1},0
                L ${h},0
                L ${h},${d}
                L ${T+1}, ${d}
                Z
              `} fill=white /></mask>`,Ln`<path class=${se(cf.graphPath)} d=${C??Mt} fill=${P??Mt} mask=${`url(#${Gc.mask(c,1)})`} />`,Ln`<path class=${se(cf.graphPathHighlight)} d=${C??Mt} fill=${P??Mt} mask=${`url(#${Gc.mask(c,2)})`} />`,Ln`<path class=${se(cf.graphPath)} d=${C??Mt} fill=${P??Mt} mask=${`url(#${Gc.mask(c,3)})`} />`]:Ln`<path class=${se(cf.graphPath)} d=${C??Mt} fill=${P??Mt} />`}</svg>`}};nk.properties={colorStops:[0,{},{attribute:!1}],data:[0,{},{attribute:!1}],highlightMax:[9,{},{type:Number}],highlightMin:[9,{},{type:Number}],max:[11,{},{reflect:!0,type:Number}],min:[11,{},{reflect:!0,type:Number}]},nk.styles=F1e;let QC=nk;bi("calcite-graph",QC);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Hc={alignmentCenter:"internal-label-alignment--center",alignmentEnd:"internal-label-alignment--end",container:"internal-label--container",requiredIndicator:"internal-label-required--indicator",spacingBottom:"internal-label-spacing--bottom",spacingInlineEnd:"internal-label-spacing-inline--end",spacingInlineStart:"internal-label-spacing-inline--start",text:"internal-label--text"},oF=({alignmentCenter:t,bottomSpacingDisabled:e,labelText:i,onClick:r,required:n,spacingInlineEnd:s,spacingInlineStart:o,tooltipText:a})=>te`<div class=${se({[Hc.alignmentCenter]:t,[Hc.alignmentEnd]:!t,[Hc.container]:!0,[Hc.spacingBottom]:!e,[Hc.spacingInlineEnd]:s,[Hc.spacingInlineStart]:o})} @click=${r}><div class=${se(Hc.text)}>${i}${n&&te`<span aria-hidden=true class=${se(Hc.requiredIndicator)} title=${a??Je}>*</span>`||""}</div><slot name=label-content></slot></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const N1e={validationContainer:"validation-container"},D1e=()=>{},uJ=({scale:t,status:e,id:i,icon:r,message:n,ref:s})=>te`<div class=${se(N1e.validationContainer)} ${Bt(s||D1e)}><calcite-input-message aria-live=polite .icon=${r} id=${i??Je} .scale=${t} .status=${e}>${n}</calcite-input-message></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const z1e=new RegExp("\\.(0+)?$"),j1e=new RegExp("0+$"),Rt=class Rt{constructor(e){if(e instanceof Rt)return e;const[i,r]=W1e(e).split(".").concat("");this.value=BigInt(i+r.padEnd(Rt.DECIMALS,"0").slice(0,Rt.DECIMALS))+BigInt(Rt.ROUNDED&&r[Rt.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Rt.DECIMALS+1,"0"),i=e.slice(0,-Rt.DECIMALS),r=e.slice(-Rt.DECIMALS).replace(j1e,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${s}`}add(e){return Rt.fromBigInt(this.value+new Rt(e).value)}subtract(e){return Rt.fromBigInt(this.value-new Rt(e).value)}multiply(e){return Rt._divRound(this.value*new Rt(e).value,Rt.SHIFT)}divide(e){return Rt._divRound(this.value*Rt.SHIFT,new Rt(e).value)}};Rt.DECIMALS=100,Rt.ROUNDED=!0,Rt.SHIFT=BigInt("1"+"0".repeat(Rt.DECIMALS)),Rt._divRound=(e,i)=>Rt.fromBigInt(e/i+(Rt.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),Rt.fromBigInt=e=>Object.assign(Object.create(Rt.prototype),{value:e,isNegative:e<BigInt(0)});let by=Rt;function aF(t){return!(!t||isNaN(Number(t)))}function gVe(t){return!t||!Z1e(t)?"":dT(t,e=>{let i=!1;const r=e.split("").filter((n,s)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&s===0?!0:iF.includes(n)).join("");return aF(r)?new by(r).toString():""})}const dJ=/^([-0])0+(?=\d)/,V1e=/(?!^\.)\.$/,U1e=/(?!^-)-/g,q1e=/^-\b0\b\.?0*$/,B1e=/0*$/,G1e=new Set(["e","E","-",",",".",...iF]),yVe=t=>{const e=Array.from(t).filter(i=>G1e.has(i)).join("");return dT(e,i=>{const r=i.replace(U1e,"").replace(V1e,"").replace(dJ,"$1");return aF(r)?q1e.test(r)?r:H1e(r):i})};function H1e(t){const e=t.split(".")[1],i=new by(t).toString(),[r,n]=i.split(".");return e&&n!==e?`${r}.${e}`:i}function dT(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>e(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function W1e(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),o=(r?s[0].substring(1):s[0])||"",a=s[1]||"",c=(f,m)=>{const v=Math.abs(m)-f.length,w=v>0?`${"0".repeat(v)}${f}`:f;return`${w.slice(0,m)}.${w.slice(m)}`},d=(f,m)=>{const v=m>f.length?`${f}${"0".repeat(m-f.length)}`:f;return`${v.slice(0,m)}.${v.slice(m)}`},h=n>0?`${o}${d(a,n)}`:`${c(o,n)}${a}`;return`${r?"-":""}${h.charAt(0)==="."?"0":""}${h.replace(z1e,"").replace(dJ,"")}`}function Z1e(t){return iF.some(e=>t.includes(e))}function vVe(t,e,i){const r=e.split(".")[1];if(r){const n=r.match(B1e)[0];if(n&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const pT="en",J1e=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",pT,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"..",pm:".."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.m.",pm:"p.m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.m.",pm:"p.m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"",pm:""},hu:{am:"de. ",pm:"du."},lt:{am:"priepiet",pm:"popiet"},lv:{am:"priekpusdien",pm:"pcpusdien"},mk:{am:".",pm:"."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manh",pm:"da tarde"},"pt-PT":{am:"da manh",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"",pm:""},tr:{am:"",pm:"S"},uk:{am:"",pm:""},vi:{am:"SA",pm:"CH"}}));const Y1e=["arab","arabext","latn"],p2=[...J1e],pJ=t=>Y1e.includes(t),h2=new Intl.NumberFormat().resolvedOptions().numberingSystem,hJ=h2==="arab"||!pJ(h2)?"latn":h2,K1e=t=>pJ(t)?t:hJ;function Q1e(t){return t?p2.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),p2.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":p2.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),pT)):pT}class fJ{constructor(){this.delocalize=e=>this._numberFormatOptions?dT(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?dT(e,i=>aF(i.trim())?new by(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=Q1e(e==null?void 0:e.locale),e.numberingSystem=K1e(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===pT&&e.numberingSystem===hJ&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,s)=>[n,s])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const e4=new fJ;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const vt={container:"container",containerRange:"container--range",graph:"graph",handle:"handle",handleExtension:"handle-extension",handleLabel:"handle__label",handleLabelMinValue:"handle__label--minValue",handleLabelValue:"handle__label--value",hyphen:"hyphen",hyphenWrap:"hyphen--wrap",static:"static",thumb:"thumb",thumbActive:"thumb--active",thumbContainer:"thumb-container",thumbMinValue:"thumb--minValue",thumbPrecise:"thumb--precise",thumbValue:"thumb--value",tick:"tick",tickActive:"tick--active",tickLabel:"tick__label",tickMax:"tick__label--max",tickMin:"tick__label--min",ticks:"ticks",track:"track",trackRange:"track__range",transformed:"transformed",scale:t=>`scale--${t}`},X1e="calcite-slider",f2={validationMessage:"validationMessage",host:t=>`${X1e}-${t}`},e_e=250,t_e=Ht`@charset "UTF-8";:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{--calcite-slider-handle-size: .625rem;--calcite-slider-handle-extension-height: .4rem;--calcite-slider-container-font-size: var(--calcite-font-size--3)}.scale--s .handle__label,.scale--s .tick__label{line-height:.75rem}.scale--m{--calcite-slider-handle-size: .875rem;--calcite-slider-handle-extension-height: .5rem;--calcite-slider-container-font-size: var(--calcite-font-size--2)}.scale--m .handle__label,.scale--m .tick__label{line-height:1rem}.scale--l{--calcite-slider-handle-size: 1rem;--calcite-slider-handle-extension-height: .65rem;--calcite-slider-container-font-size: var(--calcite-font-size--1)}.scale--l .handle__label,.scale--l .tick__label{line-height:1rem}.handle__label,.tick__label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-slider-text-color, var(--calcite-color-text-2));font-size:var(--calcite-slider-container-font-size)}:host{display:block}:host .validation-container{padding-block-start:0!important}.container{position:relative;display:block;overflow-wrap:normal;word-break:normal;padding-inline:calc(var(--calcite-slider-handle-size) * .5);padding-block:calc(var(--calcite-slider-handle-size) * .5);margin-block:calc(var(--calcite-slider-handle-size) * .5);margin-inline:0;--calcite-slider-full-handle-height: calc( var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height) );touch-action:none;-webkit-user-select:none;user-select:none}:host([disabled]) .track__range,:host([disabled]) .tick--active{background-color:var(--calcite-color-text-3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.375rem}.scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.5rem}.scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -.55rem}:host([precise]:not([has-histogram])) .container .thumb--value{--calcite-slider-thumb-y-offset: calc(var(--calcite-slider-full-handle-height) * -1)}.thumb-container{position:relative;max-inline-size:100%}.thumb{--calcite-slider-thumb-x-offset: calc(var(--calcite-slider-handle-size) * .5);position:absolute;margin:0;display:flex;cursor:pointer;flex-direction:column;align-items:center;border-style:none;background-color:transparent;padding:0;font-family:inherit;outline:2px solid transparent;outline-offset:2px;transform:translate(var(--calcite-slider-thumb-x-offset),var(--calcite-slider-thumb-y-offset))}.thumb .handle__label{white-space:nowrap}.thumb .handle__label.static,.thumb .handle__label.transformed{position:absolute;inset-block:0px;opacity:0}.thumb .handle__label.hyphen:after{content:"";display:inline-block;inline-size:1em}.thumb .handle__label.hyphen--wrap{display:flex}.thumb .handle{box-sizing:border-box;border-radius:9999px;outline-color:transparent;background-color:var(--calcite-slider-handle-fill-color, var(--calcite-color-foreground-1));block-size:var(--calcite-slider-handle-size);inline-size:var(--calcite-slider-handle-size);box-shadow:0 0 0 2px var(--calcite-color-text-3) inset;transition:border var(--calcite-internal-animation-timing-medium) ease,background-color var(--calcite-internal-animation-timing-medium) ease,box-shadow var(--calcite-animation-timing) ease}.thumb .handle-extension{inline-size:.125rem;block-size:var(--calcite-slider-handle-extension-height);background-color:var(--calcite-slider-handle-extension-color, var(--calcite-color-text-3))}.thumb:hover .handle{box-shadow:0 0 0 3px var(--calcite-color-brand) inset}.thumb:hover .handle-extension{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.thumb:focus .handle{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.thumb:focus .handle-extension{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.thumb.thumb--minValue{transform:translate(calc(var(--calcite-slider-thumb-x-offset) * -1),var(--calcite-slider-thumb-y-offset))}.thumb.thumb--precise{--calcite-slider-thumb-y-offset: -.125rem}:host([label-handles]) .thumb{--calcite-slider-thumb-x-offset: 50%}:host([label-handles]):host(:not([has-histogram])) .scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -1.4375rem}:host([label-handles]):host(:not([has-histogram])) .scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -1.875rem}:host([label-handles]):host(:not([has-histogram])) .scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset: -2rem}:host([has-histogram][label-handles]) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise .handle__label{margin-block-start:.5em}:host(:not([has-histogram]):not([precise])) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--value .handle__label{margin-block-end:.5em}:host([label-handles][precise]):host(:not([has-histogram])) .scale--s .thumb--value{--calcite-slider-thumb-y-offset: -2.075rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--m .thumb--value{--calcite-slider-thumb-y-offset: -2.75rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--l .thumb--value{--calcite-slider-thumb-y-offset: -3.0625rem}.thumb:focus .handle,.thumb--active .handle{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand));box-shadow:0 0 8px #00000029}.thumb:hover.thumb--precise:after,.thumb:focus.thumb--precise:after,.thumb--active.thumb--precise:after{background-color:var(--calcite-slider-accent-color, var(--calcite-color-brand))}.track{position:relative;block-size:.125rem;border-radius:0;background-color:var(--calcite-slider-track-color, var(--calcite-color-border-2));transition:all var(--calcite-internal-animation-timing-medium) ease-in}.track__range{position:absolute;inset-block-start:0px;block-size:.125rem;background-color:var(--calcite-slider-track-fill-color, var(--calcite-color-brand))}.container--range .track__range:hover{cursor:ew-resize}.container--range .track__range:after{position:absolute;inline-size:100%;content:"";inset-block-start:calc(var(--calcite-slider-full-handle-height) * .5 * -1);block-size:calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height))}@media (forced-colors: active){.thumb{outline-width:0;outline-offset:0}.handle{outline:2px solid transparent;outline-offset:2px}.thumb:focus .handle,.thumb .handle-extension,.thumb:hover .handle-extension,.thumb:focus .handle-extension,.thumb:active .handle-extension{background-color:canvasText}.track{background-color:canvasText}.track__range{background-color:highlight}}.tick{position:absolute;block-size:.25rem;inline-size:.125rem;border-width:1px;border-style:solid;background-color:var(--calcite-slider-tick-color, var(--calcite-color-border-input));border-color:var(--calcite-slider-tick-border-color, var(--calcite-color-foreground-1));inset-block-start:-2px;pointer-events:none;margin-inline-start:-.125rem}.tick--active{background-color:var(--calcite-slider-tick-selected-color, var(--calcite-color-brand))}.tick__label{pointer-events:none;margin-block-start:.875rem;display:flex;justify-content:center}.tick__label--min{transition:opacity var(--calcite-animation-timing)}.tick__label--max{transition:opacity var(--calcite-internal-animation-timing-fast)}:host([has-histogram][label-handles]) .tick__label--min,:host([has-histogram][label-handles]) .tick__label--max,:host([has-histogram][precise]) .tick__label--min,:host([has-histogram][precise]) .tick__label--max{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-3)}.graph{color:var(--calcite-slider-graph-color, var(--calcite-color-foreground-3));block-size:48px}:host([label-ticks][ticks]) .container{padding-block-end:calc(.875rem + var(--calcite-slider-container-font-size))}:host([has-histogram]):host([precise][label-handles]) .container{padding-block-end:calc(var(--calcite-slider-full-handle-height) + 1em)}:host([has-histogram]):host([label-handles]:not([precise])) .container{padding-block-end:calc(var(--calcite-slider-handle-size) * .5 + 1em)}:host([has-histogram]):host([precise]:not([label-handles])) .container{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container{padding-block-start:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container--range{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([label-handles]:not([precise])) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container--range{padding-block-end:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`;function Jr(t){return Array.isArray(t)}const Vb=class Vb extends vi{constructor(){super(),this.dragEnd=e=>{this.disabled||(this.removeDragListeners(),this.focusActiveHandle(e.clientX),this.lastDragPropValue!=this[this.dragProp]&&this.emitChange(),this.dragProp=null,this.lastDragPropValue=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.minMaxValueRange=null)},this.dragUpdate=e=>{if(!this.disabled&&(e.preventDefault(),this.dragProp)){const i=this.mapToRange(e.clientX||e.pageX);if(Jr(this.value)&&this.dragProp==="minMaxValue")if(this.minValueDragRange&&this.maxValueDragRange&&this.minMaxValueRange){const r=i-this.minValueDragRange,n=i+this.maxValueDragRange;n<=this.max&&r>=this.min&&n-r===this.minMaxValueRange&&this.setValue({minValue:this.clamp(r,"minValue"),maxValue:this.clamp(n,"maxValue")})}else this.minValueDragRange=i-this.minValue,this.maxValueDragRange=this.maxValue-i,this.minMaxValueRange=this.maxValue-this.minValue;else if(Jr(this.value)&&Jr(this.previousEmittedValue)&&this.dragProp==="maxValue"){const[r,n]=this.previousEmittedValue;r===n&&i<r?(this.dragProp="minValue",this.minHandle.focus()):this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}else this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}},this.formatValue=e=>(e4.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},e4.localize(e.toString())),this.guid=f2.host(Ky()),this.messages=Ms(),this.pointerUpDragEnd=e=>{this.disabled||!nS(e)||this.dragEnd(e)},this.trackRef=ks(),this.focusSetter=yn()(this),this.activeProp="value",this.maxValueDragRange=null,this.minMaxValueRange=null,this.minValueDragRange=null,this.tickValues=[],this.disabled=!1,this.fillPlacement="start",this.groupSeparator=!1,this.hasHistogram=!1,this.labelHandles=!1,this.labelTicks=!1,this.max=100,this.min=0,this.mirrored=!1,this.precise=!1,this.required=!1,this.scale="m",this.snap=!1,this.status="idle",this.step=1,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value=0,this.calciteSliderChange=dt({cancelable:!1}),this.calciteSliderInput=dt({cancelable:!1}),this.listen("pointerdown",this.pointerDownHandler),this.listen("keydown",this.handleKeyDown),this.listen("touchstart",this.handleTouchStart)}async setFocus(e){return this.focusSetter(()=>this.minHandle||this.maxHandle,e)}connectedCallback(){super.connectedCallback(),this.setMinMaxFromValue(),this.setValueFromMinMax(),h1(this),OZ(this),this.previousEmittedValue=this.value}load(){Jr(this.value)||(this.value=this.snap?this.getClosestStep(this.value):this.clamp(this.value)),hbe(this,this.value)}willUpdate(e){e.has("histogram")&&(this.hasHistogram=!!this.histogram),e.has("ticks")&&(this.tickValues=this.generateTickValues()),e.has("value")&&(this.hasUpdated||this.value!==0)&&this.setMinMaxFromValue(),(e.has("minValue")||e.has("maxValue"))&&this.setValueFromMinMax()}updated(){this.labelHandles&&(this.adjustHostObscuredHandleLabel("value"),Jr(this.value)&&(this.adjustHostObscuredHandleLabel("minValue"),this.precise&&!this.hasHistogram||this.hyphenateCollidingRangeHandleLabels())),this.hideObscuredBoundingTickLabels(),Vh(this)}disconnectedCallback(){super.disconnectedCallback(),nF(this),PZ(this),this.removeDragListeners()}handleKeyDown(e){const i=this.shouldMirror(),{activeProp:r,max:n,min:s,pageStep:o,step:a}=this,c=this[r],{key:d}=e;if(vI(d)){e.preventDefault();return}let h;if(d==="ArrowUp"||d==="ArrowRight"?h=c+a*(i&&d==="ArrowRight"?-1:1):d==="ArrowDown"||d==="ArrowLeft"?h=c-a*(i&&d==="ArrowLeft"?-1:1):d==="PageUp"?o&&(h=c+o):d==="PageDown"?o&&(h=c-o):d==="Home"?h=s:d==="End"&&(h=n),isNaN(h))return;e.preventDefault();const f=Number(h.toFixed(aj(a)));this.setValue({[r]:this.clamp(f,r)})}pointerDownHandler(e){if(this.disabled||!nS(e))return;const i=e.clientX||e.pageX,r=this.mapToRange(i);let n="value";Jr(this.value)&&(r>=this.minValue&&r<=this.maxValue&&this.lastDragProp==="minMaxValue"?n="minMaxValue":n=Math.abs(this.maxValue-r)<Math.abs(this.minValue-r)||r>=this.maxValue?"maxValue":"minValue"),this.lastDragPropValue=this[n],this.dragStart(n),this.el.shadowRoot.querySelector(`.${vt.thumb}:active`)||this.setValue({[n]:this.clamp(r,n)}),this.focusActiveHandle(i)}handleTouchStart(e){e.preventDefault()}buildThumbType(e){const i=[e];return this.labelHandles&&i.push("labeled"),this.precise&&i.push("precise"),this.hasHistogram&&i.push("histogram"),i.join("-")}setValueFromMinMax(){const{minValue:e,maxValue:i}=this;typeof e=="number"&&typeof i=="number"&&(this.value=[e,i])}setMinMaxFromValue(){const{value:e}=this;Jr(e)&&(this.minValue=e[0],this.maxValue=e[1])}onLabelClick(){this.setFocus()}shouldMirror(){return this.mirrored&&!this.hasHistogram}shouldUseMinValue(){return Jr(this.value)?this.hasHistogram&&this.maxValue===0||!this.hasHistogram&&this.minValue===0:!1}getTickDensity(){const e=(this.max-this.min)/this.ticks/e_e;return e<1?1:e}generateTickValues(){const e=this.ticks??0;if(e<=0)return[];const i=[this.min],r=this.getTickDensity(),n=e*r;let s=this.min;for(;s<this.max;)s+=n,i.push(Math.min(s,this.max));return i.includes(this.max)||i.push(this.max),i}onThumbBlur(){this.activeProp=null}onThumbFocus(e){const i=e.currentTarget;this.activeProp=i.getAttribute("data-value-prop")}onThumbPointerDown(e){const i=e.currentTarget;this.pointerDownDragStart(e,i.getAttribute("data-value-prop"))}onTrackPointerDown(e){this.pointerDownDragStart(e,"minMaxValue")}pointerDownDragStart(e,i){nS(e)&&this.dragStart(i)}dragStart(e){this.dragProp=e,this.lastDragProp=this.dragProp,this.activeProp=e,window.addEventListener("pointermove",this.dragUpdate),window.addEventListener("pointerup",this.pointerUpDragEnd),window.addEventListener("pointercancel",this.dragEnd)}focusActiveHandle(e){this.dragProp==="minValue"?this.minHandle.focus():this.dragProp==="maxValue"||this.dragProp==="value"?this.maxHandle.focus():this.dragProp==="minMaxValue"&&this.getClosestHandle(e).focus()}emitInput(){this.calciteSliderInput.emit()}emitChange(){this.calciteSliderChange.emit(),this.previousEmittedValue=this.value}removeDragListeners(){window.removeEventListener("pointermove",this.dragUpdate),window.removeEventListener("pointerup",this.pointerUpDragEnd),window.removeEventListener("pointercancel",this.dragEnd)}setValue(e){let i;if(Object.keys(e).forEach(n=>{const s=e[n];i||(i=this[n]!==s),this[n]=s}),!i)return;this.dragProp||this.emitChange(),this.emitInput()}storeThumbRef(e){if(!e)return;e.getAttribute("data-value-prop")==="minValue"?this.minHandle=e:this.maxHandle=e}clamp(e,i){return e=wZ(e,this.min,this.max),i==="maxValue"&&(e=Math.max(e,this.minValue)),i==="minValue"&&(e=Math.min(e,this.maxValue)),e}mapToRange(e){const i=this.max-this.min,{left:r,width:n}=this.trackRef.value.getBoundingClientRect()||{left:0,width:0},s=(e-r)/n,o=this.shouldMirror(),a=this.clamp(this.min+i*(o?1-s:s)),c=Number(a.toFixed(aj(this.step)));return this.snap&&this.step?this.getClosestStep(c):c}getClosestStep(e){const{max:i,min:r,step:n}=this,s=new by(`${Math.floor((e-r)/n)}`).multiply(`${n}`).add(`${r}`).toString();let o=this.clamp(Number(s));return o>i&&(o-=n),o}getClosestHandle(e){return this.getDistanceX(this.maxHandle,e)>this.getDistanceX(this.minHandle,e)?this.minHandle:this.maxHandle}getDistanceX(e,i){return Math.abs(e.getBoundingClientRect().left-i)}getFontSizeForElement(e){return Number(window.getComputedStyle(e).getPropertyValue("font-size").match(/\d+/)[0])}getUnitInterval(e){e=this.clamp(e);const i=this.max-this.min;return(e-this.min)/i}adjustHostObscuredHandleLabel(e){const i=this.el.shadowRoot.querySelector(`.handle__label--${e}`),r=this.el.shadowRoot.querySelector(`.handle__label--${e}.static`),n=this.el.shadowRoot.querySelector(`.handle__label--${e}.transformed`),s=r.getBoundingClientRect(),o=this.getHostOffset(s.left,s.right);i.style.transform=`translateX(${o}px)`,n.style.transform=`translateX(${o}px)`}hyphenateCollidingRangeHandleLabels(){const{shadowRoot:e}=this.el,i=this.shouldMirror(),r=i?"value":"minValue",n=i?"minValue":"value",s=e.querySelector(`.handle__label--${r}`),o=e.querySelector(`.handle__label--${r}.static`),a=e.querySelector(`.handle__label--${r}.transformed`),c=this.getHostOffset(o.getBoundingClientRect().left,o.getBoundingClientRect().right),d=e.querySelector(`.handle__label--${n}`),h=e.querySelector(`.handle__label--${n}.static`),f=e.querySelector(`.handle__label--${n}.transformed`),m=this.getHostOffset(h.getBoundingClientRect().left,h.getBoundingClientRect().right),v=this.getFontSizeForElement(s),w=this.getRangeLabelOverlap(a,f),x=s,$=v/2;if(w>0){if(x.classList.add(vt.hyphen,vt.hyphenWrap),m===0&&c===0){let T=w/2-$;T=Math.sign(T)===-1?Math.abs(T):-T;const C=this.getHostOffset(a.getBoundingClientRect().left+T-$,a.getBoundingClientRect().right+T-$);let P=w/2;const L=this.getHostOffset(f.getBoundingClientRect().left+P,f.getBoundingClientRect().right+P);C!==0&&(T+=C,P+=C),L!==0&&(T+=L,P+=L),s.style.transform=`translateX(${T}px)`,a.style.transform=`translateX(${T-$}px)`,d.style.transform=`translateX(${P}px)`,f.style.transform=`translateX(${P}px)`}else if(c>0||m>0)s.style.transform=`translateX(${c+$}px)`,d.style.transform=`translateX(${w+m}px)`,f.style.transform=`translateX(${w+m}px)`;else if(c<0||m<0){let T=Math.abs(c)+w-$;T=Math.sign(T)===-1?Math.abs(T):-T,s.style.transform=`translateX(${T}px)`,a.style.transform=`translateX(${T-$}px)`}}else x.classList.remove(vt.hyphen,vt.hyphenWrap),s.style.transform=`translateX(${c}px)`,a.style.transform=`translateX(${c}px)`,d.style.transform=`translateX(${m}px)`,f.style.transform=`translateX(${m}px)`}hideObscuredBoundingTickLabels(){const e=Jr(this.value);if(!this.hasHistogram&&!e&&!this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&!this.labelHandles&&this.precise||!this.hasHistogram&&!e&&this.labelHandles&&this.precise||!this.hasHistogram&&e&&!this.precise||this.hasHistogram&&!this.precise&&!this.labelHandles)return;const i=this.el.shadowRoot.querySelector(`.${vt.thumbMinValue}`),r=this.el.shadowRoot.querySelector(`.${vt.thumbValue}`),n=this.el.shadowRoot.querySelector(`.${vt.tickMin}`),s=this.el.shadowRoot.querySelector(`.${vt.tickMax}`);!i&&r&&n&&s&&(n.style.opacity=this.isMinTickLabelObscured(n,r)?"0":"1",s.style.opacity=this.isMaxTickLabelObscured(s,r)?"0":"1"),i&&r&&n&&s&&(n.style.opacity=this.isMinTickLabelObscured(n,i)||this.isMinTickLabelObscured(n,r)?"0":"1",s.style.opacity=this.isMaxTickLabelObscured(s,i)||this.isMaxTickLabelObscured(s,r)&&this.hasHistogram?"0":"1")}getHostOffset(e,i){const{left:r,right:n}=this.el.getBoundingClientRect();return e<r?r-e:i>n?-(i-n):0}getRangeLabelOverlap(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect(),s=this.getFontSizeForElement(e),o=r.right+s-n.left;return Math.max(o,0)}isMinTickLabelObscured(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect();return Xz(r,n)}isMaxTickLabelObscured(e,i){const r=e.getBoundingClientRect(),n=i.getBoundingClientRect();return Xz(r,n)}internalLabelFormatter(e,i){const r=this.labelFormatter;if(!r)return this.formatValue(e);const n=r(e,i,this.formatValue);return n??this.formatValue(e)}render(){const e=this.el.id||this.guid,i=Jr(this.value)?this.maxValue:this.value,r=this.minValue||this.min,n=this.shouldUseMinValue(),s=this.getUnitInterval(n?this.minValue:r)*100,o=this.getUnitInterval(i)*100,a=this.shouldMirror(),c=Jr(this.value),d=this.buildThumbType("max"),h=this.renderThumb({type:d,thumbPlacement:d.includes("histogram")?"below":"above",maxInterval:o,minInterval:s,mirror:a}),f=this.buildThumbType("min"),m=c?this.renderThumb({type:f,thumbPlacement:f.includes("histogram")||f.includes("precise")?"below":"above",maxInterval:o,minInterval:s,mirror:a}):null,v=c?"start":this.fillPlacement,w=v==="none"?{left:"unset",right:"unset"}:v==="end"?{left:`${a?s:o}%`,right:`${a?o:s}%`}:{left:`${a?100-o:s}%`,right:`${a?s:100-o}%`};return bk(this.el,"id",e),Uh({disabled:this.disabled,children:te`${this.labelText&&oF({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div aria-errormessage=${f2.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${sF(this)} .ariaRequired=${this.required} class=${se({[vt.container]:!0,[vt.containerRange]:c,[vt.scale(this.scale)]:!0})}>${this.renderGraph()}<div class=${se(vt.track)} ${Bt(this.trackRef)}><div class=${se(vt.trackRange)} @pointerdown=${this.onTrackPointerDown} style=${fx(w)}></div><div class=${se(vt.ticks)}>${this.tickValues.map(x=>{const $=`${this.getUnitInterval(x)*100}%`;let T=!1;if(v==="start"||v==="end")if(n)T=x>=this.minValue&&x<=this.maxValue;else{const C=v==="start"?r:i,P=v==="start"?i:this.max;T=x>=C&&x<=P}return te`<span class=${se({[vt.tick]:!0,[vt.tickActive]:T})} style=${fx({left:a?"":$,right:a?$:""})}>${this.renderTickLabel(x)}</span>`})}</div></div><div class=${se(vt.thumbContainer)}>${m}${h}${LZ({component:this})}</div></div>${this.validationMessage&&this.status==="invalid"?uJ({icon:this.validationIcon,id:f2.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderThumb({type:e,mirror:i,thumbPlacement:r,minInterval:n,maxInterval:s}){const o=e.includes("labeled"),a=e.includes("precise"),c=e.includes("min"),d=Jr(this.value),h=c?this.minValue:d?this.maxValue:this.value,f=c?"minValue":d?"maxValue":"value",m=c?this.minLabel:d?this.maxLabel:this.minLabel,v=c?this.minValue:h,w=f==="minValue"?this.internalLabelFormatter(this.minValue,"min"):f==="maxValue"?this.internalLabelFormatter(this.maxValue,"max"):this.internalLabelFormatter(h,"value"),x=c?{left:`${i?100-n:n}%`}:{right:`${i?s:100-s}%`},$=`${vt.handleLabel} ${c?vt.handleLabelMinValue:vt.handleLabelValue}`,C=[...o?[te`<span aria-hidden=true class=${se($)}>${w}</span>`,te`<span aria-hidden=true class=${`${$} ${vt.static}`}>${w}</span>`,te`<span aria-hidden=true class=${`${$} ${vt.transformed}`}>${w}</span>`]:[],te`<div class=${se(vt.handle)}></div>`,a&&te`<div class=${se(vt.handleExtension)}></div>`||""];return r==="below"&&C.reverse(),pt(e,te`<div .ariaLabel=${m} aria-orientation=horizontal .ariaValueMax=${this.max} .ariaValueMin=${this.min} .ariaValueNow=${v} class=${se({[vt.thumb]:!0,[vt.thumbValue]:!c,[vt.thumbActive]:this.lastDragProp!=="minMaxValue"&&this.dragProp===f,[vt.thumbPrecise]:a,[vt.thumbMinValue]:c})} data-value-prop=${f} @blur=${this.onThumbBlur} @focus=${this.onThumbFocus} @pointerdown=${this.onThumbPointerDown} role=slider style=${fx(x)} tabindex=0 ${Bt(this.storeThumbRef)}>${C}</div>`)}renderGraph(){return this.histogram?te`<calcite-graph class=${se(vt.graph)} .colorStops=${this.histogramStops} .data=${this.histogram} .highlightMax=${Jr(this.value)?this.maxValue:this.value} .highlightMin=${Jr(this.value)?this.minValue:this.min} .max=${this.max} .min=${this.min}></calcite-graph>`:null}renderTickLabel(e){const{hasHistogram:i,labelHandles:r,labelTicks:n,max:s,min:o,precise:a,value:c}=this,d=Jr(c),h=e===o,f=e===s,m=h||f;return n&&(!i&&(m||!a||!d)||i&&(m||!a&&!r))?te`<span class=${se({[vt.tickLabel]:!0,[vt.tickMin]:h,[vt.tickMax]:f})}>${this.internalLabelFormatter(e,"tick")}</span>`:null}};Vb.properties={activeProp:[16,{},{state:!0}],maxValueDragRange:[16,{},{state:!0}],minMaxValueRange:[16,{},{state:!0}],minValueDragRange:[16,{},{state:!0}],tickValues:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],fillPlacement:[3,{},{reflect:!0}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],hasHistogram:[7,{},{reflect:!0,type:Boolean}],histogram:[0,{},{attribute:!1}],histogramStops:[0,{},{attribute:!1}],labelFormatter:[0,{},{attribute:!1}],labelHandles:[7,{},{reflect:!0,type:Boolean}],labelTicks:[7,{},{reflect:!0,type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLabel:1,maxValue:[9,{},{type:Number}],min:[11,{},{reflect:!0,type:Number}],minLabel:1,labelText:1,messageOverrides:[0,{},{attribute:!1}],minValue:[9,{},{type:Number}],mirrored:[7,{},{reflect:!0,type:Boolean}],name:[3,{},{reflect:!0}],numberingSystem:1,pageStep:[11,{},{reflect:!0,type:Number}],precise:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],snap:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}],step:[11,{},{reflect:!0,type:Number}],ticks:[11,{},{reflect:!0,type:Number}],validationIcon:[3,{converter:My},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:[11,{},{type:Number,reflect:!0}]},Vb.shadowRootOptions={mode:"open",delegatesFocus:!0},Vb.styles=t_e;let XC=Vb;bi("calcite-slider",XC);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const i_e={container:"container"},r_e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .5rem)}:host([scale=m]) .container{gap:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .75rem)}:host([scale=l]) .container{gap:.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1);color:var(--calcite-label-text-color, var(--calcite-color-text-1))}:host([layout=block]) .container,:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:.5rem}:host([layout=inline][scale=l]) .container{gap:.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity: 1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity: 0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,sk=class sk extends vi{constructor(){super(),this.alignment="start",this.layout="default",this.scale="m",this.calciteInternalLabelClick=dt({bubbles:!1,cancelable:!1}),this.listen("click",this.labelClickHandler)}connectedCallback(){super.connectedCallback(),document.dispatchEvent(new CustomEvent(bI))}willUpdate(e){e.has("for")&&E1e(this.el)}disconnectedCallback(){super.disconnectedCallback(),document.dispatchEvent(new CustomEvent(aT))}labelClickHandler(e){var i;((i=window.getSelection())==null?void 0:i.type)!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})}render(){return te`<div class=${se(i_e.container)}><slot></slot></div>`}};sk.properties={alignment:[3,{},{reflect:!0}],for:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},sk.styles=r_e;let hT=sk;bi("calcite-label",hT);const bVe=Object.freeze(Object.defineProperty({__proto__:null,Label:hT},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const t4={container:"container",radio:"radio"},n_e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;cursor:pointer}:host .container{position:relative;outline:2px solid transparent;outline-offset:2px;display:flex}:host .radio{cursor:pointer;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;border-radius:var(--calcite-radio-button-corner-radius, var(--calcite-corner-radius-pill));background-color:var(--calcite-radio-button-background-color, var(--calcite-color-foreground-1));box-shadow:inset 0 0 0 var(--calcite-border-width-sm) var(--calcite-radio-button-border-color, var(--calcite-color-border-input))}:host([hovered]) .radio,:host(:not([checked])[focused]:not([disabled])) .radio{box-shadow:inset 0 0 0 var(--calcite-border-width-md) var(--calcite-radio-button-border-color, var(--calcite-color-brand-hover))}:host([hovered]) .radio:active,:host(:not([checked])[focused]:not([disabled])) .radio:active{box-shadow:inset 0 0 0 var(--calcite-border-width-md) var(--calcite-color-brand-press)}:host([focused]) .radio{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([disabled]) .radio{cursor:default;opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hovered][disabled]) .radio{box-shadow:inset 0 0 0 var(--calcite-border-width-sm) var(--calcite-radio-button-border-color, var(--calcite-color-border-input))}:host([scale=s]){--calcite-internal-radio-size: var( --calcite-radio-button-size, var(--calcite-radio-size, var(--calcite-size-fixed-md)) )}:host([scale=m]){--calcite-internal-radio-size: var( --calcite-radio-button-size, var(--calcite-radio-size, var(--calcite-size-fixed-md-plus)) )}:host([scale=l]){--calcite-internal-radio-size: var( --calcite-radio-button-size, var(--calcite-radio-size, var(--calcite-size-fixed-lg)) )}.radio{block-size:var(--calcite-internal-radio-size);inline-size:var(--calcite-internal-radio-size);size:var(--calcite-internal-radio-size)}:host([scale=s][checked]) .radio,:host([hovered][scale=s][checked][disabled]) .radio{box-shadow:inset 0 0 0 var(--calcite-border-width-lg) var(--calcite-radio-button-border-color, var(--calcite-color-brand))}:host([scale=s][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 var(--calcite-border-width-lg) var(--calcite-radio-button-border-color, var(--calcite-color-brand)),0 0 0 2px var(--calcite-radio-button-background-color, var(--calcite-color-foreground-1))}:host([scale=m][checked]) .radio,:host([hovered][scale=m][checked][disabled]) .radio{box-shadow:inset 0 0 0 5px var(--calcite-radio-button-border-color, var(--calcite-color-brand))}:host([scale=m][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 5px var(--calcite-radio-button-border-color, var(--calcite-color-brand)),0 0 0 2px var(--calcite-radio-button-background-color, var(--calcite-color-foreground-1))}:host([scale=l][checked]) .radio,:host([hovered][scale=l][checked][disabled]) .radio{box-shadow:inset 0 0 0 6px var(--calcite-radio-button-border-color, var(--calcite-color-brand))}:host([scale=l][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 6px var(--calcite-radio-button-border-color, var(--calcite-color-brand)),0 0 0 2px var(--calcite-radio-button-background-color, var(--calcite-color-foreground-1))}@media (forced-colors: active){:host([checked]) .radio:after,:host([checked][disabled]) .radio:after{content:"";inline-size:var(--calcite-internal-radio-size);block-size:var(--calcite-internal-radio-size);background-color:CanvasText;display:block}}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,ok=class ok extends vi{constructor(){super(),this.containerRef=ks(),this.focusSetter=yn()(this),this.checked=!1,this.disabled=!1,this.focused=!1,this.hovered=!1,this.required=!1,this.scale="m",this.calciteInternalRadioButtonBlur=dt({cancelable:!1}),this.calciteInternalRadioButtonCheckedChange=dt({cancelable:!1}),this.calciteInternalRadioButtonFocus=dt({cancelable:!1}),this.calciteRadioButtonChange=dt({cancelable:!1}),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("click",this.clickHandler),this.listen("keydown",this.handleKeyDown)}async emitCheckedChange(){this.calciteInternalRadioButtonCheckedChange.emit()}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}connectedCallback(){this.rootNode=this.el.getRootNode(),this.name&&this.checkLastRadioButton(),h1(this),OZ(this),this.updateTabIndexOfOtherRadioButtonsInGroup(),super.connectedCallback()}willUpdate(e){this.hasUpdated&&e.has("checked")&&this.checkedChanged(this.checked),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.updateTabIndexOfOtherRadioButtonsInGroup(),e.has("name")&&this.checkLastRadioButton()}updated(){Vh(this)}loaded(){this.focused&&!this.disabled&&this.setFocus()}disconnectedCallback(){super.disconnectedCallback(),nF(this),PZ(this),this.updateTabIndexOfOtherRadioButtonsInGroup()}checkedChanged(e){e&&this.uncheckOtherRadioButtonsInGroup(),this.calciteInternalRadioButtonCheckedChange.emit()}syncHiddenFormInput(e){e.type="radio"}selectItem(e,i){e[i].click()}queryButtons(){return Array.from(this.rootNode.querySelectorAll("calcite-radio-button:not([hidden])")).filter(e=>e.name===this.name)}isFocusable(){const e=this.queryButtons(),i=e.find(n=>!n.disabled),r=e.find(n=>n.checked);return i===this.el&&!r}check(){this.disabled||(this.focused=!0,this.setFocus(),!this.checked&&(this.uncheckAllRadioButtonsInGroup(),this.checked=!0,this.calciteRadioButtonChange.emit()))}clickHandler(){this.disabled||this.check()}onLabelClick(e){if(this.disabled||this.el.hidden)return;const i=e.currentTarget,r=i.for?this.rootNode.querySelector(`calcite-radio-button[id="${i.for}"]`):i.querySelector(`calcite-radio-button[name="${this.name}"]`);r&&(r.focused=!0,this.setFocus(),!r.checked&&(this.uncheckOtherRadioButtonsInGroup(),r.checked=!0,this.calciteRadioButtonChange.emit()))}checkLastRadioButton(){const i=this.queryButtons().filter(r=>r.checked);if((i==null?void 0:i.length)>1){const r=i[i.length-1];i.filter(n=>n!==r).forEach(n=>{n.checked=!1,n.emitCheckedChange()})}}uncheckAllRadioButtonsInGroup(){this.queryButtons().forEach(i=>{i.checked&&(i.checked=!1,i.focused=!1)})}uncheckOtherRadioButtonsInGroup(){this.queryButtons().filter(r=>r!==this.el).forEach(r=>{r.checked&&(r.checked=!1,r.focused=!1)})}updateTabIndexOfOtherRadioButtonsInGroup(){this.queryButtons().filter(r=>r!==this.el&&!r.disabled).forEach(r=>{var n;(n=r.manager)==null||n.component.requestUpdate()})}getTabIndex(){if(!this.disabled)return this.checked||this.isFocusable()?0:-1}pointerEnterHandler(){this.disabled||(this.hovered=!0)}pointerLeaveHandler(){this.disabled||(this.hovered=!1)}handleKeyDown(e){const i=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"," "],{key:r}=e,{el:n}=this;if(i.indexOf(r)===-1)return;if(r===" "){this.check(),e.preventDefault();return}let s=r;Bu(n)==="rtl"&&(r==="ArrowRight"&&(s="ArrowLeft"),r==="ArrowLeft"&&(s="ArrowRight"));const o=Array.from(this.rootNode.querySelectorAll("calcite-radio-button:not([hidden])")).filter(c=>c.name===this.name);let a=0;switch(o.some((c,d)=>{if(c.checked)return a=d,!0}),s){case"ArrowLeft":case"ArrowUp":e.preventDefault(),this.selectItem(o,this.getNextNonDisabledIndex(o,a,"left"));return;case"ArrowRight":case"ArrowDown":e.preventDefault(),this.selectItem(o,this.getNextNonDisabledIndex(o,a,"right"));return;default:return}}getNextNonDisabledIndex(e,i,r){const n=e.length,s=r==="left"?-1:1;let o=rT(i+s,n);for(;e[o].disabled;)o=rT(o+s,n);return o}onContainerBlur(){this.focused=!1,this.calciteInternalRadioButtonBlur.emit()}onContainerFocus(){this.disabled||(this.focused=!0,this.calciteInternalRadioButtonFocus.emit())}render(){const e=this.getTabIndex();return Uh({disabled:this.disabled,children:te`<div .ariaChecked=${this.checked} .ariaLabel=${sF(this)} class=${se(t4.container)} @blur=${this.onContainerBlur} @focus=${this.onContainerFocus} role=radio tabindex=${e??Je} ${Bt(this.containerRef)}><div class=${se(t4.radio)}></div>${this.labelText&&oF({labelText:this.labelText,spacingInlineStart:!0})||""}</div>${LZ({component:this})}`})}};ok.properties={checked:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],focused:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],hovered:[7,{},{reflect:!0,type:Boolean}],label:1,labelText:1,name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],value:1},ok.styles=n_e;let eO=ok;bi("calcite-radio-button",eO);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const s_e={itemWrapper:"item-wrapper"},i4={validationMessage:"radioButtonGroupValidationMessage"},o_e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex;flex-direction:column}:host>.item-wrapper{display:flex;max-inline-size:100vw}:host([layout=horizontal])>.item-wrapper{flex-direction:row;flex-wrap:wrap}:host([layout=horizontal][scale=s])>.item-wrapper{column-gap:var(--calcite-radio-button-group-gap, var(--calcite-spacing-lg))}:host([layout=horizontal][scale=m])>.item-wrapper{column-gap:var(--calcite-radio-button-group-gap, var(--calcite-spacing-xl))}:host([layout=horizontal][scale=l])>.item-wrapper{column-gap:var(--calcite-radio-button-group-gap, var(--calcite-spacing-xxl))}:host([layout=vertical])>.item-wrapper{flex-direction:column;inline-size:fit-content}:host([scale=s]) calcite-input-message{--calcite-input-message-spacing: var( --calcite-radio-button-input-message-spacing, calc(var(--calcite-spacing-xxs) * -1) )}:host([scale=m]) calcite-input-message{--calcite-input-message-spacing: var( --calcite-radio-button-input-message-spacing, calc(var(--calcite-spacing-sm) * -1) )}:host([scale=l]) calcite-input-message{--calcite-input-message-spacing: var( --calcite-radio-button-input-message-spacing, calc(var(--calcite-spacing-md) * -1) )}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}:host([hidden]){display:none}[hidden]{display:none}`,ak=class ak extends vi{constructor(){super(),this.messages=Ms(),this.mutationObserver=ra("mutation",()=>this.passPropsToRadioButtons()),this.focusSetter=yn()(this),this.radioButtons=[],this.disabled=!1,this.layout="horizontal",this.required=!1,this.scale="m",this.selectedItem=null,this.status="idle",this.calciteRadioButtonGroupChange=dt({cancelable:!1}),this.listen("calciteRadioButtonChange",this.radioButtonChangeHandler)}async setFocus(e){return this.focusSetter(()=>this.selectedItem&&!this.selectedItem.disabled?this.selectedItem:this.getFocusableRadioButton(),e)}connectedCallback(){var e;super.connectedCallback(),this.passPropsToRadioButtons(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}willUpdate(e){(e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)||e.has("layout")&&(this.hasUpdated||this.layout!=="horizontal")||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.passPropsToRadioButtons()}loaded(){this.passPropsToRadioButtons(),this.layout==="grid"&&fZ.warn('The "grid" value of the layout property is deprecated and will be removed in v4.0. Use "horizontal" instead.')}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}passPropsToRadioButtons(){this.radioButtons=Array.from(this.el.querySelectorAll("calcite-radio-button")),this.selectedItem=Array.from(this.radioButtons).reverse().find(e=>e.checked)||null,this.radioButtons.length>0&&this.radioButtons.forEach(e=>{this.hasUpdated&&(e.disabled=this.disabled||e.disabled),e.name=this.name,e.required=this.required,e.scale=this.scale})}getFocusableRadioButton(){return this.radioButtons.find(e=>!e.disabled)??null}radioButtonChangeHandler(e){this.selectedItem=e.target,this.calciteRadioButtonGroupChange.emit()}render(){return this.el.role="radiogroup",te`${this.labelText&&oF({labelText:this.labelText,required:this.required,tooltipText:this.messages.required})||""}<div aria-errormessage=${i4.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaRequired=${this.required} class=${se(s_e.itemWrapper)}><slot></slot></div>${this.validationMessage&&this.status==="invalid"?uJ({icon:this.validationIcon,id:i4.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`}};ak.properties={radioButtons:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],labelText:1,layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selectedItem:[0,{},{attribute:!1}],status:[3,{},{reflect:!0}],validationIcon:[3,{converter:My},{reflect:!0}],validationMessage:1},ak.styles=o_e;let tO=ak;bi("calcite-radio-button-group",tO);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const $r={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},a_e={image:"image"},b_={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},l_e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]) .close,:host([appearance=outline-fill]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([appearance=outline]):host([kind=brand]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-hover-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-active-border-color: var( --calcite-chip-border-color, var(--calcite-color-brand) )}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=inverse]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]),:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]){--calcite-internal-chip-background-color: transparent}:host([appearance=outline-fill]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]){--calcite-internal-chip-border-color: transparent;--calcite-internal-chip-selectable-hover-border-color: transparent;--calcite-internal-chip-selectable-active-border-color: transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=inverse]) .close:hover{background-color:var(--calcite-color-inverse-hover)}:host([appearance=solid]):host([kind=inverse]) .close:active{background-color:var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([kind=neutral]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([selected]) .select-icon{opacity:1}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-border-3)}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-inverse-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-brand-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline-fill]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press)}:host([scale=s]) .container{--calcite-internal-chip-block-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--2);--calcite-internal-chip-icon-size: var(--calcite-size-xs, 1rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-image-size: var(--calcite-spacing-xl, 1.25rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-close-size: var(--calcite-size-xs, 1rem) }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container{--calcite-internal-chip-block-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--1);--calcite-internal-chip-icon-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-image-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-close-size: var(--calcite-size-sm, 1.5rem) }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end: .125rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container{--calcite-internal-chip-block-size: 2.75rem ;--calcite-internal-chip-container-space-x-end: .5rem ;--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-font-size: var(--calcite-font-size-0);--calcite-internal-chip-icon-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-icon-space: .5rem ;--calcite-internal-chip-image-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-title-space: .5rem ;--calcite-internal-close-size: var(--calcite-size-md, 2rem) }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: .5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: .5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-internal-chip-background-color);border-color:var(--calcite-internal-chip-border-color);border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:var(--calcite-opacity-full, 1)}.container.selectable{cursor:pointer}.container.selectable:hover{background-color:var(--calcite-internal-chip-selectable-hover-background-color);border-color:var(--calcite-internal-chip-selectable-hover-border-color)}.container.selectable:active{background-color:var(--calcite-internal-chip-selectable-active-background-color);border-color:var(--calcite-internal-chip-selectable-active-border-color)}.container:not(.non-interactive):focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:var(--calcite-spacing-none, 0)}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));padding-inline-start:var(--calcite-spacing-none, 0);padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, var(--calcite-spacing-xs, .375rem))}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity .15s ease-in-out,inline-size .15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:var(--calcite-opacity-half, .5);color:var(--calcite-chip-select-icon-color-press, var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor)))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem))}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0;cursor:pointer;align-items:center;border-radius:50%;border-style:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, currentColor));block-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,lk=class lk extends vi{constructor(){super(),this.closeButtonRef=ks(),this.containerRef=ks(),this.messages=Ms(),this.focusSetter=yn()(this),this.hasImage=!1,this.hasText=!1,this.appearance="solid",this.closable=!1,this.closed=!1,this.closeOnDelete=!1,this.disabled=!1,this.iconFlipRtl=!1,this.interactive=!1,this.kind="neutral",this.scale="m",this.selected=!1,this.selectionMode="none",this.calciteChipClose=dt({cancelable:!1}),this.calciteChipSelect=dt({cancelable:!1}),this.calciteInternalChipKeyEvent=dt({cancelable:!1}),this.calciteInternalChipSelect=dt({cancelable:!1}),this.calciteInternalSyncSelectedChips=dt({cancelable:!1}),this.listen("keydown",this.keyDownHandler),this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>{if(this.interactive)return this.containerRef.value;if(this.closable)return this.closeButtonRef.value},e)}async load(){this.updateHasText()}willUpdate(e){e.has("selected")&&this.hasUpdated&&this.watchSelected(this.selected)}updated(){Vh(this)}loaded(){this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"Backspace":case"Delete":this.closable&&!this.closed&&this.closeOnDelete&&(e.preventDefault(),this.close());break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&hI(this.closeButtonRef.value)}handleDefaultSlotChange(){this.updateHasText()}close(){this.calciteChipClose.emit(),this.selected=!1,this.closed=!0}closeButtonKeyDownHandler(e){vI(e.key)&&(e.preventDefault(),this.close())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSlotImageChange(e){this.hasImage=mt(e)}handleEmittingEvent(){this.interactive&&this.calciteChipSelect.emit()}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return te`<div class=${se($r.imageContainer)}><slot name=${a_e.image} @slotchange=${this.handleSlotImageChange}></slot></div>`}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?b_.checkedMultiple:b_.uncheckedMultiple:this.selected?b_.checkedSingle:void 0;return te`<div class=${se({[$r.selectIcon]:!0,[$r.selectIconActive]:this.selectionMode==="multiple"||this.selected})}>${e?te`<calcite-icon .icon=${e} .scale=${Ga(this.scale)}></calcite-icon>`:null}</div>`}renderCloseButton(){return te`<button .ariaLabel=${this.messages.dismissLabel} class=${se($r.close)} @click=${this.close} @keydown=${this.closeButtonKeyDownHandler} .tabIndex=${this.disabled?-1:0} ${Bt(this.closeButtonRef)}><calcite-icon .icon=${b_.close} .scale=${Ga(this.scale)}></calcite-icon></button>`}renderIcon(){return te`<calcite-icon class=${se($r.chipIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} .scale=${Ga(this.scale)}></calcite-icon>`}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,r=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":"img";return Uh({disabled:e,children:te`<div .ariaChecked=${this.selectionMode!=="none"&&this.interactive?this.selected:void 0} .ariaLabel=${this.label} class=${se({[$r.container]:!0,[$r.textSlotted]:this.hasText,[$r.imageSlotted]:this.hasImage,[$r.selectable]:this.selectionMode!=="none",[$r.multiple]:this.selectionMode==="multiple",[$r.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[$r.selected]:this.selected,[$r.closable]:this.closable,[$r.nonInteractive]:!this.interactive,[$r.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)})} @click=${this.handleEmittingEvent} .role=${r} .tabIndex=${i?-1:0} ${Bt(this.containerRef)}>${this.selectionMode!=="none"&&this.renderSelectionIcon()||""}${this.renderChipImage()}${this.icon&&this.renderIcon()||""}<span class=${se($r.title)}><slot @slotchange=${this.handleDefaultSlotChange}></slot></span>${this.closable&&this.renderCloseButton()||""}</div>`})}};lk.properties={hasImage:[16,{},{state:!0}],hasText:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],closeOnDelete:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],interactive:[5,{},{type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],parentChipGroup:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,value:1},lk.styles=l_e;let fT=lk;bi("calcite-chip",fT);const wVe=Object.freeze(Object.defineProperty({__proto__:null,Chip:fT},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const c_e={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const m2={slow:14e3,medium:1e4,fast:6e3},w_={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},Ps={actionsEnd:"actions-end",close:"close",container:"container",containerActive:"container--active",dismissProgress:"dismiss-progress",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},u_e=300;class d_e{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,r=i.indexOf(e);r!==-1&&i.splice(r,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,u_e):e.active=!1})}}const p_e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-alert-offset-size, 2rem) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(.215,.44,.42,.88),all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),0);inset-block-end:var(--calcite-alert-offset-size, 2rem)}.container[class*=top]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),0);inset-block-start:var(--calcite-alert-offset-size, 2rem)}.container[class*=start]{inset-inline-start:var(--calcite-alert-offset-size, 2rem);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-alert-offset-size, 2rem);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress:after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height: 3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:.75rem}:host([scale=s]) .icon{padding-inline-start:.75rem}:host([scale=s]) .text-container{padding-block:.5rem;padding-inline:.75rem .5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height: 4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:.75rem;padding-inline:1rem .75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height: 5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6s ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10s ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14s ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress:after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:.75}to{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden!important;pointer-events:none}`,uf=new d_e,ck=class ck extends vi{constructor(){super(...arguments),this.autoCloseTimeoutId=null,this.transitionProp="opacity",this.totalHoverTime=0,this.totalOpenTime=0,this.messages=Ms(),this.focusSetter=yn()(this),this.hasEndActions=!1,this.isFocused=!1,this.numberStringFormatter=new fJ,this.active=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.openAlertCount=0,this.placement="bottom",this.queue="last",this.scale="m",this.calciteAlertBeforeClose=dt({cancelable:!1}),this.calciteAlertBeforeOpen=dt({cancelable:!1}),this.calciteAlertClose=dt({cancelable:!1}),this.calciteAlertOpen=dt({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.open&&uf.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.handleActiveChange(),e.has("autoCloseDuration")&&(this.hasUpdated||this.autoCloseDuration!=="medium")&&this.updateDuration(),e.has("queue")&&(this.hasUpdated||this.queue!=="last")&&this.handleQueueChange(),e.has("numberingSystem")&&this.numberingSystemChange(),e.has("messages")&&this.effectiveLocaleChange()}disconnectedCallback(){super.disconnectedCallback(),uf.unregisterElement(this.el),this.clearAutoCloseTimeout(),this.embedded=!1}handleActiveChange(){tJ(this),this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),m2[this.autoCloseDuration]))}openHandler(){this.open?uf.registerElement(this.el):uf.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),m2[this.autoCloseDuration]))}handleQueueChange(){this.open&&(uf.unregisterElement(this.el),uf.registerElement(this.el))}handleKeyBoardFocus(){this.isFocused=!0,this.handleFocus()}handleKeyBoardBlur(){this.isFocused=!1,this.isHovered||this.handleBlur()}effectiveLocaleChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}setTransitionEl(e){e&&(this.transitionEl=e)}closeAlert(){this.open=!1,this.clearAutoCloseTimeout()}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}actionsEndSlotChangeHandler(e){this.hasEndActions=mt(e)}handleMouseOver(){this.isHovered=!0,this.handleFocus()}handleMouseLeave(){this.isHovered=!1,this.isFocused||this.handleBlur()}handleFocus(){this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()}handleBlur(){const e=Date.now()-this.lastMouseOverBegin,i=m2[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)}render(){const{open:e,autoClose:i,label:r,placement:n,active:s,openAlertCount:o}=this,a=i?"alert":"alertdialog",c=!e,d=NC(c_e,this.icon,this.kind),h=o>1;return this.el.inert=c,this.el.ariaLabel=r,this.el.toggleAttribute("calcite-hydrated-hidden",c),this.el.role=a,te`<div class=${se({[Ps.container]:!0,[Ps.containerActive]:s,[`${Ps.container}--${n}`]:!0,[Ps.containerEmbedded]:this.embedded,[Ps.focused]:this.isFocused})} @pointerenter=${this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null} @pointerleave=${this.autoClose?this.handleMouseLeave:null} ${Bt(this.setTransitionEl)}>${d&&this.renderIcon(d)||""}<div class=${se(Ps.textContainer)} @focusin=${this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null}><slot name=${w_.title}></slot><slot name=${w_.message}></slot><slot name=${w_.link}></slot></div>${this.renderActionsEnd()}${h?this.renderQueueCount():null}${this.renderCloseButton()}${e&&s&&i?te`<div class=${se(Ps.dismissProgress)}></div>`:null}</div>`}renderCloseButton(){return pt("close",te`<button .ariaLabel=${this.messages.close} class=${se(Ps.close)} @click=${this.closeAlert} @focusin=${this.autoClose?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null} type=button><calcite-icon icon=x .scale=${Ga(this.scale)}></calcite-icon></button>`)}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,r=this.numberStringFormatter.numberFormatter.format(i);return pt("queue-count",te`<div class=${se({[Ps.queueCount]:!0,[Ps.queueCountActive]:e>1})}><calcite-chip .label=${r} .scale=${this.scale} .value=${r}>${r}</calcite-chip></div>`)}renderActionsEnd(){return te`<div class=${se(Ps.actionsEnd)}><slot name=${w_.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderIcon(e){return te`<div class=${se(Ps.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${e} .scale=${Ga(this.scale)}></calcite-icon></div>`}};ck.properties={hasEndActions:[16,{},{state:!0}],isFocused:[16,{},{state:!0}],numberStringFormatter:[16,{},{state:!0}],active:[5,{},{type:Boolean}],autoClose:[7,{},{reflect:!0,type:Boolean}],autoCloseDuration:[3,{},{reflect:!0}],embedded:[5,{},{type:Boolean}],icon:[3,{converter:My},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],numberingSystem:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],openAlertCount:[9,{},{type:Number}],placement:[3,{},{reflect:!0}],queue:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},ck.styles=p_e;let iO=ck;bi("calcite-alert",iO);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const h_e=Ht`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host button{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0;border-style:none;font-family:inherit;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host button:hover{text-decoration:none}:host a,:host button{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform,background-size;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;margin-block-start:-.25em}:host .calcite-link--icon.icon-start{margin-inline-end:.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:.5rem}:host button,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0;color:var(--calcite-link-text-color, var(--calcite-color-text-link));line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px}:host button:hover,:host button:focus,:host a:hover,:host a:focus{background-size:100% 1px,100% 1px}:host button:active,:host a:active{background-size:100% 2px,100% 2px}:host button.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%,100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,__={calciteLinkIcon:"calcite-link--icon",iconStart:"icon-start",iconEnd:"icon-end"},uk=class uk extends vi{constructor(){super(),this.childRef=ks(),this.focusSetter=yn()(this),this.disabled=!1,this.download=!1,this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>this.childRef.value,e)}updated(){Vh(this)}clickHandler(e){this.disabled||e.isTrusted||this.childRef.value.click()}childElClickHandler(e){e.isTrusted||e.stopPropagation()}render(){const{download:e,el:i}=this,r=Bu(i),n=this.href?"a":"button",s=te`<calcite-icon class=${se({[__.calciteLinkIcon]:!0,[__.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} scale=s></calcite-icon>`,o=te`<calcite-icon class=${se({[__.calciteLinkIcon]:!0,[__.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} scale=s></calcite-icon>`,a=n==="button"?mw`button`:mw`a`,c=n==="button"?0:null;return this.el.role="presentation",Uh({disabled:this.disabled,children:JL`<${a} class=${se({[Nd.rtl]:r==="rtl"})} download=${(n==="a"?e===!0||e===""?"":e||null:null)??Mt} href=${(n==="a"&&this.href)??Mt} @click=${this.childElClickHandler} rel=${(n==="a"&&this.rel)??Mt} tabindex=${c} target=${(n==="a"&&this.target)??Mt} ${Bt(this.childRef)}>${te`${this.iconStart?s:null}<slot></slot>${this.iconEnd?o:null}`}</${a}>`})}};uk.properties={disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:My},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],rel:1,target:1},uk.styles=h_e;let rO=uk;bi("calcite-link",rO);const pi=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},nO=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},lF=Symbol.for("controller"),f_e=t=>typeof t=="object"&&t!==null&&(lF in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),m_e=t=>typeof(t==null?void 0:t.then)=="function",g_e=t=>t.M.length;let Iv;const jm=t=>{Iv!==t&&(Iv=t,queueMicrotask(()=>Iv===t?Iv=void 0:0))},e0=t=>Iv;let Yd=[];const mJ=t=>{if(t===void 0){Yd=[];return}const e=Yd.indexOf(t);Yd=e===-1?[...Yd,t]:Yd.slice(0,e+1),queueMicrotask(()=>Yd=[])},gJ=()=>Yd;let Vm;const y_e=t=>{Vm!==t&&(Vm=t,queueMicrotask(()=>Vm===t?Vm=void 0:0))},v_e=()=>{const t=Vm;return Vm=void 0,t},b_e=async(t,e)=>{const i=cF(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},w_e=async t=>{const e=cF(t);return await e.ready,e},cF=t=>{const i=e0().manager.X(t);if(i!==void 0)return i;if(f_e(t))return t;const r=v_e();if(r!==void 0)return r};let sO=!1;const __e=t=>{sO=!0;try{return t()}finally{sO=!1}};class xw{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const x_e=(t,e)=>{const i=e/S_e;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},S_e=4,$_e=(t,e,i)=>{const r=Object.keys(t),n=r.length;Ou===void 0&&queueMicrotask(_I),Ou??(Ou=new Map);let s=Ou.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},Ou.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=d=>pi(e,null,d),c=o[n];c===void 0?a(void 0):t[c]===i?a(c):a(void 0)}),i};let Ou;const _I=()=>{Ou==null||Ou.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Ou=void 0},uF=(t,e,i)=>{const r=t.manager;return r.V!==Je&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>pi(e,void 0,i===s?n:void 0)),i},dF=(t=[e0(),...gJ()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>$_e(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){uF(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},pF=(t="",e={},i=e0())=>{const r={emit:n=>{t===""&&_I();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&dF(void 0,n=>t=n.key,r),r},wy=pF.bind(null,"");var yJ;yJ=lF;var Og,Pg,Lp,Rg,Lg,Fg,Ng,Dg,Tu,Fp,Pn,La,ac,zg,oS;class vJ{constructor(e){Le(this,zg);Le(this,Og);Le(this,Pg);Le(this,Lp);Le(this,Rg);Le(this,Lg);Le(this,Fg);Le(this,Ng);Le(this,Dg);Le(this,Tu);Le(this,Fp);Le(this,Pn);Le(this,La);Le(this,ac);ke(this,Og,[]),ke(this,Pg,[]),ke(this,Lp,[]),ke(this,Rg,[]),ke(this,Lg,[]),ke(this,Fg,[]),ke(this,Ng,[]),ke(this,Dg,[]),ke(this,Tu,[]),ke(this,Fp,!1),this.P=new xw,this.connectedCalled=!1,this.loadedCalled=!1,this[yJ]=!0,ke(this,ac,[]);const i=this,r=e??e0();ke(i,Pn,r),i.ready=i.P.promise,ke(i,La,n4(i)),i.component=r,G(i,Pn).addController(i),G(i,Pn).manager===void 0||(mJ(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=G(this,Pn);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),G(e,Fp)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return G(this,La)}set exports(e){const i=G(this,La);i!==e&&(ke(this,La,e),G(this,ac).forEach(pi),this.connectedCalled&&this.O!==!1&&G(this,Pn).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){ke(this,La,i?n4(e):e),G(this,ac).forEach(pi)}watchExports(e){const i=()=>e(G(this,La));return G(this,ac).push(i),()=>void G(this,ac).splice(G(this,ac).indexOf(i),1)}get use(){return jm(G(this,Pn)),b_e}get useRef(){return jm(G(this,Pn)),w_e}get useRefSync(){return jm(G(this,Pn)),cF}controllerRemoved(){G(this,Pn).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){G(this,Og).push(e)}onDisconnected(e){G(this,Pg).push(e)}onLoad(e){G(this,Lp).push(e)}onLoaded(e){G(this,Rg).push(e)}onUpdate(e){G(this,Lg).push(e)}onUpdated(e){G(this,Fg).push(e)}onDestroy(e){G(this,Ng).push(e)}onLifecycle(e){G(this,Dg).push(e),this.connectedCalled&&G(this,Pn).el.isConnected&&nr(this,zg,oS).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&pi(e.hostConnected,e),G(e,Og).forEach(pi),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&pi(e.hostDisconnected,e),G(e,Pg).forEach(pi),G(e,Tu).forEach(pi),ke(e,Tu,[])}async triggerLoad(){if(G(this,Fp))return;ke(this,Fp,!0);const e=this;e.hostLoad&&await nO(e.hostLoad,e),G(this,Lp).length>0&&await Promise.allSettled(G(this,Lp).map(nO)),this.P.resolve(G(this,La))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&pi(this.hostLoaded,this),G(this,Rg).forEach(pi),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&pi(this.hostUpdate,this,e),G(this,Lg).forEach(r4,e)}triggerUpdated(e){this.hostUpdated&&pi(this.hostUpdated,this,e),G(this,Fg).forEach(r4,e)}triggerDestroy(){this.hostDestroy&&pi(this.hostDestroy,this),G(this,Ng).forEach(pi)}triggerLifecycle(){this.hostLifecycle&&nr(this,zg,oS).call(this,()=>this.hostLifecycle()),G(this,Dg).forEach(nr(this,zg,oS),this)}}Og=new WeakMap,Pg=new WeakMap,Lp=new WeakMap,Rg=new WeakMap,Lg=new WeakMap,Fg=new WeakMap,Ng=new WeakMap,Dg=new WeakMap,Tu=new WeakMap,Fp=new WeakMap,Pn=new WeakMap,La=new WeakMap,ac=new WeakMap,zg=new WeakSet,oS=function(e){jm(G(this,Pn));const i=pi(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?G(this,Tu).push(n):typeof n=="object"&&typeof n.remove=="function"&&G(this,Tu).push(n.remove)})};function r4(t){pi(t,void 0,this)}const xI=vJ,n4=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},T_e=t=>t.replace(k_e,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),k_e=/[A-Z]+(?![a-z])|[A-Z]/gu,I_e=1,E_e=2,M_e=4,A_e=8,C_e=16,O_e=32,P_e=64,bJ=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},s4={};function wJ(){}const aS=Object.defineProperty,R_e=globalThis.HTMLElement??wJ;var Rn,lc,jg,Lw,oO;const aN=class aN extends R_e{constructor(){var n,s;super();Le(this,Lw);Le(this,Rn);Le(this,lc);Le(this,jg);ke(this,lc,{}),ke(this,jg,[]),this.I=new xw,this.H=new xw,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(G(i,lc)[o]=i[o],delete i[o])}),r.A?nr(s=i,Lw,oO).call(s,{a:r.A}):r.B.then(async o=>{var a,c;await r.K.p,nr(c=i,Lw,oO).call(c,await(((a=o.default)==null?void 0:a.then(d=>typeof d=="function"?{a:d}:d))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])aS(this.prototype,i,{configurable:!0,enumerable:!0,get(){return G(this,lc)[i]},set(r){G(this,lc)[i]=r}});for(const i of this.E??[])aS(this.prototype,i,{async value(...r){return G(this,Rn)||await this.H.promise,await G(this,Rn)[i](...r)},configurable:!0});for(const i of this.D??[])aS(this.prototype,i,{value(...r){return G(this,Rn)[i](...r)},configurable:!0})}get manager(){var i;return(i=G(this,Rn))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=G(this,Rn))==null||s.attributeChangedCallback(i,r,n),G(this,Rn)||G(this,jg).push(i)}connectedCallback(){var i,r;G(this,Rn)?(r=(i=G(this,Rn)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=bJ(this))}disconnectedCallback(){var i,r;(r=(i=G(this,Rn))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=G(this,Rn))==null||i.requestUpdate()}};Rn=new WeakMap,lc=new WeakMap,jg=new WeakMap,Lw=new WeakSet,oO=function(i){var m;const r=this.constructor,n=r.L,s=G(this,lc),o=Object.values(i).find(v=>v.L===n),a=`${n}--lazy`;let c=o;for(;c&&!Object.hasOwn(c,"lumina");)c=Object.getPrototypeOf(c);F_e(c),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,ke(this,Rn,h),ke(this,lc,h),G(this,jg).forEach(v=>h.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(s).forEach(L_e,h);const f=this.isConnected;(f||this.G)&&((m=h.connectedCallback)==null||m.call(h),f||h.disconnectedCallback())},aN.lumina=!0;let o4=aN;function L_e([t,e]){this[t]=e}const F_e=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},aS(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};var cc,zo,Vg;class N_e extends xI{constructor(i){super(i);Le(this,cc);Le(this,zo);Le(this,Vg);this.destroyed=!1,this.R=!1,this.V=Je,this.T=[],ke(this,Vg,new WeakMap),ke(this,zo,i),this.exports=void 0,this.hasDestroy=aO in i&&typeof i.destroy=="function",ju.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${aO} prop.`)}G(this,cc)!==void 0&&clearTimeout(G(this,cc)),_I();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():pi(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():pi(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):pi(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):pi(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),jm(i)}async destroy(){if(!this.destroyed){G(this,zo).el.isConnected&&(this.hasDestroy=!1,G(this,zo).el.remove()),ke(this,cc,void 0),this.destroyed=!0;for(const i of G(this,zo).M)"triggerDestroy"in i?i.triggerDestroy():pi(i.hostDestroy,i);G(this,zo).M.splice(0)}}U(){G(this,cc)!==void 0&&clearTimeout(G(this,cc)),!G(this,zo).el.isConnected&&!G(this,zo).autoDestroyDisabled&&ke(this,cc,x_e(()=>void G(this,zo).destroy(),D_e))}S(i,r){const n=this.T;this.V=Je,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&G(this,Vg).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return G(this,Vg).get(i)}}cc=new WeakMap,zo=new WeakMap,Vg=new WeakMap;let D_e=1e3;const aO="autoDestroyDisabled";var Np,Fw,Nw,Dp,Fa,Ey,_J,xJ;const Ub=class Ub extends ju{constructor(){super();Le(this,Ey);Le(this,Np);Le(this,Fw);Le(this,Nw);Le(this,Dp);Le(this,Fa);this.M=[],this.manager=new N_e(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=Ub.prototype.shouldUpdate;ke(i,Dp,(n==null?void 0:n.H)??new xw),i.I=(n==null?void 0:n.I)??new xw,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,ke(i,Nw,i.enableUpdating),i.enableUpdating=wJ,i.shouldUpdate!==o&&(ke(i,Fw,i.shouldUpdate),i.shouldUpdate=o),s&&(ke(i,Np,new Map),r.elementProperties.forEach((a,c)=>G(i,Np).set(c,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===s4;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??fk,a={attribute:n&I_e&&typeof i=="string"?T_e(i):!1,reflect:!!(n&E_e),type:n&M_e?Boolean:n&A_e?Number:void 0,state:!!(n&C_e),readOnly:!!(n&O_e),noAccessor:!!(n&P_e),c:!1,...s,hasChanged(c,d){const h=o(c,d);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,c;return(a=s.t)==null||a.call(s,G(this,Np).get(i)),(c=o.get)==null?void 0:c.call(this)},set(a){var d,h;const c=this.manager;if(n.readOnly&&!sO&&(c.R||c.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((h=(d=G(this,Np))==null?void 0:d.get(i))==null||h.notify()),c.T.length>0&&(_I(),c==null||c.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());ke(this,Fa,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>nr(this,Ey,xJ).call(this).catch(o=>{G(this,Dp).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=G(this,Fa))==null||i.destroy(),ke(this,Fa,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===s4?this.el:this.el.attachShadow(n));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(c=>"styleSheet"in c?c.styleSheet:c)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=G(this,Fw))==null?void 0:r.call(this,i))??!0}update(i){G(this,Fa)?nr(this,Ey,_J).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await G(this,Dp).promise,this}addController(i){var r;this.M.push(i),!(lF in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}};Np=new WeakMap,Fw=new WeakMap,Nw=new WeakMap,Dp=new WeakMap,Fa=new WeakMap,Ey=new WeakSet,_J=function(i){try{G(this,Fa).clear(),this.constructor.K.r(G(this,Fa),()=>aE(Ub.prototype,this,"update").call(this,i))}catch(r){throw G(this,Fa).clear(),r}},xJ=async function(){var s,o;const i=this.el.G??bJ(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(nO(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(aO)&&this.manager.U()),G(this,Nw).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var c;return!((c=a.manager)!=null&&c.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():pi(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),G(this,Dp).resolve()},Ub.lumina=!0;let mT=Ub;const z_e=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},Cr=t=>typeof t=="object"&&t!=null?vU(t):t;let j_e=class{constructor(e,i){this._observable=new zy,this._value=e,this._equalityFunction=i}get value(){return Ve(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function _y(t,e=VU){return new j_e(t,e)}function SJ(){return new zy}function V_e(t){return new Ww(t)}function $J(t){Ve(t)}function U_e(t,e){return Ya(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const q_e=Ht`:host{display:block;box-sizing:border-box;*,*:before,*:after{box-sizing:inherit}}:host([hidden]){display:none}:host(:not(arcgis-basemap-gallery-item,arcgis-layer-list-item,arcgis-print-custom-text-elements,arcgis-print-dpi-input,arcgis-print-export-button,arcgis-print-exported-link,arcgis-print-exports-panel,arcgis-print-format-select,arcgis-print-layout-advanced-options,arcgis-print-layout-panel,arcgis-print-main-panel,arcgis-print-map-only-advanced-options,arcgis-print-map-only-panel,arcgis-print-out-spatial-reference-input,arcgis-print-preview-input,arcgis-print-scale-section,arcgis-print-template-select,arcgis-print-template-selector,arcgis-labeled-switch,arcgis-measurement-content,arcgis-version-management-service-item,arcgis-version-management-version-item,arcgis-version-management-version-list,arcgis-version-management-version-properties,arcgis-video-player-action-bar,arcgis-video-player-actions-group,arcgis-video-player-controls-group,arcgis-video-player-metadata,arcgis-video-player-settings,arcgis-video-player-slider)){font-family:var(--calcite-font-family)}`,f1=z_e({defaultAssetPath:"https://jsdev.arcgis.com/next/map-components/",hydratedAttribute:"hydrated",commonStyles:q_e}),{customElement:TJ,getAssetPath:xVe,setAssetPath:SVe}=f1;f1.t=$J;f1.o=SJ;f1.c=V_e;f1.r=U_e;let Kd=class extends hR{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};l([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kd.prototype,"row",void 0),l([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kd.prototype,"column",void 0),l([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kd.prototype,"rows",void 0),l([u({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Kd.prototype,"columns",void 0),Kd=l([E("esri.CameraLayout")],Kd);const kJ=Kd;let SI=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return a4(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return Es(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+lO(this.range,e-i,r)}minimalMonotonic(e,i,r){return a4(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function a4(t,e,i,r,n=0,s=!1){return(r-=n)<e?r+=lO(t,e-r):r>i&&(r-=lO(t,r-i)),s&&r===i&&(r=e),r+n}function lO(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const kVe=new SI(0,2*Math.PI),IVe=new SI(-Math.PI,Math.PI),B_e=new SI(0,360);let fa=class extends Pe(Z){constructor(...e){super(...e),this.position=new ze([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new kJ}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=on(e.x||0),s.y=on(e.y||0),s.z=e.hasZ?on(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new ze;return r.read(e,i),r.x=on(r.x||0),r.y=on(r.y||0),r.z=r.hasZ?on(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};l([u({type:ze,json:{write:{isRequired:!0}}})],fa.prototype,"position",void 0),l([le("position")],fa.prototype,"writePosition",null),l([oe("position")],fa.prototype,"readPosition",null),l([u({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ti(t=>B_e.normalize(on(t)))],fa.prototype,"heading",void 0),l([u({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ti(t=>Es(on(t),-180,180))],fa.prototype,"tilt",void 0),l([u({type:Number,nonNullable:!0,json:{default:55,write:!0}}),ti(t=>Es(on(t,55),1,170))],fa.prototype,"fov",void 0),l([u({type:kJ,nonNullable:!0,json:{read:!1,write:!1}})],fa.prototype,"layout",void 0),fa=l([E("esri.Camera")],fa);const G_e=fa;var cO;let Xc=cO=class extends Z{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new cO({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};l([u({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:g2}}}}})],Xc.prototype,"rotation",void 0),l([ti("rotation")],Xc.prototype,"castRotation",null),l([u({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:g2}}}}})],Xc.prototype,"scale",void 0),l([u({types:Dh,json:{read:ta,write:!0,origins:{"web-scene":{read:ta,write:{overridePolicy:g2}}}}})],Xc.prototype,"targetGeometry",void 0),l([u({type:G_e,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Xc.prototype,"camera",void 0),Xc=cO=l([E("esri.Viewpoint")],Xc);const ir=Xc;function g2(){return{enabled:!this.camera}}let kb=class extends de{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(de.ofType(this.itemType.Type))(e):new de(e)}};function uO(t,e){return{type:t,cast:rH,set(i){const r=to(i,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}l([Me()],kb.prototype,"owner",null),kb=l([E("esri.core.support.OwningCollection")],kb);let Sw=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new zy,this._items=new Set}get length(){return Ve(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ve(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ve(this._observable),yield*this._items}};const IJ=new FinalizationRegistry(t=>{t.close()});function H_e(t,e){IJ.register(t,e,e)}function W_e(t){IJ.unregister(t)}function EJ(t,e){return new Proxy({},{get:(i,r,n)=>(...s)=>{let o,a;const c=s[s.length-1];return Z_e(c)&&(o=c.signal,a=c.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function Z_e(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const J_e={CSVSourceWorker:()=>Q(()=>import("./CSVSourceWorker-BcFYus3A.js"),__vite__mapDeps([42,43,11,12,13,44,10,45,46,47,48,49,50,0,1,51,52,53,54,55,56,57,58,8,59,60]),import.meta.url),EdgeProcessingWorker:()=>Q(()=>import("./EdgeProcessingWorker-D5zRSkCc.js"),__vite__mapDeps([61,62,63,64,65,66,67,68,69,70,71,72]),import.meta.url),ElevationSamplerWorker:()=>Q(()=>import("./ElevationSamplerWorker-nyczb6-2.js"),__vite__mapDeps([73,46,74,75,76,77,78,79,80,64,81]),import.meta.url),Feature3DPipelineWorker:()=>Q(()=>import("./Feature3DPipelineWorker-BtaDMvIc.js"),__vite__mapDeps([82,50,10,11,12,13,0,1,47,48,51,52,53,54,55,56,57,58,83,79,74,84,78,85,86,87,70,64,88,89,90,91,92,93,67,66,94,95,96,97,98,76,77,63,65,99,100,101,102,103,104,105,106,107,108,46,109,110,111,112,113]),import.meta.url),FeaturePipelineWorker:()=>Q(()=>import("./FeaturePipelineWorker-DlEJHBsB.js"),__vite__mapDeps([114,115,116,117,66,118,119,11,12,13,10,120,52,121,48,47,16,122,123,124,125,126,127,128,129,130,131,22,49,50,0,1,51,53,54,55,56,57,58,132,133,134,135,39,136,137,138,139,140,43,60,141,109,110,111,112,142,143]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>Q(()=>import("./FeatureServiceSnappingSourceWorker-B71N03oB.js"),__vite__mapDeps([144,44,10,11,12,13,45,46,47,48,49,50,0,1,51,52,53,54,55,56,57,58,145,111,112,109,110]),import.meta.url),FlowWorker:()=>Q(()=>import("./FlowWorker-DEFSBbGG.js"),__vite__mapDeps([146,147]),import.meta.url),GaussianSplatSortWorker:()=>Q(()=>import("./GaussianSplatSortWorker-QQPlimXW.js"),[],import.meta.url),GeoJSONSourceWorker:()=>Q(()=>import("./GeoJSONSourceWorker-BZC89XLZ.js"),__vite__mapDeps([148,10,11,12,13,44,45,46,47,48,49,50,0,1,51,52,53,54,55,56,57,58,140,43,60,141]),import.meta.url),LercWorker:()=>Q(()=>import("./LercWorker-OZWD2LJU.js"),[],import.meta.url),Lyr3DWorker:()=>Q(()=>import("./Lyr3DWorker-BB7rqg7-.js"),[],import.meta.url),MemorySourceWorker:()=>Q(()=>import("./MemorySourceWorker-BX_WmL_e.js"),__vite__mapDeps([149,10,11,12,13,150,44,45,46,47,48,49,50,0,1,51,52,53,54,55,56,57,58,60,141,43]),import.meta.url),PBFDecoderWorker:()=>Q(()=>import("./PBFDecoderWorker-qe8VXiU0.js"),__vite__mapDeps([151,152,12,10,11,13,111,112]),import.meta.url),PanoramicMeshWorker:()=>Q(()=>import("./PanoramicMeshWorker-JNYo2KWF.js"),__vite__mapDeps([153,154,155]),import.meta.url),ParquetSourceWorker:()=>Q(()=>import("./ParquetSourceWorker-BN6iBbP8.js"),__vite__mapDeps([156,22,50,10,11,12,13,0,1,47,48,51,52,53,54,55,56,57,58,60,157,59,134,119,120,133,132]),import.meta.url),PointCloudWorker:()=>Q(()=>import("./PointCloudWorker-Bw7p0faD.js"),__vite__mapDeps([158,98,91,86,159,160,97,76,77,93,90]),import.meta.url),RasterWorker:()=>Q(()=>import("./RasterWorker-BIuRfbao.js"),__vite__mapDeps([161,154,155,162,163,164,165,166,167,168,169,147]),import.meta.url),SceneLayerSnappingSourceWorker:()=>Q(()=>import("./SceneLayerSnappingSourceWorker-DxKr_MM7.js"),__vite__mapDeps([170,92,89,90,91,93,171,96,64,68,69,70,63,65,66,67,71,72]),import.meta.url),SceneLayerWorker:()=>Q(()=>import("./SceneLayerWorker-BwwT3Iht.js"),__vite__mapDeps([172,74,80,84,78]),import.meta.url),TextureCompressionWorker:()=>Q(()=>import("./TextureCompressionWorker-CoSsGyD9.js"),[],import.meta.url),WFSSourceWorker:()=>Q(()=>import("./WFSSourceWorker-Bq-_lGBX.js"),__vite__mapDeps([173,10,11,12,13,44,45,46,47,48,49,50,0,1,51,52,53,54,55,56,57,58,140,43,141,174,175]),import.meta.url),WorkerTileHandler:()=>Q(()=>import("./WorkerTileHandler-BTWRNQ5q.js"),__vite__mapDeps([176,126,177,128,178,112,12,130,179,180,67,66,165,181,125]),import.meta.url),arcadeGeometryOperatorsWorker:()=>Q(()=>import("./operatorsWorker-ClcXLaQA.js"),[],import.meta.url),statsWorker:()=>Q(()=>import("./statsWorker-8BVGx3MC.js"),__vite__mapDeps([182,53,52,54,55,56]),import.meta.url)},MJ="worker:port-closed",bc={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let Y_e=0;function AJ(){return Y_e++}function K_e(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function gT(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function CJ(t,e,i,r){if(e.type===bc.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==bc.INVOKE&&e.type!==bc.RESPONSE)return void t.postMessage(e);let n;K_e(i)?(n=l4(i.transferList),e.data=i.result):(n=l4(r),e.data=i),n?t.postMessage(e,n):t.postMessage(e)}function $w(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function l4(t){if(!(t!=null&&t.length))return null;if(B("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!Q_e(i));return e.length?e:null}function Q_e(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function CVe(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===MJ;if(!(hr(e)||i))throw e;return}}const{CLOSE:x_,ABORT:dO,INVOKE:c4,RESPONSE:N0,OPEN_PORT:u4,ON:d4}=bc,X_e=2;let exe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===dO?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Hs;let xy=(Hs=class{static connect(e,i){const r=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new Hs(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),Hs.clients.set(s,n),r.port2}static loadWorker(e){const i=J_e[e];return i?i():Promise.resolve(null)}constructor(e,i,r,n){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new exe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:x_}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new j(MJ,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=AJ();return new Promise((a,c)=>{if(Ur(n))return this._processWork(),void c(gt());const d=io(n,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Gt(f.abortHandle),this._post({type:dO,jobId:o}),c(gt()))}),h={resolve:a,reject:c,abortHandle:d,debugInfo:e};this._outJobs.set(o,h),this._post({type:c4,jobId:o,methodName:e,abortable:n!=null},i,s)})}createInvokeProxy(e){return EJ(this,e)}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:d4,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),ct(()=>{r.port1.postMessage({type:x_}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:u4,port:e.port2}),e.port1}_processWork(){var o,a;if(this._outJobs.size>=X_e)return;const e=((o=this._jobQueue)==null?void 0:o.pop())??((a=this._lowPriorityJobQueue)==null?void 0:a.pop());if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.apply(i,r,n).then(c=>s.resolve(c)).catch(c=>s.reject(c))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Gt(e.abortHandle),e.reject(gt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=$w(e);if(r)switch(r.type){case N0:this._onResponseMessage(r);break;case c4:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case dO:this._onAbortMessage(r);break;case x_:this._onCloseMessage();break;case u4:this._onOpenPortMessage(r);break;case d4:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Hs.clients.get(this)===e&&e.destroy(),Hs.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let c,d=this._client,h=d[i];try{if(!h&&i&&i.includes(".")){const f=i.split(".");for(let m=0;m<f.length-1;m++)d=d[f[m]],h=d[f[m+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),c=h.apply(d,n)}catch(f){return void this._post({type:N0,jobId:r,error:gT(f)})}qr(c)?(a.set(r,{controller:o,promise:c}),c.then(f=>{a.has(r)&&(a.delete(r),this._post({type:N0,jobId:r},f))},f=>{a.has(r)&&(a.delete(r),hr(f)||this._post({type:N0,jobId:r,error:gT(f||{message:`Error encountered at method ${i}`})}))})):this._post({type:N0,jobId:r},c)}_onOpenPortMessage(e){new Hs(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,s=>{i.postMessage(s)}),n=Ry(e.port,"message",s=>{const o=$w(s);(o==null?void 0:o.type)===x_&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),Gt(o.abortHandle),r?o.reject(j.fromJSON(JSON.parse(r))):o.resolve(n)}_post(e,i,r){return CJ(this._port,e,i,r)}},Hs.kernelInfo={buildDate:IB,fullVersion:HR,revision:EB},Hs.clients=new Map,Hs),txe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Sw,this._ongoingLowPriorityJobsQueue=new Sw}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((r,n)=>{let s=!0;const o=a=>{Lt(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const c=e[a];qr(c)?this._clientPromises[a]=c.then(d=>(this._clients[a]=new xy(d,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new xy(c,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(gt(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(gt(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,W_e(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=Gn();((r==null?void 0:r.jobPriority)===1?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a==null?void 0:a.jobAdded())}return n.promise}createInvokeProxy(e){return EJ(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>Mh(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r===0&&e(i)})})}get test(){}};const ixe={async request(t,e){var o,a;const i=t.options,r=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=bA(t.url))!=null&&o.after)?r:"array-buffer";const n=await Ft(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},OJ={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function rxe(t){return t in OJ}function p4(t){if(rxe(t)){const e=OJ[t];return e===!0?t:e}return null}const Ev=[],ng=new Map;function h4(t){for(const e of ng.keys())LJ(t.pattern,e)&&ng.delete(e)}function nxe(t){return Ev.includes(t)||(h4(t),Ev.unshift(t)),ct(()=>{const e=Ev.indexOf(t);e>-1&&(Ev.splice(e,1),h4(t))})}async function PJ(t){const e=eo();ng.has(t)||ng.set(t,sxe(t,e));const i=ng.get(t);return i&&await oxe.add(i),i}function RJ(t){const e=IR(t);return e?p4(t)??p4(e):null}async function sxe(t,e){const i=[];for(const r of Ev)if(LJ(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new j("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new j("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function LJ(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}ER(()=>{ng.clear()});const oxe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Gn())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}},axe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let lS=new WeakMap,FJ={};function pO(t){const e=t||FJ;if(!lS.has(e)){const i=IR(),r=i&&axe[i]||_q();lS.set(e,new Intl.NumberFormat(r,t))}return lS.get(e)}function lxe(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function cxe(t){const{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r==="auto"?"auto":r==="always"}}function Tw(t,e){return Object.is(t,-0)&&(t=0),pO(e).format(t)}function RVe(t,e=eo()){var r,n;if(!t)return null;let i=f4.get(e);if(!i){const s=pO().formatToParts(12345.6),o=[...pO({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((v,w)=>[v,w])),c=new RegExp(`[${(r=s.find(v=>v.type==="group"))==null?void 0:r.value}]`,"g"),d=new RegExp(`[${(n=s.find(v=>v.type==="decimal"))==null?void 0:n.value}]`),h=new RegExp(`[${o.join("")}]`,"g"),f=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;i=v=>{if((v=v.trim().replaceAll(c,"").replace(d,".").replace(h,x=>String(a.get(x))).replaceAll(f,"").replaceAll(m,"-"))==="")return null;const w=Number(v);return isNaN(w)?null:w},f4.set(e,i)}return i(t)}ER(()=>{lS=new WeakMap,FJ={}});const f4=new Map,NJ=()=>ie.getLogger("esri.intl.substitute");function uxe(t,e,i={}){const{format:r={}}=i;return ld(t,n=>dxe(n,e,r))}function dxe(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const o=qw(r,e);if(o==null)return"";const a=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return a?pxe(o,a):n?hxe(o,n):hF(o)}function pxe(t,e){switch(e.type){case"date":return fh(t,e.intlOptions);case"number":return Tw(t,e.intlOptions);default:return NJ().warn("missing format descriptor for key {key}"),hF(t)}}function hxe(t,e){switch(e.toLowerCase()){case"dateformat":return fh(t);case"numberformat":return Tw(t);default:return NJ().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?fh(t):/^numberformat/i.test(e)?Tw(t):hF(t)}}function hF(t){switch(typeof t){case"string":return t;case"number":return Tw(t);case"boolean":return""+t;default:return t instanceof Date?fh(t):""}}async function fxe(t,e,i,r){const n=e.exec(i);if(!n)throw new j("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=RJ(r),c=`${s}${o}.json`,d=a?`${s}${o}_${a}.json`:c;let h;try{h=await m4(t(d))}catch(f){if(d===c)throw new j("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f});try{h=await m4(t(c))}catch(m){throw new j("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m})}}return h}async function m4(t){if(g4.fetchBundleAsset!=null)return g4.fetchBundleAsset(t);const e=await Ft(t,{responseType:"text"});return JSON.parse(e.data)}let mxe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return fxe(this.getAssetUrl,this.matcher,e,i)}};function gxe(t){return new mxe(t)}const g4={},FVe=cxe,NVe=lxe,yxe=gxe,vxe=PJ,DVe=Tw,hO=eo,DJ=fle,bxe=nxe,zJ=uxe;bxe(yxe({pattern:"esri/",location:Ti}));const y4={};function wxe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...y4.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=y4.baseUrl),e}let _xe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},cS=class{constructor(){this._dispatcher=new _xe,this._workerPostMessage({type:bc.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){n$(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){n$(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=$w(e);if(i&&i.type===bc.OPEN){const{modulePath:r,jobId:n}=i;let s=await xy.loadWorker(r);s||(s=await import(r));const o=xy.connect(s);this._workerPostMessage({type:bc.OPENED,jobId:n,data:o})}}};const fO=()=>ie.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:xxe}=bc,Sxe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let S_,$_;const v4="Failed to create Worker. Fallback to execute module in main thread";async function $xe(){if(!B("esri-workers"))return b4(new cS);if(!S_&&!$_)try{const e=Sxe.split("{CONFIGURATION}").join(Txe());S_=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){$_=e||{}}let t;if(S_)try{t=new Worker(S_,{name:"esri-worker-"+kxe++})}catch{fO().warn(v4,$_),t=new cS}else fO().warn(v4,$_),t=new cS;return b4(t)}async function b4(t){return new Promise(e=>{function i(n){const s=$w(n);s&&s.type===xxe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),fO().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new cS).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function Txe(){let t;if(Qe.default!=null){const n={...Qe};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Qe));t.assetsPath=Vn(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Vn(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=hO(),t.has={"esri-csp-restrictions":B("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":B("esri-2d-update-debug"),"esri-2d-log-updating":B("esri-2d-log-updating"),"featurelayer-pbf":B("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":B("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":B("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":B("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":B("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":B("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":B("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":B("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":B("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":B("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":B("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":B("parquetlayer-full-query-feature-count"),"esri-atomics":B("esri-atomics"),"esri-shared-array-buffer":B("esri-shared-array-buffer"),"esri-tiles-debug":B("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":B("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":B("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Vn(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Vn(t.workers.workerPath):t.workers.workerPath=Vn(Ti("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Qe.workers.loaderConfig,i=wxe({baseUrl:e==null?void 0:e.baseUrl,locale:hO(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:IB,fullVersion:HR,revision:EB}})}let kxe=0;const{ABORT:w4,INVOKE:Ixe,OPEN:Exe,OPENED:Mxe,RESPONSE:D0}=bc;let Axe=class jJ{static async create(e){const i=await $xe();return new jJ(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),ie.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=AJ();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:rR(r,()=>{this._outJobs.delete(n),this._post({type:w4,jobId:n})})};this._outJobs.set(n,a),this._post({type:Exe,jobId:n,modulePath:e})})}_onMessage(e){const i=$w(e);if(i)switch(i.type){case Mxe:this._onOpenedMessage(i);break;case D0:this._onResponseMessage(i);break;case w4:this._onAbortMessage(i);break;case Ixe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,c=ixe[i];let d;try{if(typeof c!="function")throw new TypeError(`${i} is not a function`);d=c.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:D0,jobId:r,error:gT(h)})}qr(d)?(a.set(r,{controller:o,promise:d}),d.then(h=>{a.has(r)&&(a.delete(r),this._post({type:D0,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),hr(h)||this._post({type:D0,jobId:r,error:gT(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:D0,jobId:r},d)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Gt(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Gt(s.abortHandle),r?s.reject(j.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return CJ(this.worker,e,i,r)}};const _4=B("host-browser")?Math.min(navigator.hardwareConcurrency-1,B("workers-pool-size")??8):0;let Ip=B("esri-mobile")?Math.min(_4,3):_4;Ip||(Ip=B("safari")&&B("mac")?7:2);let x4=0;const uS=[];function Cxe(){VJ()}async function T_(t,e){const i=new txe,{registryTarget:r,...n}=e;return await i.open(t,n),r&&H_e(r,i),i}async function Oxe(t,e={}){if(typeof t!="string")throw new j("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(B("host-webworker")&&!B("esri-workers")&&(i="local"),i==="local"){let r=await xy.loadWorker(t);r||(r=await import(t)),Lt(e.signal);const n=e.client||r;return T_([xy.connect(r,e.schedule)],{...e,client:n})}if(await VJ(),Lt(e.signal),i==="dedicated"){const r=x4++%Ip;return T_([await uS[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Ip);if(r<Ip){const n=new Array(r);for(let s=0;s<r;++s){const o=x4++%Ip;n[s]=uS[o].open(t,e)}return T_(n,e)}}return T_(uS.map(r=>r.open(t,e)),e)}let k_=null;async function VJ(){if(k_)return k_;new AbortController;const t=[];for(let e=0;e<Ip;e++){const i=Axe.create(e).then(r=>(uS[e]=r,r));t.push(i)}return k_=Promise.all(t),k_}var mO,Ug;let br=(Ug=class extends Z{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new mO({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},mO=Ug,Ug);l([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],br.prototype,"cols",void 0),l([u({type:nt,json:{write:!0}})],br.prototype,"level",void 0),l([u({type:String,json:{write:!0}})],br.prototype,"levelValue",void 0),l([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],br.prototype,"origin",void 0),l([u({type:Number,json:{write:!0}})],br.prototype,"resolution",void 0),l([u({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],br.prototype,"rows",void 0),l([u({type:Number,json:{write:!0}})],br.prototype,"scale",void 0),br=mO=l([E("esri.layers.support.LOD")],br);let Pxe=class UJ{constructor(e,i,r,n=Un()){this._level=e,this._row=i,this._col=r,this.extent=n}get id(){return this._id??(this._id=`${this.level}/${this.row}/${this.col}`),this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new UJ(e.level,e.row,e.col,e.extent)}};var Df;const S4=new Ze({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var qg;let Yr=(qg=class extends Z{static create(e={}){const{resolutionFactor:i=1,scales:r,size:n=256,spatialReference:s=me.WebMercator,numLODs:o=24}=e;if(!bs(s)){const m=[];if(r)for(let v=0;v<r.length;v++){const w=r[v];m.push(new br({level:v,scale:w,resolution:w}))}else{let v=5e-4;for(let w=o-1;w>=0;w--)m.unshift(new br({level:w,scale:v,resolution:v})),v*=2}return new Df({dpi:96,lods:m,origin:new ze(0,0,s),size:[n,n],spatialReference:s})}const a=hn(s),c=e.origin?new ze({x:e.origin.x,y:e.origin.y,spatialReference:s}):new ze(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),d=96,h=1/(so(s)*39.37*d),f=[];if(r)for(let m=0;m<r.length;m++){const v=r[m],w=v*h;f.push(new br({level:m,scale:v,resolution:w}))}else{let m=Hy(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const v=Math.ceil(o/i);f.push(new br({level:0,scale:m,resolution:m*h}));for(let w=1;w<v;w++){const x=m/2**i,$=x*h;f.push(new br({level:w,scale:x,resolution:$})),m=x}}return new Df({dpi:d,lods:f,origin:c,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=hn(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return ze.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const n=[],s=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach(o=>{n.push(o.scale),i=o.scale>i?o.scale:i,r=o.scale<r?o.scale:r,s[o.level]=o})),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),n=r+1;return i[r]/(i[r]/i[n])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let n=0;for(;n<r;n++){const s=i[n],o=i[n+1];if(s<=e)return n;if(o===e)return n+1;if(s>e&&o<e)return n+Math.log(s/e)/Math.log(s/o)}return n}tileAt(e,i,r,n){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof i=="number")o=i,a=r;else if(Hi(i.spatialReference,this.spatialReference))o=i.x,a=i.y,n=r;else{const h=rL(i,this.spatialReference);if(h==null)return null;o=h.x,a=h.y,n=r}const c=s.resolution*this.size[0],d=s.resolution*this.size[1];return n??(n=new Pxe(0,0,0)),n.level=e,n.row=Math.floor((this.origin.y-a)/d+.001),n.col=Math.floor((o-this.origin.x)/c+.001),this.updateTileInfo(n),n}updateTileInfo(e,i=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&i===1){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return!1;const n=e.level-r.level,s=r.resolution*this.size[0]/2**n,o=r.resolution*this.size[1]/2**n;return e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:n}=r,s=n*this.size[0],o=n*this.size[1];return e[0]=this.origin.x+i.col*s,e[1]=this.origin.y-(i.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){var i;return((i=this._levelToLOD)==null?void 0:i[e])??null}clone(){return Df.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],n=this.lods.length-i;for(let s=0;s<n;s++){const o=s+i,{scale:a,resolution:c}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new br({level:s,scale:a,resolution:c}))}return new Df({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/n.resolution:0},i=n}}},Df=qg,qg);l([u({type:Number,json:{write:!0}})],Yr.prototype,"compressionQuality",void 0),l([u({type:Number,json:{write:!0}})],Yr.prototype,"dpi",void 0),l([u({type:String,json:{read:S4.read,write:S4.write,origins:{"web-scene":{read:!1,write:!1}}}})],Yr.prototype,"format",void 0),l([u({readOnly:!0})],Yr.prototype,"isWrappable",null),l([u({type:ze,json:{write:!0}})],Yr.prototype,"origin",void 0),l([oe("origin")],Yr.prototype,"readOrigin",null),l([u({type:[br],value:null,json:{write:!0}})],Yr.prototype,"lods",null),l([u({readOnly:!0})],Yr.prototype,"scales",void 0),l([u({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Yr.prototype,"size",void 0),l([oe("size",["rows","cols"])],Yr.prototype,"readSize",null),l([le("size",{cols:{type:nt},rows:{type:nt}})],Yr.prototype,"writeSize",null),l([u({type:me,json:{write:!0}})],Yr.prototype,"spatialReference",void 0),Yr=Df=l([E("esri.layers.support.TileInfo")],Yr);let Sy=class extends kb{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(ie.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Sy=l([E("esri.support.AnalysesCollection")],Sy);const dS={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},y2={xsmall:544,small:768,medium:992,large:1200};function Rxe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function v2(t,e){return e?dS[t].valueToClassName[e].split(" "):[]}const Lxe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=y2}initialize(){this.addHandles(ve(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Pt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!Rxe(r)){const n=JSON.stringify(y2,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n),r=y2}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=sn.acquire(),n=sn.acquire();let s,o=!1;for(s in dS){const a=this[s],c=dS[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==c&&(o=!0,this[s]=c,v2(s,a).forEach(d=>n.push(d)),v2(s,c).forEach(d=>r.push(d)))}o&&(this._applyClassNameChanges(r,n),sn.release(r),sn.release(n))}_applyClassNameChanges(r,n){const s=this.container;s&&(s.classList.remove(...n),s.classList.add(...r))}_removeActiveClassNames(){const r=this.container;if(!r)return;let n;for(n in dS)v2(n,this[n]).forEach(s=>r.classList.remove(s))}};return l([u()],i.prototype,"breakpoints",null),l([u()],i.prototype,"orientation",void 0),l([u()],i.prototype,"widthBreakpoint",void 0),l([u()],i.prototype,"heightBreakpoint",void 0),i=l([E("esri.views.BreakpointsOwner")],i),i};function fF(t){return typeof t=="string"?document.getElementById(t):t??null}function $4(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}function qJ(t){return t==="Enter"||t===" "}const Fxe=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return;i=o.host}};function Nxe(t){const e=Fxe(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e!=null&&e.classList.contains("calcite-mode-dark")||e!=null&&e.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const Dxe="--esri-calcite-mode-name";function zxe(){const t=getComputedStyle(document.body).getPropertyValue(Dxe).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const BJ="calcite-mode-";function GJ(t){return zxe()??Nxe(t??document.body)}function UVe(t){return GJ(t)==="dark"}function jxe(t){return`${BJ}${GJ(t)}`}function HJ(t){const e=jxe(t);Vxe(t),t.classList.add(e)}function Vxe(t){Array.from(t.classList).forEach(e=>{e.startsWith(BJ)&&t.classList.remove(e)})}const pn={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",primaryTickLabelKeepAll:"primary-tick__label--keep-all",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"},I_="esri-attribution",df={poweredBy:`${I_}__powered-by`,sources:`${I_}__sources`,sourcesOpen:`${I_}__sources--open`,link:`${I_}__link`};let Mv=class extends Se{constructor(e){super(e),this._previousSourceHeight=0,this._opened=!1,this._overflowing=!1,this._changeSet=new Set,this._toggleState=()=>{(this._opened||this._overflowing)&&(this._opened=!this._opened,this._invalidate("opened"))},this.surface=document.createElement("div"),this._task=dh({render:()=>{this._update(),this._task.pause(),this._changeSet.clear()}}),this.addHandles(this._task)}initialize(){const e=document.createElement("div");HJ(e),e.setAttribute("dir","ltr"),e.classList.add("esri-widget","esri-view-attribution","esri-attribution"),this._set("surface",e),e.innerHTML=`
      <div class="${df.sources}"></div>
      <div class="${df.poweredBy}">
        Powered by
        <a class="${df.link}" href="https://www.esri.com/" rel="noreferrer" target="_blank">Esri</a>
      </div>`,this.addHandles([this.surface,ve(()=>this.attributionItems,()=>this._invalidate("attributionItems"),Pt)]);const i=e.querySelector(`.${df.sources}`);this._previousSourceHeight=i.clientHeight;const r=new ResizeObserver(()=>{this._invalidate("overflow")});r.observe(i),this.addHandles(ct(()=>r.disconnect()));const n=new MutationObserver(()=>{this._invalidate("overflow")});n.observe(i,{childList:!0,subtree:!0,characterData:!0}),this.addHandles(ct(()=>n.disconnect())),i.onclick=this._toggleState,i.onkeydown=s=>{qJ(s.key)&&(s.preventDefault(),this._toggleState())}}_invalidate(e){this._changeSet.add(e),this._task.resume()}_update(){var i;const e=this.surface.querySelector(`.${df.sources}`);if(this._changeSet.has("overflow")){const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=r<this._previousSourceHeight;this._previousSourceHeight=r,this._opened?o&&(this._opened=!1):o||(this._overflowing=s>n)}if(this._changeSet.has("overflow")||this._changeSet.has("opened")){const r=this._opened||this._overflowing,n=r?"0":"";e.setAttribute("tabindex",n),e.classList.toggle(pn.interactive,r),e.classList.toggle(df.sourcesOpen,this._opened)}this._changeSet.has("attributionItems")&&(e.innerText=((i=this.attributionItems)==null?void 0:i.map(r=>r.text).join(" | "))??"")}};l([u()],Mv.prototype,"attributionItems",void 0),l([u({readOnly:!0})],Mv.prototype,"surface",void 0),Mv=l([E("esri.views.Attribution")],Mv);let Kp=class extends Se{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,ve)}addWhen(e,i,r={}){return this._installWatch(e,i,r,gn)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([Wn(e,"after-changes",this._createSyncUpdatingCallback(),pr),Wn(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),ct(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(ct(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(E_)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,i,r);return this.addHandles(o,s),ct(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=ve(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(E_),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(Ly(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(E_))}),E_)}}};l([Me({readOnly:!0})],Kp.prototype,"updating",void 0),Kp=l([wi("esri.core.support.UpdatingHandles")],Kp);const E_=-42,WJ="http://www.w3.org/",$I=`${WJ}2000/svg`,ZJ=`${WJ}1999/xlink`;let T4=[],mF=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},gF=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),JJ=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},Uxe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(gF(t[r],e))return r}return-1},b2=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(gF(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},qxe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},gO=[],yO=!1,YJ=t=>{(t.children||[]).forEach(YJ),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},k4=()=>{yO=!1,gO.forEach(YJ),gO.length=0},I4=t=>{gO.push(t),yO||(yO=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(k4,{timeout:16}):setTimeout(k4,16))},E4=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),I4(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),I4(t))},Bxe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let a=n[o],c=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")bO(t,c,!0);else if(a==="classes"){let d=Object.keys(c),h=d.length;for(let f=0;f<h;f++){let m=d[f];c[m]&&t.classList.add(m)}}else if(a==="styles"){let d=Object.keys(c),h=d.length;for(let f=0;f<h;f++){let m=d[f],v=c[m];v&&(JJ(v),i.styleApplyer(t,m,v))}}else if(a!=="key"&&c!=null){let d=typeof c;d==="function"?(a.lastIndexOf("on",0)===0&&(r&&(c=r(a,c,t,e)),a==="oninput"&&function(){let h=c;c=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),t[a]=c):i.namespace===$I?a==="href"?t.setAttributeNS(ZJ,a,c):t.setAttribute(a,c):d==="string"&&a!=="value"?a==="innerHTML"?t[a]=IL.sanitize(c):vO(t)&&a in t?t[a]=c:t.setAttribute(a,c):t[a]=c}}};function vO(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let yT,Gxe=(t,e,i)=>{if(e)for(let r of e)Um(r,t,void 0,i)},KJ=(t,e,i)=>{Gxe(t,e.children,i),e.text&&(t.textContent=e.text),Bxe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Um=(t,e,i,r)=>{let n,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")n=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let c=0;c<=o.length;++c){let d=o.charAt(c);if(c===o.length||d==="."||d==="#"){let h=o.charAt(s-1),f=o.slice(s,c);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(r=mF(r,{namespace:$I})),r.namespace!==void 0?n=t.domNode=a.createElementNS(r.namespace,f):(n=t.domNode=t.domNode||a.createElement(f),f==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=c+1}}KJ(n,t,r)}},bO=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},Hxe=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let c=s[a],d=i[c],h=e[c];if(c==="class")h!==d&&(bO(t,h,!1),bO(t,d,!0));else if(c==="classes"){let f=t.classList,m=Object.keys(d),v=m.length;for(let w=0;w<v;w++){let x=m[w],$=!!d[x];$!==!!h[x]&&(n=!0,$?f.add(x):f.remove(x))}}else if(c==="styles"){let f=Object.keys(d),m=f.length;for(let v=0;v<m;v++){let w=f[v],x=d[w];x!==h[w]&&(n=!0,x?(JJ(x),r.styleApplyer(t,w,x)):r.styleApplyer(t,w,""))}}else if(d||typeof h!="string"||(d=""),c!=="value"||vO(t)){if(d!==h){let f=typeof d;f==="function"&&r.eventHandlerInterceptor||(r.namespace===$I?c==="href"?t.setAttributeNS(ZJ,c,d):t.setAttribute(c,d):f==="string"?c==="innerHTML"?t[c]=IL.sanitize(d):c==="role"&&d===""?t.removeAttribute(c):vO(t)&&c in t?t[c]=d:t.setAttribute(c,d):t[c]!==d&&(t[c]=d),n=!0)}}else{let f=t[c];f!==d&&(t["oninput-value"]?f===t["oninput-value"]:d!==h)&&(t[c]=d,t["oninput-value"]=void 0),d!==h&&(n=!0)}}return n},Wxe=(t,e,i,r,n)=>{if(i===r)return!1;r=r||T4;let s,o=(i=i||T4).length,a=r.length,c=0,d=0,h=!1;for(;d<a;){let f=c<o?i[c]:void 0,m=r[d];if(f!==void 0&&gF(f,m))h=yT(f,m,n)||h,c++;else{let v=Uxe(i,m,c+1);if(v>=0){for(s=c;s<v;s++)E4(i[s]),b2(i,s,t,"removed");h=yT(i[v],m,n)||h,c=v+1}else Um(m,e,c<o?i[c].domNode:void 0,n),qxe(m),b2(r,d,t,"added")}d++}if(o>c)for(s=c;s<o;s++)E4(i[s]),b2(i,s,t,"removed");return h};yT=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=mF(i,{namespace:$I})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=Wxe(e,r,t.children,e.children,i)||s,s=Hxe(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let z0=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,yT(r,i,e)},domNode:t.domNode});const Zxe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let zf=t=>mF(Zxe,t),Pu={create:(t,e)=>(e=zf(e),Um(t,document.createElement("div"),void 0,e),z0(t,e)),append:(t,e,i)=>(i=zf(i),Um(e,t,void 0,i),z0(e,i)),insertBefore:(t,e,i)=>(i=zf(i),Um(e,t.parentNode,t,i),z0(e,i)),merge:(t,e,i)=>(i=zf(i),e.domNode=t,KJ(t,e,i),z0(e,i)),replace:(t,e,i)=>(i=zf(i),Um(e,t.parentNode,t,i),t.parentNode.removeChild(t),z0(e,i))},QJ,Jxe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};QJ=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let Yxe=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?QJ(i.children,n=>n.domNode===r):void 0}),i},Kxe=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),o=Jxe(n.currentTarget,s.domNode);o.reverse();let a,c=Yxe(s.getLastRender(),o);return t.scheduleRender(),c&&(a=c.properties[`on${n.type}`].apply(c.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},M4=t=>{let e,i,r=zf(t),n=r.performanceLogger,s=!0,o=!1,a=[],c=[],d=(f,m,v)=>{let w,x=()=>w;r.eventHandlerInterceptor=Kxe(e,x,n),w=f(m,v(),r),a.push(w),c.push(v)},h=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let m=c[f]();n("rendered",void 0),a[f].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(f,m)=>{d(Pu.append,f,m)},insertBefore:(f,m)=>{d(Pu.insertBefore,f,m)},merge:(f,m)=>{d(Pu.merge,f,m)},replace:(f,m)=>{d(Pu.replace,f,m)},detach:f=>{for(let m=0;m<c.length;m++)if(c[m]===f)return c.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},e},eu=class extends Se{constructor(){super(...arguments),this.items=new de,this._watchUpdatingTracking=new Kp,this._callbacks=new Map,this._projector=M4(),this._hiddenProjector=M4()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([u({readOnly:!0})],eu.prototype,"surface",void 0),l([u({readOnly:!0})],eu.prototype,"items",void 0),l([u({readOnly:!0})],eu.prototype,"needsRender",null),l([u({readOnly:!0})],eu.prototype,"_watchUpdatingTracking",void 0),l([u({readOnly:!0})],eu.prototype,"updating",null),eu=l([E("esri.views.overlay.ViewOverlay")],eu);const A4=eu,w2=[0,0];function Qxe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return w2[0]=i.left+((e==null?void 0:e.pageXOffset)??0),w2[1]=i.top+((e==null?void 0:e.pageYOffset)??0),w2}function C4(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}const pf=16,j0=750,Xxe=512,eSe=2,tSe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._freqInfo={freq:pf,time:j0},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ve(()=>this.cursor,n=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",n)}),ve(()=>this.navigating,n=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",n.toString())}),ve(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([ve(()=>this.ui,(n,s)=>this._handleUIChange(n,s),Pt),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){var r;this.destroyed||((r=this.ui)==null||r.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const n=this._get("container"),s=fF(r);if(s||typeof r!="string"||ie.getLogger(this).error("#container",`element with id '${r}' not found`),n===s)return;if(this._stopMeasuring(),this.removeHandles("container"),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this._attribution=Ot(this._attribution),this.root&&(C4(this.root),this._set("root",null)),this.userContent&&($4(this.userContent,n),C4(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",$4(s,o),s.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",s.insertBefore(a,s.firstChild),this._set("root",a);const c=document.createElement("div");c.className="esri-view-surface",c.setAttribute("role","application"),c.tabIndex=0,a.appendChild(c),this._set("surface",c);const d=new A4;a.appendChild(d.surface),this._set("overlay",d),this.addHandles(ve(()=>d.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=dh({render:()=>{var f;return(f=this.overlay)==null?void 0:f.render()}}):this._overlayRenderTaskHandle=Gt(this._overlayRenderTaskHandle)}),"container"),this.addHandles([ve(()=>this.attributionVisible,h=>{h?!this._attribution&&h&&(this._attribution=new Mv({attributionItems:this.attributionItems}),a.appendChild(this._attribution.surface)):this._attribution=Ot(this._attribution)},wr),ve(()=>this.attributionItems,h=>{this._attribution&&(this._attribution.attributionItems=h)},pr)],"container"),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const n=this._get("ui");n!==r&&(n==null||n.destroy()),this._set("ui",r)}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,n,s){const o=this.position;return r-=o?o[0]:0,n-=o?o[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}containerToPage(r,n,s){const o=this.position;return r+=o?o[0]:0,n+=o?o[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}_updateAria(){const{surface:r,aria:n}=this;r&&(r.ariaLabelledByElements=(n==null?void 0:n.labelledByElements)??null,r.ariaDescribedByElements=(n==null?void 0:n.describedByElements)??null,r.ariaLabel=(n==null?void 0:n.label)??null,r.ariaDescription=(n==null?void 0:n.description)??null)}_handleUIChange(r,n){this.removeHandles("ui"),n&&n!==r&&n.destroy(),r&&(r.view=this,this.addHandles(ve(()=>this.root,s=>{var o;if(s){const a=document.createElement("div");s.insertBefore(a,((o=this._attribution)==null?void 0:o.surface)??null),r.container=a}else r.container=null},Pt),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=pf,r.time=j0;const n=dh({prepare:a=>{const c=this._measure(),d=this._freqInfo;if(d.time+=a.deltaTime,c&&(d.freq=pf,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const h=this._position();d.freq=h||c?pf:Math.min(j0,d.freq*eSe),!c&&d.freq>=Xxe&&(n.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(a=>{r.freq=pf,r.time=j0,n.resume()});this.container!=null&&s.observe(this.container);const o=ct(()=>s.disconnect());this.addHandles([Ry(window,"resize",()=>{r.freq=pf,r.time=j0,n.resume()}),o,n],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,n=r?r.clientWidth:0,s=r?r.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,a=this.height;return n===o&&s===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:a,width:n,height:s}),!0)}_position(){const r=this.container,n=this.position,s=r&&Qxe(r);return!!s&&(!n||s[0]!==n[0]||s[1]!==n[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return l([u()],i.prototype,"aria",void 0),l([u()],i.prototype,"container",null),l([u({readOnly:!0})],i.prototype,"focused",null),l([u({readOnly:!0})],i.prototype,"height",void 0),l([u()],i.prototype,"messagesCommon",void 0),l([u({type:A4})],i.prototype,"overlay",void 0),l([u({readOnly:!0})],i.prototype,"position",void 0),l([u({readOnly:!0})],i.prototype,"resizing",void 0),l([u({readOnly:!0})],i.prototype,"root",void 0),l([u({value:null,readOnly:!0})],i.prototype,"size",null),l([u({readOnly:!0})],i.prototype,"surface",void 0),l([u({readOnly:!0})],i.prototype,"suspended",void 0),l([u({nonNullable:!0})],i.prototype,"ui",null),l([u({readOnly:!0})],i.prototype,"userContent",void 0),l([u({readOnly:!0})],i.prototype,"width",void 0),l([u()],i.prototype,"widthBreakpoint",void 0),i=l([E("esri.views.DOMContainer")],i),i},M_="popup",O4="manual";function Za(t){return t!=null&&"open"in t&&"declaredClass"in t}function Sc(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function iSe(t,e,i){const[r,n,s]=e;if(i){const[o,a,c]=i;o&&Za(a)&&(a.view=null,o.remove(a,M_),a!==n&&n&&a.destroy()),o&&c&&Sc(c)&&(c.view=null,o.remove(c,M_),c!==s&&s&&c.remove())}r&&Za(n)&&(n.view=t,r.add(n,{key:M_,position:O4,internal:!0})),r&&s&&Sc(s)&&(s.view=t,r.add(s,{key:M_,position:O4,internal:!0}))}async function rSe(t,e){const{popup:i,popupElement:r}=t;Za(i)?await A_(i,null,e):r&&Sc(r)?await A_(null,r,e):e==null||e.defer(async()=>{await t.setupPopup();const{popup:n,popupElement:s}=t;Za(n)&&!t.destroyed&&t.ready&&t.popupEnabled?await A_(n,null,e):s&&Sc(s)&&await A_(null,s,e)})}function nSe(t,e){const{popup:i,popupElement:r}=t;if(Za(i))return i.open(e);r&&Sc(r)&&r.open(e)}function sSe(t,e){Za(t)&&t.close(),e&&Sc(e)&&(e.visible=!1)}async function A_(t,e,i){var r,n;if(Za(t)){const s=await t.viewModel.handleViewClick(i);return void((r=s==null?void 0:s.promises)!=null&&r.length?t.open(s):t.visible&&t.close())}if(e&&Sc(e)){const s=await e.handleViewClick(i);(n=s==null?void 0:s.promises)!=null&&n.length?e.open(s):e.visible&&(e.visible=!1)}}const XJ=B("mac")?"Meta":"Control",oSe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),aSe=t=>oSe.has(t);let lSe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},rr=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new lSe(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const m=f.indexOf(h);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},c=new cSe(s,r,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let d=this._incoming[s.eventType];return d||(d=[],this._incoming[s.eventType]=d),d.push(c),o(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new uSe(e,{onEmit:(r,n,s,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,n,s,o)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},cSe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},uSe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},dSe=class extends rr{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n,native:{pointerId:s}}=e;i===this._value&&this._x===r&&this._y===n&&this._id===s||(this._value=i,this._x=r,this._y=n,this._id=s,this._onChange(s,i,r,n))}},pSe=class extends rr{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=_y(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},hSe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new a9(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=Xre(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)h5(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)n=r.pool.acquire(),r.acquired.push(n);return S9(),n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)h5(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},fSe=class{constructor(){this.id=0,this.type="mouse",this.location=tr()}},Io=class extends Se{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=XJ,this._propertiesPool=new hSe({latestPointerInfo:()=>new fSe},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=wc.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,c,d,h,f)=>{this._emitInputEvent(o.priorityIndex+1,a,c,d,f,h)},setPointerCapture:(a,c)=>{this._setPointerCapture(n,o,a,c)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):ie.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)aSe(a)||i.add(a)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r,n){const s=this._latestPointerInfo;if(s==null||s.id!==e||s.type!==i||s.location.x!==r||s.location.y!==n){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=i,o.location.x=r,o.location.y=n,this._latestPointerInfo=o}}_onEventReceived(e,i){var s,o;if(e==="pointer-capture-lost"){const a=i;this._pointerCaptures.delete(a.native.pointerId)}this._updateKeyModifiers(e,i);const r=this._testTimestamp??((s=i.native)==null?void 0:s.timestamp),n=(o=i.native)==null?void 0:o.cancelable;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,c)=>{c&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!c&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new dSe((e,i,r,n)=>this._setLatestPointer(e,i,r,n)),this._multiTouchHandler=new pSe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],wc.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,wc.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,o){var h;const a=n??((h=this._currentPropagation)==null?void 0:h.timestamp)??performance.now(),c=s??!1,d={event:new mSe(i,r,a,o||this._activeKeyModifiers,c),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(d):this._doNewPropagation(d)}_doNewPropagation(e){this._currentPropagation={events:new Sw,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:s,priorityIndex:o}=e.events.pop(),a=(i=s.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((n=(r=e.currentHandler).eventCallback)==null||n.call(r,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new Sw;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get test(){}};l([u({readOnly:!0})],Io.prototype,"hasPendingInputs",null),l([u({constructOnly:!0})],Io.prototype,"eventSource",void 0),l([u({constructOnly:!0})],Io.prototype,"recognizers",void 0),l([u()],Io.prototype,"multiTouchActive",null),l([u()],Io.prototype,"_latestPointerInfo",void 0),l([u()],Io.prototype,"latestPointerInfo",null),l([u()],Io.prototype,"_paused",void 0),l([u({readOnly:!0})],Io.prototype,"updating",null),Io=l([E("esri.views.input.InputManager")],Io);let mSe=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const i=(r,n)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const wc={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},gSe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ve(()=>[this.ui,this.popup,this.popupElement],([r,n,s],o)=>{const[a,c,d]=o??[];iSe(this,[r,n,s],[a,c,d])},wr),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&rSe(this,r)},wc.WIDGET)]),jk(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>Q(()=>import("./Popup-DOCasKs_.js").then(r=>r.P),__vite__mapDeps([183,184,185,186,187,188,54,189,190,191,192,109,110,111,112,12,13,11,7,18,19,16,193,194,165,195]),import.meta.url))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Za(this.popup))return this.popup.open(r);if(this.popupElement&&Sc(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void ie.getLogger(this).error(new j("view:null-popup","Popup is null and can't be opened"));nSe(this,r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),sSe(this.popup,this.popupElement)}async fetchPopupFeatures(r,n){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,n),n)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!Za(this.popup))return this._popupSetupTask=u1(async n=>{if(!this.popupEnabled||!Sc(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),Lt(n),customElements.get("arcgis-popup")||ie.getLogger(this).error(new j("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:s}=await Q(()=>import("./Popup-DOCasKs_.js").then(a=>a.P),__vite__mapDeps([183,184,185,186,187,188,54,189,190,191,192,109,110,111,112,12,13,11,7,18,19,16,193,194,165,195]),import.meta.url);if(Lt(n),!this.popup||Za(this.popup))return;const o=this.popup;if("open"in o||"close"in o){const{open:a,close:c,...d}=o;this.popup=new s({...d})}else this.popup=new s(o)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:n},s){const o=[],a=[];let c=!1;const d=Are(s,B("popup-view-fetch-timeout")??vSe),h=v=>{const w=new ySe(v);return a.push(w),o.push(w.promise),w},f=v=>{const w=a.at(-1);return w&&w.layerView===v&&!c?w:h(v)};for(const v of n)"graphic"in v?(f(v.layerView).graphics.push(v.graphic),c=!1):(o.push(v.layerView.fetchPopupFeaturesAtLocation(v.mapPoint,d)),c=!0);a.forEach(v=>v.resolve(d));const m=Mre(o).then(v=>v.filter(w=>!!w).flat());return{pendingFeatures:o,allGraphicsPromise:m,location:r}}async _getPopupHits(r,n){const{hits:s,location:o}=await this.popupHitTest(r);Lt(n);const a=[];for(const c of s)if("graphic"in c){if(this._isValidPopupGraphic(c.graphic,n)){const d=this._isValidPopupGraphicsLayerView(c.layerView)?c.layerView:void 0;a.push({graphic:c.graphic,layerView:d})}}else this._isValidPopupLocationLayerView(c.layerView)&&a.push({mapPoint:c.mapPoint,layerView:c.layerView});return{hits:a,location:o}}_isValidPopupGraphic(r,n){return r&&!!r.getEffectivePopupTemplate(n==null?void 0:n.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return l([u()],i.prototype,"popup",void 0),l([u()],i.prototype,"popupElement",void 0),l([u()],i.prototype,"popupEnabled",void 0),i=l([E("esri.views.PopupView")],i),i};let ySe=class{constructor(e){this.layerView=e,this._resolver=Gn(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let s;return i.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const vSe=5e3;async function TI(t,e){return await t.load(),bSe(t,e)}async function bSe(t,e){const i=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):de.isCollection(o)?o.forEach(a=>r(a)):DA(o)&&i.push(o))};e(r);let n=null;if(await xye(i,async s=>{const o=await PL(wSe(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return t}function wSe(t){return"loadAll"in t&&typeof t.loadAll=="function"}async function _Se(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await PJ("esri/t9n/basemaps");return i[t]||i[e]}const wO={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ti("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ti("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ti("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Ti("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Ti("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Ti("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}};let Sl=class extends Se{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:RJ(e??eo())??"global";return i=i==="no"?"nb":i,i}};l([u()],Sl.prototype,"apiKey",void 0),l([u()],Sl.prototype,"id",void 0),l([u()],Sl.prototype,"language",void 0),l([u()],Sl.prototype,"places",void 0),l([u()],Sl.prototype,"serviceUrl",void 0),l([u()],Sl.prototype,"worldview",void 0),Sl=l([E("esri.support.BasemapStyle")],Sl);const xSe=Sl,SSe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),$Se=new Set(["integrated-mesh-3dtiles"]),eY=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),TSe=new Set([...eY,"link-chart"]);function kSe(t){switch(t.layerContainerType){case"basemap-base-layers":return SSe;case"basemap-ground-layers":return $Se;case"operational-layers":return t.origin==="link-chart"?TSe:eY;default:return null}}function ISe(t,e){if(e.restrictedWebMapWriting){const i=kSe(e);return i==null||i.has(t.type)&&!uI(t)}return!0}function ESe(t,e){var i;if(e)if(uI(t)){const r=qw("featureCollection.layers",e),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&P4(t,n)}else t.type!=="group"&&P4(t,e)}function P4(t,e){"maxScale"in t&&(e.maxScale=g$(t.maxScale)??void 0),"minScale"in t&&(e.minScale=g$(t.minScale)??void 0)}function MSe(t,e){if(ESe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=g$(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(uI(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function pS(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new j("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(uI(t)&&!t.isTable)e=t.resourceInfo;else if(ISe(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&MSe(t,e=V(e)),e}var R4,jf,eh;let wn=(eh=class extends $c(zh){constructor(e){super(e),this[R4]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+jf.idCounter++,this.baseLayers=new de,this.referenceLayers=new de,this.groundLayers=new de;const i=a=>{var d;const{parent:c}=a;c&&c!==this&&"remove"in c&&((d=c.remove)==null||d.call(c,a)),a.parent=this,a.type!=="elevation"&&a.type!=="integrated-mesh-3dtiles"||ie.getLogger(this).error(`Layer '${a.title}, id:${a.id}' of type '${a.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=a=>{var d;const{parent:c}=a;c&&c!==this&&"remove"in c&&((d=c.remove)==null||d.call(c,a)),a.parent=this},n=a=>{const c=a.item;return c.parent===this?(ie.getLogger(this).error(`Layer '${c.title}, id:${c.id}' of type '${c.type}' already a ground layer, second add will be ignored.`),void a.preventDefault()):c.type!=="integrated-mesh-3dtiles"?(ie.getLogger(this).error(`Layer '${c.title}, id:${c.id}' of type '${c.type}' is not supported as a ground layer and will therefore be ignored.`),void a.preventDefault()):void 0},s=a=>{a.parent=null},o=a=>{a.parent===this&&(a.parent=null)};this.addHandles([this.baseLayers.on("after-add",a=>i(a.item)),this.baseLayers.on("after-remove",a=>s(a.item)),this.referenceLayers.on("after-add",a=>i(a.item)),this.referenceLayers.on("after-remove",a=>s(a.item)),this.groundLayers.on("before-add",n),this.groundLayers.on("after-add",a=>r(a.item)),this.groundLayers.on("after-remove",a=>o(a.item))])}initialize(){this.when().catch(e=>{ie.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const n of e)n.destroyed||n.destroy();const i=this.groundLayers.toArray();for(const n of i)n.destroyed||n.destroy();const r=this.referenceLayers.toArray();for(const n of r)n.destroyed||n.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ot(this.portalItem)}removeChildLayer(e){for(const i of[this.baseLayers,this.referenceLayers,this.groundLayers])i.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get baseLayers(){return this._get("baseLayers")}set baseLayers(e){this._set("baseLayers",to(e,this._get("baseLayers")))}_writeBaseLayers(e,i,r){const n=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(s=>{const o=pS(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&n.push(o)}),this.referenceLayers.forEach(s=>{const o=pS(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&(s.type!=="scene"&&(o.isReference=!0),n.push(o))})),i.baseMapLayers=n}set groundLayers(e){this._set("groundLayers",to(e,this._get("groundLayers")))}_writeGroundLayers(e,i,r){const n=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(s=>{const o=pS(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&n.push(o)}),n.length>0&&(i.groundLayers=n))}get loaded(){return super.loaded}get referenceLayers(){return this._get("referenceLayers")}set referenceLayers(e){this._set("referenceLayers",to(e,this._get("referenceLayers")))}writeTitle(e,i){i.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return TI(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(i=>nb(i)?i.clone():i),groundLayers:this.groundLayers.map(i=>nb(i)?i.clone():i),referenceLayers:this.referenceLayers.map(i=>nb(i)?i.clone():i)};return this.loaded&&(e.loadStatus="loaded"),new jf({resourceInfo:this.resourceInfo}).set(e)}read(e,i){this.resourceInfo||this._set("resourceInfo",{data:e,context:i}),super.read(e,i)}write(e,i){var r;return e=e||{},i!=null&&i.origin||(i={origin:"web-map",...i}),super.write(e,i),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(n=>{const s=V(n);return s.url&&Qa(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Qa(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:i,portalItem:r,style:n}=this;Lt(e);const s=[];if(i){const o=i.context?i.context.url:null;if(s.push(this._loadLayersFromJSON(i.data,o,e)),i.data.id&&!i.data.title){const a=i.data.id;s.push(_Se(a).then(c=>{c&&this.read({title:c},i.context)}))}}else r?s.push(this._loadFromItem(r,e)):n&&s.push(this._loadFromStylesService(n,e));await Promise.all(s)}async _loadLayersFromJSON(e,i,r){var d,h;const n=(d=this.resourceInfo)==null?void 0:d.context,s=((h=this.portalItem)==null?void 0:h.portal)||(n==null?void 0:n.portal)||null,o=CSe[(n==null?void 0:n.origin)||""]??"web-map",{populateOperationalLayers:a}=await Q(async()=>{const{populateOperationalLayers:f}=await import("./layersCreator-BcyvXSRx.js");return{populateOperationalLayers:f}},__vite__mapDeps([196,34,33,32,35,31]),import.meta.url),c=[];if(Lt(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const f={context:{...n,origin:o,url:i,portal:s,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},m=x=>o==="web-scene"&&x.layerType==="ArcGISSceneServiceLayer"||x.isReference,v=a(this.baseLayers,e.baseMapLayers.filter(x=>!m(x)),f);c.push(v);const w=a(this.referenceLayers,e.baseMapLayers.filter(m),f);c.push(w)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const f={context:{...n,origin:o,url:i,portal:s,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},m=a(this.groundLayers,e.groundLayers,f);c.push(m)}await Promise.allSettled(c)}async _loadFromItem(e,i){const r=await e.load(i),n=await r.fetchData("json",i),s=zi(e.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:ASe[e.type||""]??"web-map",portal:e.portal||ce.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ce.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,i)}async _loadFromStylesService(e,i){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,n=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,o=e.apiKey??Qe.apiKeys.basemapStyles,[a,c]=await Promise.all([(await Ft(n,{query:{token:o},signal:i==null?void 0:i.signal})).data,(await Ft(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:i==null?void 0:i.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=a.thumbnailUrl);const d=zi(s);if(this._set("resourceInfo",{data:c.baseMap??{},context:{origin:"web-map",url:d}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:c.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,d,i),o)for(const h of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in h&&(h.apiKey=o)}static fromId(e){const i=wO[e];return i?i.itemId?new jf({portalItem:{id:i.itemId,portal:{url:"https://www.arcgis.com"}}}):jf.fromJSON(i,i.is3d?{origin:"web-scene",portal:new ce({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},R4=MW,jf=eh,eh.idCounter=0,eh);l([u({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:de}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],wn.prototype,"baseLayers",null),l([u({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,i,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:de}},writer(t,e,i,r){this._writeGroundLayers(t,e,r)}}}}}})],wn.prototype,"groundLayers",null),l([u({type:String,json:{origins:{"web-scene":{write:!0}}}})],wn.prototype,"id",void 0),l([u({type:Ge})],wn.prototype,"portalItem",void 0),l([u()],wn.prototype,"referenceLayers",null),l([u({readOnly:!0})],wn.prototype,"resourceInfo",void 0),l([u({type:me})],wn.prototype,"spatialReference",void 0),l([u({type:xSe})],wn.prototype,"style",void 0),l([u()],wn.prototype,"thumbnailUrl",void 0),l([u({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],wn.prototype,"title",void 0),l([le("title")],wn.prototype,"writeTitle",null),wn=jf=l([E("esri.Basemap")],wn);const ASe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},CSe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},sg=wn,OSe=Object.freeze(Object.defineProperty({__proto__:null,default:sg},Symbol.toStringTag,{value:"Module"}));var _O;let hS=_O=class extends Z{constructor(t){super(t),this.type="none"}clone(){return new _O({type:this.type})}};l([Ie({none:"none",stayAbove:"stay-above"}),u({json:{write:{isRequired:!0}}})],hS.prototype,"type",void 0),hS=_O=l([E("esri.ground.NavigationConstraint")],hS);const tY=Symbol("GroundInstance");function n8e(t){return t!=null&&typeof t=="object"&&tY in t}var L4,xO,K8;let Ns=xO=(K8=class extends $c(zh){constructor(t){super(t),this[L4]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new de;const e=r=>{var s;const{parent:n}=r;n&&n!==this&&"remove"in n&&((s=n.remove)==null||s.call(n,r)),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&ie.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))]),this.allLayers=new Th({getCollections:()=>{var r,n;return[this.layers,(n=(r=this.parent)==null?void 0:r.basemap)==null?void 0:n.groundLayers]}})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{hr(t)||ie.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){var e,i;const t=(i=(e=this.parent)==null?void 0:e.basemap)==null?void 0:i.groundLayers.at(0);return t!=null&&t.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)Ot(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",to(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};Iie(s)().write(o,r)&&n.push(o)}else r!=null&&r.messages&&r.messages.push(new j("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return TI(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{queryAll:i}=await Q(()=>import("./ElevationQuery-DnMx7XpN.js"),__vite__mapDeps([197,198]),import.meta.url);return Lt(e),i(this.layers.filter(F4).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{createSampler:i}=await Q(()=>import("./ElevationQuery-DnMx7XpN.js"),__vite__mapDeps([197,198]),import.meta.url);return Lt(e),i(this.layers.filter(F4).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:V(this.surfaceColor),navigationConstraint:V(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new xO({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=(e==null?void 0:e.origin)||"web-scene",n=(e==null?void 0:e.portal)||null,s=(e==null?void 0:e.url)||null,{populateOperationalLayers:o}=await Q(async()=>{const{populateOperationalLayers:c}=await import("./layersCreator-BcyvXSRx.js");return{populateOperationalLayers:c}},__vite__mapDeps([196,34,33,32,35,31]),import.meta.url);Lt(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const c={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,c))}await Promise.allSettled(a)}},L4=tY,K8);function F4(t){return t&&"createElevationSampler"in t}l([u()],Ns.prototype,"parent",void 0),l([u()],Ns.prototype,"integratedMeshGround",null),l([u({json:{read:!1,write:{isRequired:!0}}})],Ns.prototype,"layers",null),l([u()],Ns.prototype,"allLayers",void 0),l([le("layers")],Ns.prototype,"writeLayers",null),l([u({readOnly:!0})],Ns.prototype,"resourceInfo",void 0),l([u({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:nt,read:{reader:uw,source:"transparency"},write:{writer:(t,e)=>{e.transparency=tI(t)},target:"transparency"}}})],Ns.prototype,"opacity",void 0),l([u({type:Ue,json:{type:[nt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Ns.prototype,"surfaceColor",void 0),l([u({type:hS,json:{write:!0}})],Ns.prototype,"navigationConstraint",void 0),Ns=xO=l([E("esri.Ground")],Ns);const vT=Ns,PSe="randomUUID"in crypto;function t0(){if(PSe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function s8e(){return`{${t0().toUpperCase()}}`}function RSe(){return`{${t0()}}`}function LSe(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const hf={Base64:0,Hex:1,String:2,Raw:3},og=8,iY=(1<<og)-1;function Ru(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function FSe(t){const e=[];for(let i=0,r=t.length*og;i<r;i+=og)e[i>>5]|=(t.charCodeAt(i/og)&iY)<<i%32;return e}function NSe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=og)e.push(String.fromCharCode(t[i>>5]>>>i%32&iY));return e.join("")}function DSe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function zSe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*t.length?r.push(e):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function jSe(t,e){return t<<e|t>>>32-e}function kI(t,e,i,r,n,s){return Ru(jSe(Ru(Ru(e,t),Ru(r,s)),n),i)}function Tr(t,e,i,r,n,s,o){return kI(e&i|~e&r,t,e,n,s,o)}function kr(t,e,i,r,n,s,o){return kI(e&r|i&~r,t,e,n,s,o)}function Ir(t,e,i,r,n,s,o){return kI(e^i^r,t,e,n,s,o)}function Er(t,e,i,r,n,s,o){return kI(i^(e|~r),t,e,n,s,o)}function VSe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=i,c=r,d=n,h=s;i=Tr(i,r,n,s,t[o],7,-680876936),s=Tr(s,i,r,n,t[o+1],12,-389564586),n=Tr(n,s,i,r,t[o+2],17,606105819),r=Tr(r,n,s,i,t[o+3],22,-1044525330),i=Tr(i,r,n,s,t[o+4],7,-176418897),s=Tr(s,i,r,n,t[o+5],12,1200080426),n=Tr(n,s,i,r,t[o+6],17,-1473231341),r=Tr(r,n,s,i,t[o+7],22,-45705983),i=Tr(i,r,n,s,t[o+8],7,1770035416),s=Tr(s,i,r,n,t[o+9],12,-1958414417),n=Tr(n,s,i,r,t[o+10],17,-42063),r=Tr(r,n,s,i,t[o+11],22,-1990404162),i=Tr(i,r,n,s,t[o+12],7,1804603682),s=Tr(s,i,r,n,t[o+13],12,-40341101),n=Tr(n,s,i,r,t[o+14],17,-1502002290),r=Tr(r,n,s,i,t[o+15],22,1236535329),i=kr(i,r,n,s,t[o+1],5,-165796510),s=kr(s,i,r,n,t[o+6],9,-1069501632),n=kr(n,s,i,r,t[o+11],14,643717713),r=kr(r,n,s,i,t[o],20,-373897302),i=kr(i,r,n,s,t[o+5],5,-701558691),s=kr(s,i,r,n,t[o+10],9,38016083),n=kr(n,s,i,r,t[o+15],14,-660478335),r=kr(r,n,s,i,t[o+4],20,-405537848),i=kr(i,r,n,s,t[o+9],5,568446438),s=kr(s,i,r,n,t[o+14],9,-1019803690),n=kr(n,s,i,r,t[o+3],14,-187363961),r=kr(r,n,s,i,t[o+8],20,1163531501),i=kr(i,r,n,s,t[o+13],5,-1444681467),s=kr(s,i,r,n,t[o+2],9,-51403784),n=kr(n,s,i,r,t[o+7],14,1735328473),r=kr(r,n,s,i,t[o+12],20,-1926607734),i=Ir(i,r,n,s,t[o+5],4,-378558),s=Ir(s,i,r,n,t[o+8],11,-2022574463),n=Ir(n,s,i,r,t[o+11],16,1839030562),r=Ir(r,n,s,i,t[o+14],23,-35309556),i=Ir(i,r,n,s,t[o+1],4,-1530992060),s=Ir(s,i,r,n,t[o+4],11,1272893353),n=Ir(n,s,i,r,t[o+7],16,-155497632),r=Ir(r,n,s,i,t[o+10],23,-1094730640),i=Ir(i,r,n,s,t[o+13],4,681279174),s=Ir(s,i,r,n,t[o],11,-358537222),n=Ir(n,s,i,r,t[o+3],16,-722521979),r=Ir(r,n,s,i,t[o+6],23,76029189),i=Ir(i,r,n,s,t[o+9],4,-640364487),s=Ir(s,i,r,n,t[o+12],11,-421815835),n=Ir(n,s,i,r,t[o+15],16,530742520),r=Ir(r,n,s,i,t[o+2],23,-995338651),i=Er(i,r,n,s,t[o],6,-198630844),s=Er(s,i,r,n,t[o+7],10,1126891415),n=Er(n,s,i,r,t[o+14],15,-1416354905),r=Er(r,n,s,i,t[o+5],21,-57434055),i=Er(i,r,n,s,t[o+12],6,1700485571),s=Er(s,i,r,n,t[o+3],10,-1894986606),n=Er(n,s,i,r,t[o+10],15,-1051523),r=Er(r,n,s,i,t[o+1],21,-2054922799),i=Er(i,r,n,s,t[o+8],6,1873313359),s=Er(s,i,r,n,t[o+15],10,-30611744),n=Er(n,s,i,r,t[o+6],15,-1560198380),r=Er(r,n,s,i,t[o+13],21,1309151649),i=Er(i,r,n,s,t[o+4],6,-145523070),s=Er(s,i,r,n,t[o+11],10,-1120210379),n=Er(n,s,i,r,t[o+2],15,718787259),r=Er(r,n,s,i,t[o+9],21,-343485551),i=Ru(i,a),r=Ru(r,c),n=Ru(n,d),s=Ru(s,h)}return[i,r,n,s]}function yF(t,e=hf.Hex){const i=e||hf.Base64,r=VSe(FSe(t),t.length*og);switch(i){case hf.Raw:return r;case hf.Hex:return DSe(r);case hf.String:return NSe(r);case hf.Base64:return zSe(r)}}function rY(t){return t&&"getAtOrigin"in t&&"originOf"in t}function SO(t){return vF[USe(t)]||BSe}function USe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:qSe(t.url)}function qSe(t){const e=TB(t);return $O[e]||nY}const vF={},nY="text/plain",BSe=vF[nY],$O={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in $O)vF[$O[t]]=t;function GSe(t){const e=(t==null?void 0:t.origins)??[void 0];return(i,r)=>{const n=HSe(t,i,r);for(const s of e){const o=cR(i,s,r);for(const a in n)o[a]=n[a]}}}function HSe(t,e,i){if((t==null?void 0:t.type)==="resource")return WSe(t,e,i);switch((t==null?void 0:t.type)??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:n}=Uce;return{read:r,write:n}}}}function WSe(t,e,i){var n,s;const r=Gw(e,i);return{type:String,read:(o,a,c)=>{const d=Uk(o,a,c);return r.type===String?d:typeof r.type=="function"?new r.type({url:d}):void 0},write:{isRequired:(s=(n=r.json)==null?void 0:n.write)==null?void 0:s.isRequired,writer(o,a,c,d){if(!(d!=null&&d.resources))return typeof o=="string"?void(a[c]=yh(o,d)):void(a[c]=o.write({},d));const h=YSe(o),f=yh(h,{...d,verifyItemRelativeUrls:d!=null&&d.verifyItemRelativeUrls?{writtenUrls:d.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),m=r.type!==String&&(!rY(this)||(d==null?void 0:d.origin)&&this.originIdOf(i)>pc(d.origin)),v={object:this,propertyName:i,value:o,targetUrl:f,dest:a,targetPropertyName:c,context:d,params:t};d!=null&&d.portalItem&&f&&!qn(f)?m&&(t!=null&&t.contentAddressed)?TO(v):m?ZSe(v):JSe(v):d!=null&&d.portalItem&&(f==null||AB(f)!=null||Gy(f)||m)?TO(v):a[c]=f}}}}function TO(t){var w;const{targetUrl:e,params:i,value:r,context:n,dest:s,targetPropertyName:o}=t;if(!n.portalItem)return;const a=CB(e),c=oY(r,e,n);if(i!=null&&i.contentAddressed&&c.type!=="json")return void((w=n.messages)==null?void 0:w.push(new j("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${c.type} with content addressing. Content addressing is only supported for json resources.`,{content:c})));const d=i!=null&&i.contentAddressed&&c.type==="json"?yF(c.jsonString):(a==null?void 0:a.filename)??t0(),h=mh((i==null?void 0:i.prefix)??(a==null?void 0:a.prefix),d),f=`${h}.${SO(c)}`;if(i!=null&&i.contentAddressed&&n.resources&&c.type==="json"){const x=n.resources.toKeep.find(({resource:$})=>$.path===f)??n.resources.toAdd.find(({resource:$})=>$.path===f);if(x)return void(s[o]=x.resource.itemRelativeUrl)}const m=n.portalItem.resourceFromPath(f);Gy(e)&&n.resources&&n.resources.pendingOperations.push(Sce(e).then(x=>{m.path=`${h}.${SO({type:"blob",blob:x})}`,s[o]=m.itemRelativeUrl}).catch(()=>{}));const v=(i==null?void 0:i.compress)??!1;n.resources&&sY({...t,resource:m,content:c,compress:v,updates:n.resources.toAdd}),s[o]=m.itemRelativeUrl}function ZSe(t){const{context:e,targetUrl:i,params:r,value:n,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(i),c=oY(n,i,e),d=SO(c),h=TB(a.path),f=(r==null?void 0:r.compress)??!1;d===h?(e.resources&&sY({...t,resource:a,content:c,compress:f,updates:e.resources.toUpdate}),s[o]=i):TO(t)}function JSe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function sY({object:t,propertyName:e,updates:i,resource:r,content:n,compress:s}){const o=a=>{KSe(t,e,a)};i.push({resource:r,content:n,compress:s,finish:o})}function oY(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function YSe(t){return t==null?null:typeof t=="string"?t:t.url}function KSe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let fS=class extends Pe(Z){constructor(e){super(e),this.color=null}};l([u({type:Ue,json:{type:[nt],write:!0}})],fS.prototype,"color",void 0),fS=l([E("esri.effects.FocusAreaOutline")],fS);const QSe=fS;var mS;let kO=mS=class extends $c(de.ofType(ei)){constructor(t){super(t)}clone(){return new mS(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){var i;const e=(i=t==null?void 0:t.layer)==null?void 0:i.spatialReference;return e?this.toArray().map(r=>{var s;if(!e.equals(r.spatialReference)){if(!ia(r.spatialReference,e))return(s=t==null?void 0:t.messages)==null||s.push(new Is("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const o=new ei;BW(r,o,e),r=o}const n=r.toJSON(t);return delete n.spatialReference,n}).filter(r=>r!=null):this.toArray().map(r=>r.toJSON(t))}static fromJSON(t,e){const i=new mS;return t.forEach(r=>i.add(ei.fromJSON(r,e))),i}};kO=mS=l([E("esri.layers.support.PolygonCollection")],kO);const Ib=kO;let $l=class extends $c(hR){constructor(e){super(e),this.id=`focusarea-${t0()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new Ib}readGeometries(e,i,r){var n,s;Array.isArray(e)?this.geometries=Ib.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||((s=(n=r.hooks)==null?void 0:n.onAfterLoad)==null||s.call(n,()=>this._loadGeometries(Lh(e,r),r)))}async _loadGeometries(e,i){const r=await Ft(e,{responseType:"json"});this.geometries=Ib.fromJSON(r.data,i)}};l([u({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),u()],$l.prototype,"id",void 0),l([u({type:String,json:{write:!0}})],$l.prototype,"title",void 0),l([u({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],$l.prototype,"enabled",void 0),l([u({type:QSe,json:{write:!0}})],$l.prototype,"outline",void 0),l([u({type:Ib,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Ib(t.items.map(e=>e.clone()))}),GSe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],$l.prototype,"geometries",void 0),l([oe(["web-scene","portal-item","service"],"geometries")],$l.prototype,"readGeometries",null),$l=l([E("esri.effects.FocusArea")],$l);const XSe=$l;let Av=class extends $c(hR){constructor(e){super(e),this.areas=new de,this.style="bright"}};l([u({type:de.ofType(XSe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new de(t.items.map(e=>e.clone()))})],Av.prototype,"areas",void 0),l([u({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],Av.prototype,"style",void 0),Av=l([E("esri.effects.FocusAreas")],Av);const aY=Av;function e$e(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function t$e(t){var e,i;return!(!e$e(t)||!((i=(e=Mye(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!Cye(t)||cI(t))}const _2=()=>ie.getLogger("esri.support.basemapUtils");function i$e(){return{}}function r$e(t){for(const e in t){const i=t[e];i&&!i.destroyed&&i.destroy(),delete t[e]}}function n$e(t,e){let i;if(typeof t=="string"){const r=t in wO,n=!r&&t.includes("/");if(!r&&!n){if(TA())_2().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(wO).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");_2().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(i=e[t]),i||(i=r?sg.fromId(t):new sg({style:{id:t}}),e&&(e[t]=i))}else i=gi(sg,t);return i!=null&&i.destroyed&&(_2().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function s$e(t){return new Th({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function C_(t){for(const e of t.values())e==null||e.destroy();t.clear()}const N4={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function o$e(t){let e=null;if(typeof t=="string")if(t in N4){const i=N4[t];e=new vT({resourceInfo:{data:{layers:[i]}}})}else ie.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=gi(vT,t);return e}function IO(t,e,i){let r,n;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=IO(r.layers,e,i),n))return n}}const a$e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.layers=new de;const n=a=>{a.parent&&a.removeFromParent()},s=a=>{a.parent=this,this.layerAdded(a),a.type!=="elevation"&&a.type!=="base-elevation"||ie.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},o=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",a=>{if(a.item===this)return a.preventDefault(),void ie.getLogger(this).error("#add()","Cannot add layer to itself.");n(a.item)}),this.layers.on("after-add",a=>s(a.item)),this.layers.on("after-remove",a=>o(a.item))])}destroy(){const r=this.layers.toArray();for(const n of r)n.destroy();this.layers.destroy()}removeChildLayer(r){var n;this.layers.remove(r),(n=super.removeChildLayer)==null||n.call(this,r)}get layers(){return this._get("layers")}set layers(r){this._set("layers",to(r,this._get("layers")))}add(r,n){const s=this.layers;if(n=s.getNextIndex(n),r instanceof Qt){const o=r;o.parent===this?this.reorder(o,n):s.add(o,n)}else qr(r)?r.then(o=>{this.destroyed||this.add(o,n)}):ie.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,n){const s=this.layers;let o=s.getNextIndex(n);r.slice().forEach(a=>{a.parent!==this?(s.add(a,o),o+=1):this.reorder(a,o)})}findLayerById(r){return IO(this.layers,"id",r)}findLayerByUid(r){return IO(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,n){return this.layers.reorder(r,n)}layerAdded(r){}layerRemoved(r){}};return l([u()],i.prototype,"layers",null),i=l([E("esri.support.LayersMixin")],i),i},l$e=new Set(["feature","subtype-group"]);function EO(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=EO(s.tables,e,i);if(o)return o}}}const c$e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.tables=new de,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&s.removeFromParent(),s.parent=this,l$e.has(s.type)||ie.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const n of r)n.destroy();this.tables.destroy()}removeChildLayer(r){var n;this.tables.remove(r),(n=super.removeChildLayer)==null||n.call(this,r)}get tables(){return this._get("tables")}set tables(r){this._set("tables",to(r,this._get("tables")))}findTableById(r){return EO(this.tables,"id",r)}findTableByUid(r){return EO(this.tables,"uid",r)}};return l([u()],i.prototype,"tables",null),i=l([E("esri.support.TablesMixin")],i),i};let ma=class extends c$e(a$e(Dy)){constructor(e){super(e),this.allLayers=new Th({getCollections:()=>{var i,r,n,s;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.basemap)==null?void 0:r.groundLayers,(n=this.ground)==null?void 0:n.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new aY,this.allTables=s$e(this),this.editableLayers=new Th({getCollections:()=>[this.allLayers],itemFilterFunction:t$e}),this._basemapCache=i$e(),this.ground=new vT,this.addHandles(gn(()=>this.ground,(i,r)=>{(r==null?void 0:r.parent)===this&&(r.parent=null),i.parent=this},{sync:!0,initial:!0}))}destroy(){r$e(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Ot(this.basemap),Ot(this.ground),this._set("ground",null)}get basemap(){return this._get("basemap")}set basemap(e){this._set("basemap",n$e(e,this._basemapCache))}get ground(){return this._get("ground")}set ground(e){const i=o$e(e);i!=null&&this._set("ground",i)}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};l([u({readOnly:!0,dependsOn:[]})],ma.prototype,"allLayers",void 0),l([u({type:aY,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],ma.prototype,"focusAreas",void 0),l([u({readOnly:!0})],ma.prototype,"allTables",void 0),l([u({type:sg,useTypeForAutocast:!1,json:{read:{source:"baseMap"},write:{target:"baseMap"}},value:null})],ma.prototype,"basemap",null),l([u({readOnly:!0})],ma.prototype,"editableLayers",void 0),l([u({type:vT,useTypeForAutocast:!1,nonNullable:!0})],ma.prototype,"ground",null),l([u()],ma.prototype,"undoRedo",void 0),ma=l([E("esri.Map")],ma);const lY=ma;var Cv;const bT=Wi()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),cY=bT.jsonValues.slice();xM(cY,"orthometric");const Eb=Wi()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let tn=Cv=class extends Z{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return bT.write(t,e,i)}readHeightModel(t,e,i){return bT.read(t)||(i!=null&&i.messages&&i.messages.push(u$e(t,{context:i})),null)}readHeightUnit(t,e,i){return Eb.read(t)||(i!=null&&i.messages&&i.messages.push(D4(t,{context:i})),null)}readHeightUnitService(t,e,i){return iL(t)||Eb.read(t)||(i!=null&&i.messages&&i.messages.push(D4(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new Cv({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=nG(e);return new Cv({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new Cv;return e.read(t,{origin:"web-scene"}),e}};function D4(t,e){return new Is("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function u$e(t,e){return new Is("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}l([u({type:bT.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:cY,default:"ellipsoidal",write:{isRequired:!0}}}}})],tn.prototype,"heightModel",void 0),l([le("web-scene","heightModel")],tn.prototype,"writeHeightModel",null),l([oe(["web-scene","service"],"heightModel")],tn.prototype,"readHeightModel",null),l([u({type:Eb.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Eb.jsonValues,write:{writer:Eb.write,isRequired:!0}}}}})],tn.prototype,"heightUnit",void 0),l([oe("web-scene","heightUnit")],tn.prototype,"readHeightUnit",null),l([oe("service","heightUnit")],tn.prototype,"readHeightUnitService",null),l([u({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],tn.prototype,"vertCRS",void 0),l([oe("service","vertCRS",["vertCRS","ellipsoid","geoid"])],tn.prototype,"readVertCRS",null),tn=Cv=l([E("esri.geometry.HeightModelInfo")],tn);let Mb=class extends kb{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};l([fR({Type:qt,ensureType:gi(qt)})],Mb.prototype,"itemType",void 0),Mb=l([E("esri.support.GraphicsCollection")],Mb);let Tl=class extends Se{constructor(e){super(e),this.view=null,this.baseLayerViews=new de,this.groundLayerViews=new de,this.referenceLayerViews=new de,this._loadingHandle=ve(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},Pt)}destroy(){this._set("view",null),this._loadingHandle=Gt(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){var e;return((e=this.view)==null?void 0:e.suspended)??!0}get updating(){var i,r,n;if((i=this.view)!=null&&i.suspended)return!1;const e=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!(e!=null&&e.loaded)&&(this.baseLayerViews.some(s=>s.updating)||this.groundLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};l([u({constructOnly:!0})],Tl.prototype,"view",void 0),l([u({readOnly:!0})],Tl.prototype,"baseLayerViews",void 0),l([u({readOnly:!0})],Tl.prototype,"groundLayerViews",void 0),l([u({readOnly:!0})],Tl.prototype,"referenceLayerViews",void 0),l([u({readOnly:!0})],Tl.prototype,"suspended",null),l([u({type:Boolean,readOnly:!0})],Tl.prototype,"updating",null),Tl=l([E("esri.views.BasemapView")],Tl);const d$e=Tl;let ns=class extends Se{constructor(e){super(e),this.factor=1.5,this.offset=tr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([u({type:Number})],ns.prototype,"factor",void 0),l([u({nonNullable:!0})],ns.prototype,"offset",void 0),l([u()],ns.prototype,"position",void 0),l([u({type:Number,range:{min:0}})],ns.prototype,"size",void 0),l([u()],ns.prototype,"maskUrl",void 0),l([u()],ns.prototype,"maskEnabled",void 0),l([u()],ns.prototype,"overlayUrl",void 0),l([u()],ns.prototype,"overlayEnabled",void 0),l([u({readOnly:!0})],ns.prototype,"version",null),l([u({type:Boolean})],ns.prototype,"visible",void 0),ns=l([E("esri.views.Magnifier")],ns);const uY=ns;let Gu=class{constructor(e){this._observable=new zy,this._notifyPending=!1,this._batchDepth=0,this._map=new Map(e)}get size(){return Ve(this._observable),this._map.size}batch(e){try{this._batchDepth++,e()}finally{this._batchDepth--,this._notifyPending&&this._batchDepth===0&&(this._notifyPending=!1,this._notify())}}clear(){this._map.size>0&&(this._map.clear(),this._notify())}delete(e){const i=this._map.delete(e);return i&&this._notify(),i}entries(){return Ve(this._observable),this._map.entries()}forEach(e,i){Ve(this._observable),this._map.forEach((r,n)=>e.call(i,r,n,this),i)}get(e){return Ve(this._observable),this._map.get(e)}has(e){return Ve(this._observable),this._map.has(e)}keys(){return Ve(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._notify(),this}transformValues(e,i=this._map.keys()){this.batch(()=>{for(const r of i){if(!this._map.has(r))continue;const n=this._map.get(r),s=e(n,r);s!==n&&this.set(r,s)}})}values(){return Ve(this._observable),this._map.values()}[Symbol.iterator](){return Ve(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}_notify(){this._batchDepth>0?this._notifyPending=!0:this._observable.notify()}};var MO;let Ep=MO=class extends Z{constructor(t){super(t),this.name=null,this.code=null}clone(){return new MO({name:this.name,code:this.code})}};l([u({type:String,json:{write:{isRequired:!0}}})],Ep.prototype,"name",void 0),l([u({type:[String,Number],json:{write:{isRequired:!0}}})],Ep.prototype,"code",void 0),Ep=MO=l([E("esri.layers.support.CodedValue")],Ep);const p$e=new Ze({inherited:"inherited",codedValue:"coded-value",range:"range"});let Lu=class extends Z{constructor(e){super(e),this.name=null,this.type=null}};l([u({type:String,json:{write:!0}})],Lu.prototype,"name",void 0),l([Ie(p$e),u({json:{write:{isRequired:!0}}})],Lu.prototype,"type",void 0),Lu=l([E("esri.layers.support.Domain")],Lu);var AO,Bg;let Fu=(Bg=class extends Lu{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some(n=>(String(n.code)===r&&(i=n.name),!!i))}return i}clone(){return new AO({codedValues:V(this.codedValues),name:this.name})}},AO=Bg,Bg);l([u({type:[Ep],json:{write:{isRequired:!0}}})],Fu.prototype,"codedValues",void 0),l([Ie({codedValue:"coded-value"})],Fu.prototype,"type",void 0),Fu=AO=l([E("esri.layers.support.CodedValueDomain")],Fu);var CO,Gg;let Ab=(Gg=class extends Lu{constructor(e){super(e),this.type="inherited"}clone(){return new CO}},CO=Gg,Gg);l([Ie({inherited:"inherited"})],Ab.prototype,"type",void 0),Ab=CO=l([E("esri.layers.support.InheritedDomain")],Ab);var OO,Hg;let yp=(Hg=class extends Lu{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new OO({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},OO=Hg,Hg);l([u({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],yp.prototype,"maxValue",void 0),l([u({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],yp.prototype,"minValue",void 0),l([Ie({range:"range"})],yp.prototype,"type",void 0),yp=OO=l([E("esri.layers.support.RangeDomain")],yp);const dY={key:"type",base:Lu,typeMap:{range:yp,"coded-value":Fu,inherited:Ab}};function II(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return yp.fromJSON(t);case"codedValue":return Fu.fromJSON(t);case"inherited":return Ab.fromJSON(t)}return null}const bF=new Ze({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var PO;const h$e=new Ze({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var Wg;let cr=(Wg=class extends Z{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?h$e.fromJSON(r.fieldValueType):null}clone(){var e;return new PO({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},PO=Wg,Wg);l([u({type:String,json:{write:!0}})],cr.prototype,"alias",void 0),l([u({type:[String,Number],json:{write:{allowNull:!0}}})],cr.prototype,"defaultValue",void 0),l([u()],cr.prototype,"description",void 0),l([oe("description")],cr.prototype,"readDescription",null),l([u({types:dY,json:{read:{reader:II},write:!0}})],cr.prototype,"domain",void 0),l([u({type:Boolean,json:{write:!0}})],cr.prototype,"editable",void 0),l([u({type:nt,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],cr.prototype,"length",void 0),l([u({type:String,json:{write:!0}})],cr.prototype,"name",void 0),l([u({type:Boolean,json:{write:!0}})],cr.prototype,"nullable",void 0),l([Ie(bF)],cr.prototype,"type",void 0),l([u()],cr.prototype,"valueType",void 0),l([oe("valueType",["description"])],cr.prototype,"readValueType",null),l([u({type:Boolean,json:{read:!1}})],cr.prototype,"visible",void 0),cr=PO=l([E("esri.layers.support.Field")],cr);var RO;let Vf=RO=class extends Z{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new RO({mapLayerId:t,gdbVersion:e})}};l([Ie({mapLayer:"map-layer"}),u({json:{write:{isRequired:!0}}})],Vf.prototype,"type",void 0),l([u({type:nt,json:{write:{isRequired:!0}}})],Vf.prototype,"mapLayerId",void 0),l([u({type:String,json:{write:!0}})],Vf.prototype,"gdbVersion",void 0),Vf=RO=l([E("esri.layers.support.source.MapLayerSource")],Vf);var LO;let kl=LO=class extends Z{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new LO(s)}};l([Ie({queryTable:"query-table"}),u({json:{write:{isRequired:!0}}})],kl.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],kl.prototype,"workspaceId",void 0),l([u({type:String,json:{write:!0}})],kl.prototype,"query",void 0),l([u({type:String,json:{write:!0}})],kl.prototype,"oidFields",void 0),l([u({type:me,json:{write:!0}})],kl.prototype,"spatialReference",void 0),l([Ie(bhe)],kl.prototype,"geometryType",void 0),kl=LO=l([E("esri.layers.support.source.QueryTableDataSource")],kl);var FO;let Uf=FO=class extends Z{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new FO({workspaceId:t,dataSourceName:e})}};l([Ie({raster:"raster"}),u({json:{write:{isRequired:!0}}})],Uf.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],Uf.prototype,"dataSourceName",void 0),l([u({type:String,json:{write:!0}})],Uf.prototype,"workspaceId",void 0),Uf=FO=l([E("esri.layers.support.source.RasterDataSource")],Uf);var NO;let Qd=NO=class extends Z{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new NO({workspaceId:t,gdbVersion:e,dataSourceName:i})}};l([Ie({table:"table"}),u({json:{write:{isRequired:!0}}})],Qd.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],Qd.prototype,"workspaceId",void 0),l([u({type:String,json:{write:!0}})],Qd.prototype,"gdbVersion",void 0),l([u({type:String,json:{write:!0}})],Qd.prototype,"dataSourceName",void 0),Qd=NO=l([E("esri.layers.support.source.TableDataSource")],Qd);var DO,zO;const f$e=Wi()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ss=DO=class extends Z{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return z4()(t,e,i)}castLeftTableSource(t){return Ka(jO(),t)}readRightTableSource(t,e,i){return z4()(t,e,i)}castRightTableSource(t){return Ka(jO(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new DO(s)}};l([Ie({joinTable:"join-table"}),u({json:{write:{isRequired:!0}}})],ss.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],ss.prototype,"leftTableKey",void 0),l([u({type:String,json:{write:!0}})],ss.prototype,"rightTableKey",void 0),l([u({json:{write:!0}})],ss.prototype,"leftTableSource",void 0),l([oe("leftTableSource")],ss.prototype,"readLeftTableSource",null),l([ti("leftTableSource")],ss.prototype,"castLeftTableSource",null),l([u({json:{write:!0}})],ss.prototype,"rightTableSource",void 0),l([oe("rightTableSource")],ss.prototype,"readRightTableSource",null),l([ti("rightTableSource")],ss.prototype,"castRightTableSource",null),l([Ie(f$e)],ss.prototype,"joinType",void 0),ss=DO=l([E("esri.layers.support.source.JoinTableDataSource")],ss);let x2=null;function z4(){return x2||(x2=Ny({types:jO()})),x2}let S2=null;function jO(){return S2||(S2={key:"type",base:null,typeMap:{"data-layer":Uo,"map-layer":Vf}}),S2}const m$e={key:"type",base:null,typeMap:{"join-table":ss,"query-table":kl,raster:Uf,table:Qd}};var Zg;let Uo=(Zg=class extends Z{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new zO({fields:e,dataSource:i})}},zO=Zg,Zg);l([Ie({dataLayer:"data-layer"}),u({json:{write:{isRequired:!0}}})],Uo.prototype,"type",void 0),l([u({type:[cr],json:{write:!0}})],Uo.prototype,"fields",void 0),l([u({types:m$e,json:{write:!0}})],Uo.prototype,"dataSource",void 0),Uo=zO=l([E("esri.layers.support.source.DataLayerSource")],Uo),Uo.from=gi(Uo);let Xd=class extends Pe(Z){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};l([u({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Xd.prototype,"onFields",void 0),l([u({type:String,json:{write:!0}})],Xd.prototype,"operator",void 0),l([u({type:String,json:{write:!0}})],Xd.prototype,"searchTerm",void 0),l([u({type:String,json:{write:!0}})],Xd.prototype,"searchType",void 0),Xd=l([E("esri.rest.support.FullTextSearch")],Xd);const g$e=Xd;var VO;const j4=new Ze({upperLeft:"upper-left",lowerLeft:"lower-left"});let hu=VO=class extends Z{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new VO(V({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([u({type:Ke,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],hu.prototype,"extent",void 0),l([u({type:["view","edit"],json:{write:!0}})],hu.prototype,"mode",void 0),l([u({type:String,json:{read:j4.read,write:j4.write}})],hu.prototype,"originPosition",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],hu.prototype,"tolerance",void 0),hu=VO=l([E("esri.rest.support.QuantizationParameters")],hu);const y$e=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.geometry=null,this.outSpatialReference=null}};return l([u({types:Dh,json:{read:ta,write:!0}})],i.prototype,"geometry",void 0),l([u({type:me,json:{name:"outSR",write:!0}})],i.prototype,"outSpatialReference",void 0),l([u({type:xt,json:{write:!0}})],i.prototype,"timeExtent",void 0),i=l([E("esri.rest.support.QueryMixin")],i),i},v$e=new Ze({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var UO;const V4=new Ze({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Eo=UO=class extends Z{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=V(t))}clone(){return new UO({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:V(this.statisticParameters)})}};l([u({type:Number,json:{write:!0}})],Eo.prototype,"maxPointCount",void 0),l([u({type:Number,json:{write:!0}})],Eo.prototype,"maxRecordCount",void 0),l([u({type:Number,json:{write:!0}})],Eo.prototype,"maxVertexCount",void 0),l([u({type:String,json:{write:!0}})],Eo.prototype,"onStatisticField",void 0),l([u({type:String,json:{write:!0}})],Eo.prototype,"outStatisticFieldName",void 0),l([u({type:String,json:{read:{source:"statisticType",reader:V4.read},write:{target:"statisticType",writer:V4.write}}})],Eo.prototype,"statisticType",void 0),l([u({type:Object})],Eo.prototype,"statisticParameters",void 0),l([le("statisticParameters")],Eo.prototype,"writeStatisticParameters",null),Eo=UO=l([E("esri.rest.support.StatisticDefinition")],Eo);var gS;const b$e=new Ze({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var th;let Fe=(th=class extends y$e(Z){static from(e){return Jw(gS,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const n in e){const s=e[n];Array.isArray(s)?r[n]=s.map(o=>o instanceof Date?o.getTime():o):s instanceof Date?r[n]=s.getTime():r[n]=s}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new gS(V({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},gS=th,th.MAX_MAX_RECORD_COUNT_FACTOR=5,th);l([u({json:{write:!0}})],Fe.prototype,"aggregateIds",void 0),l([u({type:Boolean,json:{write:!0}})],Fe.prototype,"cacheHint",void 0),l([u({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"compactGeometryEnabled",void 0),l([u({json:{write:!0}})],Fe.prototype,"datumTransformation",void 0),l([ti("datumTransformation")],Fe.prototype,"castDatumTransformation",null),l([u({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"defaultSpatialReferenceEnabled",void 0),l([u({type:Number,json:{write:!0}})],Fe.prototype,"distance",void 0),l([u({type:Uo,json:{write:!0}})],Fe.prototype,"dynamicDataSource",void 0),l([u({type:String,json:{write:!0}})],Fe.prototype,"formatOf3DObjects",void 0),l([u({type:[g$e],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Fe.prototype,"fullText",void 0),l([u({type:String,json:{write:!0}})],Fe.prototype,"gdbVersion",void 0),l([u({types:Dh,json:{read:ta,write:!0}})],Fe.prototype,"geometry",void 0),l([u({type:Number,json:{write:!0}})],Fe.prototype,"geometryPrecision",void 0),l([u({type:[String],json:{write:!0}})],Fe.prototype,"groupByFieldsForStatistics",void 0),l([u({type:String,json:{write:!0}})],Fe.prototype,"having",void 0),l([u({type:Date})],Fe.prototype,"historicMoment",void 0),l([le("historicMoment")],Fe.prototype,"writeHistoricMoment",null),l([u({type:Number,json:{write:!0}})],Fe.prototype,"maxAllowableOffset",void 0),l([u({type:Number,cast:t=>t<1?1:t>Fe.MAX_MAX_RECORD_COUNT_FACTOR?Fe.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Fe.prototype,"maxRecordCountFactor",void 0),l([u({type:["xyFootprint"],json:{write:!0}})],Fe.prototype,"multipatchOption",void 0),l([u({type:Number,json:{read:{source:"resultRecordCount"}}})],Fe.prototype,"num",void 0),l([u({json:{write:!0}})],Fe.prototype,"objectIds",void 0),l([u({type:[String],json:{write:!0}})],Fe.prototype,"orderByFields",void 0),l([u({type:[String],json:{write:!0}})],Fe.prototype,"outFields",void 0),l([u({type:me,json:{name:"outSR",write:!0}})],Fe.prototype,"outSpatialReference",void 0),l([u({type:[Eo],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Fe.prototype,"outStatistics",void 0),l([u({json:{write:!0}})],Fe.prototype,"parameterValues",void 0),l([le("parameterValues")],Fe.prototype,"writeParameterValues",null),l([u({type:ze,json:{write:!0}})],Fe.prototype,"pixelSize",void 0),l([u({type:hu,json:{write:!0}})],Fe.prototype,"quantizationParameters",void 0),l([u({type:[Object],json:{write:!0}})],Fe.prototype,"rangeValues",void 0),l([u({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Fe.prototype,"relationParameter",void 0),l([u({type:String,json:{write:!0}})],Fe.prototype,"resultType",void 0),l([u({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"returnCentroid",void 0),l([u({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"returnDistinctValues",void 0),l([u({type:Boolean,json:{default:!0,write:!0}})],Fe.prototype,"returnExceededLimitFeatures",void 0),l([u({type:Boolean,json:{write:!0}})],Fe.prototype,"returnGeometry",void 0),l([u({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"returnQueryGeometry",void 0),l([u({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"returnM",void 0),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Fe.prototype,"returnZ",void 0),l([u({type:Boolean,json:{write:!0}})],Fe.prototype,"returnTrueCurves",void 0),l([u({type:me,json:{write:!0}})],Fe.prototype,"sourceSpatialReference",void 0),l([Ie(v$e,{ignoreUnknown:!1,name:"spatialRel"})],Fe.prototype,"spatialRelationship",void 0),l([u({type:Number,json:{read:{source:"resultOffset"}}})],Fe.prototype,"start",void 0),l([le("start"),le("num")],Fe.prototype,"writeStart",null),l([u({type:String,json:{write:!0}})],Fe.prototype,"sqlFormat",void 0),l([u({type:String,json:{write:!0}})],Fe.prototype,"text",void 0),l([u({type:xt,json:{write:!0}})],Fe.prototype,"timeExtent",void 0),l([u({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"timeReferenceUnknownClient",void 0),l([Ie(b$e,{ignoreUnknown:!1}),u({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],Fe.prototype,"units",void 0),l([u({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Fe.prototype,"where",void 0),l([le("where")],Fe.prototype,"writeWhere",null),Fe=gS=l([E("esri.rest.support.Query")],Fe);function Wc(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let os=class extends Dy{constructor(e){super(e),this._layerEditHandles=new de,this._selectionMap=new Gu,this._sources=new de,this._trashCan=[],this._vizTaskId=0,this.highlightEnabled=!0,this.highlightName="default",this.view=null}initialize(){this.addHandles([ve(()=>[this.view,this.highlightEnabled],()=>this._refreshVisualization()),ve(()=>this.view,e=>{e==null||e.when().then(()=>this.syncSources())},Pt),Wn(()=>this.sources,"change",e=>{var n;const i=this._selectionMap,r=[];for(const s of e.removed){const o=i.get(s);o&&(i.delete(s),(n=o.highlightHandle)==null||n.remove(),r.push({layer:s,selection:[],added:[],removed:[...o.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(Gt)}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get showHighlight(){return this.highlightEnabled}set showHighlight(e){XS(ie.getLogger(this),"showHighlight",{replacement:"highlightEnabled"}),this.highlightEnabled=e}get sources(){return this._sources}set sources(e){to(e,this._sources)}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}getSelection(e){var i;return(i=this._selectionMap.get(e))==null?void 0:i.selection}syncSources(){var n;const e=new Set,i=(n=this.view)==null?void 0:n.map;if(!i)return;const r=s=>{var o,a,c,d,h;Iye(s)?((o=s.layers)==null||o.forEach(r),(a=s.tables)==null||a.forEach(r)):kye(s)?((c=s.sublayers)==null||c.forEach(r),(d=s.subtables)==null||d.forEach(r)):Iz(s)?(h=s.sublayers)==null||h.forEach(r):Wc(s)&&e.add(s)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:n,selections:s}=this;if(!n&&r==="layerView")return ie.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e!=null&&e.length?s.filter(a=>e.includes(a.layer)):s).map(async a=>{const{layer:c,selection:d}=a;if(!d.length)return;const h=_u(c)?c.parent:c;if(h!=null){if(n&&r==="layerView"&&!U4(h)&&q4(h)){const f=await n.whenLayerView(h).catch(()=>null);if(f)return B4(f,d,i)}return B4(h,d,i)}}).filter(_r);return(await Promise.all(o)).filter(_r)}updateSelection(e){const i=new Map;for(const[s,o]of this._selectionMap)i.set(s,[...o.selection]);let r=!1;const n=e.current.concat(e.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Wc(o)||_u(o))&&a!==null){const c=Ah(i,o,()=>[]);c.includes(a)||(c.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Wc(o)||_u(o))&&a!==null){const c=i.get(o),d=c==null?void 0:c.indexOf(a);d!==void 0&&d>=0&&(c==null||c.splice(d,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[c,d]of i){const h=s.get(c);h!==void 0&&o.push(h),s.set(c,{selection:d}),a.push({layer:c,selection:d,...HN(h!==void 0?h.selection:[],d)})}this._onSelectionChange(a)}}setSelection(e,i){this._setSelection(e,i)}appendToSelection(e,i){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const s of i)n.includes(s)||n.push(s);this._setSelection(e,n)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const s of r.selection)i.includes(s)||n.push(s);this._setSelection(e,n)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const n=new Set(r.selection),s=new Set(i),o=Gre(n,s);this._setSelection(e,Array.from(o))}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var o;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,highlightEnabled:n}=this,s=this._vizTaskId;for(const a of e){const c=r.get(a),d=_u(a)?a.parent:a;if(d!=null&&q4(d)){if(U4(d))continue;i.whenLayerView(d).then(h=>{var f;(f=c==null?void 0:c.highlightHandle)==null||f.remove(),c!=null&&n&&s===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&c.selection.length>0&&(c.highlightHandle=h.highlight(c.selection,this.highlightName))}).catch(()=>{var h;(h=c==null?void 0:c.highlightHandle)==null||h.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Gt);const e=new Set(this.sources.map(i=>_u(i)?i.parent:i));for(const i of e)Wc(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",r=>this._onLayerEdit(r,i)))}_onLayerEdit(e,i){if(Iz(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach(({error:n,objectId:s})=>{s!=null&&n==null&&r.push(s)}),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){var o;const{deletedFeatures:r,edits:n,updatedFeatures:s}=e;if((o=n==null?void 0:n.updateFeatures)==null||o.forEach(a=>{var f;const c=a.getObjectId()??a.attributes[i.objectIdField];if(c==null||(f=s.find(m=>m.objectId===c))!=null&&f.error)return;const d=i.findSublayerForFeature(a);if(!Wc(d))return;const h=i.sublayers.find(m=>{var v;return!(!Wc(m)||!((v=this.getSelection(m))!=null&&v.includes(c)))});Wc(h)&&h!==d&&(this.removeFromSelection(h,[c]),this.appendToSelection(d,[c]))}),r.length){const a=[];r.forEach(({error:c,objectId:d})=>{d!=null&&c==null&&a.push(d)}),i.sublayers.forEach(c=>{Wc(c)&&this._selectionMap.has(c)&&this.removeFromSelection(c,a)})}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!_$e(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const n={layer:e,selection:[...i],...HN(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};l([u()],os.prototype,"_selectionMap",void 0),l([u()],os.prototype,"_sources",void 0),l([u({readOnly:!0,nonNullable:!0})],os.prototype,"count",null),l([u({readOnly:!0,nonNullable:!0})],os.prototype,"hasSelection",null),l([u()],os.prototype,"highlightEnabled",void 0),l([u()],os.prototype,"highlightName",void 0),l([u({readOnly:!0,nonNullable:!0})],os.prototype,"selections",null),l([u()],os.prototype,"showHighlight",null),l([u()],os.prototype,"sources",null),l([u()],os.prototype,"view",void 0),os=l([E("esri.views.SelectionManager")],os);const U4=t=>{var e;return _u(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},w$e=t=>t.layer!==void 0,q4=t=>(t==null?void 0:t.when)!==void 0,_$e=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},B4=async(t,e,i={})=>{let r;if(w$e(t)){const n=t;r=n===void 0?null:await n.queryFeatures(new Fe({...i,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const n=t;r=n===void 0?null:await n.queryFeatures(new Fe({...i,objectIds:e})).then(s=>({data:s,layer:n}))}return r},x$e=os;let Ov=class extends Pe(Se){constructor(e){super(e),this.accentColor=new Ue([255,127,0]),this.textColor=new Ue([255,255,255])}};l([u({type:Ue,nonNullable:!0})],Ov.prototype,"accentColor",void 0),l([u({type:Ue,nonNullable:!0})],Ov.prototype,"textColor",void 0),Ov=l([E("esri.views.Theme")],Ov);const qO=Ov,pY=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],hY={};function fY(t){return!!hY[t]}function S$e(t){for(const e of t)if(!fY(e))return!1;return!0}pY.forEach(t=>{hY[t]=!0});let mY=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!S$e(s))return s.some(fY)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n??wc.DEFAULT;const c=this._createUniqueGroupName(),d=new $$e(this.view,s,a,o);this._handlers.set(c,{handler:d,priority:n});for(const h of s){const f=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(c,[d],n),ct(()=>this._removeHandler(c,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},$$e=class extends rr{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,o=>n(I$e(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>n(E$e(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>n(M$e(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>n(A$e(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>n(C$e(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>n(O$e(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>n(P$e(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>n(V0(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>n(V0(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>n(V0(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>n(R$e(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>n(L$e(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>n(V0(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>n(V0(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{n(F$e(o))});break;case"focus":this.registerIncoming("focus",r,o=>{n(T$e(o))});break;case"blur":this.registerIncoming("blur",r,o=>{n(k$e(o))})}}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const c=i.pointer.native,d=i.buttons,{cancelable:h,timestamp:f}=e,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:m,pointerType:o,button:a,buttons:d,radius:i.radius,angle:Zq(i.angle),native:c,timestamp:f,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:v=>e.defer(v),preventDefault:()=>e.preventDefault()}}};function T$e(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function k$e(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function I$e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:c}=e.data,{cancelable:d,timestamp:h}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:tr(s,o),mapPoint:m1(t,s,o),eventId:c,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function E$e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:c}=e.data,{cancelable:d,timestamp:h}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:m1(t,s,o),eventId:c,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function M$e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:c}=e.data,d=a.pointerId,{cancelable:h,timestamp:f}=e;return{type:"immediate-click",pointerId:d,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:m1(t,s,o),eventId:c,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function A$e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:c}=e.data,d=a.pointerId,{cancelable:h,timestamp:f}=e;return{type:"immediate-double-click",pointerId:d,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:m1(t,s,o),eventId:c,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function C$e(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=e.data,{cancelable:c,timestamp:d}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:d,mapPoint:m1(t,s,o),cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function m1(t,e,i){return t.toMap(tr(e,i),{exclude:[]})}function O$e(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function P$e(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:n}=t;return{type:"key-up",key:e,native:i,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function V0(t,e){const{x:i,y:r,button:n,buttons:s,native:o,eventId:a}=t.data,c=o.pointerId,d=o.pointerType,{cancelable:h,timestamp:f}=t;return{type:e,x:i,y:r,pointerId:c,pointerType:d,button:n,buttons:s,native:o,timestamp:f,eventId:a,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:m=>t.defer(m),preventDefault:()=>t.preventDefault()}}function R$e(t){const{x:e,y:i,buttons:r,native:n,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,c=t.data.startEvent.native.pointerType,d=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:f,timestamp:m}=t;return{type:"pointer-drag",x:e,y:i,pointerId:a,pointerType:c,button:o,buttons:r,action:d,origin:h,native:n,timestamp:m,eventId:s,cancelable:f,stopPropagation:()=>t.stopPropagation(),defer:v=>t.defer(v),preventDefault:()=>t.preventDefault()}}function L$e(t){const{cancelable:e,data:i,timestamp:r}=t,{x:n,y:s,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:c=>t.defer(c),preventDefault:()=>t.preventDefault()}}function F$e(t){const{action:e,state:i,device:r}=t.data,{cancelable:n,timestamp:s}=t,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:c=>t.defer(c),preventDefault:()=>t.preventDefault()}}const gY="z",yY="r",vY={cancel:"Escape",complete:"Enter"},w8e={...vY,redo:yY,undo:gY,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},_8e={toggle:"Control"},x8e={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},S8e={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:XJ,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},editSourcePoints:{key:"Alt",continuePropagation:!0},undo:gY,redo:yY};let $8e=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,r=>{r.type==="key-down"&&i(r)})}addToggle(e,i){const r=N$e.fromDefinition(e,i),n=Ah(this._bindings,r.key,()=>[]);return n.push(r),ct(()=>JP(n,r))}register(e,i=wc.WIDGET){return Mh([e.on("key-down",r=>this.dispatch(e.inputManager,r),i),e.on("key-up",r=>this.dispatch(e.inputManager,r),i)])}dispatch(e,i){const r=i.key,n=this._bindings.get(r);if(n)for(const s of n)s.process(e,i)}},N$e=class BO{constructor(e,i,r,n,s){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=n,this.callback=s}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new BO(e,[],!1,!1,i);const{key:r,modifier:n,repeats:s,continuePropagation:o}=e;return new BO(r,n?Array.isArray(n)?n:[n]:[],!!s,!!o,i)}};function D$e(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return ie.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function GO(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function z$e(t){return t.type==="key-down"&&t.key===vY.cancel}function ga(t){return tr(t.x,t.y)}function bY(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?tr(e.clientX-i.left,e.clientY-i.top):tr(0,0)}function wY(t,e){return e instanceof Event?bY(t,e):ga(e)}function _Y(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let yS=class extends Se{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new Gu,this._grabbedManipulators=new Gu,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":G4(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!H4(e))break;const n=ga(e),s=ff(n,e.pointerType,i.tools);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!H4(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool,{activeTool:a}=i;if(a!=null&&!a.multiTouchEnabled&&i.multiTouchActive&&this._draggedManipulators.size===0&&this._grabbedManipulators.size>0){this.clearPointers(a,i,!0);break}if(s==null||o==null)break;const c=ga(e);c.x=Es(c.x,0,i.view.width),c.y=Es(c.y,0,i.view.height);const d=n.start,h=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,h?s.events.emit("drag",{action:"update",start:d,screenPoint:c}):s.events.emit("drag",{action:"start",start:d,screenPoint:c,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:d}));break;case"end":s.dragging=!1,h&&s.events.emit("drag",{action:"end",start:d,screenPoint:c}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=ga(e),s=ff(n,e.pointerType,i.tools);if(!j$e(e)){for(const d of i.tools)if((s==null||s.tool!==d||d.automaticManipulatorSelection)&&d.manipulators){let h=!1;d.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,h=!0)}),h&&d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const c=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:c,stopPropagation:r}),$2(o,r);break}case"click":{const n=ga(e),s=ff(n,e.pointerType,i.tools),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const n=ga(e),s=ff(n,e.pointerType,i.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),$2(o,r);break}case"immediate-double-click":{const n=ga(e),s=ff(n,e.pointerType,i.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&$2(o,r);break}}this._onFocusChange(i.tools)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:ga(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){var n;const r=(n=this._grabbedManipulators.get(e.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:ga(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>i.add(n)),this._hoveredManipulators.forEach(({tool:n})=>r.add(n));for(const n of e){n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=Gie(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:i,setActiveTool:r},n=!0,s){const o=(a,c)=>!(e!=null&&a!==e||s!=null&&s!==c);this._grabbedManipulators.forEach(({tool:a,manipulator:c,pointerType:d},h)=>{o(a,c)&&(this._grabbedManipulators.delete(h),c.grabbing=!1,c.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:d}))}),this._draggedManipulators.forEach(({tool:a,manipulator:c},d)=>{o(a,c)&&(this._draggedManipulators.delete(d),c.dragging=!1,c.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:c},d)=>{o(a,c)&&(this._hoveredManipulators.delete(d),c.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(tr(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!G4(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(ga(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){var a;let s=ff(e,r,n);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}_cursorFromMap(e,i){if(!(e!=null&&e.size))return null;for(const{manipulator:r}of e.values())if(r!=null&&r.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return i}};function ff(t,e,i){for(const r of i){if(r.manipulators==null||!GO(r))continue;const n=r.manipulators.intersect(t,e);if(n!=null)return{tool:r,manipulator:n}}return null}function G4(t){return t==="mouse"}function H4(t){return t.pointerType!=="mouse"||t.button===0}function j$e(t){return!!t.native.shiftKey}function $2(t,e){t!=null&&t.consumesClicks&&e()}l([u()],yS.prototype,"cursor",null),yS=l([E("esri.views.interactive.ToolViewManagerManipulatorState")],yS);const W4="attached",T2="tools",V$e=1e3;let ya=class extends Se{constructor(e){super(e),this._updatingHandles=new Kp,this._clock=Py,this._manipulatorState=new yS,this.tools=new de,this._interacting=!1,this._interactingTimeout=V$e,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(pY,e=>{this._handleInputEvent(e)},wc.TOOL),...D$e(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){var e;return{tools:this.tools,activeTool:this.activeTool,setActiveTool:i=>{this.activeTool=i},view:this.view,multiTouchActive:(e=this.view.inputManager)==null?void 0:e.multiTouchActive}}set activeTool(e){if(e!=null&&!this.view.ready)return void ie.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=GO(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const i of this.tools)if(i.visible&&i.cursor!=null)return i.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Gt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([ve(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(i=>i.onElevationChange(e)))],W4):this.addHandles(ve(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(W4),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const i of this.tools)i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const n of this.tools)!i&&n.visible&&n.handleInputEvent(r);!i&&z$e(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(T2);for(const e of this.tools){if(e instanceof Se){const i=ve(()=>[e.cursor,e.visible,e.editable],()=>{GO(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(i,T2)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],T2)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};l([u({constructOnly:!0,nonNullable:!0})],ya.prototype,"view",void 0),l([u({value:null})],ya.prototype,"activeTool",null),l([u({readOnly:!0,type:de})],ya.prototype,"tools",void 0),l([u()],ya.prototype,"cursor",null),l([u({readOnly:!0})],ya.prototype,"updating",null),l([u()],ya.prototype,"_interacting",void 0),l([u({readOnly:!0})],ya.prototype,"interacting",null),ya=l([E("esri.views.ToolViewManager")],ya);const U$e=new Ue("cyan"),q$e=1,B$e=.25,G$e=new Ue("black"),H$e=.4,W$e=.2,E8e=.25,xY="default",Z$e="temporary",J$e=new Ue("yellow");var HO;let as=HO=class extends Se{constructor(t){super(t),this.name=xY,this.color=U$e.clone(),this.haloColor=null,this.haloOpacity=q$e,this.fillOpacity=B$e,this.shadowColor=G$e.clone(),this.shadowOpacity=H$e,this.shadowDifference=W$e,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){var t,e;return new HO({...this,color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),shadowColor:(e=this.shadowColor)==null?void 0:e.clone()})}assignFrom(t){var e;this.color=t.color.clone(),this.haloColor=(e=t.haloColor)==null?void 0:e.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};l([u({type:String,constructOnly:!0,nonNullable:!0})],as.prototype,"name",void 0),l([u({type:Ue,nonNullable:!0})],as.prototype,"color",void 0),l([u({type:Ue})],as.prototype,"haloColor",void 0),l([u({nonNullable:!0})],as.prototype,"haloOpacity",void 0),l([u({nonNullable:!0})],as.prototype,"fillOpacity",void 0),l([u({type:Ue,nonNullable:!0})],as.prototype,"shadowColor",void 0),l([u({nonNullable:!0})],as.prototype,"shadowOpacity",void 0),l([u({nonNullable:!0})],as.prototype,"shadowDifference",void 0),l([u({nonNullable:!0})],as.prototype,"haloWidth",void 0),l([u({nonNullable:!0})],as.prototype,"haloBlur",void 0),as=HO=l([E("esri.views.support.HighlightOptions")],as);const Hu=as;function Y$e(){return new(de.ofType(Hu))([new Hu({name:xY}),new Hu({name:Z$e,color:J$e})])}const K$e={standard:.15,spacemouse:.025,unknown:0},Q$e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i");function X$e(t){return t.mapping==="standard"?"standard":Q$e.test(t.id)?"spacemouse":"unknown"}let ep=class extends Se{constructor(e){super(e),this._deviceType=null,this._gamepadIndex=null}get axisThreshold(){return K$e[this.deviceType]}get deviceType(){return this._deviceType??"unknown"}set gamepad(e){this._deviceType=X$e(e),this._gamepadIndex=e.index}get native(){return navigator.getGamepads()[this._gamepadIndex??-1]}};l([u()],ep.prototype,"_deviceType",void 0),l([u({type:Number})],ep.prototype,"axisThreshold",null),l([u({type:String})],ep.prototype,"deviceType",null),l([u({constructOnly:!0})],ep.prototype,"gamepad",null),ep=l([E("esri.views.input.gamepad.GamepadInputDevice")],ep);const wF=ep;let Pv=class extends Se{constructor(e){super(e),this.devices=new de,this.enabledFocusMode="document"}};l([u({type:de.ofType(wF),readOnly:!0})],Pv.prototype,"devices",void 0),l([u({type:["document","view","none"]})],Pv.prototype,"enabledFocusMode",void 0),Pv=l([E("esri.views.input.gamepad.GamepadSettings")],Pv);const eTe=Pv;let vS=class extends Se{constructor(e){super(e),this.gamepad=new eTe}};l([u({readOnly:!0})],vS.prototype,"gamepad",void 0),vS=l([E("esri.views.input.Input")],vS);const tTe=vS,k2=()=>u({type:["pan","rotate","zoom","none"],nonNullable:!0});let tp=class extends Se{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};l([k2()],tp.prototype,"dragPrimary",void 0),l([k2()],tp.prototype,"dragSecondary",void 0),l([k2()],tp.prototype,"dragTertiary",void 0),l([u({type:["zoom","none"],nonNullable:!0})],tp.prototype,"mouseWheel",void 0),tp=l([E("esri.views.navigation.NavigationActionMap")],tp);const _F=tp;let tu=class extends Se{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([u({type:Boolean,nonNullable:!0})],tu.prototype,"enabled",void 0),l([u({type:wF})],tu.prototype,"device",void 0),l([u({type:["pan","zoom"],nonNullable:!0})],tu.prototype,"mode",void 0),l([u({type:["forward-down","forward-up"],nonNullable:!0})],tu.prototype,"tiltDirection",void 0),l([u({type:Number,nonNullable:!0})],tu.prototype,"velocityFactor",void 0),tu=l([E("esri.views.navigation.gamepad.GamepadSettings")],tu);const SY=tu;let iu=class extends Se{constructor(e){super(e),this.actionMap=new _F,this.browserTouchPanEnabled=!0,this.gamepad=new SY,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){XS(ie.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};l([u({type:_F,nonNullable:!0})],iu.prototype,"actionMap",void 0),l([u({type:Boolean})],iu.prototype,"browserTouchPanEnabled",void 0),l([u({type:SY,nonNullable:!0})],iu.prototype,"gamepad",void 0),l([u({type:Boolean})],iu.prototype,"momentumEnabled",void 0),l([u({type:Boolean})],iu.prototype,"mouseWheelZoomEnabled",null),iu=l([E("esri.views.navigation.Navigation")],iu);const EI=iu;let MI=class{constructor(e,i){this.text=e,this.score=i}};const xF=100;let iTe=class{constructor(e,i,r){this.index=e,this.bbox=i,this.score=r}};function N8e(t){var r;const e=t.contributors,i={maxZoom:0,attributions:[]};if(!e)return i;for(const n of e){if(!((r=n.coverageAreas)!=null&&r.length)||!n.attribution)continue;const s=i.attributions.length;i.attributions.push(n.attribution);for(const o of n.coverageAreas){const a=o.bbox,c=new iTe(s,fG(a[1],a[0],a[3],a[2]),o.score??100);for(let d=o.zoomMin;d<=o.zoomMax;d++)i[d]??(i[d]=[]),i[d].push(c)}}return i.maxZoom=Math.max.apply(null,Object.keys(i).map(n=>+n).filter(n=>Number.isFinite(n))),i}function D8e(t,e,i,r){let n=(e==null?void 0:e.scaleToZoom(i))??0;if(n=Math.min(t.maxZoom??0,Math.round(n)),!r||n==null||n<=-1)return[];const s=t[n],{x:o,y:a}=Ec(r.center.clone().normalize(),me.WGS84),c=new Set;return(s==null?void 0:s.filter(d=>{const h=!c.has(d.index)&&F$(d.bbox,o,a);return h&&c.add(d.index),h}).map(d=>new MI(t.attributions[d.index],d.score)))??[]}function z8e(t){return $Y(t,"user")?new MI(t.copyright,xF):null}function j8e(t){return $Y(t)?new MI(t.copyright,xF):null}function $Y(t,e){return t!=null&&typeof t=="object"&&"copyright"in t&&typeof t.copyright=="string"&&t.copyright.length>0&&(!e||rY(t)&&t.originOf("copyright")==="user")}function V8e(t){return t!=null&&typeof t=="object"&&"hasAttributionData"in t&&t.hasAttributionData===!0&&"attributionDataUrl"in t&&"fetchAttributionData"in t&&typeof t.fetchAttributionData=="function"}function rTe(t){return t!=null&&typeof t=="object"&&"portalItem"in t&&t.portalItem!=null&&typeof t.portalItem=="object"&&"accessInformation"in t.portalItem&&typeof t.portalItem.accessInformation=="string"&&t.portalItem.accessInformation.length>0}function U8e(t){return rTe(t)?new MI(t.portalItem.accessInformation,xF):null}function nTe(t,e){const i=new globalThis.Map;for(const n of e){const s=i.get(n.text);s?n.score>s.score&&i.set(n.text,n):i.set(n.text,n)}const r=Array.from(i.values()).sort((n,s)=>s.score-n.score);return t&&Uw(t,r,(n,s)=>n.text===s.text)?t:r}function q8e(t,e,i){const r=TY(t),n=e,s=sTe(r,n,i);if(r){const o=tn.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new j("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new j("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!oTe(t)||s===4)return new j("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case 1:{const o=(r==null?void 0:r.heightUnit)||"unknown",a=(n==null?void 0:n.heightUnit)||"unknown",c=new j("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new j("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:c})}case 2:{const o=(r==null?void 0:r.heightModel)||"unknown",a=(n==null?void 0:n.heightModel)||"unknown",c=new j("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new j("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:c})}case 3:{const o=(r==null?void 0:r.vertCRS)||"unknown",a=(n==null?void 0:n.vertCRS)||"unknown",c=new j("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new j("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:c})}}return null}function sTe(t,e,i){if(!Z4(t)||!Z4(e))return 4;if(t==null||e==null)return 0;if(!i&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function Z4(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function oTe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!EY(t)}function TY(t){var r;if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?Xa(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&kY(t)&&t.heightModelInfo?t.heightModelInfo:EY(t)?tn.deriveUnitFromSR(lTe,t.spatialReference):null}function kY(t){return"heightModelInfo"in t}function IY(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function EY(t){return IY(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):MY(t)}function aTe(t){return t.layers!=null||MY(t)||IY(t)||kY(t)}function MY(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const lTe=new tn({heightModel:"gravity-related-height"});let WO,I2=null;async function cTe(t){I2||(I2=Q(()=>import("./geometryServiceUtils-Bt8jFt1p.js"),[],import.meta.url).then(e=>WO=e)),await I2,Lt(t)}async function AY(t,e,i,r){if(!t)return null;const n=t.spatialReference;return Ic()||ia(n,e)?Ec(t,e):WO?WO.projectGeometry(t,e,i,r):(await Promise.race([cTe(r),nd(r)]),AY(t,e,i,r))}async function B8e(t,e){try{return t!=null&&t.spatialReference?await jW(t,e):null}catch{return null}}let Dt=class extends Se{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ch(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,s,o,a;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.groundLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(o=e==null?void 0:e.ground)==null?void 0:o.layers},{parent:e==null?void 0:e.basemap,layers:(a=e==null?void 0:e.basemap)==null?void 0:a.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,n);s!=null&&(e=s)}return(e==null?void 0:e.length)===1})&&(e==null?void 0:e.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o,a;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=(s=this.map)==null?void 0:s.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.baseLayers},{parent:e==null?void 0:e.basemap,layers:(a=e==null?void 0:e.basemap)==null?void 0:a.groundLayers},{layers:e==null?void 0:e.layers}],c=>{var d;return!(!("tileInfo"in c)||!((d=c.tileInfo)!=null&&d.spatialReference.equals(i)))&&(r=c,!0)},c=>"tileInfo"in c);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,n=>{var o,a;const s=TY(n);return!!s&&(e={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=n.spatialReference)==null?void 0:a.latestVcsWkid},!0)},n=>aTe(n));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of n)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=ch(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:u1(async s=>{try{const o=await AY(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Ur(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const n of e)for(const s of i){if(!n.spatialReference.equals(s.spatialReference))continue;const o=dTe(n.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:n.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport(n,e);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:c}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:c})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new uTe(r,i);for(const o of e)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{hr(i)}),"loading"):e.loadStatus:"loaded"}};l([u()],Dt.prototype,"required",void 0),l([u({constructOnly:!0})],Dt.prototype,"map",void 0),l([u({constructOnly:!0})],Dt.prototype,"getSpatialReferenceSupport",void 0),l([u()],Dt.prototype,"defaultSpatialReference",void 0),l([u()],Dt.prototype,"userSpatialReference",void 0),l([u()],Dt.prototype,"sourcePreloadCount",void 0),l([u()],Dt.prototype,"priorityCollection",void 0),l([u()],Dt.prototype,"requiresExtentInSpatialReference",void 0),l([u()],Dt.prototype,"suspended",void 0),l([u({readOnly:!0})],Dt.prototype,"ready",null),l([u({readOnly:!0})],Dt.prototype,"heightModelInfoReady",null),l([u({readOnly:!0})],Dt.prototype,"spatialReference",null),l([u({readOnly:!0})],Dt.prototype,"extent",null),l([u({readOnly:!0})],Dt.prototype,"heightModelInfo",null),l([u({readOnly:!0})],Dt.prototype,"vcsWkid",null),l([u({readOnly:!0})],Dt.prototype,"latestVcsWkid",null),l([u({readOnly:!0})],Dt.prototype,"viewingMode",null),l([u({readOnly:!0})],Dt.prototype,"tileInfo",null),l([u({readOnly:!0})],Dt.prototype,"mapCollections",null),l([u({readOnly:!0})],Dt.prototype,"_spatialReferenceTask",null),l([u({readOnly:!0})],Dt.prototype,"_tileInfoTask",null),l([u({readOnly:!0})],Dt.prototype,"_heightModelInfoTask",null),l([u({readOnly:!0})],Dt.prototype,"_extentCandidatesTask",null),l([u()],Dt.prototype,"_extentTask",null),l([u()],Dt.prototype,"_projectExtentTask",void 0),Dt=l([E("esri.views.support.DefaultsFromMap")],Dt);let uTe=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function dTe(t,e){return t!=null?e!=null?t===e&&t:t:e}function pTe(t){return"tryRecycleWith"in t}let hTe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=Gn(),this.promise=this._deferred.promise,io(this._controller.signal,()=>{var s,o;(s=this._recycleController)==null||s.abort();const n=new j("cancelled:layerview-create","layerview creation cancelled",{layer:e});(o=this._deferred)==null||o.reject(n)})}tryRecycle(e){var n;if(!this.done||!this.layerView||!pTe(this.layerView))return null;(n=this._recycleController)==null||n.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const o=e[s];if(o.type!==i)continue;const a=this.layerView.tryRecycleWith(o,{signal:r});if(a){e.splice(s,1),this.layer=o;const c=this.layerView,d=c.view;return this.promise=a.then(()=>(Lt(r),o.emit("layerview-destroy",{view:d,layerView:c}),d.emit("layerview-destroy",{view:d,layerView:c,layer:void 0}),o.emit("layerview-create",{view:d,layerView:c}),d.emit("layerview-create",{view:d,layerView:c,layer:void 0}),c)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){var n,s,o,a,c;const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let d,h;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),fTe(r))d=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new j("layer:view-not-supported","No layerview implementation was found");const v=await this.layerViewImporter.importLayerView(r);Lt(i),d="default"in v?new v.default({layer:r,view:e}):new v({layer:r,view:e})}const f=()=>{h=Gt(h),d.destroyed||d.destroy(),this.done=!0};h=io(i,f),Lt(i);try{await d.when()}catch(v){throw f(),v}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return f(),void((o=this._deferred)==null?void 0:o.reject(new j("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r})));this.layerView=d,r.emit("layerview-create",{view:e,layerView:d}),e.emit("layerview-create",{layer:r,layerView:d}),this.done=!0,(a=this._deferred)==null||a.resolve(d)}catch(d){r.emit("layerview-create-error",{view:e,error:d}),e.emit("layerview-create-error",{layer:r,error:d}),this.done=!0,(c=this._deferred)==null||c.reject(new j("layerview:create-error","layerview creation failed",{layer:r,error:d}))}}};function fTe(t){return t.createLayerView!==Qt.prototype.createLayerView}function mTe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let _n=class extends Se{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Kp,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r,n;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const s of i)((n=this.layerViewFilter)==null?void 0:n.call(this,s))!==!1&&this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Gn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Ly(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var h,f,m,v;if(this.destroyed)return;const{map:i}=this.view;if(!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=w=>{var x;if(w!=null){for(const $ of w)if($){if(((x=this.layerViewFilter)==null?void 0:x.call(this,$))===!1)continue;r.add($);const T=this._layerLayerViewInfoMap.get($);T&&s?T.start():T||this._recyclingInfoMap.has($)||n.push($),"layers"in $&&$.layers&&o($.layers)}}};for(const w of this._rootCollectionNames)o(un(this,w));const a=new Array,c=w=>{const x=w.tryRecycle(n);x?(this._recyclingInfoMap.set(w.layer,w),this.notifyChange("updating"),x.then(()=>{this._recyclingInfoMap.delete(w.layer),this._layerLayerViewInfoMap.set(w.layer,w),this._reschedule(),this.notifyChange("updating")}).catch($=>{hr($)||(this._recyclingInfoMap.delete(w.layer),w.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(w)};for(const w of this._layerLayerViewInfoMap.values())r.has(w.layer)||(this._layerLayerViewInfoMap.delete(w.layer),c(w));for(const w of this._recyclingInfoMap.values())r.has(w.layer)||(this._recyclingInfoMap.delete(w.layer),c(w));for(const w of n)this._createLayerView(w);this._refreshCollections(),a.forEach(w=>w.destroy());const d=[(h=i==null?void 0:i.ground)==null?void 0:h.layers,(f=i==null?void 0:i.basemap)==null?void 0:f.baseLayers,(m=i==null?void 0:i.basemap)==null?void 0:m.groundLayers,(v=i==null?void 0:i.basemap)==null?void 0:v.referenceLayers,i==null?void 0:i.layers].filter(w=>!!w);r.forEach(w=>"layers"in w&&d.push(w.layers)),this.addHandles(d.map(w=>this._watchUpdatingTracking.addOnCollectionChange(()=>w,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([Wn(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ve(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),wr)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),C_(this._recyclingInfoMap),C_(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(gt()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||one(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),C_(this._layerLayerViewInfoMap),C_(this._recyclingInfoMap))}async whenLayerView(e){var r,n;await this._reschedule();const i=(r=this._layerLayerViewInfoMap.get(e))==null?void 0:r.promise;if(!i){const s=(n=this._recyclingInfoMap.get(e))==null?void 0:n.promise;if(!s)throw new j("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return s}return i}isCreatingLayerViewsForLayer(e,i){var s;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!(r!=null&&r.done))return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in e&&((s=e.layers)!=null&&s.length))&&e.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}isRecyclingLayerViewForLayer(e){return this._recyclingInfoMap.has(e)}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(un(this,e),un(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){var e;for(const i of this._layersToLayerViews.values())(e=un(this,i))==null||e.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i==null?void 0:i.removeAll());let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const{layerView:a}=o;a.layer=s,a.parent=r,i.at(n)!==a&&i.splice(n,0,a),"layers"in s&&mTe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),++n}n<i.length&&i.splice(n)}_createLayerView(e){var r;e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new hTe(e,this.view,this.layerViewImporter);(r=i.promise)==null||r.then(()=>this._refreshCollections(),n=>{n&&(hr(n)||n.name==="cancelled:layerview-create")||ie.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([u()],_n.prototype,"_workPromise",void 0),l([u({readOnly:!0})],_n.prototype,"_watchUpdatingTracking",void 0),l([u({readOnly:!0})],_n.prototype,"_layersToLayerViews",void 0),l([u({constructOnly:!0})],_n.prototype,"layerviewMapping",void 0),l([u({readOnly:!0})],_n.prototype,"_rootCollectionNames",null),l([u({constructOnly:!0})],_n.prototype,"layerViewFilter",void 0),l([u()],_n.prototype,"layerViewImporter",void 0),l([u()],_n.prototype,"supportsGround",void 0),l([u({readOnly:!0})],_n.prototype,"updating",null),l([u({readOnly:!0})],_n.prototype,"updatingRemaining",null),l([u({constructOnly:!0})],_n.prototype,"view",void 0),_n=l([E("esri.views.support.LayerViewManager")],_n);const gTe=_n;let qf=class extends Se{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};l([u()],qf.prototype,"featureTitleFields",void 0),l([u()],qf.prototype,"utilityNetworkFields",void 0),l([u()],qf.prototype,"globalIdField",void 0),qf=l([E("esri.views.support.RequiredFieldsOptions")],qf);const yTe=qf;var Bf,Ku;let Ce=(Ku=class extends Ik(vL){constructor(e){super(e),this._userSpatialReference=null,this.handles=new Ay,this.updatingHandles=new Kp,this.allLayerViews=new Th({getCollections:()=>this.layerviewCollections,getChildrenFunction:bTe}),this.analyses=new Sy,this.animationsEnabled=!0,this.attributionVisible=!0,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new Mb,this.typeSpecificPreconditionsReady=!0,this.layerViews=new de,this.magnifier=new uY,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new de,this._highPriorityCursorHandles=new de,this.input=new tTe,this.navigation=new EI,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new mY(this),this.persistableViewModels=new de,this.requiredFieldsOptions=new yTe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ve(()=>this.preconditionsReady,i=>{var n,s,o,a;const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Bf.views.add(this)):(this._lockedSpatialReference=null,Bf.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)(n=this.toolViewManager)==null||n.detach(),(s=this.analysisViewManager)==null||s.detach(),(o=this.layerViewManager)==null||o.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(c){return void queueMicrotask(()=>{this.fatalError=new j("view:startup-error","View._startup failed",c)})}(a=this.analysisViewManager)==null||a.attach(),this.toolViewManager.attach()}},pr))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,jk(()=>this.ready)))),this.basemapView=new d$e({view:this}),this.layerViewManager=new gTe({view:this,layerViewFilter:e=>{var i;return((i=this.layerViewFilter)==null?void 0:i.call(this,e))??!0},layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new ya({view:this}),this.selectionManager=new x$e({view:this}),this.addHandles([gn(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{ie.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),ve(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},wr),ve(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},pr),ve(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},wr)])}get _layerToLayerviewMapping(){return Bf._layerToLayerview}destroy(){this.destroyed||(Bf.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ot(this.graphics),this.analyses=Ot(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=Ot(this.analysisViewManager),this.toolViewManager=Ot(this.toolViewManager),this.layerViewManager=Ot(this.layerViewManager),this.selectionManager=Ot(this.selectionManager),this.basemapView=Ot(this.basemapView),this.layerViews.destroyAll(),this.invalidate(),this.handles.destroy(),this.map=Ot(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return ie.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.basemapView)==null?void 0:i.groundLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get attributionItems(){return this.suspended?[]:nTe(this._get("attributionItems"),this.getAttributionItems())}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Dt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??Y$e()}set highlights(e){this._set("highlights",to(e,this._get("highlights"),de.ofType(Hu)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||DA(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(ie.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),DA(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,i,r,n;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,o=this.map.ground.loaded,a=((i=this.map.basemap)==null?void 0:i.loaded)??!0;return s&&a&&o&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=u1(c=>h9(B("view-readyState-waiting-delay"),null,c)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(n=this._readyStateWaitingTask)!=null&&n.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=ch(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var i,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(i=this.defaultsFromMap)==null?void 0:i.required)!=null&&r.heightModelInfo)){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const i=!Hi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ro}set timeZone(e){this._userTimeZone=e,xle(e)||ie.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e,i,r;return((e=this.toolViewManager)==null?void 0:e.cursor)??((i=this._highPriorityCursorHandles.at(-1))==null?void 0:i.cursor)??((r=this._lowPriorityCursorHandles.at(-1))==null?void 0:r.cursor)??"default"}acquireCursor(e,i="low"){const r=i==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,n={cursor:e},s=ct(()=>r.remove(n));return r.add(n),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new qO}whenLayerView(e){var i;return((i=this.layerViewManager)==null?void 0:i.whenLayerView(e))??Promise.reject()}getAttributionItems(){return this.allLayerViews.items.flatMap(e=>e.attributionItems)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new j("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&ie.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(gn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,i){return super.on(e,i)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const n=document.createElement("div");n.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",n.setAttribute("style","font-size: 18px;");const s=document.createElement("a");s.innerHTML="https://esriurl.com/webgl-faq",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/webgl-faq",i.appendChild(r),i.appendChild(n),i.appendChild(s);const o=this.getSurface();throw o&&o.appendChild(i),e}}},Bf=Ku,Ku._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],Ku.views=new de,Ku);l([u()],Ce.prototype,"_userSpatialReference",void 0),l([u()],Ce.prototype,"activeTool",null),l([u({readOnly:!0})],Ce.prototype,"allLayerViews",void 0),l([u({readOnly:!0})],Ce.prototype,"layerviewCollections",null),l([u(uO(Sy,"analyses"))],Ce.prototype,"analyses",void 0),l([u()],Ce.prototype,"animation",null),l([u()],Ce.prototype,"animationsEnabled",void 0),l([u({readOnly:!0})],Ce.prototype,"attributionItems",null),l([u()],Ce.prototype,"attributionVisible",void 0),l([u()],Ce.prototype,"basemapView",void 0),l([u()],Ce.prototype,"center",null),l([u()],Ce.prototype,"defaultsFromMapSettings",null),l([u()],Ce.prototype,"defaultsFromMap",null),l([u()],Ce.prototype,"dependencies",void 0),l([u()],Ce.prototype,"displayFilterEnabled",void 0),l([u({type:Ke})],Ce.prototype,"extent",null),l([u()],Ce.prototype,"fatalError",void 0),l([u(uO(Mb,"graphics"))],Ce.prototype,"graphics",void 0),l([u({readOnly:!0,type:tn})],Ce.prototype,"heightModelInfo",null),l([u({type:de.ofType(Hu)})],Ce.prototype,"highlights",null),l([u({readOnly:!0})],Ce.prototype,"interacting",null),l([u({constructOnly:!0})],Ce.prototype,"layerViewFilter",void 0),l([u({readOnly:!0})],Ce.prototype,"navigating",null),l([u({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ce.prototype,"preconditionsReady",null),l([u({readOnly:!0})],Ce.prototype,"typeSpecificPreconditionsReady",void 0),l([u({type:de,readOnly:!0})],Ce.prototype,"layerViews",void 0),l([u()],Ce.prototype,"resolution",null),l([u({type:uY})],Ce.prototype,"magnifier",void 0),l([u({value:null,type:lY})],Ce.prototype,"map",null),l([u()],Ce.prototype,"padding",void 0),l([u({readOnly:!0})],Ce.prototype,"ready",void 0),l([u()],Ce.prototype,"_readyStateWaitingTask",void 0),l([u({readOnly:!0})],Ce.prototype,"readyState",null),l([u({type:me})],Ce.prototype,"spatialReference",null),l([u()],Ce.prototype,"stationary",null),l([u({type:xt})],Ce.prototype,"timeExtent",null),l([u({type:String,nonNullable:!0})],Ce.prototype,"timeZone",null),l([u()],Ce.prototype,"tools",null),l([u()],Ce.prototype,"toolViewManager",void 0),l([u({readOnly:!0})],Ce.prototype,"type",void 0),l([u({type:Number})],Ce.prototype,"scale",void 0),l([u({readOnly:!0})],Ce.prototype,"updating",void 0),l([u({readOnly:!0})],Ce.prototype,"initialExtentRequired",void 0),l([u({readOnly:!0})],Ce.prototype,"initialExtent",null),l([u()],Ce.prototype,"cursor",null),l([u({readOnly:!0})],Ce.prototype,"input",void 0),l([u({type:EI,nonNullable:!0})],Ce.prototype,"navigation",void 0),l([u()],Ce.prototype,"layerViewManager",void 0),l([u()],Ce.prototype,"analysisViewManager",void 0),l([u()],Ce.prototype,"selectionManager",void 0),l([u()],Ce.prototype,"width",void 0),l([u()],Ce.prototype,"height",void 0),l([u({readOnly:!0})],Ce.prototype,"resizing",void 0),l([u({value:null,readOnly:!0})],Ce.prototype,"size",null),l([u({readOnly:!0})],Ce.prototype,"suspended",void 0),l([u({readOnly:!0})],Ce.prototype,"viewEvents",void 0),l([u({readOnly:!0})],Ce.prototype,"persistableViewModels",void 0),l([u()],Ce.prototype,"_isValid",void 0),l([u()],Ce.prototype,"_readyCycleForced",void 0),l([u()],Ce.prototype,"_lockedSpatialReference",void 0),l([u()],Ce.prototype,"_userTimeZone",void 0),l([u()],Ce.prototype,"_lockedTimeZone",void 0),l([u()],Ce.prototype,"_userTimeExtent",void 0),l([u()],Ce.prototype,"_lockedTimeExtent",void 0),l([u({type:qO})],Ce.prototype,"theme",void 0),l([u({readOnly:!0,type:qO})],Ce.prototype,"effectiveTheme",null),Ce=Bf=l([E("esri.views.View")],Ce);const E2=globalThis.$arcgis;E2&&!E2.views&&Object.defineProperty(E2,"views",{configurable:!1,enumerable:!0,writable:!1,value:Ce.views});const vTe=Ce;function bTe(t){return t.layerViews}function mi(){return[0,0]}function wTe(t){return[t[0],t[1]]}function g1(t,e){return[t,e]}function _Te(t,e){return[t,e]}function xTe(t,e=mi()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function CY(){return mi()}function OY(){return g1(1,1)}function PY(){return g1(1,0)}function RY(){return g1(0,1)}const STe=CY(),$Te=OY(),TTe=PY(),kTe=RY();Object.freeze(Object.defineProperty({__proto__:null,ONES:$Te,UNIT_X:TTe,UNIT_Y:kTe,ZEROS:STe,clone:wTe,create:mi,freeze:_Te,fromArray:xTe,fromValues:g1,ones:OY,unitX:PY,unitY:RY,zeros:CY},Symbol.toStringTag,{value:"Module"}));function ITe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function LY(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function ETe(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function SF(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5];let c=i*s-r*n;return c?(c=1/c,t[0]=s*c,t[1]=-r*c,t[2]=-n*c,t[3]=i*c,t[4]=(n*a-s*o)*c,t[5]=(r*o-i*a)*c,t):null}function MTe(t){return t[0]*t[3]-t[1]*t[2]}function FY(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=i[0],h=i[1],f=i[2],m=i[3],v=i[4],w=i[5];return t[0]=r*d+s*h,t[1]=n*d+o*h,t[2]=r*f+s*m,t[3]=n*f+o*m,t[4]=r*v+s*w+a,t[5]=n*v+o*w+c,t}function y1(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=Math.sin(i),h=Math.cos(i);return t[0]=r*h+s*d,t[1]=n*h+o*d,t[2]=r*-d+s*h,t[3]=n*-d+o*h,t[4]=a,t[5]=c,t}function AI(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=i[0],h=i[1];return t[0]=r*d,t[1]=n*d,t[2]=s*h,t[3]=o*h,t[4]=a,t[5]=c,t}function $y(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],c=e[5],d=i[0],h=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*d+s*h+a,t[5]=n*d+o*h+c,t}function NY(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function DY(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function $F(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ATe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function CTe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function OTe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function zY(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function PTe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function RTe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function LTe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function FTe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],c=e[0],d=e[1],h=e[2],f=e[3],m=e[4],v=e[5],w=fn();return Math.abs(i-c)<=w*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-d)<=w*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-h)<=w*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-f)<=w*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=w*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-v)<=w*Math.max(1,Math.abs(a),Math.abs(v))}const NTe=FY,DTe=zY;Object.freeze(Object.defineProperty({__proto__:null,add:OTe,copy:ITe,determinant:MTe,equals:FTe,exactEquals:LTe,frob:CTe,fromRotation:NY,fromScaling:DY,fromTranslation:$F,identity:LY,invert:SF,mul:NTe,multiply:FY,multiplyScalar:PTe,multiplyScalarAndAdd:RTe,rotate:y1,scale:AI,set:ETe,str:ATe,sub:DTe,subtract:zY,translate:$y},Symbol.toStringTag,{value:"Module"}));function Ja(){return[1,0,0,1,0,0]}function zTe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function jTe(t,e,i,r,n,s){return[t,e,i,r,n,s]}const VTe=Ja();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:VTe,clone:zTe,create:Ja,fromValues:jTe},Symbol.toStringTag,{value:"Module"}));const O_={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new hi({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:me.WebMercator}),minus180Line:new hi({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:me.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new hi({paths:[[[180,-180],[180,180]]],spatialReference:me.WGS84}),minus180Line:new hi({paths:[[[-180,-180],[-180,180]]],spatialReference:me.WGS84})}};function Mp(t,e){return Math.ceil((t-e)/(2*e))}function jY(t,e){const i=Cb(t);for(const r of i)for(const n of r)n[0]+=e;return t}function Cb(t){return Ym(t)?t.rings:t.paths}function UTe(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function VY(t){return typeof t=="string"?zi(t):V(t)}function qTe(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[n]=s.map(o=>qTe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i==null?void 0:i[n]);r[n]=e?o:JSON.stringify(o)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function BTe(t,e){var i;return t?e&&YR(t)?e:JR(t)??((i=We==null?void 0:We.findCredential(t))==null?void 0:i.token):null}async function Y8e(t,e,i){const r=BTe(t,e);if(r)return r;!We&&Qe.request.useIdentity&&await Q(()=>import("./IdentityManager-GEkCpU5v.js"),[],import.meta.url);const n=await We.getCredential(t,i);return n==null?void 0:n.token}async function GTe(t,e,i,r){const n=VY(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...n.query,f:"json",sr:O$(s),target:JSON.stringify({geometryType:Wy(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await Ft(n.path+"/cut",o),{cutIndexes:c,geometries:d=[]}=a.data;return{cutIndexes:c,geometries:d.map(h=>{const f=ta(h);return f.spatialReference=s,f})}}function HTe(t){return{geometryType:Wy(t[0]),geometries:t.map(e=>e.toJSON())}}function UY(t,e,i){const r=vhe(e);return t.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}async function WTe(t,e,i){const r=typeof t=="string"?zi(t):t,n=e[0].spatialReference,s=Wy(e[0]),o={...i,query:{...r.query,f:"json",sr:O$(n),geometries:JSON.stringify(HTe(e))}},{data:a}=await Ft(r.path+"/simplify",o);return UY(a.geometries,s,n)}const qY=()=>ie.getLogger("esri.geometry.support.normalizeUtils");function ZTe(t){return t.type==="polygon"}function JTe(t){return t[0].type==="polygon"}function YTe(t){return t[0].type==="polyline"}function J4(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function KTe(t,e){if(!(t instanceof hi||t instanceof ei)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw qY().error(n),new j("internal:geometry",n)}const i=Cb(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],c=n[o][1],d=n[o+1][0],h=n[o+1][1],f=Math.sqrt((d-a)*(d-a)+(h-c)*(h-c)),m=(h-c)/f,v=(d-a)/f,w=f/e;if(w>1){for(let C=1;C<=w-1;C++){const P=C*e,L=v*P+a,D=m*P+c;s.push([L,D])}const x=(f+Math.floor(w-1)*e)/2,$=v*x+a,T=m*x+c;s.push([$,T])}s.push([d,h])}}return ZTe(t)?new ei({rings:r,spatialReference:t.spatialReference}):new hi({paths:r,spatialReference:t.spatialReference})}function Y4(t,e,i){if(e){const r=KTe(t,1e6);t=Pm(r,!0)}return i&&(t=jY(t,i)),t}function K4(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=Mp(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=Mp(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=Mp(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=Mp(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function QTe(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],o=Cb(s);for(let a=0;a<o.length;a++){const c=o[a];c.some(d=>{if(d[0]<180)return!0;{let h=0;for(let m=0;m<c.length;m++){const v=c[m][0];h=v>h?v:h}h=Number(h.toFixed(9));const f=-360*Mp(h,180);for(let m=0;m<c.length;m++){const v=s.getPoint(a,m);s.setPoint(a,m,v.clone().offset(f,0))}return!0}})}if(n===i){if(JTe(t))for(const a of Cb(s))t[n]=t[n].addRing(a);else if(YTe(t))for(const a of Cb(s))t[n]=t[n].addPath(a)}else i=n,t[n]=s}return t}async function XTe(t,e,i){if(!Array.isArray(t))return XTe([t],e);e&&typeof e!="string"&&qY().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Qe.geometryServiceUrl;let n,s,o,a,c,d,h,f,m=0;const v=[],w=[];for(const L of t)if(L!=null)if(n||(n=L.spatialReference,s=hn(n),o=n.isWebMercator,d=o?102100:4326,a=O_[d].maxX,c=O_[d].minX,h=O_[d].plus180Line,f=O_[d].minus180Line),s)if(L.type==="mesh")w.push(L);else if(L.type==="point")w.push(K4(L.clone(),a,c));else if(L.type==="multipoint"){const D=L.clone();D.points=D.points.map(q=>K4(q,a,c)),w.push(D)}else if(L.type==="extent"){const D=L.clone()._normalize(!1,!1,s);w.push(D.rings?new ei(D):D)}else if(L.extent){const D=L.extent,q=Mp(D.xmin,c)*(2*a);let F=q===0?L.clone():jY(L.clone(),q);D.offset(q,0);let{xmin:ee,xmax:ae}=D;ee=Number(ee.toFixed(9)),ae=Number(ae.toFixed(9)),D.intersects(h)&&ae!==a?(m=ae>m?ae:m,F=Y4(F,o),v.push(F),w.push("cut")):D.intersects(f)&&ee!==c?(m=ae*(2*a)>m?ae*(2*a):m,F=Y4(F,o,360),v.push(F),w.push("cut")):w.push(F)}else w.push(L.clone());else w.push(L);else w.push(L);let x=Mp(m,a),$=-90;const T=x,C=new hi;for(;x>0;){const L=360*x-180;C.addPath([[L,$],[L,-1*$]]),$*=-1,x--}if(v.length>0&&T>0){const L=QTe(v,await GTe(r,v,C,i)),D=[],q=[];for(let ae=0;ae<w.length;ae++){const ne=w[ae];if(ne!=="cut")q.push(ne);else{const ue=L.shift(),X=t[ae];X!=null&&X.type==="polygon"&&X.rings&&X.rings.length>1&&ue.rings.length>=X.rings.length?(D.push(ue),q.push("simplify")):q.push(o?Bp(ue):ue)}}if(!D.length)return q;const F=await WTe(r,D,i),ee=[];for(let ae=0;ae<q.length;ae++){const ne=q[ae];ne!=="simplify"?ee.push(ne):ee.push(o?Bp(F.shift()):F.shift())}return ee}const P=[];for(let L=0;L<w.length;L++){const D=w[L];if(D!=="cut")P.push(D);else{const q=v.shift();P.push(o===!0?Bp(q):q)}}return P}function eke(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&hn(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:o}=e;let a,{xmin:c,xmax:d}=e;if([c,d]=[d,c],t.type==="extent"||o===0||o<=n||o>s||c<r||d>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=J4(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=J4(t.paths);break;case"multipoint":a=t.points}const h=e.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=n,d=Math.max(m,d)):(m-=n,c=Math.min(m,c))}return h.xmin=c,h.xmax=d,h.width<o?(h.xmin-=n,h.xmax-=n,h):e}function TF(t,e,i){const r=hn(i);if(r==null)return t;const[n,s]=r.valid,o=2*s;let a=0,c=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<n&&(a=-Math.ceil(Math.abs(e-n)/o)),t>s?c=Math.ceil(Math.abs(t-s)/o):t<n&&(c=-Math.ceil(Math.abs(t-n)/o));let d=t+(a-c)*o;const h=d-e;return h>s?d-=o:h<n&&(d+=o),d}function K8e(t,e){const i=kF(e);return(i==null?void 0:i.normalize(t))??t}function kF(t){const e=hn(t);if(e==null)return null;const[i,r]=e.valid;return new SI(i,r)}const Q8e=kF(me.WGS84);kF(me.WebMercator);const BY=96,GY=39.37,tke=180/Math.PI;function HY(t){return t.wkid?t:t.spatialReference||me.WGS84}function IF(t,e){return e.type?dr(t,e.x,e.y):Zm(t,e)}function WY(t){return so(t)}function CI(t,e,i=0){let r=t.width,n=t.height;if(i!==0){const a=e1(i),c=Math.abs(Math.cos(a)),d=Math.abs(Math.sin(a));r=t.width*c+t.height*d,n=t.width*d+t.height*c}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,n/o)*cke(t.spatialReference)}async function Rv(t,e,i,r){var a,c,d;let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(de.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const h=t.every(v=>"attributes"in v),f=t.some(v=>!v.geometry);let m=t;if(h&&f&&e&&e.allLayerViews){const v=new Map;for(const T of t){const C=T.layer,P=v.get(C)||[],L=T.attributes[C.objectIdField];L!=null&&P.push(L),v.set(C,P)}const w=[];v.forEach((T,C)=>{var L;const P=(L=e.allLayerViews)==null?void 0:L.find(D=>D.layer.id===C.id);if(P&&"queryFeatures"in P){const D=C.createQuery();D.objectIds=T,D.returnGeometry=!0,w.push(P.queryFeatures(D))}});const x=await Promise.all(w),$=[];for(const T of x)if(T&&T.features&&T.features.length)for(const C of T.features)C.geometry!=null&&$.push(C.geometry);m=$}for(const v of m)r=await Rv(v,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new ze(t);else if(t instanceof Xi)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const h=t.layer,f=(a=e.allLayerViews)==null?void 0:a.find(m=>m.layer.id===h.id);if(f&&"queryFeatures"in f){const m=h.createQuery();m.objectIds=[t.attributes[h.objectIdField]],m.returnGeometry=!0;const v=await f.queryFeatures(m);n=(d=(c=v==null?void 0:v.features)==null?void 0:c[0])==null?void 0:d.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Ke({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=eke(n);break;default:s=n.extent}if(!s)return null;Ic()||ia(s.spatialReference,i)||await nd();const o=Ec(s,i);if(!o)return null;if(r){const h=o.center,f=h.clone();f.x=TF(h.x,r.center.x,i),f.x!==h.x&&o.centerAt(f),r=r.union(o)}else r=o;return r}function ike(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,r=0;for(const n of t){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(i=s.minScale<i?s.minScale:i,r=s.maxScale>r?s.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function Q4(t,e){const i=HY(t);return Hi(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Ec(t,e)}async function rke(t,e){var $;if(!t||!e)return new ir({targetGeometry:new ze,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=e,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let c=null;t instanceof ir?c=t:t.viewpoint?c=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(c=t.target);let d=null;c!=null&&c.targetGeometry?d=c.targetGeometry:t instanceof Ke?d=t:t instanceof Xi?d=await Rv(t,e,i):t&&(d=await Rv(t.center,e,i)||await Rv(t.target,e,i)||await Rv(t,e,i)),!d&&(s!=null&&s.targetGeometry)?d=s.targetGeometry:!d&&e.extent&&(d=e.extent),i||(i=HY(e.spatialReference||e.extent||d)),Ic()||Hi(d.spatialReference,i)||ia(d.spatialReference,i)||await nd();const h=Q4(d,i),f="center"in h?h.center:h;e.pickClosestTarget!==!1&&f.type==="point"&&(($=s.targetGeometry)==null?void 0:$.type)==="point"&&(f.x=TF(f.x,s.targetGeometry.x,f.spatialReference));let m=0;c?m=c.rotation:t.hasOwnProperty("rotation")?m=t.rotation:s&&(m=s.rotation);let v=0;v=(c==null?void 0:c.targetGeometry)!=null&&c.targetGeometry.type==="point"?c.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(d)||d.type==="point"||d.type==="extent"&&d.width===0&&d.height===0?s.scale:CI(Q4(d.extent,i),a,m);const w=ike(t.target??t);w&&(w.min&&w.min<v?v=w.min:w.max&&w.max>v&&(v=w.max));let x=new ir({targetGeometry:f,scale:v,rotation:m});return r&&(x=r.fit(x),r.constrainByGeometry(x),r.rotationEnabled||(x.rotation=s.rotation)),x}function Vr(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function nke(t,e,i){return i?dr(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):t1(t,e,.5)}const ske=function(){const t=mi();return function(e,i,r){const n=i.targetGeometry;IF(t,n);const s=.5*i0(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}}();function oke(t,e,i,r,n){var s;return ZO(t,e,i.center),t.scale=CI(i,r),(s=n==null?void 0:n.constraints)==null||s.constrain(t),t}function ake(t,e,i,r){return AF(t,e,i,r),SF(t,t)}const ZY=function(){const t=mi();return function(e,i,r){return uL(e,uke(e,i),nke(t,i,r))}}(),lke=function(){const t=Ja(),e=mi();return function(i,r,n,s){const o=i0(r),a=EF(r);return dr(e,o,o),DY(t,e),y1(t,t,a),$y(t,t,ZY(e,n,s)),$y(t,t,[0,s.top-s.bottom]),dr(i,t[4],t[5])}}();function i0(t){var e;return t.scale*JY((e=t.targetGeometry)==null?void 0:e.spatialReference)}function JY(t){return bs(t)?1/(WY(t)*GY*BY):1}function EF(t){return cL(t.rotation)||0}function cke(t){return bs(t)?WY(t)*GY*BY:1}function uke(t,e){return t1(t,e,.5)}const MF=function(){const t=mi(),e=mi(),i=mi();return function(r,n,s,o,a,c){return bG(t,n),t1(e,s,.5*c),dr(i,1/o*c,-1/o*c),$F(r,e),a&&y1(r,r,a),AI(r,r,i),$y(r,r,t),r}}(),AF=function(){const t=mi();return function(e,i,r,n){const s=i0(i),o=EF(i);return IF(t,i.targetGeometry),MF(e,t,r,s,o,n)}}(),dke=function(){const t=mi();return function(e,i,r,n){const s=i0(i);return IF(t,i.targetGeometry),MF(e,t,r,s,0,n)}}();function YY(t){const e=hn(t);return e?e.valid[1]-e.valid[0]:0}function pke(t,e){return Math.round(YY(t)/e)}const hke=function(){const t=mi(),e=mi(),i=[0,0,0];return function(r,n,s){ow(t,r,n),OA(t,t),ow(e,r,s),OA(e,e),_G(i,t,e);let o=Math.acos(wG(t,e)/(N$(t)*N$(e)))*tke;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),fke=function(){const t=mi();return function(e,i,r,n){const s=e.targetGeometry;return Vr(e,i),lke(t,i,r,n),s.x+=t[0],s.y+=t[1],e}}(),ZO=function(t,e,i){Vr(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},mke=function(){const t=mi();return function(e,i,r,n,s){s||(s="center"),uL(t,r,n),t1(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":dr(t,0,0);break;case"left":dr(t,-o,0);break;case"top":dr(t,0,a);break;case"right":dr(t,o,0);break;case"bottom":dr(t,0,-a);break;case"top-left":dr(t,-o,a);break;case"bottom-left":dr(t,-o,-a);break;case"top-right":dr(t,o,a);break;case"bottom-right":dr(t,o,-a)}return OI(e,i,t),e}}();function X8e(t,e,i){return Vr(t,e),t.rotation+=i,t}function gke(t,e,i){return Vr(t,e),t.rotation=i,t}const yke=function(){const t=mi();return function(e,i,r,n,s){return Vr(e,i),isNaN(r)||r===0||(QY(t,n,i,s),e.scale=i.scale*r,XY(t,t,e,s),OI(e,e,dr(t,t[0]-n[0],n[1]-t[1]))),e}}();function X4(t,e,i){return Vr(t,e),t.scale=i,t}const KY=function(){const t=mi();return function(e,i,r,n,s,o){return Vr(e,i),isNaN(r)||r===0||(QY(t,s,i,o),e.scale=i.scale*r,e.rotation+=n,XY(t,t,e,o),OI(e,e,dr(t,t[0]-s[0],s[1]-t[1]))),e}}(),eUe=function(){const t=mi(),e=mi();return function(i,r,n,s,o,a,c){return ZY(e,a,c),mG(t,o,e),s?KY(i,r,n,s,t,a):yke(i,r,n,t,a)}}(),QY=function(){const t=Ja();return function(e,i,r,n){return Na(e,i,ake(t,r,n,1))}}(),XY=function(){const t=Ja();return function(e,i,r,n){return Na(e,i,AF(t,r,n,1))}}(),OI=function(){const t=mi(),e=Ja();return function(i,r,n){Vr(i,r);const s=i0(r),o=i.targetGeometry;return NY(e,EF(r)),AI(e,e,g1(s,s)),Na(t,n,e),o.x+=t[0],o.y+=t[1],i}}();function eK(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function vke(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function bke(t,e,i,r,n,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function tK(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function wke(t,e,i,r=0,n=0,s=2){const o=n||e.length/s;for(let a=r;a<o;a++)tK(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:vke,create:eK,fromValues:bke,transform:tK,transformMany:wke},Symbol.toStringTag,{value:"Module"}));function bS(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function _ke(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xke(t,e,i,r,n,s,o,a,c){const d=new Float32Array(9);return d[0]=t,d[1]=e,d[2]=i,d[3]=r,d[4]=n,d[5]=s,d[6]=o,d[7]=a,d[8]=c,d}Object.freeze(Object.defineProperty({__proto__:null,clone:_ke,create:bS,fromValues:xke},Symbol.toStringTag,{value:"Module"}));function iK(){return new Float32Array(2)}function Ske(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function Ty(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function rK(){return iK()}function nK(){return Ty(1,1)}function sK(){return Ty(1,0)}function oK(){return Ty(0,1)}const $ke=rK(),Tke=nK(),kke=sK(),Ike=oK();Object.freeze(Object.defineProperty({__proto__:null,ONES:Tke,UNIT_X:kke,UNIT_Y:Ike,ZEROS:$ke,clone:Ske,create:iK,fromValues:Ty,ones:nK,unitX:sK,unitY:oK,zeros:rK},Symbol.toStringTag,{value:"Module"}));function Eke(t){return t instanceof Float32Array&&t.length>=2}function Mke(t){return Array.isArray(t)&&t.length>=2}function M2(t){return Eke(t)||Mke(t)}var JO;const pl=[0,0];let Il=JO=class extends Z{constructor(t){super(t),this._viewpoint2D={center:mi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ke,this.id=0,this.inverseTransform=Ja(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ja(),this.transformNoRotation=Ja(),this.displayMat3=bS(),this.displayViewMat3=bS(),this.viewMat3=bS(),this.viewMat2d=eK(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Vr(i,t.viewpoint),this._set("size",Zm(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new JO({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return M2(e)?Na(t,e,this.inverseTransform):(pl[0]=e,pl[1]=i,Na(t,pl,this.inverseTransform))}toScreen(t,e,i){return M2(e)?Na(t,e,this.transform):(pl[0]=e,pl[1]=i,Na(t,pl,this.transform))}toScreenNoRotation(t,e,i){return M2(e)?Na(t,e,this.transformNoRotation):(pl[0]=e,pl[1]=i,Na(t,pl,this.transformNoRotation))}wrapMapCoordinate(t,e){Zm(t,e);const[i]=e,[r]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const c=YY(s)/2;o=Math.max(o,r-c),a=Math.min(a,r+c)}return(i<o||i>a)&&(t[0]=TF(i,r,s)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return MF(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new ir({targetGeometry:new ze(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=i0(o),this.rotation=r,this.scale=i,this.spatialReference=e,Zm(this.center,t);const a=s[0]!==0?2/s[0]:0,c=s[1]!==0?-2/s[1]:0;Jm(this.displayMat3,a,0,0,0,c,0,-1,1,1);const d=IG(this.viewMat3),h=Ty(s[0]/2,s[1]/2),f=Ty(-s[0]/2,-s[1]/2),m=cL(r);RA(d,d,h),AG(d,d,m),RA(d,d,f),lw(this.displayViewMat3,this.displayMat3,d);const v=$F(this.viewMat2d,h);return y1(v,v,m),$y(v,v,f),ske(this.extent,o,s),AF(this.transform,o,s,n),SF(this.inverseTransform,this.transform),dke(this.transformNoRotation,o,s,n),this.worldScreenWidth=pke(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};l([u({readOnly:!0})],Il.prototype,"id",void 0),l([u({value:1,json:{write:!0}})],Il.prototype,"pixelRatio",null),l([u({json:{write:!0}})],Il.prototype,"size",null),l([u()],Il.prototype,"spatialReference",void 0),l([u({type:ir,json:{write:!0}})],Il.prototype,"viewpoint",null),l([u({readOnly:!0})],Il.prototype,"visibleArea",null),Il=JO=l([E("esri.views.2d.ViewState")],Il);const e6=Il;var YO,KO;let tc=YO=class extends Se{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new YO({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([u()],tc.prototype,"left",void 0),l([u()],tc.prototype,"top",void 0),l([u()],tc.prototype,"right",void 0),l([u()],tc.prototype,"bottom",void 0),tc=YO=l([E("esri.views.2d.PaddedViewState.Padding")],tc);let Gf=KO=class extends e6{constructor(...t){super(...t),this.paddedViewState=new e6,this._updateContent=(()=>{const e=mi();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;dr(e,r.left+r.right,r.top+r.bottom),ow(e,i,e),Zm(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(ve(()=>[this.size,this.padding],()=>this._updateContent(),pr)),this.padding=new tc,this.size=[0,0]}set padding(t){this._set("padding",t||new tc)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=fke(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:s}=e,{x:o,y:a,spatialReference:c}=r,d=this._viewpoint2D;d.center[0]=o,d.center[1]=a,d.rotation=n,d.scale=s,d.spatialReference=c,this._update()}}clone(){return new KO({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([u()],Gf.prototype,"paddedViewState",void 0),l([u({type:tc})],Gf.prototype,"padding",null),l([u()],Gf.prototype,"viewpoint",null),Gf=KO=l([E("esri.views.2d.PaddedViewState")],Gf);const CF=Gf;let Lv=class extends Se{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};l([u()],Lv.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),l([u()],Lv.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Lv=l([E("esri.views.support.debugFlags")],Lv);const Ake=new Lv,aK=Symbol("Yield");let Cke=class{constructor(){this._tasks=new Array,this._numPendingTasks=_y(0),this._readyToRun=_y(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return aK;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._addTask((n,s)=>new i6(n,s,e,i,r),Array.prototype.push)}unshift(e,i,r){return this._addTask((n,s)=>new i6(n,s,e,i,r),Array.prototype.unshift)}pushGenerator(e,i,r){return this._addTask((n,s)=>new Oke(n,s,e,i,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateReadyToRun();try{if(Ur(i.signal))this._cancelTask(i,gt());else switch(i.type){case 0:this._processSimple(i,e);break;case 1:this._processGenerator(i,e);break;case 2:this._processIterator(i,e);break;default:}}catch(r){i.reject(r)}return!0}cancelAll(){const e=gt();for(const i of this._tasks)this._cancelTask(i,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,i){if(e.abortCallback){const r=e.abortCallback(i);e.type===2&&e.iterator.return&&t6(e.iterator.return()),qr(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&t6(e.iterator.throw(i)),e.reject(i)}_onIteratorResult(e,i){i.done?e.resolve(i.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,i){const r=e.callback(i);qr(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,i){const r=e.generatorFunction(i),n=new Pke(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(n,i)}_processIterator(e,i){const r=e.iterator.next(i);qr(r)?r.then(n=>this._onIteratorResult(e,n),e.reject):this._onIteratorResult(e,r)}_addTask(e,i){return new Promise((r,n)=>{const s=e(r,n);i.call(this._tasks,s),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function t6(t){qr(t)?t.then(A2,A2):A2(t)}function A2(t){hr(t)||t instanceof Error||t instanceof j||t!=null&&typeof t=="object"&&"done"in t&&t.done||ie.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let OF=class{constructor(e,i,r,n){this.resolve=e,this.reject=i,this.signal=r,this.abortCallback=n}},i6=class extends OF{constructor(e,i,r,n,s){super(e,i,n,s),this.callback=r,this.type=0}},Oke=class extends OF{constructor(e,i,r,n,s){super(e,i,n,s),this.generatorFunction=r,this.type=1}},Pke=class extends OF{constructor(e,i,r,n,s){super(e,i,n,s),this.iterator=r,this.type=2}};function Rke(){return new zke}const st={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"graphics filter visibility",SCALE_VISIBILITY:"graphics scale visibility",FRUSTUM_VISIBILITY:"graphics frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},Us=0,r6=new Map([[st.RESOURCE_CONTROLLER_IMMEDIATE,Us],[st.RESOURCE_CONTROLLER,4],[st.SLIDE,Us],[st.STREAM_DATA_LOADER,Us],[st.ELEVATION_QUERY,Us],[st.TERRAIN_SURFACE,1],[st.SURFACE_GEOMETRY_UPDATES,1],[st.LOD_RENDERER,2],[st.GRAPHICS_CORE,2],[st.I3S_CONTROLLER,2],[st.POINT_CLOUD_LAYER,2],[st.FEATURE_TILE_FETCHER,2],[st.STREAM_CONTROLLER,2],[st.CLOUDS_GENERATOR,2],[st.OVERLAY,4],[st.OVERLAY_RENDERER,4],[st.STAGE,4],[st.GRAPHICS_DECONFLICTOR,4],[st.FILTER_VISIBILITY,4],[st.SCALE_VISIBILITY,4],[st.FRUSTUM_VISIBILITY,4],[st.POINT_OF_INTEREST_FREQUENT,6],[st.POINT_OF_INTEREST_INFREQUENT,30],[st.LABELER,8],[st.FEATURE_QUERY_ENGINE,8],[st.FEATURE_TILE_TREE,16],[st.FEATURE_TILE_TREE_ACTIVE,Us],[st.ELEVATION_ALIGNMENT,12],[st.ELEVATION_ALIGNMENT_SCENE,14],[st.TEXT_TEXTURE_ATLAS,12],[st.TEXTURE_UNLOAD,12],[st.LINE_OF_SIGHT_TOOL,16],[st.LINE_OF_SIGHT_TOOL_INTERACTIVE,Us],[st.SNAPPING,Us],[st.SHADOW_ACCUMULATOR,30],[st.FLOW_GENERATOR,12],[st.MAPVIEW_FETCH_QUEUE,Us],[st.MAPVIEW_LAYERVIEW_UPDATE,2],[st.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Us]]);function n6(t){return r6.has(t)?r6.get(t):typeof t=="number"?t:1}const Lke=6.5,s6=1,Fke=30,Nke=1e3/30,Dke=100,o6=.9;let zke=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=_y(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new ob("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new lK,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=ve(()=>Ake.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,Pt);for(const e of Object.keys(st))this.performanceInfo.tasks.set(st[e],new ob(String(st[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,Gt(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,i){const r=new jke(this,e,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new ob(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const i=this._budget.now();this._runFrame();const r=this._budget.now();this._recordFrameTaskTimes(r-i);const n=this.state===2?"Idle":this.state===1?"Interacting":"Animating";return s$(`${n} Frame Tasks`,i,r,"Maps SDK","Scheduling"),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let i=Lke,r=e.frameDuration,n=s6;switch(this.state){case 2:i=0,r=Math.max(Dke,e.frameDuration),n=Fke;break;case 1:r=Math.max(Nke,e.frameDuration)}return r=r-e.elapsedFrameTime-i,this.state!==2&&r<s6&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,n),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){this._forceTask=!1,this._microTaskQueued=!1,this._run(),this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){xM(this._tasks,e),xM(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(i=>{i.name===e&&i.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let i="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?i="r":i!=="r"&&(i="w"))}),i}_getRuntime(e){let i=0;return this._tasks.forEach(r=>{r.name===e&&(i+=r.runtime)}),i}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let i="";return e.forEach((r,n)=>{i+=r>1?` ${r}x ${n}`:` ${n}`}),i}_updateLoad(){const e=this._tasks.reduce((i,r)=>r.needsUpdate?++i:i,0);this._load=this._load*o6+e*(1-o6)}_schedule(){for(Rie(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===Us&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,i=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==Us&&r.blockFrame!==this._frameNumber&&(e=!0,i=Math.max(i,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===aK&&(i.blockFrame=this._frameNumber)}catch(s){ie.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,s),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const r=this._budget.now(),n=r-e;if(s$(`${i.name}`,e,r,"Maps SDK","Scheduling"),i.runtime+=n,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+n),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(st))this._frameTaskTimes.set(st[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((i,r)=>this.performanceInfo.tasks.get(r).push(i)),this.performanceInfo.total.push(e)}get test(){return this._test}},jke=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,i,r){this._scheduler=e,this.name=i,this.blockFrame=0,this.runtime=0,this._queue=new Cke,this._handles=new Ay,this._basePriority=n6(i),this.schedulePriority=this._basePriority,this._task=_y(r??this._queue),this._handles.add(gn(()=>this.task.readyToRun,n=>e.taskRunningChanged(n)))}remove(){this.processQueue(Ob),this._scheduler.removeTask(this),this.schedule=C2.schedule,this.reschedule=C2.reschedule,this.scheduleGenerator=C2.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const i=n6(e);this._basePriority!==Us&&this.schedulePriority===0||(this.schedulePriority=i),this._basePriority=i}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,i,r){return this._queue.push(e,i,r)}reschedule(e,i,r){return this._queue.unshift(e,i,r)}scheduleGenerator(e,i,r){return this._queue.pushGenerator(e,i,r)}processQueue(e){return this._queue.runTask(e)}},lK=class{constructor(){this._begin=(performance==null?void 0:performance.now())??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const Ob=new lK;Ob.enabled=!1;let Vke=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Ur(i)){const n=gt();return r?Promise.resolve(r(n)):Promise.reject(n)}return TM(e(Ob))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}async scheduleGenerator(e,i,r){if(Ur(i)){const s=gt();if(r)return r(s);throw s}const n=e(Ob);for(;;){const s=n.next(Ob),o=qr(s)?await s:s;if(Ur(i)){const a=gt();if(r){const d=r(a),h=n.return(null);return qr(h)&&await Wb(h),d}const c=n.throw(a);throw qr(c)&&await Wb(c),a}if(o.done)return o.value}}};const C2=new Vke;let Uke=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=Rke(),this._schedulerHandle=gn(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||qr(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var a,c,d;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:s,state:{id:o}}=this.view;r==null||r.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),(c=this.view.graphicsTileStore)==null||c.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==2||((d=this._frameTaskHandle)==null||d.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new CF,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=ve(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=dh(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}},qke=0;const PF=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:qke++})}};return i=l([wi("esri.core.NumericIdentifiable")],i),i};function Bke(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n,s,o,a;const c=[0,0],d=Gke(t);for(let m=0;m<d.length;m++){const v=d[m];for(let w=0;w<v.length-1;w++){Kpe(c,r,v,w);const x=Yk(r,c);(n==null||x<n)&&(n=x,s=[...c],o=m,a=w)}}if(n==null||!s||o==null||a==null)throw new j("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,f]=s;return{coordinate:new ze({x:h,y:f,spatialReference:i}),distance:n}}function Gke(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var QO;let vp=QO=class extends PF(Se){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Ec(this.geometry,this.spatialReference)}catch(t){return ie.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?Zk(this.normalizedGeometry,i):nL(this.normalizedGeometry,i))return t;const{coordinate:r}=Bke(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new QO({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};l([u({constructOnly:!0})],vp.prototype,"geometry",void 0),l([u({readOnly:!0})],vp.prototype,"normalizedGeometry",null),l([u({constructOnly:!0})],vp.prototype,"spatialReference",void 0),vp=QO=l([E("esri.views.2d.constraints.GeometryConstraint")],vp);var XO;let Fv=XO=class extends PF(Se){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new XO({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([u()],Fv.prototype,"enabled",void 0),l([u()],Fv.prototype,"rotationEnabled",void 0),Fv=XO=l([E("esri.views.2d.constraints.RotationConstraint")],Fv);const cK=Fv;var e3;let xn=e3=class extends PF(Se){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,c=!1,d=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(h=>h.clone()),e.sort((h,f)=>f.scale-h.scale),e.forEach((h,f)=>h.level=f);for(const h of e)!c&&i>0&&i>=h.scale&&(o=h.level,c=!0),!d&&r>0&&r>=h.scale&&(a=t?t.level:-1,d=!0),t=h;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1),e.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const c=a?i:r;if(e&&s){const d=(c-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*d,n.y=s.y+(n.y-s.y)*d}t.scale=c}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new e3({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};l([u({readOnly:!0})],xn.prototype,"effectiveLODs",void 0),l([u({readOnly:!0})],xn.prototype,"effectiveMinZoom",void 0),l([u({readOnly:!0})],xn.prototype,"effectiveMaxZoom",void 0),l([u({readOnly:!0})],xn.prototype,"effectiveMinScale",void 0),l([u({readOnly:!0})],xn.prototype,"effectiveMaxScale",void 0),l([u()],xn.prototype,"lods",void 0),l([u()],xn.prototype,"minZoom",void 0),l([u()],xn.prototype,"maxZoom",void 0),l([u()],xn.prototype,"minScale",void 0),l([u()],xn.prototype,"maxScale",void 0),l([u()],xn.prototype,"snapToZoom",void 0),xn=e3=l([E("esri.views.2d.constraints.ZoomConstraint")],xn);const uK=xn,Hke={base:null,key:"type",typeMap:{extent:Ke,polygon:ei}};let xi=class extends Se{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new de}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new vp({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new cK({rotationEnabled:this.rotationEnabled})}get _zoom(){var c;const e=this._get("_zoom"),i=this.lods||((c=this.view)==null?void 0:c.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new uK({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([u({readOnly:!0})],xi.prototype,"effectiveLODs",null),l([u({readOnly:!0})],xi.prototype,"effectiveMinScale",null),l([u({readOnly:!0})],xi.prototype,"effectiveMaxScale",null),l([u({readOnly:!0})],xi.prototype,"effectiveMinZoom",null),l([u({readOnly:!0})],xi.prototype,"effectiveMaxZoom",null),l([u({types:Hke,value:null})],xi.prototype,"geometry",null),l([u({type:[br]})],xi.prototype,"lods",void 0),l([u()],xi.prototype,"minScale",void 0),l([u()],xi.prototype,"maxScale",void 0),l([u()],xi.prototype,"minZoom",void 0),l([u()],xi.prototype,"maxZoom",void 0),l([u()],xi.prototype,"rotationEnabled",void 0),l([u()],xi.prototype,"snapToZoom",void 0),l([u({type:de})],xi.prototype,"customConstraints",void 0),l([u()],xi.prototype,"view",void 0),l([u({readOnly:!0})],xi.prototype,"version",null),l([u({type:vp,readOnly:!0})],xi.prototype,"_geometry",null),l([u({type:cK})],xi.prototype,"_rotation",null),l([u({readOnly:!0,type:uK})],xi.prototype,"_zoom",null),xi=l([E("esri.views.2d.MapViewConstraints")],xi);const a6=xi;let Mr=class extends Se{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ve(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},pr)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new ze({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void ie.getLogger(this).error(new j("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;ZO(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;let i=e;if(!i.width||!i.height)return void ie.getLogger(this).error(new j("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",i),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);try{i=this._project(i,this.state.spatialReference)}catch(n){return void ie.getLogger(this).error(new j("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;oke(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;gke(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;X4(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new j("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new j("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new j("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void ie.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new ir({targetGeometry:new ze,scale:0,rotation:0});Vr(n,i),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;X4(r,r,i),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),c=this._get("viewpoint"),d=this._get("zoom"),h=d!=null&&r!=null&&r.zoomToScale(d)||void 0;let f,m,v;const w=c==null?void 0:c.rotation,x=c==null?void 0:c.targetGeometry;(x==null?void 0:x.type)==="extent"?f=x:(x==null?void 0:x.type)==="point"&&(m=x,v=c==null?void 0:c.scale);const $=s??f;return{center:n??m??($==null?void 0:$.center),rotation:a??w,scale:(o??h??v??($&&CI($,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var o;const s=e.targetGeometry;try{this._project(e,r)}catch(a){ie.getLogger(this).warn(new Is("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),e.targetGeometry=n||new ze({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(e),this._set("state",new CF({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,o=new ze({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var c;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const d=i.viewpoint.clone();d.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=d}const r=i.clone(),[n,s]=i.center;let o=null;try{o=this._project(new ze({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(d){VB()||ie.getLogger(this).warn(new Is("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:d}))}o||(o=new ze({x:0,y:0,spatialReference:e}));const a=ZO(new ir({targetGeometry:new ze,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const h=[i.size[0]/2,i.size[1]/2],f=[h[0]+20,h[1]],m=i.toMap([0,0],f),{x:v,y:w}=this._project(new ze({x:m[0],y:m[1],spatialReference:i.spatialReference}),e);m[0]=v,m[1]=w,r.toScreen(m,m);const x=hke(h,m,f),$=Math.hypot(m[0]-h[0],m[1]-h[1])/20;!Number.isFinite($)||Math.abs($)>4?(a.rotation=0,a.targetGeometry=new ze({x:0,y:0,spatialReference:e})):(a.scale*=$,a.scale>B("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(x)?x:0)}catch{}(c=this._get("constraints"))==null||c.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,i],mke(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new ze({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),tr(n[0],n[1])}_project(e,i){var s;const r=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||Hi(i,r.spatialReference))return e;const n=Ec(r,i);if(!n)throw new j("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return Wke(e)?(e.targetGeometry=n,e):n}};function Wke(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}l([u({type:ze})],Mr.prototype,"center",null),l([u()],Mr.prototype,"constraints",void 0),l([u({type:Ke})],Mr.prototype,"extent",null),l([u({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Mr.prototype,"padding",null),l([u()],Mr.prototype,"ready",void 0),l([u()],Mr.prototype,"resizeAlign",void 0),l([u({readOnly:!0})],Mr.prototype,"resolution",null),l([u({type:Number})],Mr.prototype,"rotation",null),l([u({type:Number})],Mr.prototype,"scale",null),l([u({readOnly:!0})],Mr.prototype,"state",void 0),l([u({type:ir})],Mr.prototype,"viewpoint",null),l([u({readOnly:!0})],Mr.prototype,"visibleArea",null),l([u()],Mr.prototype,"zoom",null),Mr=l([E("esri.views.2d.ViewStateManager")],Mr);const l6=160;let Nv=class extends Se{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=l6&&this.clear()},l6))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([u()],Nv.prototype,"_timer",void 0),l([u()],Nv.prototype,"stationary",null),Nv=l([E("esri.views.2d.support.StationaryManager")],Nv);const Zke=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Mr({constraints:new a6({view:this})}),this.stationaryManager=new Nv,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new Uke(this),this.viewEvents=new mY(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ve(()=>this.viewpoint,()=>this.stationaryManager.flip(),pr)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var r;return((r=this.stateManager)==null?void 0:r.extent)??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const n=this._get("animation");if(r===n)return;if(n&&n.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{var o;this.destroyed||r===this._get("animation")&&(this._set("animation",null),(o=this.frameTask)==null||o.requestFrame())};r.when(s,s)}get constraints(){var r;return(r=this.stateManager)==null?void 0:r.constraints}set constraints(r){r.view=this;const n=this.stateManager.constraints;this.stateManager.constraints=r,n==null||n.destroy()}get padding(){var r;return(r=this.stateManager)==null?void 0:r.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:n}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=n}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return l([u({readOnly:!0})],i.prototype,"animationManager",void 0),l([u({readOnly:!0})],i.prototype,"fullOpacity",void 0),l([u()],i.prototype,"stateManager",void 0),l([u()],i.prototype,"constraintsInfo",null),l([u()],i.prototype,"extent",null),l([u({readOnly:!0})],i.prototype,"state",null),l([u({readOnly:!0})],i.prototype,"mapViewNavigation",void 0),l([u()],i.prototype,"renderingOptions",void 0),l([u({readOnly:!0})],i.prototype,"interacting",null),l([u()],i.prototype,"stationary",null),l([u()],i.prototype,"animation",null),l([u({type:a6})],i.prototype,"constraints",null),l([u()],i.prototype,"padding",null),l([u()],i.prototype,"resizeAlign",null),l([u()],i.prototype,"rotation",null),l([u({readOnly:!0})],i.prototype,"viewEvents",void 0),l([u({type:ir})],i.prototype,"viewpoint",null),i=l([E("esri.views.Viewport2DBaseMixin")],i),i},Jke=()=>Qe.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var Jg;let Hf=(Jg=class extends vL{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Gn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new j("view:animation-stopped","ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=qr(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}},Jg.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},Jg);l([u({readOnly:!0})],Hf.prototype,"done",null),l([u({readOnly:!0,type:String})],Hf.prototype,"state",void 0),l([u()],Hf.prototype,"target",void 0),Hf=l([E("esri.views.ViewAnimation")],Hf);const t3=Hf;let wS=class extends Se{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void ie.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new t3;this.view.animation=r,await jk(()=>this.view.ready,i);const n={...i,animate:(i==null?void 0:i.animate)??(!Jke()&&this.view.animationsEnabled),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:c,constraints:d,padding:h,allLayerViews:f}=this.view,m=rke(e,{extent:s,spatialReference:o,size:a,viewpoint:c,constraints:d,padding:h,allLayerViews:f,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(m),this._gotoTask={},n.animate?this._gotoAnimated(m,n):this._gotoImmediate(m,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then(o=>{if(Lt(i),r!==this._gotoTask)throw new j("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(r,n,s,i)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then(o=>{if(Lt(i),r!==this._gotoTask)throw new j("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,s,i)}_cancellableGoTo(e,i,r,n){const s=()=>e===this._gotoTask;return p9(r,n).finally(()=>{s()&&(i.done||i.stop())})}};l([u({constructOnly:!0})],wS.prototype,"view",void 0),wS=l([E("esri.views.2d.GoToManager")],wS);function dK(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function pK(t,e){return e.some(i=>dK(t,i))}function c6(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(n=>n.value===t).map(n=>n.key)}let u6=class extends rr{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){dK(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Yke=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:c}=o;this._startScale=c,this._currentScale=c,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const c=1.015**s.y,d=this._startScale*c,h=d/this._currentScale;a.setViewpointImmediate(h),this._currentScale=d;break}case"end":{const{constraints:c}=o,{effectiveLODs:d,snapToZoom:h}=c;if(!h||!d)return void a.end();const f=c.snapScale(this._currentScale),m=(s.y>0?Math.max(f,c.snapToPreviousScale(this._startScale)):Math.min(f,c.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},PI=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Kke=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new PI({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&pK(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Qke=class extends rr{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new PI({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&pK(o.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function hK(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function Xke(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function eIe(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function tIe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function fK(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function mK(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function gK(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function iIe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function rIe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function nIe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function sIe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function oIe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function aIe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function lIe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function cIe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function yK(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function uIe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function vK(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function bK(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function wK(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function dIe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function pIe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function i3(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function _K(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function hIe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],c=i[2];return t[0]=n*c-s*a,t[1]=s*o-r*c,t[2]=r*a-n*o,t}function fIe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],c=i[2],d=n*c-s*a,h=s*o-r*c,f=r*a-n*o,m=Math.sqrt(d*d+h*h+f*f);return t[0]=d/m,t[1]=h/m,t[2]=f/m,t}function mIe(t,e,i,r){const n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function gIe(t,e,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,c=o*(s-2)+s,d=o*(s-1),h=o*(3-2*s);return t[0]=e[0]*a+i[0]*c+r[0]*d+n[0]*h,t[1]=e[1]*a+i[1]*c+r[1]*d+n[1]*h,t[2]=e[2]*a+i[2]*c+r[2]*d+n[2]*h,t}function yIe(t,e,i,r,n,s){const o=1-s,a=o*o,c=s*s,d=a*o,h=3*s*a,f=3*c*o,m=c*s;return t[0]=e[0]*d+i[0]*h+r[0]*f+n[0]*m,t[1]=e[1]*d+i[1]*h+r[1]*f+n[1]*m,t[2]=e[2]*d+i[2]*h+r[2]*f+n[2]*m,t}function vIe(t,e=1){const i=Jk,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function bIe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function wIe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function _Ie(t,e,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],c=e[1],d=e[2],h=n*d-s*c,f=s*a-r*d,m=r*c-n*a,v=n*m-s*f,w=s*h-r*m,x=r*f-n*h,$=2*o;return t[0]=a+h*$+2*v,t[1]=c+f*$+2*w,t[2]=d+m*$+2*x,t}function xIe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function SIe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function $Ie(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function TIe(t,e){i3(d6,t),i3(p6,e);const i=_K(d6,p6);return i>1?0:i<-1?Math.PI:Math.acos(i)}const d6=dd(),p6=dd();function kIe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function IIe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function EIe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],c=fn();return Math.abs(i-s)<=c*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))}function MIe(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const AIe=fK,CIe=mK,OIe=gK,PIe=vK,RIe=bK,LIe=hK,FIe=wK;Object.freeze(Object.defineProperty({__proto__:null,abs:nIe,add:tIe,angle:TIe,bezier:yIe,ceil:iIe,clamp:lIe,copy:Xke,cross:hIe,crossAndNormalize:fIe,direction:MIe,dist:PIe,distance:vK,div:OIe,divide:gK,dot:_K,equals:EIe,exactEquals:IIe,floor:rIe,hermite:gIe,inverse:pIe,len:LIe,length:hK,lerp:mIe,max:aIe,min:oIe,mul:CIe,multiply:mK,negate:dIe,normalize:i3,random:vIe,rotateX:xIe,rotateY:SIe,rotateZ:$Ie,round:cIe,scale:yK,scaleAndAdd:uIe,set:eIe,sign:sIe,sqrDist:RIe,sqrLen:FIe,squaredDistance:bK,squaredLength:wK,str:kIe,sub:AIe,subtract:fK,transformMat3:wIe,transformMat4:bIe,transformQuat:_Ie},Symbol.toStringTag,{value:"Module"}));function xo(t){let e=t*t;return t<0&&(e*=-1),e}function NIe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function DIe(t,e,i){const r=i,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=xo(n.axes[0]),r.translation[1]=xo(n.axes[1]),r.translation[2]=xo(n.buttons[7])-xo(n.buttons[6]),r.heading=xo(n.axes[2]),r.tilt=xo(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*xo(n.axes[0]),r.translation[1]=1.2*xo(n.axes[1]),r.translation[2]=2*-xo(n.axes[2]),r.heading=1.2*xo(n.axes[5]),r.tilt=1.2*xo(n.axes[3])),r.tilt*=o,yK(r.translation,r.translation,a),r}function zIe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let jIe=class extends rr{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Ay,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([ve(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=dh({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Pt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){var r;const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,NIe(this._transformation)):(this._currentDevice=e.data.device,DIe(e.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(e){var f;const i=this._transformation;if(zIe(i))return void((f=this._frameTask)==null?void 0:f.pause());const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=UIe*n*e;OI(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*qIe*e,a=this._view.constraints.rotationEnabled?-i.heading*VIe*e:0,c=this._view.size,d=[c[0]/2,c[1]];KY(r,r,o,a,d,c);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const VIe=.06,UIe=.7,qIe=6e-4;function xK(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),ct(()=>document.removeEventListener("visibilitychange",e))}let BIe=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,c=this._pressedKeys.size>0;a||c?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=xK(n=>n?null:this._stopMovement())}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},GIe=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=xK(n=>n?null:this._handleStop())}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(e.data.key);if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},HIe=class extends rr{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=0),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case 0:o=s.zoomIn();break;case 1:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const WIe=.6;let ZIe=class extends rr{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,o=1/WIe**(1/60*s),a=i.zoom(o,[r,n]);this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()})}},JIe=class extends rr{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new PI({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function h6(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>QIe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function YIe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function KIe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function QIe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let XIe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,c=this._inputDevices[a];c&&(this._emitGamepadEvent(o,h6(c),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(c),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(f6(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new wF({gamepad:e});i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=dh({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;f6(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=h6(s),c=r||KIe(a);o&&(o.timestamp===n.timestamp||!o.active&&c||YIe(o.state,a))||this._emitGamepadEvent(n,a,!c)})}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function eEe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function f6(t){for(const e of navigator.getGamepads())eEe(e)&&t(e)}const m6=B("edge"),tEe=B("chrome"),iEe=B("ff"),rEe=B("safari"),g6="esri-view-surface",mf={touchNone:`${g6}--touch-none`,touchPan:`${g6}--touch-pan`};var ih;let nEe=(ih=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new XIe(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=Ot(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(O2[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&O2[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(O2[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?mf.touchNone:mf.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?mf.touchPan:mf.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(mf.touchNone),this._element.classList.remove(mf.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=bY(this._element,e);return ih.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&B("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:m6&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}m6?r*=.7:tEe||rEe?r*=.6:iEe&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},ih.test={disableSubpixelCoordinates:!1},ih);const O2={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let sEe=class extends rr{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const SK=()=>({maximumClickDelay:300}),oEe=(t={})=>({...SK(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),RF=(t={})=>({...SK(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function wT(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function aEe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function lEe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:tr()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[P,L]=t,[D,q]=[L.x-P.x,L.y-P.y];return e.radius=Math.sqrt(D*D+q*q)/2,e.center.x=(P.x+L.x)/2,e.center.y=(P.y+L.y)/2,e}let i=0,r=0;for(let P=0;P<t.length;P++)i+=t[P].x,r+=t[P].y;i/=t.length,r/=t.length;const n=t.map(P=>P.x-i),s=t.map(P=>P.y-r);let o=0,a=0,c=0,d=0,h=0,f=0,m=0;for(let P=0;P<n.length;P++){const L=n[P],D=s[P],q=L*L,F=D*D;o+=q,a+=F,c+=L*D,d+=q*L,h+=F*D,f+=L*F,m+=D*q}const v=.5*(d+f),w=.5*(h+m),x=o*a-c*c,$=(v*a-w*c)/x,T=(o*w-c*v)/x,C=tr($+i,T+r);return{radius:Math.sqrt($*$+T*T+(o+a)/t.length),center:C}}function Qp(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let cEe=class extends rr{constructor(e={},i=Py){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=tr(0,0),this._pointerState=new Map,this._parameters=RF(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new PI({start:(r,n)=>this._dragStart(r,n),update:(r,n)=>this._dragUpdate(n),end:(r,n)=>this._dragEnd(n)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Gt(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Gt(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=P2("begin",tr(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=P2("update",tr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=P2("end",tr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=Qp(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),wT(n.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=Qp(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function P2(t,e,i){const{button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:c}=i;return{action:t,delta:e,button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:c}}let uEe=class extends rr{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:dEe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=P_(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=_S(n,$K(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=P_(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=P_(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=_S(r,i)-e,r.lastAngle=_S(r,i)-e})}_emitEvent(e,i,r){const n=P_(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function $K(t){const e=[];return t.forEach(i=>{e.push(tr(i.event.x,i.event.y))}),lEe(e)}function P_(t){const e=$K(t);let i=0;return t.forEach(r=>{let n=_S(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function dEe(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function _S(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}let pEe=class extends rr{constructor(e={},i=Py){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=RF(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=Qp(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=Qp(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),wT(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):wT(n,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=Qp(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},hEe=class extends rr{constructor(e={},i=Py){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=oEe(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Gt(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(R_("update",n,i),void 0,n.modifiers):aEe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(R_("start",n,i)):this._pointerDrag.emit(R_("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(R_("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function R_(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let fEe=class extends rr{constructor(e={},i=Py){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=RF(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Gt(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=Gt(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=mEe(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,c=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;wT(o,i)>c?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=Qp(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=Qp(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function mEe(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const L_={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},y6=Symbol("handles");let Wf=class extends Se{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([gn(()=>!e(),()=>this._disconnect()),gn(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerInfo}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(y6),this._inputManager=Ot(this._inputManager)}_connect(){const e=this.view.surface,i=new nEe(e,this.view.input),r=[new pEe,new hEe,new fEe,new uEe(this.view.navigation),new cEe],n=new Io({eventSource:i,recognizers:r}),s=new Kke(this.view,["primary"]),o=new Qke(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new sEe],wc.INTERNAL),n.installHandlers("navigation",[new JIe(this.view),new jIe(this.view),new ZIe(this.view),new u6(this.view),new u6(this.view,[L_.counter]),s,new BIe(this.view,L_.pan),new HIe(this.view,L_.zoom),new GIe(this.view,L_.rotate),o,new Yke(this.view,"touch")],wc.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,this.addHandles([ve(()=>{var a,c;return(c=(a=this.view)==null?void 0:a.navigation)==null?void 0:c.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},Pt),ve(()=>{const{actionMap:a}=this.view.navigation;return{panActions:c6("pan",a),rotateActions:c6("rotate",a)}},({panActions:a,rotateActions:c})=>{s.pointerActions=a,o.pointerActions=c},wr)],y6)}get test(){}};l([u()],Wf.prototype,"view",void 0),l([u()],Wf.prototype,"latestPointerInfo",null),l([u()],Wf.prototype,"multiTouchActive",null),Wf=l([E("esri.views.2d.input.MapViewInputManager")],Wf);const gEe=Wf,yEe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToManager=new wS({view:this}),this.inputManager=new gEe({view:this}),this.addHandles([this.on("resize",n=>this.stateManager.resize(n.width,n.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,n,s,o){return this.viewEvents.on(r,n,s,o)||super.on(r,n)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,n){return this.goToManager.goTo(r,n)}toMap(r){if(!this.ready)return null;const n=_Y(r)?wY(this,r):r;return this.stateManager.toMap(n)}};return l([u()],i.prototype,"goToManager",void 0),l([u({readOnly:!0})],i.prototype,"interacting",null),l([u()],i.prototype,"stationary",null),l([u({readOnly:!0})],i.prototype,"inputManager",void 0),i=l([E("esri.views.Viewport2DMixin")],i),i};let v6=class{constructor(e){this._view=e,this.viewpoint=new ir({targetGeometry:new ze,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return JY(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=lG(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=e1(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=r,{center:c}=this;c.spatialReference=e.center.spatialReference,c.x=av(e.center.x,i.center.x,n),c.y=av(e.center.y,i.center.y,n),this.viewpoint.scale=av(e.scale,i.scale+a,o);let d=e.rotation;const h=i.rotation;Math.abs(h-d)>=180&&(d+=360*(d<h?1:-1)),this.viewpoint.rotation=av(d,h,s)}copyFrom(e){Vr(this.viewpoint,e.viewpoint),this._view=e.view}};function U0(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,a=3*e,c=3*(r-e)-a,d=1-a-c;function h(w){return((o*w+s)*w+n)*w}function f(w){return((d*w+c)*w+a)*w}function m(w){return(3*o*w+2*s)*w+n}function v(w,x){let $,T,C,P,L,D;for(C=w,D=0;D<8;D++){if(P=h(C)-w,Math.abs(P)<x)return C;if(L=m(C),Math.abs(L)<1e-6)break;C-=P/L}if($=0,T=1,C=w,C<$)return $;if(C>T)return T;for(;$<T;){if(P=h(C),Math.abs(P-w)<x)return C;w>P?$=C:T=C,C=.5*(T-$)+$}return C}return function(w,x=1e-6){return f(v(w,x))}}const Bs={};Bs.ease=U0(.25,.1,.25,1),Bs.linear=U0(0,0,1,1),Bs.easeIn=Bs["ease-in"]=U0(.42,0,1,1),Bs.easeOut=Bs["ease-out"]=U0(0,0,.58,1),Bs.easeInOut=Bs["ease-in-out"]=U0(.42,0,.58,1);const vEe=t=>t,kw=t=>t*t,_T=t=>1-kw(1-t),b6=t=>t<.5?kw(2*t)/2:(_T(2*(t-.5))+1)/2,xT=t=>t*t*t,r3=t=>1-xT(1-t),w6=t=>t<.5?xT(2*t)/2:(r3(2*(t-.5))+1)/2,ST=t=>t*t*t*t,n3=t=>1-ST(1-t),_6=t=>t<.5?ST(2*t)/2:(n3(2*(t-.5))+1)/2,$T=t=>t*t*t*t*t,s3=t=>1-$T(1-t),x6=t=>t<.5?$T(2*t)/2:(s3(2*(t-.5))+1)/2,TT=t=>1-Math.cos(t*Math.PI/2),o3=t=>1-TT(1-t),S6=t=>t<.5?TT(2*t)/2:(o3(2*(t-.5))+1)/2,kT=t=>2**(10*(t-1)),IT=t=>1-kT(1-t),$6=t=>t<.5?kT(2*t)/2:(IT(2*(t-.5))+1)/2,ET=t=>-(Math.sqrt(1-t*t)-1),a3=t=>1-ET(1-t),T6=t=>t<.5?ET(2*t)/2:(a3(2*(t-.5))+1)/2;function oo(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function ao(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const k6=ao(oo(1),1),I6=ao(oo(1),0),MT=ao(oo(1),.5),E6=ao(oo(2),1),M6=ao(oo(2),0),A6=ao(oo(2),.5),C6=ao(oo(3),1),O6=ao(oo(3),0),P6=ao(oo(3),.5),R6=ao(oo(4),1),L6=ao(oo(4),0),F6=ao(oo(4),.5),N6={linear:vEe,"in-quad":kw,"out-quad":_T,"in-out-quad":b6,"in-coast-quad":k6,"out-coast-quad":I6,"in-out-coast-quad":MT,"in-cubic":xT,"out-cubic":r3,"in-out-cubic":w6,"in-coast-cubic":E6,"out-coast-cubic":M6,"in-out-coast-cubic":A6,"in-quart":ST,"out-quart":n3,"in-out-quart":_6,"in-coast-quart":C6,"out-coast-quart":O6,"in-out-coast-quart":P6,"in-quint":$T,"out-quint":s3,"in-out-quint":x6,"in-coast-quint":R6,"out-coast-quint":L6,"in-out-coast-quint":F6,"in-sine":TT,"out-sine":o3,"in-out-sine":S6,"in-expo":kT,"out-expo":IT,"in-out-expo":$6,"in-circ":ET,"out-circ":a3,"in-out-circ":T6,"quad-in":kw,"quad-out":_T,"quad-in-out":b6,"quad-in-coast":k6,"quad-out-coast":I6,"quad-in-out-coast":MT,"cubic-in":xT,"cubic-out":r3,"cubic-in-out":w6,"cubic-in-coast":E6,"cubic-out-coast":M6,"cubic-in-out-coast":A6,"quart-in":ST,"quart-out":n3,"quart-in-out":_6,"quart-in-coast":C6,"quart-out-coast":O6,"quart-in-out-coast":P6,"quint-in":$T,"quint-out":s3,"quint-in-out":x6,"quint-in-coast":R6,"quint-out-coast":L6,"quint-in-out-coast":F6,"sine-in":TT,"sine-out":o3,"sine-in-out":S6,"expo-in":kT,"expo-out":IT,"expo-in-out":$6,"circ-in":ET,"circ-out":a3,"circ-in-out":T6,ease:t=>Bs.ease(t),"ease-in":t=>Bs.easeIn(t),"ease-out":t=>Bs.easeOut(t),"ease-in-out":t=>Bs.easeInOut(t)};let bEe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const Iw={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},TK={...Iw,maxDuration:4e3};let wEe=class kK{constructor(e){this._createCamera=e,this.compared=new bEe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:Iw.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new kK(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??Iw.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>fn()}get hasFov(){return Math.abs(this.compared.fov)>fn()}get hasRotate(){return this.compared.rotate>fn()}},_Ee=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},xEe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const s=this.definition,o=this.segments.reduce((a,c)=>a||c.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const c=this.segments[a],d=c.definition;if(e<=c.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(c,c.time===0?0:e/c.time,i),s.hasPan&&!isNaN(i.pan)&&isFinite(s.compared.pan)?i.pan=(r+d.compared.pan*i.pan)/s.compared.pan:i.pan=1,s.hasRotate&&!isNaN(i.rotate)&&isFinite(s.compared.rotate)?i.rotate=(n+d.compared.rotate*i.rotate)/s.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(d.compared.targetZoom)){const{sourceZoom:h,targetZoom:f}=d.compared,m=i.zoom*(f-h)+h,v=this.segments[0].definition.compared.sourceZoom,w=this.segments[this.segments.length-1].definition.compared.targetZoom,x=Math.abs(f-v)>Math.abs(h-v)?f:h;i.zoomOffset=x-w,i.zoom=(m-v)/(x-v)}else i.zoom=1;return i}e-=c.time,r+=d.compared.pan,n+=d.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},R2=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;r&&(n&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const c=this.definition.desiredPixelFlow;if(r&&n&&s){const d=o+a+o*a;this._zoomPixelFlow=o*a/d*c,this._panPixelFlow=a/d*c,this._rotatePixelFlow=o/d*c}else if(r&&n){const d=1+o;this._zoomPixelFlow=o/d*c,this._panPixelFlow=1/d*c}else if(r&&s){const d=1+a;this._zoomPixelFlow=a/d*c,this._rotatePixelFlow=1/d*c}else if(n&&s){const d=this._panPixelsAtSource/this._rotatePixels,h=1+d;this._panPixelFlow=d/h*c,this._rotatePixelFlow=1/h*c}else n?this._panPixelFlow=c:r?this._zoomPixelFlow=c:s&&(this._rotatePixelFlow=c);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const d=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=d,this._panPixelFlow/=d,this._rotatePixelFlow/=d}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/SEe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const SEe=e1(45);function $Ee(t,e,i){const r=e-t.compared.sourceZoom,n=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+n)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*n)}function TEe(t,e,i){const r=1/e,n=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,c=1/a,d=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*c*d-t.halfWindowSize*n*s*o*c+t.halfWindowSize*n*s*o*d/(a*a)}function kEe(t,e,i){const r=e-t.compared.sourceZoom,n=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function IEe(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function EEe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function MEe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function AEe(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function CEe(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function OEe(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function PEe(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function REe(t,e,i){const r=Math.log(e/t.compared.targetZoom),n=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,c=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*n*s*a+t.halfWindowSize*r*n*s*c/(o*o)+t.halfWindowSize*n*s*a*c/e}function LEe(t,e,i){const r=e-t.compared.targetZoom,n=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function FEe(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function NEe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function DEe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function zEe(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,n=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*n);return t.compared.sourceZoom<=t.compared.targetZoom?s*(i-n):s*(i+n)}function jEe(t,e){let i=VEe(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},n=r.ascensionFactor===0,s=r.descensionFactor===0,o=n?IEe:$Ee,a=n?EEe:TEe,c=n?MEe:kEe,d=s?FEe:PEe,h=s?NEe:REe,f=s?DEe:LEe,m=D=>o(t,D,r)+AEe(t,D,r)+d(t,D,r),v=D=>a(t,D,r)+CEe(t,D,r)+h(t,D,r),w=D=>c(t,D,r)+OEe(t,D,r)+f(t,D,r);let x=m(i);const $=zEe(t);let T;const C=e.maximumIterations||20,P=e.maximumDistance!=null?e.maximumDistance:1/0;for(T=0;T<C;T++){const D=e.desiredSlope??1e-6;let q=v(i);Math.abs(q)>D&&(q+=D);const F=q/w(i);if(isNaN(F)||i>=P&&F<0){if(!isFinite(P))return null;i=P,x=m(i);break}if(i-=F,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const ee=m(i);if(Math.abs(ee-x)/x<=.005)break;x=ee}return isNaN(x)||x>$*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function VEe(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let UEe=class extends xEe{constructor(e,i){super(),this._preallocSegments=[new R2,new R2,new R2],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i!=null&&i.apex?jEe(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=_T(r.zoom):e===this._descensionSegment&&(r.zoom=kw(r.zoom))}_updateWithApex(e,i){const[r,n,s]=this._preallocSegments,o=(i==null?void 0:i.ascensionFactor)??.5,a=Math.min(1-o,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),c=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),c>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*c,n.definition.compared.rotate=this.definition.compared.rotate*c,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+c,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+c,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const qEe=new _Ee;let BEe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=MT,this.definition=new wEe(e),this.path=new UEe}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(Cre(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?MT:IT)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,qEe);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??Iw.minDuration/r,s=i.maxDuration??Iw.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,n),s)}};const GEe=2e3,HEe=64;let WEe=class{constructor(e){this._view=e,this._animation=new BEe(()=>new v6(this._view)),this._current=new v6(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){Vr(this._current.viewpoint,e),Vr(this._source.viewpoint,e),Vr(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),Vr(e,this._current.viewpoint)}},Zf=class extends Se{constructor(e){super(e),this._animation=null,this._destinationViewState=new CF,this.updateFunction=null,this.easing=N6.ease,this.viewpoint=new ir({targetGeometry:new ze,scale:0,rotation:0}),this._updateTask=dh({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new WEe(e.view)}destroy(){this._updateTask=Gt(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const n=this.viewpoint;Vr(n,i);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(i.scale,s.scale)*HEe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??TK.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?N6[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,ZEe(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new t3({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==t3.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,c=a>=1;this._transition.applyRatio(this.viewpoint,a),c&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function ZEe(t,e,i,r){if((e==null?void 0:e.duration)!=null)return!0;const{time:n,isLinear:s}=t,o=(e==null?void 0:e.speedFactor)||1;if(n>((e==null?void 0:e.maxDuration)??TK.maxDuration/o))return!1;if(s){const c=mi(),d=tr(...r.toScreen(c,...i.center)),h=tr(...i.toScreen(c,...r.center)),f=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1],m=d!=null&&d.x>-1*r.size[0]&&d.x<(1.5+.5)*r.size[0]&&d.y>-1*r.size[1]&&d.y<(1.5+.5)*r.size[1];if(n>GEe/o&&!f&&!m)return!1}return!0}l([u()],Zf.prototype,"easing",void 0),l([u()],Zf.prototype,"view",void 0),l([u()],Zf.prototype,"viewpoint",void 0),Zf=l([E("esri.views.2d.AnimationManager")],Zf);const JEe=Zf;function Jt(){return Promise.all([Q(()=>import("./webglDeps-CAL2qiiZ.js"),__vite__mapDeps([199,108,200,201,202,12,67]),import.meta.url),Q(()=>import("./mapViewDeps-C32Ez157.js"),__vite__mapDeps([203,165,127,204,124,125,120,13,12,126,123,128,117,205,108,200,201,99,118,206,121,202,67,107,66,207,116,86,208,209,178,181,10,11,16,22,210,129,130,211,212,52,199,213,142,214,215,177,216,94,95,217,112,115,119,48,47,218,131,219,122,37,38,39,220,132,137,221,152,222,223,224,225,104,226,227]),import.meta.url)])}const q0=()=>Jt().then(()=>Q(()=>import("./TileLayerView2D-RmSCDkCX.js"),__vite__mapDeps([228,123,124,125,120,13,12,126,127,128,117,211,165,212,52,209,208,207,116,66,201,202,67,107,108,86,178,181,10,11,213,205,200,99,206,121,142,214,215,177,112,204,118,16,22,129,130,94,95,220,115,119,48,47,132,137,221,152,229,230,231,225,232,195,233,223,224,234,235,236,237,238,239,240,241]),import.meta.url)),Md=()=>Jt().then(()=>Q(()=>import("./FeatureLayerView2D-gW-q8XEm.js").then(t=>t.F),__vite__mapDeps([242,221,209,10,11,12,13,243,244,245,48,58,232,208,195,224,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,204,124,125,120,126,127,123,128,205,99,206,121,16,22,142,246,109,110,111,112,138,132,210,247,157,59,134,237,240,234,235,241]),import.meta.url)),D6={"base-dynamic":()=>Jt().then(()=>Q(()=>import("./BaseDynamicLayerView2D-BHD6VSo5.js"),__vite__mapDeps([248,249,207,116,117,66,201,202,12,67,107,108,86,208,209,178,181,10,11,13,230,205,200,99,231,232,195,250,234,235]),import.meta.url)),"base-tile":q0,"bing-maps":q0,catalog:()=>Jt().then(()=>Q(()=>import("./CatalogLayerView2D-D3892SuJ.js"),__vite__mapDeps([251,232,208,209,195,234]),import.meta.url)),"catalog-dynamic-group":()=>Jt().then(()=>Q(()=>import("./CatalogDynamicGroupLayerView2D-BIhZvDPX.js"),__vite__mapDeps([252,232,208,209,195,234]),import.meta.url)),"catalog-footprint":()=>Jt().then(()=>Q(()=>import("./CatalogFootprintLayerView2D-BJ7VEips.js"),__vite__mapDeps([253,242,221,209,10,11,12,13,243,244,245,48,58,232,208,195,224,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,204,124,125,120,126,127,123,128,205,99,206,121,16,22,142,246,109,110,111,112,138,132,210,247,157,59,134,237,240,234,235,241,254]),import.meta.url)),csv:Md,"geo-rss":()=>Jt().then(()=>Q(()=>import("./GeoRSSLayerView2D-t97B6-w5.js"),__vite__mapDeps([255,232,208,209,195,222,223,224,12,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,10,11,13,204,124,125,120,126,127,123,128,205,99,206,121,16,22,220,211,165,212,52,115,119,48,47,132,137,221,152,234]),import.meta.url)),feature:Md,geojson:Md,parquet:Md,graphics:()=>Jt().then(()=>Q(()=>import("./GraphicsLayerView2D-Bc81ZSEP.js"),__vite__mapDeps([256,232,208,209,195,222,223,224,12,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,10,11,13,204,124,125,120,126,127,123,128,205,99,206,121,16,22,220,211,165,212,52,115,119,48,47,132,137,221,152,234,241]),import.meta.url)),group:()=>Jt().then(()=>Q(()=>import("./GroupLayerView2D-D4qOnQOx.js"),__vite__mapDeps([257,232,208,209,195,234]),import.meta.url)),imagery:()=>Jt().then(()=>Q(()=>import("./ImageryLayerView2D-Ctm0WXDw.js"),__vite__mapDeps([258,167,154,155,259,202,12,67,107,108,66,147,207,116,117,201,86,208,209,178,181,10,11,13,164,232,195,220,124,125,120,126,127,123,128,211,165,212,52,115,118,119,121,48,47,204,205,200,99,206,16,22,132,137,221,152,233,223,224,225,249,230,231,250,168,20,243,240,234,235,241]),import.meta.url)),"imagery-tile":()=>Jt().then(()=>Q(()=>import("./ImageryTileLayerView2D-BZIHE8aY.js"),__vite__mapDeps([260,261,259,202,12,67,107,108,66,147,207,116,117,201,86,208,209,178,181,10,11,13,164,154,155,232,195,167,262,225,205,200,99,219,206,121,231,263,168,241,20,243,240,234,235]),import.meta.url)),kml:()=>Jt().then(()=>Q(()=>import("./KMLLayerView2D-CnMiCyzN.js"),__vite__mapDeps([264,265,230,208,209,205,108,200,201,99,231,249,207,116,117,66,202,12,67,107,86,178,181,10,11,13,232,195,222,223,224,118,225,204,124,125,120,126,127,123,128,206,121,16,22,220,211,165,212,52,115,119,48,47,132,137,221,152,234,37,38,39,168,216,199,94,95,214,262]),import.meta.url)),"knowledge-graph":()=>Jt().then(()=>Q(()=>import("./KnowledgeGraphLayerView2D-DYyzr4zo.js"),__vite__mapDeps([266,232,208,209,195,234]),import.meta.url)),"link-chart":()=>Jt().then(()=>Q(()=>import("./KnowledgeGraphLayerView2D-DYyzr4zo.js"),__vite__mapDeps([266,232,208,209,195,234]),import.meta.url)),"knowledge-graph-sublayer":Md,"map-image":()=>Jt().then(()=>Q(()=>import("./MapImageLayerView2D-CdIIZXH8.js"),__vite__mapDeps([267,249,207,116,117,66,201,202,12,67,107,108,86,208,209,178,181,10,11,13,230,205,200,99,231,232,195,220,124,125,120,126,127,123,128,211,165,212,52,115,118,119,121,48,47,204,206,16,22,132,137,221,152,233,223,224,225,250,234,268,237,239,243,235,236,238,240,241]),import.meta.url)),"map-notes":()=>Jt().then(()=>Q(()=>import("./MapNotesLayerView2D-B7qIGQr-.js"),__vite__mapDeps([269,232,208,209,195,222,223,224,12,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,10,11,13,204,124,125,120,126,127,123,128,205,99,206,121,16,22,220,211,165,212,52,115,119,48,47,132,137,221,152,234,241]),import.meta.url)),media:()=>Jt().then(()=>Q(()=>import("./MediaLayerView2D-j_V99vl0.js"),__vite__mapDeps([270,271,137,123,124,125,120,13,12,126,127,128,117,211,165,212,52,209,208,207,116,66,201,202,67,107,108,86,178,181,10,11,213,205,200,99,206,121,142,214,215,177,112,204,118,16,22,129,130,94,95,220,115,119,48,47,132,221,152,218,131,272,219,232,195,234]),import.meta.url)),"ogc-feature":()=>Jt().then(()=>Q(()=>import("./OGCFeatureLayerView2D-p9EY46uk.js"),__vite__mapDeps([273,242,221,209,10,11,12,13,243,244,245,48,58,232,208,195,224,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,204,124,125,120,126,127,123,128,205,99,206,121,16,22,142,246,109,110,111,112,138,132,210,247,157,59,134,237,240,234,235,241,254]),import.meta.url)),"open-street-map":q0,"oriented-imagery":Md,route:()=>Jt().then(()=>Q(()=>import("./RouteLayerView2D-Dhr4aXpz.js"),__vite__mapDeps([274,275,276,232,208,209,195,222,223,224,12,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,10,11,13,204,124,125,120,126,127,123,128,205,99,206,121,16,22,220,211,165,212,52,115,119,48,47,132,137,221,152,234,241]),import.meta.url)),stream:()=>Jt().then(()=>Q(()=>import("./StreamLayerView2D-CnUk6lsg.js"),__vite__mapDeps([277,242,221,209,10,11,12,13,243,244,245,48,58,232,208,195,224,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,204,124,125,120,126,127,123,128,205,99,206,121,16,22,142,246,109,110,111,112,138,132,210,247,157,59,134,237,240,234,235,241,254]),import.meta.url)),"subtype-group":()=>Jt().then(()=>Q(()=>import("./SubtypeGroupLayerView2D-DC8SbX2N.js"),__vite__mapDeps([278,242,221,209,10,11,12,13,243,244,245,48,58,232,208,195,224,118,116,117,66,200,108,225,207,201,202,67,107,86,178,181,204,124,125,120,126,127,123,128,205,99,206,121,16,22,142,246,109,110,111,112,138,132,210,247,157,59,134,237,240,234,235,241]),import.meta.url)),tile:q0,"vector-tile":()=>Jt().then(()=>Q(()=>import("./VectorTileLayerView2D-D8c_Ityy.js"),__vite__mapDeps([279,128,112,12,123,177,215,178,126,108,202,67,107,207,116,117,66,201,86,208,209,181,10,11,13,225,46,179,180,165,232,195,234,235]),import.meta.url)),video:()=>Jt().then(()=>Q(()=>import("./VideoLayerView2D-B0B01waV.js"),__vite__mapDeps([280,281,282,191,190,272,86,207,116,117,66,201,202,12,67,107,108,208,209,178,181,10,11,13,204,124,125,120,126,127,123,128,205,200,99,118,206,121,16,22,219,283,232,195,222,223,224,225,220,211,165,212,52,115,119,48,47,132,137,221,152,234]),import.meta.url)),wcs:()=>Jt().then(()=>Q(()=>import("./ImageryTileLayerView2D-BZIHE8aY.js"),__vite__mapDeps([260,261,259,202,12,67,107,108,66,147,207,116,117,201,86,208,209,178,181,10,11,13,164,154,155,232,195,167,262,225,205,200,99,219,206,121,231,263,168,241,20,243,240,234,235]),import.meta.url)),"web-tile":q0,wfs:Md,wms:()=>Jt().then(()=>Q(()=>import("./WMSLayerView2D-Cza3HT0s.js"),__vite__mapDeps([284,249,207,116,117,66,201,202,12,67,107,108,86,208,209,178,181,10,11,13,230,205,200,99,231,232,195,250,234,235,243]),import.meta.url)),wmts:()=>Jt().then(()=>Q(()=>import("./WMTSLayerView2D-DlzwzBef.js"),__vite__mapDeps([285,229,230,208,209,205,108,200,201,99,231,207,116,117,66,202,12,67,107,86,178,181,10,11,13,225,232,195,234,235]),import.meta.url)),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function YEe(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new j(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const z6={hasLayerViewModule:t=>D6[t.type]!=null,importLayerView:t=>{const e=D6[t.type];if(e==null)throw YEe(t);return e(t)}};var ms;let r0=(ms=class{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new ms(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,c]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(c)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ms(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const n=this.clone();return n.col+=e,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new ms(e,i,r,n),new ms(e,i,r+1,n),new ms(e,i+1,r,n),new ms(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},ms.pool=new Oy(()=>new ms(""),null,null,25,50),ms);function gf(t,e){return[t,e]}function Ad(t,e,i){return t[0]=e,t[1]=i,t}function KEe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const So=new r0("0/0/0/0");let QEe=class IK{static create(e,i,r=null){const n=hn(e.spatialReference),s=i.origin||gf(e.origin.x,e.origin.y),o=gf(e.size[0]*i.resolution,e.size[1]*i.resolution),a=gf(-1/0,-1/0),c=gf(1/0,1/0),d=gf(1/0,1/0);r!=null&&(Ad(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),Ad(c,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),Ad(d,c[0]-a[0]+1,c[1]-a[1]+1));const{cols:h,rows:f}=i;let m,v,w,x;return!r&&h&&f&&(Ad(a,h[0],f[0]),Ad(c,h[1],f[1]),Ad(d,h[1]-h[0]+1,f[1]-f[0]+1)),e.isWrappable?(m=gf(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),d[1]),v=!0,w=n.origin,x=n.valid):(m=d,v=!1),new IK(i.level,i.resolution,i.scale,s,a,c,d,o,m,v,w,x)}constructor(e,i,r,n,s,o,a,c,d,h,f,m){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=c,this.worldSize=d,this.wrap=h,this._spatialReferenceOrigin=f,this._spatialReferenceValid=m}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?n[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){So.set(i);const n=r?So.col:this.denormalizeCol(So.col,So.world),s=So.row;return KEe(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){So.set(i);const n=r?So.col:this.denormalizeCol(So.col,So.world);return Array.isArray(e)?Ad(e,this.getXForColumn(n),this.getYForRow(So.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(So.row)),e}};var rh;let LF=(rh=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let s=r;s<=n;s++){const o=e.getWorldForColumn(s);yield new r0(e.level,i,e.normalizeCol(s),o)}}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:c}of r)for(let d=a;d<=c;d++)e.call(i,s,o,n.normalizeCol(d),n.getWorldForColumn(d))}},rh.pool=new Oy(()=>new rh),rh),L2=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const ri=new r0("0/0/0/0");let XEe=class EK{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,o]=i,a=s-r,c=o-n,d=c!==0?a/c:0,h=(Math.ceil(n)-n)*d,f=(Math.floor(n)-n)*d;return new EK(r,Math.floor(n),Math.ceil(o),d,a<0?h:f,a<0?f:h,a<0?s:r,a<0?r:s)}constructor(e,i,r,n,s,o,a,c){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=c}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const es=[[0,0],[0,0],[0,0],[0,0]],e2e=1e-6;let t2e=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>QEe.create(e,a,i));s.forEach((a,c)=>{this._infoByLevel[a.level]=o[c],this._infoByScale[a.scale]=o[c],this.scales[c]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){ri.set(i);const n=this._infoByLevel[ri.level];return n?n.getTileBounds(e,ri,r):e}getTileCoords(e,i,r=!1){ri.set(i);const n=this._infoByLevel[ri.level];return n?n.getTileCoords(e,ri,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=LF.pool.acquire(s),a=this._wrap;let c,d,h,f=1/0,m=-1/0;const v=o.spans;es[0][0]=es[0][1]=es[1][1]=es[3][0]=-i,es[1][0]=es[2][0]=e.size[0]+i,es[2][1]=es[3][1]=e.size[1]+i;for(const T of es)e.toMap(T,T),T[0]=s.getColumnForX(T[0]),T[1]=s.getRowForY(T[1]);const w=[];let x=3;for(let T=0;T<4;T++){if(es[T][1]===es[x][1]){x=T;continue}const C=XEe.create(es[T],es[x]);f=Math.min(C.ymin,f),m=Math.max(C.ymax,m),w[C.ymin]===void 0&&(w[C.ymin]=[]),w[C.ymin].push(C),x=T}if(f==null||m==null||m-f>100)return null;let $=[];for(c=f;c<m;){w[c]!=null&&($=$.concat(w[c])),d=1/0,h=-1/0;for(let T=$.length-1;T>=0;T--){const C=$[T];d=Math.min(d,C.getLeftCol()),h=Math.max(h,C.getRightCol())}if(d=Math.floor(d),h=Math.floor(h),c>=s.first[1]&&c<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const T=Math.floor(h/s.worldSize[0]);for(let C=Math.floor(d/s.worldSize[0]);C<=T;C++)v.push(new L2(c,Math.max(s.getFirstColumnForWorld(C),d),Math.min(s.getLastColumnForWorld(C),h)))}else v.push(new L2(c,d,h));else d>s.last[0]||h<s.first[0]||(d=Math.max(d,s.first[0]),h=Math.min(h,s.last[0]),v.push(new L2(c,d,h)));c+=1;for(let T=$.length-1;T>=0;T--){const C=$[T];C.ymax>=c?C.incrRow():$.splice(T,1)}}return o}getTileParentId(e){ri.set(e);const i=this._infoByLevel[ri.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ri,this._lodInfos[r],ri),ri.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){ri.set(i);const r=this._infoByLevel[ri.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(ri,n,ri);const o=n.denormalizeCol(ri.col,ri.world);for(const a of e.spans)if(a.row===ri.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,c,d]=e.spans.reduce((x,$)=>(x[0]=Math.min(x[0],$.row),x[1]=Math.max(x[1],$.row),x[2]=Math.min(x[2],$.colFrom),x[3]=Math.max(x[3],$.colTo),x),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(ri.col,ri.world),f=n.getColumnForX(r.getXForColumn(h)),m=n.getRowForY(r.getYForRow(ri.row)),v=n.getColumnForX(r.getXForColumn(h+1))-1,w=n.getRowForY(r.getYForRow(ri.row+1))-1;return!(f>d||v<c||m>a||w<o)}const s=n.denormalizeCol(ri.col,ri.world);return e.spans.some(o=>o.row===ri.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=hn(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+e2e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},i2e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},r2e=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new Gu,this._controllers=new Gu,this._processingItems=new Gu,this._pausedSignal=_y(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Sw(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Gt(this._schedule),this._task=Gt(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=io(i,()=>n.abort()));const o=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),a(),d.reject(gt())},a=()=>{c.remove(),s!=null&&s.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},c=rR(n.signal,o),d=Gn();return this._deferreds.set(e,d),this._controllers.set(e,n),d.promise.then(a,a),this._queue.push(e),this._scheduleNext(),d.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(gt()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=Ly(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new i2e(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}qr(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){}};const j6=[0,0];let El=class extends Se{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:n}=this;this._queue=new r2e({concurrency:e,scheduler:r,priority:n,process:(s,o)=>{const a=this._keyToItem.get(s);return i(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Ot(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(e.key),s=Ah(this._tilesByScale,n,()=>new Set),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return s.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(y9(a,c=>i.has(c))){const c=Math.abs(o-r);c<s&&(n=a,s=c)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(i.has(a.id)){r.getTileCoords(j6,a);const c=Yk(j6,n);c<o&&(o=c,s=a)}return s}};l([u({constructOnly:!0})],El.prototype,"concurrency",void 0),l([u({constructOnly:!0})],El.prototype,"priority",void 0),l([u({constructOnly:!0})],El.prototype,"process",void 0),l([u({constructOnly:!0})],El.prototype,"scheduler",void 0),l([u()],El.prototype,"state",void 0),l([u({constructOnly:!0})],El.prototype,"tileInfoView",void 0),El=l([E("esri.views.2d.tiling.TileQueue")],El);const JUe=El;let n2e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];V6(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,c=r*o[0],d=r*o[1],h=[0,0],f=[0,0];for(s.sort((m,v)=>(h[0]=a.x+c*(m.col+.5),h[1]=a.y-d*(m.row+.5),f[0]=a.x+c*(v.col+.5),f[1]=a.y-d*(v.row+.5),aw(h,i)-aw(f,i)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),V6(this._tilePerId,e)}};function V6(t,e){t.delete(e)}const Cd=new r0(0,0,0,0),hl=new Map,B0=[],F2=[];let KUe=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new n2e(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var T,C;const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:o}=e.state,{minScale:a,maxScale:c}=this.tileInfoView,d=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>a||n<c))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=h,{level:v}=m;this.tiles.length=0,r.forEach(P=>P.visible=!0);let w=0,x=0;if(f.length>0)for(const{row:P,colFrom:L,colTo:D}of f)for(let q=L;q<=D;q++){w++;const F=Cd.set(v,P,m.normalizeCol(q),m.getWorldForColumn(q)).id;let ee=r.get(F);if(ee)ee.isReady?(hl.set(F,ee),x++):d||this._addParentTile(F,hl);else{if((T=this._tileCache)!=null&&T.has(F)){if(ee=this._tileCache.pop(F),this.tileIndex.set(F,ee),ee.isReady){hl.set(F,ee),x++;continue}}else ee=this.acquireTile(Cd),this.tileIndex.set(F,ee);d||this._addParentTile(F,hl)}}const $=x===w;for(const[P,L]of r){if(hl.has(P))continue;Cd.set(P);const D=this.tileInfoView.intersects(h,Cd),q=this.cachePolicy==="purge"?Cd.level!==v:Cd.level>v;!D||!d&&$?!q&&D||B0.push(L):L.isReady?q&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Cd,v)?B0.push(L):F2.push(L):q&&B0.push(L)}for(const P of F2)P.isReady&&hl.set(P.key.id,P);for(const P of B0)this._tileCache?this._tileCache.add(P):this.releaseTile(P),r.delete(P.key.id);for(const P of hl.values())this.tiles.push(P);for(const P of r.values())hl.has(P.key.id)||(P.visible=!1);(C=this._tileCache)==null||C.prune(v,s,o),LF.pool.release(h),F2.length=0,B0.length=0,hl.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())e(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=Un();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=Un();if(this.tileInfoView.getTileBounds(s,n.key,!0),Ide(s,r))return!0}return!1}};const s2e={"area-measurement":()=>Q(()=>import("./AreaMeasurementAnalysisView2D-BNsDH_2Y.js"),__vite__mapDeps([286,287,288,289,186,185,281,165,227,290,291,292,293,294,39,295,296,297,298,136,299,135,300,301,37,38,302,303,304,305,84,78,93,90,91,92,89,306,76,181,88]),import.meta.url),dimension:null,"direct-line-measurement":null,"distance-measurement":()=>Q(()=>import("./DistanceMeasurementAnalysisView2D-C_YOlA5z.js"),__vite__mapDeps([307,287,288,186,227,299,135,39,136,300,301,291,292,293,294,295,296,297,37,38,302,303,289,185,281,165,304,305,84,78,93,90,91,92,89,306,76,181,88,298]),import.meta.url),"elevation-profile":()=>Q(()=>import("./ElevationProfileAnalysisView2D-0nDjDwk5.js"),__vite__mapDeps([308,288,309,281,165,184,310,227,311,291,312,293,292,294,39,295,297,296,302,303,98,91,306,287,198,304,305,84,78,93,90,92,89,186,76,300,136,181,88,298]),import.meta.url),"line-of-sight":null,"shadow-cast":null,slice:null,viewshed:null,"volume-measurement":null};function o2e(t){const e=s2e[t.type];if(!e)throw new j("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let a2e=class{constructor(e,i={}){this.events=new D9,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",r);n||(n=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=Mh([Ry(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||B("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=B("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,n,s,o,a,c]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${n}, ${s}, ${o}, ${a}, ${c})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:n},pixelRatio:s}=e,o=n[0],a=n[1],c=Math.round(o*s),d=Math.round(a*s);i.width===c&&i.height===d||(i.width=c,i.height=d),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,i){const[r,n]=e.center,[s,o]=i.center,[a,c]=e.toScreen([0,0],s,o),[d,h]=e.toScreen([0,0],r,n),f=d-a,m=h-c,v=e.scale/i.scale,w=i.rotation-e.rotation,x=Ja();return LY(x),AI(x,x,[v,v]),y1(x,x,e1(w)),$y(x,x,[f,m]),x}};function l2e(t,e,i,r,n){MK(t,e,i||0,r||t.length-1,n||c2e)}function MK(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,o=e-i+1,a=Math.log(s),c=.5*Math.exp(2*a/3),d=.5*Math.sqrt(a*c*(s-c)/s)*(o-s/2<0?-1:1);MK(t,e,Math.max(i,Math.floor(e-o*c/s+d)),Math.min(r,Math.floor(e+(s-o)*c/s+d)),n)}var h=t[e],f=i,m=r;for(G0(t,i,e),n(t[r],h)>0&&G0(t,i,r);f<m;){for(G0(t,f,m),f++,m--;n(t[f],h)<0;)f++;for(;n(t[m],h)>0;)m--}n(t[i],h)===0?G0(t,i,m):G0(t,++m,r),m<=e&&(i=m+1),e<=m&&(r=m-1)}}function G0(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function c2e(t,e){return t<e?-1:t>e?1:0}function AT(t,e){if(!(this instanceof AT))return new AT(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function u2e(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function yf(t,e){Dv(t,0,t.children.length,e,t)}function Dv(t,e,i,r,n){n||(n=Jf(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],zv(n,t.leaf?r(s):s);return n}function zv(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function U6(t,e){return t.minX-e.minX}function q6(t,e){return t.minY-e.minY}function N2(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function F_(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d2e(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p2e(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function D2(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function N_(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Jf(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function B6(t,e,i,r,n){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,l2e(t,s,e,i,n),o.push(e,s,s,i))}AT.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!N_(t,e))return i;for(var n,s,o,a,c=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],N_(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):D2(t,a)?this._all(o,i):c.push(o));e=c.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!N_(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],N_(t,o=e.leaf?i(s):s)){if(e.leaf||D2(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Jf([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(t),c=[],d=[];o||c.length;){if(o||(o=c.pop(),r=c[c.length-1],i=d.pop(),s=!0),o.leaf&&(n=u2e(t,o.children,e))!==-1)return o.children.splice(n,1),c.push(o),this._condense(c),this;s||o.leaf||!D2(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(c.push(o),d.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:U6,compareMinY:q6,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,o=this._maxEntries;if(s<=o)return yf(n=Jf(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=Jf([])).leaf=!1,n.height=r;var a,c,d,h,f=Math.ceil(s/o),m=f*Math.ceil(Math.sqrt(o));for(B6(t,e,i,m,this.compareMinX),a=e;a<=i;a+=m)for(B6(t,a,d=Math.min(a+m-1,i),f,this.compareMinY),c=a;c<=d;c+=f)h=Math.min(c+f-1,d),n.children.push(this._build(t,c,h,r-1));return yf(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,c,d,h,f;r.push(e),!e.leaf&&r.length-1!==i;){for(h=f=1/0,n=0,s=e.children.length;n<s;n++)c=N2(o=e.children[n]),(d=d2e(t,o)-c)<f?(f=d,h=c<h?c:h,a=o):d===f&&c<h&&(h=c,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),zv(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=Jf(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,yf(i,this.toBBox),yf(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=Jf([t,e]),this.data.height=t.height+1,this.data.leaf=!1,yf(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,a,c,d,h;for(c=d=1/0,r=e;r<=i-e;r++)o=p2e(n=Dv(t,0,r,this.toBBox),s=Dv(t,r,i,this.toBBox)),a=N2(n)+N2(s),o<c?(c=o,h=r,d=a<d?a:d):o===c&&a<d&&(d=a,h=r);return h},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:U6,n=t.leaf?this.compareMinY:q6;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,a=Dv(t,0,e,o),c=Dv(t,i-e,i,o),d=F_(a)+F_(c);for(n=e;n<i-e;n++)s=t.children[n],zv(a,t.leaf?o(s):s),d+=F_(a);for(n=i-e-1;n>=e;n--)s=t.children[n],zv(c,t.leaf?o(s):s),d+=F_(c);return d},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)zv(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():yf(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function h2e(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let G6=class AK{constructor(e,i){this.key=new r0(0,0,0,0),this.bounds=Un(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return $de(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return h2e(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=sn.acquire();for(let r=0;r<e.length;r++)i[r]=new AK(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return hu.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Od={added:[],removed:[]},z2=new Set,f2e=new r0(0,0,0,0);function m2e(t,e){const i=hn(e);if(!i)return null;const[r,n]=i.valid;return t[2]>n?[Un([t[0],t[1],n,t[3]]),Un([r,t[1],r+t[2]-n,t[3]])]:t[0]<r?[Un([r,t[1],t[2],t[3]]),Un([n-(r-t[0]),t[1],n,t[3]])]:null}let g2e=class extends N9{constructor(e){super(),this._tiles=new Map,this._index=AT(9,B("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||oL(e)===0||aL(e)===0)return[];const i=m2e(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new G6(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:c}of r)for(let d=a;d<=c;d++){const h=f2e.set(s,o,n.normalizeCol(d),n.getWorldForColumn(d)).id;if(z2.add(h),!this.has(h)){const f=new G6(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),Od.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];z2.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Od.removed.push(a))}(Od.added.length||Od.removed.length)&&this.emit("update",Od),LF.pool.release(i),z2.clear(),Od.added.length=0,Od.removed.length=0}};const t9e=1e-30,H6=512,D_=16777216,i9e=8,r9e=29,n9e=24,s9e=4,o9e=0,a9e=0,l9e=0,c9e=1,u9e=2,d9e=3,p9e=4,h9e=5,f9e=6,m9e=12,g9e=13,y9e=5,y2e=6,v9e=5,b9e=6,CK=6,v2e=1<<CK,w9e=v2e<<1,_9e=1.05,x9e=3,S9e=1,$9e=3,T9e=3,k9e=5,I9e=6,E9e=1.15,b2e=4,M9e=128,w2e=256,A9e=w2e-2*b2e,C9e=2,O9e=128,P9e=1,R9e=10,L9e=1024,F9e=128,N9e=4,D9e=1,z9e=1<<20,j9e=.75,V9e=10,U9e=.75,q9e=256,B9e=32,G9e=512,H9e=0,W9e=1,_2e=1,Z9e=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],J9e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H0=256,x2e=()=>ie.getLogger("esri.views.webgl.checkWebGLError");function OK(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const PK=!!B("enable-feature:webgl-debug");function RK(){return PK}function Y9e(){return PK}function Pd(t,e=RK()){if(e){const i=OK(t);if(i){const r=new Error().stack;x2e().error(new j("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}const K9e={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},gs={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},De={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},S2e=Object.values(De),CT={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},Pb={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},l3={FLOAT:gs.FLOAT,UNSIGNED_BYTE:gs.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:gs.BYTE,UNSIGNED_SHORT:gs.UNSIGNED_SHORT,SHORT:gs.SHORT,UNSIGNED_INT:gs.UNSIGNED_INT,INT:gs.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},Q9e=33984,W6={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},X9e=1029,e7e=0,t7e=36064,i7e=36065,r7e=36066,n7e=36067,s7e=33306,o7e=36096,a7e=36128,Or={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497},$2e=new Set([gs.BYTE,gs.SHORT,gs.INT,gs.UNSIGNED_BYTE,gs.UNSIGNED_SHORT,gs.UNSIGNED_INT]);function l7e(t,e,i,r=0){const n=t.gl;t.bindBuffer(i);for(const s of i.layout){const o=e.get(s.name);if(o==null){console.warn(`There is no location for vertex attribute '${s.name}' defined.`);continue}const a=r*s.stride;if(s.count<=4)s.integer&&$2e.has(s.type)?n.vertexAttribIPointer(o,s.count,s.type,s.stride,s.offset+a):n.vertexAttribPointer(o,s.count,s.type,s.normalized,s.stride,s.offset+a),n.enableVertexAttribArray(o),s.divisor>0&&n.vertexAttribDivisor(o,s.divisor);else if(s.count===9)for(let c=0;c<3;c++)n.vertexAttribPointer(o+c,3,s.type,s.normalized,s.stride,s.offset+12*c+a),n.enableVertexAttribArray(o+c),s.divisor>0&&n.vertexAttribDivisor(o+c,s.divisor);else if(s.count===16)for(let c=0;c<4;c++)n.vertexAttribPointer(o+c,4,s.type,s.normalized,s.stride,s.offset+16*c+a),n.enableVertexAttribArray(o+c),s.divisor>0&&n.vertexAttribDivisor(o+c,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count);if(RK()){const c=OK(t.gl);c&&console.error(`Unable to bind vertex attribute "${s.name}" with baseInstanceOffset ${a}:`,c,s)}}}function c7e(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function T2e(t){switch(t){case 6406:case 6409:case 6403:case 36244:case De.R8:case De.R8I:case De.R8UI:case De.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case De.RGBA4:case De.R16F:case De.R16I:case De.R16UI:case De.RG8:case De.RG8I:case De.RG8UI:case De.RG8_SNORM:case De.RGB565:case De.RGB5_A1:case Pb.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case De.RGB8:case De.RGB8I:case De.RGB8UI:case De.RGB8_SNORM:case De.SRGB8:case Pb.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case De.RGBA8:case De.R32F:case De.R11F_G11F_B10F:case De.RG16F:case De.R32I:case De.R32UI:case De.RG16I:case De.RG16UI:case De.RGBA8I:case De.RGBA8UI:case De.RGBA8_SNORM:case De.SRGB8_ALPHA8:case De.RGB9_E5:case De.RGB10_A2UI:case De.RGB10_A2:case Pb.DEPTH_COMPONENT32F:case CT.DEPTH24_STENCIL8:return 4;case CT.DEPTH32F_STENCIL8:return 5;case De.RGB16F:case De.RGB16I:case De.RGB16UI:return 6;case De.RG32F:case De.RG32I:case De.RG32UI:case De.RGBA16F:case De.RGBA16I:case De.RGBA16UI:return 8;case De.RGB32F:case De.RGB32I:case De.RGB32UI:return 12;case De.RGBA32F:case De.RGBA32I:case De.RGBA32UI:return 16;case Or.COMPRESSED_RGB_S3TC_DXT1_EXT:case Or.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Or.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Or.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Or.COMPRESSED_R11_EAC:case Or.COMPRESSED_SIGNED_R11_EAC:case Or.COMPRESSED_RGB8_ETC2:case Or.COMPRESSED_SRGB8_ETC2:case Or.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Or.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Or.COMPRESSED_RG11_EAC:case Or.COMPRESSED_SIGNED_RG11_EAC:case Or.COMPRESSED_RGBA8_ETC2_EAC:case Or.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let LK=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=l3.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function k2e(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:T2e(t.internalFormat))*(t.target===34067?6:1))}const W0=()=>ie.getLogger("esri/views/webgl/textureUtils");function Z0(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&W0().error("Negative dimension parameters are not allowed!");const{internalFormat:n}=t;if(n&&(FK(n)||NK(n))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:a,hasMipmap:c}=t;c&&W0().error("Depth textures cannot have mipmaps"),s?a!==9729&&a!==9728&&W0().error("Depth textures cannot sample mipmaps"):(a!==9728&&W0().error("Depth textures without filtering must use NEAREST filtering"),o&&W0().error("Depth textures without filtering cannot use compare function"))}}function I2e(t){return S2e.includes(t)}function FK(t){return xk(Pb,t)}function NK(t){return xk(CT,t)}function E2e(t){return t!=null&&xk(Or,t)}function Yf(t){return t!=null&&"type"in t&&t.type==="compressed"}function M2e(t){return t!=null&&"byteLength"in t}function Z6(t){return t!=null&&!Yf(t)&&!M2e(t)}function vf(t){return t===32879||t===35866}function J6(t,e,i,r=1){let n=Math.max(e,i);return t===32879&&(n=Math.max(n,r)),Math.floor(Math.log2(n))+1}function z_(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case l3.FLOAT:switch(t.pixelFormat){case 6408:return De.RGBA32F;case 6407:return De.RGB32F;default:throw new j("texture:unknown-format","Unable to derive format")}case l3.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return De.RGBA8;case 6407:return De.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?CT.DEPTH24_STENCIL8:e===6402?Pb.DEPTH_COMPONENT24:e,t.internalFormat}function A2e(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let C2e=class DK extends LK{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case De.R16F:case De.R32F:case De.R8_SNORM:case De.R8:this.pixelFormat=6403;break;case De.R8I:case De.R8UI:case De.R16I:case De.R16UI:case De.R32I:case De.R32UI:this.pixelFormat=36244}}static validate(e,i){return new DK(e,i)}};const O2e=!!B("esri-tests-disable-gpu-memory-measurements"),fl=()=>ie.getLogger("esri/views/webgl/Texture");var qi;let P2e=(qi=class{constructor(e,i=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const n=C2e.validate(e,i);if(!n)throw new j("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=n}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return O2e?0:k2e(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){var e;this.abortCompression(),this.hasWebGLTextureObject&&((e=this._descriptor.context)!=null&&e.gl)&&(this._descriptor.context.instanceCounter.decrement(W6.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new j("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!Yf(e)&&this._descriptor.internalFormat&&xk(Or,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!Yf(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,n,s,o,a=0){o||fl().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||fl().error("An attempt to update uninitialized texture!");const c=this._descriptor;c.internalFormat=z_(c);const{context:d,pixelFormat:h,dataType:f,target:m,isImmutable:v}=c;if(v&&!this._wasImmutablyAllocated)throw new j("texture:uninitialized","Cannot update immutable texture before allocation!");const w=d.bindTexture(this,qi.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>c.width||r+s>c.height)&&fl().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:x}=d;a&&(n&&s||fl().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),x.pixelStorei(x.UNPACK_SKIP_ROWS,a)),Z6(o)?x.texSubImage2D(m,e,i,r,n,s,h,f,o):Yf(o)?x.compressedTexSubImage2D(m,e,i,r,n,s,c.internalFormat,o.levels[e]):x.texSubImage2D(m,e,i,r,n,s,h,f,o),a&&x.pixelStorei(x.UNPACK_SKIP_ROWS,0),d.bindTexture(w,qi.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,n,s,o,a,c){c||fl().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||fl().error("An attempt to update an uninitialized texture!");const d=this._descriptor;d.internalFormat=z_(d);const{context:h,pixelFormat:f,dataType:m,isImmutable:v,target:w}=d;if(v&&!this._wasImmutablyAllocated)throw new j("texture:uninitialized","Cannot update immutable texture before allocation!");vf(w)||fl().warn("Attempting to set 3D texture data on a non-3D texture");const x=h.bindTexture(this,qi.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(qi.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+s>d.width||r+o>d.height||n+a>d.depth)&&fl().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:$}=h;if(Yf(c))c=c.levels[e],$.compressedTexSubImage3D(w,e,i,r,n,s,o,a,d.internalFormat,c);else{const T=c;$.texSubImage3D(w,e,i,r,n,s,o,a,f,m,T)}h.bindTexture(x,qi.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new j("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,Z0(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const i=this._descriptor.context.bindTexture(this,qi.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(qi.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,qi.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new j("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,Z0(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,Z0(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),Z0(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=ch(this._compressionAbortController)}_setData(e,i){var c;const r=this._descriptor,n=(c=r.context)==null?void 0:c.gl;if(!n)return;Pd(n),this.hasWebGLTextureObject||(this._glName=n.createTexture(),r.context.instanceCounter.increment(W6.Texture,this)),Z0(r);const s=r.context.bindTexture(this,qi.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(qi.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Pd(n);const o=i??r.target,a=vf(o);if(Z6(e))this._setDataFromTexImageSource(e,o);else{const{width:d,height:h,depth:f}=r;if(d==null||h==null)throw new j("texture:missing-size","Width and height must be specified!");if(a&&f==null)throw new j("texture:missing-depth","Depth must be specified!");if(r.internalFormat=z_(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,d,h,f),Yf(e)){if(!E2e(r.internalFormat))throw new j("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,d,h,f,e),Pd(n),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),Pd(n),r.context.bindTexture(s,qi.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=34069;i<=34074;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,n=this._descriptor;n.internalFormat=z_(n);const s=vf(i),{width:o,height:a,depth:c}=A2e(e);n.width&&n.height,n.width||(n.width=o),n.height||(n.height=a),s&&n.depth,s&&(n.depth=c),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,n.internalFormat,n.hasMipmap,o,a,c),this._texImage(i,0,n.internalFormat,o,a,c,e),Pd(r),n.hasMipmap&&(this.generateMipmap(),Pd(r))}_setDataFromCompressedSource(e,i,r){const n=this._descriptor,{width:s,height:o,depth:a}=n,c=e.levels,d=J6(r,s,o,a),h=Math.min(d,c.length)-1;this._descriptor.context.gl.texParameteri(n.target,33085,h),this._forEachMipmapLevel((f,m,v,w)=>{const x=c[Math.min(f,c.length-1)];this._compressedTexImage(r,f,i,m,v,w,x)},h)}_texStorage(e,i,r,n,s,o){const{gl:a}=this._descriptor.context;if(!I2e(i)&&!FK(i)&&!NK(i))throw new j("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const c=r?J6(e,n,s,o):1;if(vf(e)){if(o==null)throw new j("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,c,i,n,s,o)}else a.texStorage2D(e,c,i,n,s);this._wasImmutablyAllocated=!0}_texImage(e,i,r,n,s,o,a){const c=this._descriptor.context.gl,d=vf(e),{isImmutable:h,pixelFormat:f,dataType:m}=this._descriptor;if(h){if(a!=null){const v=a;if(d){if(o==null)throw new j("texture:missing-depth","Missing depth dimension for 3D texture upload");c.texSubImage3D(e,i,0,0,0,n,s,o,f,m,v)}else c.texSubImage2D(e,i,0,0,n,s,f,m,v)}}else{const v=a;if(d){if(o==null)throw new j("texture:missing-depth","Missing depth dimension for 3D texture upload");c.texImage3D(e,i,r,n,s,o,0,f,m,v)}else c.texImage2D(e,i,r,n,s,0,f,m,v)}}_compressedTexImage(e,i,r,n,s,o,a){const c=this._descriptor.context.gl,d=vf(e);if(this._descriptor.isImmutable){if(a!=null)if(d){if(o==null)throw new j("texture:missing-depth","Missing depth dimension for 3D texture upload");c.compressedTexSubImage3D(e,i,0,0,0,n,s,o,r,a)}else c.compressedTexSubImage2D(e,i,0,0,n,s,r,a)}else if(d){if(o==null)throw new j("texture:missing-depth","Missing depth dimension for 3D texture upload");c.compressedTexImage3D(e,i,r,n,s,o,0,a)}else c.compressedTexImage2D(e,i,r,n,s,0,a)}async _compressOnWorker(e){var w,x,$,T;const{width:i,height:r,context:n,flipped:s,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,c=(w=this._descriptor.compress)==null?void 0:w.compressionTracker,d=(x=this._descriptor.compress)==null?void 0:x.compressionCallback,{compressedTextureETC:h,compressedTextureS3TC:f}=n.capabilities;if(!(($=qi.compressionWorkerHandle)!=null&&$.isCompressible(e,this._descriptor))||!h&&!f)return;this.abortCompression();const m=new AbortController;let v;this._compressionAbortController=m,c==null||c.increment();try{e instanceof Uint8Array?v=e.buffer:(v=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),Lt(m));const C={data:v,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!h,hasS3TC:!!f},P=await qi.compressionWorkerHandle.invoke(C,m.signal,1);if(Lt(m),P.compressedTexture&&this.hasWebGLTextureObject){const L=this.usedMemory;this._descriptor.internalFormat=P.internalFormat,this._setData(P.compressedTexture),d==null||d(L-this.usedMemory)}}catch(C){hr(C)||fl().error("Texture compression failed!")}finally{c==null||c.decrement(),(T=this._compressionAbortController)!=null&&T.signal.aborted&&(this._compressionAbortController=null),v instanceof ImageBitmap&&v.close()}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:n,depth:s,hasMipmap:o,target:a}=this._descriptor;const c=a===32879;if(r==null||n==null||c&&s==null)throw new j("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let d=0;e(d,r,n,s),o&&(r!==1||n!==1||c&&s!==1)&&!(d>=i);++d)r=Math.max(1,r>>1),n=Math.max(1,n>>1),c&&(s=Math.max(1,s>>1))}_applySamplingMode(){var s;const e=this._descriptor,i=(s=e.context)==null?void 0:s.gl;let r=e.samplingMode,n=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(n=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(n=9728)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){var r;const e=this._descriptor,i=(r=e.context)==null?void 0:r.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){var n;const e=this._descriptor,i=(n=e.context)==null?void 0:n.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),Pd(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},qi.TEXTURE_UNIT_FOR_UPDATES=0,qi.compressionWorkerHandle=null,qi);const j2=()=>ie.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function R2e(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const L2e=[0,0,0,0];let zK=class{constructor(){this.type="single",this._highlightOptions=new Hu,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*H0),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,y2e),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var e;(e=this._shadeTex)==null||e.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<CK)-1,activeGradient:this}]}_updateGradientTexture(e){const i=F2e(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,R2e(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,c=Math.sqrt(Math.PI/2)*_2e,d=Math.abs(n)>c?Math.round(10*(Math.abs(n)-c))/10:0,h=Math.abs(a)>c?Math.round(10*(Math.abs(a)-c))/10:0;let f;d&&!h?j2().error("The outer rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!d&&h?j2().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):d&&h&&j2().error("The highlight is "+Math.max(d,h)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function v(x,$,T){m[0]=(1-T)*x[0]+T*$[0],m[1]=(1-T)*x[1]+T*$[1],m[2]=(1-T)*x[2]+T*$[2],m[3]=(1-T)*x[3]+T*$[3]}const{_texelData:w}=this;for(let x=0;x<H0;++x)f=n+x/(H0-1)*(a-n),f<n?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):f<s?v(L2e,r.outlineColor,(f-n)/(s-n)):f<o?[m[0],m[1],m[2],m[3]]=r.outlineColor:f<a?v(r.outlineColor,r.fillColor,(f-o)/(a-o)):[m[0],m[1],m[2],m[3]]=r.fillColor,w[4*x]=255*m[0],w[4*x+1]=255*m[1],w[4*x+2]=255*m[2],w[4*x+3]=255*m[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=a,!this._shadeTex){const x=new LK(H0,1);x.wrapMode=33071,this._shadeTex=new P2e(e,x)}this._shadeTex.updateData(0,0,0,H0,1,this._texelData)}};function F2e(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let N2e=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new zK),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:e,activeGradient:n}),e<<=1}return i}};const jK={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},D2e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},z2e={...jK,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function j2e({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},n){const s=1/2**(i-n.key.level),o=1/2**(r-n.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:so(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function VK(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function UK(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function V2e(t){if(!UK(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function U2e(t){if(!VK(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function h7e(t,e,i){const r={};for(const n in i)typeof i[n]!="function"?r[n]=i[n]:r[n]=i[n](t,e);return r}function f7e(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:j2e(t,e),hittestRequest:V2e(t),highlight:U2e(t)}}function m7e(t){return{inside:t.selection===2,outside:t.selection===3}}function q2e(t){return UK(t)?D2e:VK(t)&&t.passOptions.stepType==="clear"?z2e:jK}function g7e(t){const{row:e,col:i}=t.key,r=i*H6,n=e*H6;return{tileOffsetFromLocalOrigin:[r%D_,n%D_],maxIntsToLocalOrigin:[Math.floor(r/D_),Math.floor(n/D_)]}}const B2e=new Ze({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function y7e(t){return B2e.toJSON(t)}function v7e(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:n}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function G2e(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new N2e:new zK),YP(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function b7e(t,e,i,r){const{painter:n,highlightGradient:s}=t,{highlight:o}=n.effects;if(!s)return;const a=t.passOptions,c=s.getReasonsWithGradients();for(let d=0;d<c.length;d++){const h={...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:c[d].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(h),i(h),d<c.length-1){let m=0;for(let v=d+1;v<c.length;v++)m|=c[v].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:m,stepType:"clear",highlightAll:e}})}const f={...t,passOptions:{type:"highlight",activeGradient:c[d].activeGradient,activeReasons:c[d].activeReasons,stepType:"draw",highlightAll:e}};n.setPipelineState(q2e(t)),n.updatePipelineState(t.context),o.draw(f),o.unbind()}t.passOptions=a}const j_=t=>parseFloat(t)/100;function H2e(t,e,i){const r=typeof t.left=="string"?j_(t.left)*e:t.left,n=typeof t.right=="string"?j_(t.right)*e:t.right,s=typeof t.top=="string"?j_(t.top)*i:t.top,o=typeof t.bottom=="string"?j_(t.bottom)*i:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-n,r),ymin:a,ymax:Math.max(i-o,s)}}function qK(t,e,i,r){switch(e.type){case"rect":{const{width:n,height:s}=t,{xmin:o,xmax:a,ymin:c,ymax:d}=H2e(e,n,s),{x:h,y:f}=i;return h>o&&h<a&&f>c&&f<d}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||sL(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?nL(e.geometry,r):Zk(e.geometry,r))}}function W2e(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function Z2e(t,e){if(!t.highlights){if(!e)return;t.highlights=new de([new Hu])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function J2e(t,e,i){const r=_Y(e)?wY(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,c=null;i!=null&&i.include?K6(i.include,Y6(t,m=>{n.add(m),V2(m,v=>s.add(v))},(m,v)=>{s.add(m),n.add(v)},m=>{a||(a=new Set),a.add(m)},m=>n.add(m),()=>o=!0)):(o=!0,n=new Set(t.allLayerViews),n.forEach(m=>{V2(m,v=>s.add(v))})),i!=null&&i.exclude&&K6(i.exclude,Y6(t,m=>{n.delete(m),V2(m,v=>s.delete(v))},m=>s.delete(m),m=>{c||(c=new Set),c.add(m)}));const d=t.toMap(r),h=t.allLayerViews.filter(m=>!m.suspended&&n.has(m)&&m.clips.every(v=>qK(t,v,r,d))).reverse();let f=[...o?t.graphicsView.hitTest(d).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:d})):[],...await Promise.all(h.map(m=>m.hitTest(d,r)).toArray())].filter(_r).flat().filter(_r);return f=f.filter(m=>{var v;return m.type!=="graphic"||((v=m.layer)==null?void 0:v.type)!=="subtype-group"||s.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(c3(m.graphic))))),c&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(c!=null&&c.has(c3(m.graphic))))),{screenPoint:r,results:f}}function Y6(t,e,i,r,n,s){return o=>{if(o instanceof qt){if(o.layer===t)s==null||s();else{const a=t.allLayerViews.find(c=>c.layer===o.layer);a&&(n==null||n(a))}r(c3(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(c=>c.layer===o.parent);a&&i(o,a)}else{const a=t.allLayerViews.find(c=>c.layer===o);a&&e(a)}}}function K6(t,e){if(t)if(e$(t))for(const i of t)if(e$(i))for(const r of i)e(r);else e(i);else e(t)}function c3(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function V2(t,e){const i=t.layer;(i==null?void 0:i.type)==="subtype-group"&&i.sublayers.forEach(r=>{e(r)})}let J0=null,OT=!0;function Y2e(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(OT)try{return new ImageData(t,e)}catch{OT=!1}return BK(t,e,i)}function w7e(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(OT)try{return new ImageData(t,e,i)}catch{OT=!1}const n=BK(e,i,r);return n.data.set(t,0),n}function K2e(){return J0||(J0=document.createElement("canvas"),J0.width=1,J0.height=1),J0}function BK(t,e,i){return i||(i=K2e()),i.getContext("2d").createImageData(t,e)}async function Q2e(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await Ft(i,{...e,responseType:"image"});return r}catch(r){throw hr(r)?r:new j("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function _7e(t,e){const{arrayBuffer:i,mediaType:r}=await X2e(t,e),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await Q(()=>import("./gif-mfWbALVF.js"),[],import.meta.url);if(s(i))return o(i,e)}if(n){const{isAnimatedPNG:s,parseApng:o}=await Q(()=>import("./apng-o7myWmR3.js"),__vite__mapDeps([313,163]),import.meta.url);if(s(i))return o(i,e)}return Q2e(new Blob([i],{type:r}),e)}async function X2e(t,e){var n;const i=gh(t);if(i!=null&&i.isBase64)return{arrayBuffer:pB(i.data),mediaType:i.mediaType};const r=await Ft(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}function GK(t,e,i){const{ctx:r,canvas:n}=WK(t,i),s=r.getImageData(0,0,t.width,t.height),o=JK(n,e);return ZK(n),{dataUrl:o,data:s}}function HK(t,e){const{ctx:i,canvas:r}=WK(t,e),n=i.getImageData(0,0,t.width,t.height);return ZK(r),n}function WK(t,e){const i=eMe();e.premultipliedAlpha&&nMe(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&rMe(r),{ctx:r,canvas:i}}function ZK(t){t.width=0,t.height=0}function eMe(){return U2==null&&(U2=document.createElement("canvas")),U2}let U2=null;function JK(t,e){const i=sMe[e.format],r=e.quality/100;return t.toDataURL(i,r)}function YK(t,e){const i=iMe(t),r=aMe[i];return{format:i,quality:Es(e??r,0,100)}}function KK(t,e){return e/Math.max(t[0],t[1])}function tMe(t,e,i,r=0,n=0,s=t.width-r,o=t.height-n,a=!1){const{data:c}=t,{width:d,height:h,data:f}=e,m=s/d,v=o/h,w=Math.ceil(m/2),x=Math.ceil(v/2),$=t.width;for(let T=0;T<h;T++)for(let C=0;C<d;C++){const P=4*(C+(a?h-T-1:T)*d);let L=0,D=0,q=0,F=0,ee=0,ae=0;const ne=(T+.5)*v;for(let ue=Math.floor(T*v);ue<(T+1)*v;ue++){const X=Math.abs(ne-(ue+.5))/x,J=(C+.5)*m,H=X*X;for(let ge=Math.floor(C*m);ge<(C+1)*m;ge++){const be=Math.abs(J-(ge+.5))/w,Ee=Math.sqrt(H+be*be);if(Ee>=1)continue;let we=2*Ee*Ee*Ee-3*Ee*Ee+1;const Oe=4*(r+ge+(n+ue)*$);ae+=we*c[Oe+3],D+=we,!i&&c[Oe+3]<255&&(we=we*c[Oe+3]/255),q+=we*c[Oe],F+=we*c[Oe+1],ee+=we*c[Oe+2],L+=we}}f[P]=q/L,f[P+1]=F/L,f[P+2]=ee/L,f[P+3]=ae/D}return e}function iMe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return oMe}}function rMe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function nMe(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const sMe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Q6=98,oMe="png",aMe={png:100,jpg:Q6,jpeg:Q6},x7e=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:Y2e,encode:GK,encodeData:HK,getFormatAndQuality:YK,getMaximumResolutionScale:KK,resampleHermite:tMe,toDataUrl:JK},Symbol.toStringTag,{value:"Module"})),QK={flipY:!0,premultipliedAlpha:!0};async function lMe(t,e){const i=await XK(t,e),{format:r,quality:n}=YK(e==null?void 0:e.format,e==null?void 0:e.quality);return GK(i,{format:r,quality:n},QK)}async function cMe(t,e){const i=await XK(t,e);return HK(i,QK)}function XK(t,e){const i=pMe(e||{},dMe(t.stage,t.size),t.size,t.padding),r=uMe(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e==null?void 0:e.rotation)}function uMe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const n=e.find(s=>s.layer.id===r.id);n!=null&&n.container&&i.push(n.container)}),i}function dMe(t,e){return Math.min(4,KK(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function pMe(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,c,d=t.area||{x:0,y:0,width:s,height:o};if(n){const h=s/o,f=n[0]/n[1];if(f>h){const m=d.width/f;d={x:d.x,y:Math.round(d.y+(d.height-m)/2),width:d.width,height:Math.round(m)}}else{const m=d.height*f;d={x:Math.round(d.x+(d.width-m)/2),y:d.y,width:Math.round(m),height:d.height}}}else n=[d.width,d.height];return n[0]>d.width?(a=Math.min(n[0]/d.width,e),c=n[0]/d.width/a):(a=1,c=n[0]/d.width),{cropArea:{x:Math.round((d.x+r.left)*a),y:Math.round((d.y+r.top)*a),width:Math.round(d.width*a),height:Math.round(d.height*a)},outputScale:c,resolutionScale:a}}const hMe=t=>t.includes("Brush");let eQ=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),hMe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const X6=Symbol("analyses-owner-handles");let ru=class extends Se{constructor(e){super(e),this._allAnalysisViews=new de,this._creatingViewCount=0,this._attachedToViewResolver=eV(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(i,r)=>this.view.emit(i,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(gt("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(gt()),this._attachedToViewResolver=eV()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const i=this._items.get(e);if(i==null||i.state.list===1)throw new j("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return i.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),X6)}_disconnectOwners(){this.removeHandles(X6),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const n of e)this._addAnalysis(n);const i=e.on("after-add",n=>this._addAnalysis(n.item)),r=e.on("after-remove",n=>this._removeAnalysis(n.item));return ct(()=>{i.remove(),r.remove();for(const n of e)this._removeAnalysis(n)})}_addAnalysis(e){const i=this._items.get(e);if(i==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=u1(n=>this._createAnalysisViewPromise(r,n).then(s=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:s}),s}))}else i.state.list=0}_removeAnalysis(e){const i=this._items.get(e);i!=null?(i.state.list=1,this._scheduleUpdate()):ie.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=Ly(()=>this._update()))}_update(){this._scheduledUpdateHandle=Gt(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:i,view:r}=e;switch(this._items.delete(i),e.state.view){case 0:e.createAnalysisViewTask=ch(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=Ot(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:i,analysisView:r}))}})}async _createAnalysisViewPromise(e,i){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new j("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(Ur(i))throw this._creatingViewCount-=1,gt("AnalysisView creation aborted");const n=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let s=!0;io(i,()=>{s&&this._destroyAnalysisView(r,n)});try{await n.when()}catch(o){throw s=!1,this._destroyAnalysisView(r,n),o}if(Ur(i))throw gt();return s=!1,e.view=n,e.state.view=1,this._allAnalysisViews.add(n),this._creatingViewCount-=1,n}_destroyAnalysisView(e,i){i.destroyed||(this._creatingViewCount-=1,i.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:i}))}};l([Me()],ru.prototype,"updating",null),l([Me({constructOnly:!0})],ru.prototype,"importAnalysisViewModule",void 0),l([Me({constructOnly:!0})],ru.prototype,"view",void 0),l([Me()],ru.prototype,"_allAnalysisViews",void 0),l([Me()],ru.prototype,"_creatingViewCount",void 0),ru=l([wi("esri.views.support.AnalysisViewManager")],ru);const fMe=ru;function eV(){const t=Gn();return t.promise.catch(()=>{}),t}let mMe=class{constructor(e){this.getUnmaskedRenderer=e}};function gMe(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new mMe(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let tV;function yMe(){return tV??(tV=wMe()),tV}let vMe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function bMe(t){var n;if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=((n=gMe(i))==null?void 0:n.getUnmaskedRenderer())??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function wMe(){const t=new vMe,e=bMe(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function _Me(t){const e=yMe();return e.available?t==="3d"&&e.majorPerformanceCaveat?new j("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new j("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new j("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new j("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function xMe(t){return t&&"nodeType"in t}function SMe(t){return t&&typeof t.render=="function"}const iV={component:"esri-component"};let ip=class extends Se{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(iV.component),i&&i.classList.remove(iV.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||xMe(e)?(this._set("widget",null),fF(e)):(SMe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([u()],ip.prototype,"id",null),l([u()],ip.prototype,"node",null),l([ti("node")],ip.prototype,"castNode",null),l([u({readOnly:!0})],ip.prototype,"widget",void 0),ip=l([E("esri.views.ui.Component")],ip);const xS=ip,tQ=Symbol("widget"),iQ=Symbol("widget-test-data"),$Me=[],TMe={},PT=new Map;function rQ(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=rQ(t,i[n]);else i=$Me;const r=e.vnodeSelector;if(RT(r)){const n=e.properties||TMe,s=n.key||r,o={key:s,afterCreate:kMe,afterUpdate:IMe,afterRemoved:nQ,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function kMe(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=t,PT.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),r.addHandles(ct(()=>nQ(t))),queueMicrotask(()=>{var c;(c=o[iQ].projector)==null||c.renderNow()})}function IMe(t,e,i,{widgetProperties:r}){var s;const n=PT.get(t);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,t))}function nQ(t){var i;const e=PT.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),PT.delete(t))}function RT(t){return typeof t=="function"&&t[tQ]}const RI=new Map;function sQ(){RI.clear()}function EMe(t){return RI.get(t)}function MMe(t,e){RI.set(t,e)}function q2(t){RI.delete(t)}function AMe(...t){const e=sn.acquire();for(let r=0;r<t.length;r++){const n=t[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return sn.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{var n;sQ();for(const s of r)(n=t.get(s.target))==null||n(s)}),i=(r,n,s)=>(t.set(r,n),e.observe(r,s),ct(()=>{e.unobserve(r),t.delete(r)}));return(r,n,s)=>{let o=null;return Mh([ve(()=>typeof r=="function"?r():r,a=>{o==null||o.remove(),a&&(o=i(a,n,s))},wr),ct(()=>o==null?void 0:o.remove())])}})();function CMe(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function E7e(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function M7e(t){const e="data-node-ref";this[t.getAttribute(e)]=t}async function Rb(t,e){await jre(Hw(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}function OMe(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:RMe(t[e])}}}function PMe(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function RMe(t){return function(e,...i){PMe(e)?qJ(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function LMe(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}function FMe(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames;t=Array.isArray(t)?t:NMe(t),i.push(...t)}}function NMe(t){return t.split(",").map(e=>e.trim())}var DMe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},oQ=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?oQ(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=DMe(n)),e.push(n))}},zMe=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return oQ(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};const jMe=OMe,VMe=AMe,ky=LMe,UMe=FMe,qMe=CMe;function je(t,e,...i){return typeof t!="function"||RT(t)?zMe(t,e??null,...i):t(e,...i)}function A7e(...t){return t}function rV(t){return t&&typeof t.render=="function"}function C7e(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const BMe={left:0,top:0,bottom:0,right:0},aQ={bottom:30,top:15,right:15,left:15},ml="esri-ui",bn={ui:ml,corner:`${ml}-corner`,innerContainer:`${ml}-inner-container`,manualContainer:`${ml}-manual-container`,cornerContainer:`${ml}-corner-container`,topLeft:`${ml}-top-left`,topRight:`${ml}-top-right`,bottomLeft:`${ml}-bottom-left`,bottomRight:`${ml}-bottom-right`};function GMe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function V_(t){return t===0?"0":`${t}px`}function B2(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function G2(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let va=class extends Dy{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=hO(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&G2(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&G2(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ve(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Pt),ve(()=>this.padding,this._applyUIPadding,Pt),ve(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Pt),DJ(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(bn.ui),HJ(e),this._attachContainers(e)),i&&(i.classList.remove(bn.ui),G2(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...aQ,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,i));const o=B2(e);o&&({index:r,position:i,component:e,key:n}=o),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),n,s)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){const s=this._componentMap.get(r);if(!s||s.key!==i)return;const o=this._components.indexOf(r),a=r.node.parentNode;return a==null||a.removeChild(r.node),this._componentMap.delete(r),(n=r.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(c=>{const d=this._componentMap.get(c);d&&d.position===s.position&&d.index>s.index&&d.index--}),this._components.splice(o,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||i.removeInternal});for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const n=B2(e)||B2(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof xS||(e=new xS({node:e}));const{widget:o}=e;o!=null&&o instanceof Se&&o.addHandles(ct(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const a=this._positionNameToContainerLookup[i];this._components.some(c=>{var f,m;const d=(f=this._componentMap.get(c))==null?void 0:f.position,h=d?this._positionNameToContainerLookup[d]:null;return a===h&&((m=this._componentMap.get(c))==null?void 0:m.index)===r})&&this._components.forEach(c=>{const d=this._componentMap.get(c),h=d==null?void 0:d.position,f=h?this._positionNameToContainerLookup[h]:null;d&&f===a&&d.index>=r&&d.index++}),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,position:i,internal:s,index:r})}_find(e){return e?e instanceof xS?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??BMe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(bn.innerContainer,bn.cornerContainer);const i=document.createElement("div");i.classList.add(bn.innerContainer,bn.manualContainer);const r=document.createElement("div");r.classList.add(bn.topLeft,bn.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(bn.topRight,bn.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(bn.bottomLeft,bn.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(bn.bottomRight,bn.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=qMe();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:r,"top-trailing":a?r:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var c,d;const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],o=n!=null&&n>-1;if(GMe(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(a.length!==0){for(const h of a){const f=this._findByNode(h);if(f&&n<(((c=this._componentMap.get(f))==null?void 0:c.index)??0))return void((d=h.parentNode)==null?void 0:d.insertBefore(r.node,h))}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:V_(e.top),left:V_(e.left),right:V_(e.right),bottom:V_(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return e?this._components.find(({node:i})=>i===e):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(_r).filter(n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}_getNumComponentsAtPosition(e){const i=this._positionNameToContainerLookup[e];return(i==null?void 0:i.children.length)??0}};l([u()],va.prototype,"_locale",void 0),l([u()],va.prototype,"container",null),l([u()],va.prototype,"height",null),l([u({value:aQ})],va.prototype,"padding",null),l([ti("padding")],va.prototype,"castPadding",null),l([u()],va.prototype,"view",void 0),l([u()],va.prototype,"width",null),va=l([E("esri.views.ui.UI")],va);const HMe=va,WMe={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},ZMe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.startsWith("-")?t.style.setProperty(e,i):t.style[e]=i}},JMe=t=>({...ZMe,...t}),YMe=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},KMe=(t,e)=>t.find(e),nV=(t,e,i=!1)=>{let r=t;return e.forEach((n,s)=>{const o=r!=null&&r.children?KMe(r.children,a=>a.domNode===n):void 0;i&&!o&&s!==e.length-1||(r=o)}),r},QMe=t=>{let e;const i={...WMe,...t},r=JMe(i),n=r.performanceLogger;let s,o=!0,a=!1;const c=[],d=[],h=(m,v,w)=>{var T;let x;r.eventHandlerInterceptor=(C,P,L,D)=>function(q){let F;n("domEvent",q);const ee=YMe(q.currentTarget,x.domNode),ae=ee.some(ue=>{var X;return customElements.get((X=ue==null?void 0:ue.tagName)==null?void 0:X.toLowerCase())});if(q.eventPhase===Event.CAPTURING_PHASE||!ae)ee.reverse(),F=nV(x.getLastRender(),ee);else{const ue=q.composedPath(),X=ue.slice(ue.indexOf(q.currentTarget),ue.indexOf(x.domNode)).reverse();F=nV(x.getLastRender(),X,!0)}let ne;return F&&(ne=i.handleInterceptedEvent(e,F,this,q)),n("domEventProcessed",q),ne},(T=i.postProcessProjectionOptions)==null||T.call(i,r);const $=w();x=m(v,$,r),r.eventHandlerInterceptor=void 0,c.push(x),d.push(w),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(x,$)};let f=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<c.length;m++){const v=d[m]();n("rendered",void 0);try{c[m].update(v)}catch(w){console.error(w)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(f=i.modifyDoRenderImplementation(f,c,d)),e={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(m,v)=>{h(Pu.append,m,v)},insertBefore:(m,v)=>{h(Pu.insertBefore,m,v)},merge:(m,v)=>{h(Pu.merge,m,v)},replace:(m,v)=>{h(Pu.replace,m,v)},detach:m=>{for(let v=0;v<d.length;v++)if(d[v]===m)return d.splice(v,1),c.splice(v,1)[0];throw new Error("renderFunction was not found")}},e};let lQ;function XMe(){IU||EU(Vn(Ti(lQ)))}function n0(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}lQ="components/assets";const sV=new Set;function eAe(t){sV.add(t),t.finally(()=>sV.delete(t))}function tAe(t){return ct()}var oV;let iAe=0;function cQ(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?cQ(t[r],e[r]):t[r]=e[r]);return t}const rAe=QMe({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,o)=>{const a=e==null?void 0:e(r,n,s,o),c=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||c){const d=r[2].toLowerCase()+r.slice(3),h=v=>a==null?void 0:a.call(s,v);s.addEventListener(d,h,c);const f=()=>s.removeEventListener(d,h,c),m=o.afterRemoved;o.afterRemoved=v=>{m==null||m(v),f()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const c=e.properties;(c&&a in c||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,c&&a in c))&&(sQ(),t.scheduleRender(),c[a].call(c.bind||i,r))}});let H2=!1;var nh;let mr=(nh=class extends eI(Dy){constructor(e,i){super(e,i),this._attached=!1,this._projector=rAe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Tk(async()=>{var c;if((c=this._messageBundleProps)!=null&&c.length){const d=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:f})=>{if(this.destroyed)return;let m=await vxe(h);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(m=cQ(V(m),this.uiStrings)),this[f]=m)}));if(this.destroyed)return;for(const h of d)h.status==="rejected"&&ie.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),this.addHandles(tAe()),XMe();const r="esri-widget-uid-"+t0(),n=this.render.bind(this);this._trackingTarget=new Ww(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var f,m;if(!this._readyForTrueRender||this.destroyed)return null;const c=n()??s(),d=c.properties??(c.properties={});if(d.key??(d.key=r),RT(c.vnodeSelector)){if(!this.visible)return s()}else this.visible?d.styles||(d.styles={}):(d.class="",d.styles={display:"none"}),(f=d.styles).display??(f.display="");let h=0;return(m=c.children)==null||m.forEach(v=>{var w;RT(v.vnodeSelector)||(v.properties??(v.properties={}),(w=v.properties).key??(w.key=`${this.id}--${h++}`))}),rQ(this,c)};this.render=()=>{if(H2)return o();let c=EMe(this)??null;if(c)return c;this._trackingTarget.clear(),H2=!0;try{c=Ya(this._trackingTarget,o)}catch(d){throw ie.getLogger(this).error(d),d}finally{H2=!1}return c&&MMe(this,c),c};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),eAe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(c5):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ot(this._trackingTarget),Ot(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,q2(this))}get container(){return this._get("container")}set container(e){this._get("container")||this._set("container",fF(e))}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+iAe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(oV=tQ,iQ)](){return{projector:this._projector}}render(){throw new Error("not implemented")}removeContainer(){this._set("container",null)}scheduleRender(){this.destroyed||(q2(this),this._projector.scheduleRender())}classes(...e){return VMe.apply(this,e)}renderNow(){q2(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(ve(()=>this.viewModel,(r,n)=>{n&&this.removeHandles("delegated-events"),r&&$k(r)&&this.addHandles(this._delegatedEventNames.map(s=>Ry(r,s,o=>{this.emit(s,o)})),"delegated-events")},wr)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(c5),this.scheduleRender()};this.addHandles([DJ(e),ve(()=>this.uiStrings,e)]),this.addHandles(gn(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}},nh[oV]=!0,nh.vnodeSelector="div",nh);l([u()],mr.prototype,"_readyForTrueRender",void 0),l([u({value:null})],mr.prototype,"container",null),l([u()],mr.prototype,"icon",null),l([u()],mr.prototype,"id",null),l([u()],mr.prototype,"label",null),l([u()],mr.prototype,"renderable",null),l([u()],mr.prototype,"uiStrings",void 0),l([u()],mr.prototype,"viewModel",void 0),l([u({value:!0})],mr.prototype,"visible",null),l([u()],mr.prototype,"key",void 0),l([u()],mr.prototype,"children",void 0),l([u()],mr.prototype,"afterCreate",void 0),l([u()],mr.prototype,"afterUpdate",void 0),l([u()],mr.prototype,"afterRemoved",void 0),mr=l([E("esri.widgets.Widget")],mr);const Bh=mr,nAe=new Map;function sAe(t){return nAe.get(t)}function oAe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function aAe(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}const Y0=Symbol("attributions");let Kf=class extends Se{constructor(e){super(e),this._clear=()=>{this.removeHandles(Y0)},this.items=new de,this.view=null,this._allLayerViewsChange=()=>{var n;this.removeHandles(Y0);const i=(n=this.view)==null?void 0:n.allLayerViews;let r=!1;if(i){for(const s of i)this.addHandles(ve(()=>[s.attributionItems],()=>this._updateAttributionItems()),Y0),"type"in s&&s.type==="integrated-mesh-3dtiles"&&(r=!0,this.addHandles([ve(()=>s.suspended,()=>this._updateAttributionItems()),s.on("visible-geometry-changed",()=>this._updateAttributionItems())],Y0));r&&this.addHandles(gn(()=>{var s;return((s=this.view)==null?void 0:s.stationary)===!0},()=>this._updateAttributionItems()),Y0)}this._updateAttributionItems()},this.addHandles([Wn(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",this._allLayerViewsChange,{onListenerAdd:this._allLayerViewsChange,onListenerRemove:this._clear})])}destroy(){this.view=null,this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this.view.allLayerViews.some(i=>i.attributionUpdating)?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews,r=[];let n=!1,s=null,o=null;if(e&&i){for(const a of i){if(a.suspended)continue;"type"in a&&a.type==="integrated-mesh-3dtiles"&&(o||(o=a),a.layer.hasGoogleUrl&&(n=!0,s=a));const c=a.attributionItems.slice().sort((d,h)=>h.score-d.score).map(d=>d.text).join(", ");aAe(r,a,c)}if(o){const a=sAe(e);if(a){const c=a.getAttributionText();for(let d=c.length-1;d>-1;--d)r.unshift({text:c[d],layerView:o})}}n&&s&&r.unshift({text:"Google Maps",layerView:s}),oAe(this.items,r)&&(this.items.removeAll(),this.items.addMany(r))}else this._clear()}};l([u({readOnly:!0,type:de})],Kf.prototype,"items",void 0),l([u({readOnly:!0})],Kf.prototype,"state",null),l([u()],Kf.prototype,"view",void 0),Kf=l([E("esri.widgets.Attribution.AttributionViewModel")],Kf);const uQ=Kf,bf="esri-attribution",wf={base:bf,poweredBy:`${bf}__powered-by`,sources:`${bf}__sources`,open:`${bf}--open`,sourcesOpen:`${bf}__sources--open`,link:`${bf}__link`};let Kr=class extends Bh{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:n})=>{this._scheduleOverflowCheck(n)})}),this._mutationObserver=new MutationObserver(r=>{let n=!1;for(const s of r)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){n=!0;break}n&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new uQ,B("esri-deprecation-warnings")&&_c(ie.getLogger("esri.widgets.Attribution"),"This widget is deprecated. Use View.attributionVisible and View.attributionItems instead.",{replacement:"view.attributionVisible and view.attributionItems",warnOnce:!0})}initialize(){this.addHandles(Wn(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e,i;(e=this._resizeObserver)==null||e.disconnect(),(i=this._mutationObserver)==null||i.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[wf.open]:this._isOpen};return je("div",{bind:this,class:this.classes(wf.base,pn.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return je("div",{class:wf.poweredBy},"Powered by"," ",je("a",{class:wf.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[wf.sourcesOpen]:e,[pn.interactive]:i};return je("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(wf.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const c=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,c&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([u()],Kr.prototype,"_isOpen",void 0),l([u()],Kr.prototype,"_isInteractive",null),l([u()],Kr.prototype,"_attributionTextOverflowed",void 0),l([u()],Kr.prototype,"_prevSourceNodeHeight",void 0),l([u({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Kr.prototype,"attributionText",null),l([u()],Kr.prototype,"icon",null),l([u()],Kr.prototype,"itemDelimiter",void 0),l([u()],Kr.prototype,"label",null),l([u(),ky("esri/widgets/Attribution/t9n/Attribution")],Kr.prototype,"messages",void 0),l([u()],Kr.prototype,"view",null),l([u({type:uQ})],Kr.prototype,"viewModel",void 0),l([jMe()],Kr.prototype,"_toggleState",null),Kr=l([E("esri.widgets.Attribution")],Kr);const lAe=Kr;function cAe(){const t=B("mapview-essential-goto-duration");return t==null?t:t}function uAe(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}function dAe(t,e,i){return t.goTo(e,i)}const pAe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:n}=this;return HU(n),this.goToOverride?this.goToOverride(n,r):dAe(n,r.target,r.options)}};return l([u()],i.prototype,"goToOverride",void 0),l([u()],i.prototype,"view",void 0),i=l([E("esri.widgets.support.GoTo")],i),i};let rp=class extends pAe(Se){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Pt)}destroy(){this.view=null}get canShowNorth(){return uAe(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:cAe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?ve(()=>e==null?void 0:e.rotation,this._updateForRotation,Pt):ve(()=>e==null?void 0:e.camera,this._updateForCamera,Pt))}_watchForView(e){this.addHandles(ve(()=>this.view,this._updateRotationWatcher,e))}};l([u({readOnly:!0})],rp.prototype,"canShowNorth",null),l([u({readOnly:!0})],rp.prototype,"orientation",void 0),l([u({readOnly:!0})],rp.prototype,"state",null),l([u()],rp.prototype,"view",void 0),rp=l([E("esri.widgets.Compass.CompassViewModel")],rp);const dQ=rp,aV="esri-compass",lV={base:aV,iconContainer:`${aV}__icon-container`};let Ml=class extends Bh{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new dQ,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return n0({button:()=>Q(()=>Promise.resolve().then(()=>wI),void 0,import.meta.url),icon:()=>Q(()=>Promise.resolve().then(()=>bZ),void 0,import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return je("div",{class:this.classes(lV.base,pn.widget)},je("calcite-button",{class:pn.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},je("div",{"aria-hidden":"true",class:lV.iconContainer,title:r.reset},je("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};l([u()],Ml.prototype,"goToOverride",null),l([u()],Ml.prototype,"icon",null),l([u()],Ml.prototype,"label",null),l([u(),ky("esri/widgets/Compass/t9n/Compass")],Ml.prototype,"messages",void 0),l([u()],Ml.prototype,"view",null),l([u({type:dQ})],Ml.prototype,"viewModel",void 0),Ml=l([E("esri.widgets.Compass")],Ml);const hAe=Ml,cV="esri-navigation-toggle",uV={base:cV,isLayoutHorizontal:`${cV}--horizontal`};let Qf=class extends Se{constructor(e){super(e),this._navigationMode="pan",this.view=null,e!=null&&e.isDefaultViewModel||qie(ie.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(gn(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.navigation)==null?void 0:i.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,n;const e=(n=(r=this.view)==null?void 0:r.navigation)==null?void 0:n.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};l([u({readOnly:!0})],Qf.prototype,"state",null),l([u()],Qf.prototype,"_navigationMode",void 0),l([u()],Qf.prototype,"view",void 0),Qf=l([E("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Qf);const pQ=Qf;let Al=class extends Bh{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new pQ({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;Rb(r),this.toggle()},e!=null&&e.isDefaultUI||Uie(ie.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return n0({button:()=>Q(()=>Promise.resolve().then(()=>wI),void 0,import.meta.url)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var n,s;const e=((n=this.viewModel)==null?void 0:n.state)==="disabled",i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",r=this.messages.toggle;return je("div",{class:this.classes(uV.base,pn.widget,{[uV.isLayoutHorizontal]:this.layout==="horizontal"})},je("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:i?"outline-fill":"solid",class:pn.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),je("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:i?"solid":"outline-fill",class:pn.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};l([u()],Al.prototype,"icon",null),l([u()],Al.prototype,"label",null),l([u({value:"vertical"})],Al.prototype,"layout",null),l([u(),ky("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Al.prototype,"messages",void 0),l([u()],Al.prototype,"view",null),l([u({type:pQ})],Al.prototype,"viewModel",void 0),Al=l([E("esri.widgets.NavigationToggle")],Al);const fAe=Al;let np=class extends Se{get canZoomIn(){var r,n,s;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const r=(n=e.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(e&&"then"in e||e==null?void 0:e.scale)??((n=this.view)==null?void 0:n.scale)??0}};l([u({readOnly:!0})],np.prototype,"canZoomIn",null),l([u({readOnly:!0})],np.prototype,"canZoomOut",null),l([u()],np.prototype,"view",void 0),l([u()],np.prototype,"_scale",null),np=l([E("esri.widgets.Zoom.ZoomConditions2D")],np);const mAe=np;let Xf=class extends Se{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([u({readOnly:!0})],Xf.prototype,"canZoomIn",null),l([u({readOnly:!0})],Xf.prototype,"canZoomOut",null),l([u()],Xf.prototype,"view",void 0),Xf=l([E("esri.widgets.Zoom.ZoomConditions3D")],Xf);const gAe=Xf;let nu=class extends Se{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new mAe({view:e}):e.type==="3d"&&(this._zoomConditions=new gAe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():Wb(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():Wb(e.goTo({zoomFactor:.5})))}};l([u()],nu.prototype,"_zoomConditions",void 0),l([u()],nu.prototype,"canZoomIn",null),l([u()],nu.prototype,"canZoomOut",null),l([u({readOnly:!0})],nu.prototype,"state",null),l([u()],nu.prototype,"view",null),nu=l([E("esri.widgets.Zoom.ZoomViewModel")],nu);const hQ=nu,dV={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Cl=class extends Bh{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new hQ,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return n0({button:()=>Q(()=>Promise.resolve().then(()=>wI),void 0,import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[dV.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return je("div",{class:this.classes(dV.base,pn.widget,e)},je("calcite-button",{class:pn.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),je("calcite-button",{class:pn.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};l([u()],Cl.prototype,"icon",null),l([u()],Cl.prototype,"label",null),l([u({value:"vertical"})],Cl.prototype,"layout",null),l([u(),ky("esri/widgets/Zoom/t9n/Zoom")],Cl.prototype,"messages",void 0),l([u()],Cl.prototype,"view",null),l([u({type:hQ})],Cl.prototype,"viewModel",void 0),Cl=l([E("esri.widgets.Zoom")],Cl);const yAe=Cl;function vAe(t){return(t==null?void 0:t.view)!==void 0}let SS=class extends HMe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),s=n==null?void 0:n.widget;vAe(s)&&(s.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([ve(()=>this.components,this._componentsWatcher,Pt),ve(()=>this.view,this._updateViewAwareWidgets,Pt)])}_add(e,i,r,n,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,n,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new xS({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new lAe({view:i});case"compass":return new hAe({view:i});case"navigation-toggle":return new fAe({view:i,isDefaultUI:!0});case"zoom":return new yAe({view:i})}}};l([u()],SS.prototype,"components",void 0),SS=l([E("esri.views.ui.DefaultUI")],SS);const fQ=SS;let $S=class extends fQ{constructor(e){super(e),this.components=["zoom"]}};l([u()],$S.prototype,"components",void 0),$S=l([E("esri.views.ui.2d.DefaultUI2D")],$S);const mQ=$S;let bAe=class{constructor(e={},i={},r=8,n=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=i,this.maxAnisotropy=r,this.maxPreferredTexturePixels=n}},gQ=class u3{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new j(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new u3(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!s.test(r))throw new j((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!s.test(n))throw new j((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(n,10);return new u3(o,a,i)}},ag=class extends gQ{constructor(e,i){super(e,i,"webmap")}};function W2(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const yQ=new ag(2,36);var d3;let TS=d3=class extends Z{constructor(t){super(t),this.color=new Ue([0,0,0,1])}clone(){return new d3(V({color:this.color}))}};l([u({type:Ue,json:{write:!0}})],TS.prototype,"color",void 0),TS=d3=l([E("esri.webmap.background.ColorBackground")],TS);const LI=TS;let vQ,bQ,wQ,_Q,xQ,SQ,$Q;async function wAe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([Q(()=>import("./webglDeps-CAL2qiiZ.js"),__vite__mapDeps([199,108,200,201,202,12,67]),import.meta.url),Q(()=>import("./mapViewDeps-C32Ez157.js"),__vite__mapDeps([203,165,127,204,124,125,120,13,12,126,123,128,117,205,108,200,201,99,118,206,121,202,67,107,66,207,116,86,208,209,178,181,10,11,16,22,210,129,130,211,212,52,199,213,142,214,215,177,216,94,95,217,112,115,119,48,47,218,131,219,122,37,38,39,220,132,137,221,152,222,223,224,225,104,226,227]),import.meta.url)]);bQ=t,wQ=e,_Q=i,xQ=r,SQ=n,$Q=s,vQ=o}var Yg;let ut=(Yg=class extends yEe(Zke(Lxe(gSe(tSe(vTe))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Th({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new EI({actionMap:new _F({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new Sy,this.analysisViewManager=new fMe({importAnalysisViewModule:i=>o2e(i),view:this}),this.floors=new de,this.grid=null,this.map=null,this.timeline=new eQ,this.type="2d",this.view2dType=null,this.ui=new mQ,this.test={takeScreenshot:async i=>cMe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},Cxe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Ot(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new g2e(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return NW(i.spatialReference,r)}get background(){return W2(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get extent(){return super.extent}set extent(e){super.extent=e}get highlightOptions(){return W2e(this)}set highlightOptions(e){Z2e(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&ie.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,n,s,o;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0)||e);if(B("esri-2d-log-updating")){const a=this.allLayerViews.reduce((c,d)=>({...c,[`${d.layer.id}(${d.layer.type})`]:!d.destroyed&&!("layerViews"in d)&&d.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new ei({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,i){return J2e(this,e,i)}async takeScreenshot(e){return lMe(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}async whenAnalysisView(e){if(e.parent==null)throw new j("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return W2(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return W2(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return z6.hasLayerViewModule(e)}importLayerView(e){return z6.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(ie.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var d;const i=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter(h=>h.clips.every(f=>qK(this,f,e,i))).reverse(),s=new globalThis.Map(n.map(h=>[h.layer.uid,h])),o=[];let a=0,c=0;for(;a<r.results.length||c<n.length;){const h=r.results.at(a);if(h&&h.type!=="graphic"){++a;continue}const f=s.get((d=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:d.uid);if((!h||f)&&c<n.length&&n.at(c)!==f){const m=n.at(c);"fetchPopupFeaturesAtLocation"in m&&o.push({mapPoint:i,layerView:m}),++c}else h&&(o.push({graphic:h.graphic,layerView:f}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=_Me(this.type);if(B("safari")&&B("safari")<9&&(e=new j("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:B("safari")})),e!=null)throw ie.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return wAe()}_getDefaultViewpoint(){var $;const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),c=o==null?void 0:o.viewpoint,d=(($=c==null?void 0:c.targetGeometry)==null?void 0:$.extent)??i,h=d==null?void 0:d.center,f=(c==null?void 0:c.rotation)??0,m=(c==null?void 0:c.scale)||d&&CI(d,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),v=a.center??h,w=a.rotation??f,x=a.scale??m;return v&&x?new ir({targetGeometry:v,scale:x,rotation:w}):null}_startup(){var c;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(c=this.defaultsFromMap.extent)==null?void 0:c.center),this.graphics.owner=this;const i=new a2e(this.surface),r=new vQ(this.surface,{canvas:this.renderCanvas,contextOptions:new bAe(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new SQ,this._magnifierView.magnifier=this.magnifier,this._gridView=new $Q;const n=new _Q({view:this});this._set("labelManager",n);const s=new JEe({view:this});this._set("animationManager",s);const o=new xQ({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",d=>this.fatalError=d.error),ve(()=>this.stationary,d=>r.stationary=d,wr),ve(()=>this.background,d=>{r.backgroundColor=d==null?void 0:d.color,this._magnifierView.backgroundColor=d==null?void 0:d.color},wr),ve(()=>this.magnifier,d=>this._magnifierView.magnifier=d,wr),ve(()=>this.grid,d=>this._gridView.grid=d,wr),ve(()=>this.renderingOptions,d=>r.renderingOptions=d,wr),ve(()=>this.highlights.items.map(d=>({name:d.name,options:{fillColor:d.color,haloColor:d.haloColor,fillOpacity:d.fillOpacity,haloOpacity:d.haloOpacity,haloWidth:d.haloWidth,haloBlur:d.haloBlur}})),()=>{r.highlightGradient=G2e(r.highlightGradient,this.highlights.items)},wr),ve(()=>this.state.id,()=>r.state=this.state,wr),ve(()=>this.animationsEnabled,d=>this.stage.animationsEnabled=d,wr)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(d=>d(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new t2e(Yr.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new bQ({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new wQ(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var o;const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},Yg.type="2d",Yg);l([u({constructOnly:!0})],ut.prototype,"deactivatedWebGLExtensions",void 0),l([u({constructOnly:!0})],ut.prototype,"debugWebGLExtensions",void 0),l([u({readOnly:!0})],ut.prototype,"featuresTilingScheme",void 0),l([u({readOnly:!0})],ut.prototype,"graphicsTileStore",null),l([u()],ut.prototype,"graphicsView",void 0),l([u()],ut.prototype,"constraintsInfo",null),l([u()],ut.prototype,"initialExtentRequired",null),l([u()],ut.prototype,"labelManager",void 0),l([u({type:EI,nonNullable:!0})],ut.prototype,"navigation",void 0),l([u({constructOnly:!0})],ut.prototype,"renderCanvas",void 0),l([u()],ut.prototype,"renderingOptions",void 0),l([u({constructOnly:!0})],ut.prototype,"supersampleScreenshotsEnabled",void 0),l([u()],ut.prototype,"defaultsFromMapSettings",null),l([u({readOnly:!0})],ut.prototype,"typeSpecificPreconditionsReady",null),l([u(uO(Sy,"analyses"))],ut.prototype,"analyses",void 0),l([u()],ut.prototype,"analysisViewManager",void 0),l([u({type:LI})],ut.prototype,"background",null),l([u({type:ze})],ut.prototype,"center",null),l([u({type:de})],ut.prototype,"floors",void 0),l([u()],ut.prototype,"grid",void 0),l([u({type:Hu})],ut.prototype,"highlightOptions",null),l([u()],ut.prototype,"map",void 0),l([u()],ut.prototype,"padding",null),l([u({readOnly:!0})],ut.prototype,"rendering",null),l([u({readOnly:!0})],ut.prototype,"resolution",null),l([u()],ut.prototype,"scale",null),l([u({type:Boolean,value:!1})],ut.prototype,"spatialReferenceLocked",null),l([u({readOnly:!0})],ut.prototype,"tileInfo",null),l([u({type:eQ,readOnly:!0})],ut.prototype,"timeline",void 0),l([u({readOnly:!0})],ut.prototype,"type",void 0),l([u({readOnly:!0})],ut.prototype,"updating",null),l([u({readOnly:!0})],ut.prototype,"view2dType",void 0),l([u({readOnly:!0})],ut.prototype,"visibleArea",null),l([u()],ut.prototype,"zoom",null),l([u({readOnly:!0})],ut.prototype,"navigating",null),l([u(),ti(t=>t instanceof fQ?t:Jw(mQ,t))],ut.prototype,"ui",void 0),ut=l([E("esri.views.View2D")],ut);const _Ae=ut;let kS=class extends _Ae{constructor(e){super(e),this.view2dType="map"}};l([u({readOnly:!0})],kS.prototype,"view2dType",void 0),kS=l([E("esri.views.MapView")],kS);const xAe=kS;let su=class extends Z{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([u({type:String,json:{write:{isRequired:!0}}})],su.prototype,"facilityIdField",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],su.prototype,"layerId",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],su.prototype,"nameField",void 0),l([u({type:String,json:{write:!0}})],su.prototype,"siteIdField",void 0),l([u({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],su.prototype,"sublayerId",void 0),su=l([E("esri.layers.support.FacilityLayerInfo")],su);const SAe=su;let Mo=class extends Z{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};l([u({type:String,json:{write:{isRequired:!0}}})],Mo.prototype,"facilityIdField",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],Mo.prototype,"layerId",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],Mo.prototype,"levelIdField",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],Mo.prototype,"levelNumberField",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],Mo.prototype,"longNameField",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],Mo.prototype,"shortNameField",void 0),l([u({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Mo.prototype,"sublayerId",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],Mo.prototype,"verticalOrderField",void 0),Mo=l([E("esri.layers.support.LevelLayerInfo")],Mo);const $Ae=Mo;let sp=class extends Z{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([u({type:String,json:{write:{isRequired:!0}}})],sp.prototype,"layerId",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],sp.prototype,"nameField",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],sp.prototype,"siteIdField",void 0),l([u({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],sp.prototype,"sublayerId",void 0),sp=l([E("esri.layers.support.SiteLayerInfo")],sp);const TAe=sp;let em=class extends Z{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};l([u({type:$Ae,json:{write:{isRequired:!0}}})],em.prototype,"levelLayer",void 0),l([u({type:SAe,json:{write:{isRequired:!0}}})],em.prototype,"facilityLayer",void 0),l([u({type:TAe,json:{write:!0}})],em.prototype,"siteLayer",void 0),em=l([E("esri.support.MapFloorInfo")],em);const kAe=em;var p3;let tm=p3=class extends Z{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new p3(V({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};l([u({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],tm.prototype,"activeRange",void 0),l([u({type:[Number],json:{write:!0}})],tm.prototype,"currentRangeExtent",void 0),l([u({type:[Number],json:{write:!0}})],tm.prototype,"fullRangeExtent",void 0),tm=p3=l([E("esri.webdoc.RangeInfo")],tm);const FF=tm;var h3;let ba=h3=class extends Z{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new h3(V({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};l([u({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],ba.prototype,"enabled",void 0),l([u({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],ba.prototype,"longNames",void 0),l([u({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],ba.prototype,"minimized",void 0),l([u({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],ba.prototype,"pinnedLevels",void 0),l([u({type:String,json:{read:{source:"site"},write:{target:"site"}}})],ba.prototype,"site",void 0),l([u({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],ba.prototype,"facility",void 0),l([u({type:String,json:{read:{source:"level"},write:{target:"level"}}})],ba.prototype,"level",void 0),ba=h3=l([E("esri.webdoc.widgets.FloorFilter")],ba);const IAe=ba;var f3;const U_=new Ze({slider:"slider",picker:"picker"});let im=f3=class extends Z{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new f3({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};l([u({type:U_.apiValues,nonNullable:!0,json:{type:U_.jsonValues,default:null,read:{reader:U_.read},write:{isRequired:!0,writer:U_.write}}})],im.prototype,"interactionMode",void 0),l([u({type:nt,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],im.prototype,"numStops",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],im.prototype,"stopInterval",void 0),im=f3=l([E("esri.webdoc.widgets.Range")],im);const EAe=im;var m3;let Zi=m3=class extends Z{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?xt.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&Ai(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new xt({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?Xs.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);Ai("properties.timeStopInterval",{interval:n.value,units:n.unit},e)}readStops(t){return t!=null&&t.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t!=null&&t.length&&Ai(i,t.map(r=>r.getTime()),e)}clone(){return new m3(V({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};l([u({type:xt,json:{type:[[nt,Fy]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Zi.prototype,"currentTimeExtent",void 0),l([oe("currentTimeExtent")],Zi.prototype,"readCurrentTimeExtent",null),l([le("currentTimeExtent")],Zi.prototype,"writeCurrentTimeExtent",null),l([u({type:xt,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Zi.prototype,"fullTimeExtent",void 0),l([oe("fullTimeExtent")],Zi.prototype,"readFullTimeExtent",null),l([le("fullTimeExtent")],Zi.prototype,"writeFullTimeExtent",null),l([u({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Zi.prototype,"loop",void 0),l([u({type:nt,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const t=!!this.stopInterval,e=!!((r=this.stops)!=null&&r.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],Zi.prototype,"numStops",void 0),l([u({type:[1,2],nonNullable:!0,json:{type:nt,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Zi.prototype,"numThumbs",void 0),l([u({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Zi.prototype,"stopDelay",void 0),l([u({type:Xs,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:VL.jsonValues.filter(t=>t!=="esriTimeUnitsUnknown")}},overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],Zi.prototype,"stopInterval",void 0),l([oe("stopInterval")],Zi.prototype,"readStopInterval",null),l([le("stopInterval")],Zi.prototype,"writeStopInterval",null),l([u({type:[Date],json:{type:[nt],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Zi.prototype,"stops",void 0),l([oe("stops")],Zi.prototype,"readStops",null),l([le("stops")],Zi.prototype,"writeStops",null),Zi=m3=l([E("esri.webdoc.widgets.TimeSlider")],Zi);const MAe=Zi;var g3;let rm=g3=class extends Z{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new g3(V({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};l([u({type:EAe,json:{write:!0}})],rm.prototype,"range",void 0),l([u({type:MAe,json:{write:!0}})],rm.prototype,"timeSlider",void 0),l([u({type:IAe,json:{write:!0}})],rm.prototype,"floorFilter",void 0),rm=g3=l([E("esri.webdoc.Widgets")],rm);const AAe=rm,CAe={width:600,height:400},q_=1.5;function OAe(t,e){e=e||CAe;let{width:i,height:r}=e;const n=i/r;return n<q_?r=i/q_:n>q_&&(i=r*q_),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function PAe(t,e){return{...TQ(t,e),readResourcePaths:[]}}function Q7e(t,e,i){const r=zi(t.itemUrl);return{...TQ(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function TQ(t,e){return{origin:e,url:zi(t.itemUrl),portal:t.portal||ce.getDefault(),portalItem:t}}let fu=class extends Z{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=O$(this.outSpatialReference),r.inSR=O$(i.spatialReference),r.geometries=JSON.stringify({geometryType:Wy(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};l([u()],fu.prototype,"geometries",void 0),l([u({type:me,json:{read:{source:"outSR"}}})],fu.prototype,"outSpatialReference",void 0),l([u()],fu.prototype,"transformation",void 0),l([u()],fu.prototype,"transformForward",void 0),fu=l([E("esri.rest.support.ProjectParameters")],fu);const RAe=gi(fu);async function LAe(t,e,i){e=RAe(e);const r=VY(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=Wy(e.geometries[0]),a=UTe(n,i);return Ft(r.path+"/project",a).then(({data:{geometries:c}})=>UY(c,o,s))}function FAe(t,e){var i;return e.resourceInfo?kQ(e,e.resourceInfo,{origin:t.origin}):(i=e.portalItem)!=null&&i.id?NAe(t,e,e.portalItem):Promise.resolve()}function kQ(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||ce.getDefault()),Q(async()=>{const{populateOperationalLayers:n}=await import("./layersCreator-BcyvXSRx.js");return{populateOperationalLayers:n}},__vite__mapDeps([196,34,33,32,35,31]),import.meta.url).then(({populateOperationalLayers:n})=>{const s=[],o=e.operationalLayers;o!=null&&o.length&&s.push(n(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},c=e.tables;return c!=null&&c.length&&s.push(n(t.tables,c,a)),Promise.allSettled(s).then(()=>{})})}async function NAe(t,e,i){var o;if(await i.load().catch(a=>{throw new j(`${t.name}:load-portal-item`,"Failed to load portal item",{error:a})}),i.type!==t.itemType)throw new j(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n=PAe(i,t.origin);await DAe(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await jAe(e.initialViewProperties,i,ie.getLogger(e));if(s){const a=((o=e.initialViewProperties)==null?void 0:o.clone())??t.createInitialViewProperties();a.viewpoint=s,e.initialViewProperties=a}}function DAe(t,e,i,r){const n=zAe(t,i);return e.read(n,r),kQ(e,n,r)}function zAe(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function jAe(t,e,i){var s;if((s=t==null?void 0:t.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await VAe(t,e,i);return n?new ir({targetGeometry:n}):null}async function VAe(t,e,i){const r=t==null?void 0:t.spatialReference,n=e==null?void 0:e.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Bp(n);const{getGeometryServiceURL:s}=await Q(()=>import("./geometryServiceUtils-Bt8jFt1p.js"),[],import.meta.url);try{const o=await s(e),a=new fu({geometries:[n],outSpatialReference:r});return(await LAe(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function pV(t){return{enabled:!!(t!=null&&t.length)}}var y3;let nm=y3=class extends Z{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new y3({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([u({type:Boolean,json:{write:!0}})],nm.prototype,"exactMatch",void 0),l([u({type:String,json:{write:!0}})],nm.prototype,"name",void 0),l([Ie(bF)],nm.prototype,"type",void 0),nm=y3=l([E("esri.webdoc.applicationProperties.SearchLayerField")],nm);const UAe=nm;var v3;let sm=v3=class extends Z{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new v3(V({field:this.field,id:this.id,subLayer:this.subLayer}))}};l([u({type:UAe,json:{write:{isRequired:!0}}})],sm.prototype,"field",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],sm.prototype,"id",void 0),l([u({type:nt,json:{write:!0}})],sm.prototype,"subLayer",void 0),sm=v3=l([E("esri.webdoc.applicationProperties.SearchLayer")],sm);const qAe=sm;var b3;let om=b3=class extends Z{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new b3({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([u({type:Boolean,json:{write:!0}})],om.prototype,"exactMatch",void 0),l([u({type:String,json:{write:!0}})],om.prototype,"name",void 0),l([Ie(bF)],om.prototype,"type",void 0),om=b3=l([E("esri.webdoc.applicationProperties.SearchTableField")],om);const BAe=om;var w3;let jv=w3=class extends Z{constructor(t){super(t),this.field=null,this.id=null}clone(){return new w3(V({field:this.field,id:this.id}))}};l([u({type:BAe,json:{write:{isRequired:!0}}})],jv.prototype,"field",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],jv.prototype,"id",void 0),jv=w3=l([E("esri.webdoc.applicationProperties.SearchTable")],jv);const GAe=jv;var _3;const IQ=de.ofType(qAe),EQ=de.ofType(GAe);let wa=_3=class extends Z{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new IQ,this.tables=new EQ}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new _3(V({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};l([u({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],wa.prototype,"addressSearchEnabled",void 0),l([oe("addressSearchEnabled")],wa.prototype,"readAddressSearchEnabled",null),l([le("addressSearchEnabled")],wa.prototype,"writeAddressSearchEnabled",null),l([u({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],wa.prototype,"enabled",void 0),l([u({type:String,json:{write:!0}})],wa.prototype,"hintText",void 0),l([u({type:IQ,json:{write:{overridePolicy:pV},origins:{"web-scene":{write:{isRequired:!0}}}}})],wa.prototype,"layers",void 0),l([u({type:EQ,json:{read:!0,write:{overridePolicy:pV}}})],wa.prototype,"tables",void 0),wa=_3=l([E("esri.webdoc.applicationProperties.Search")],wa);const HAe=wa;var x3;let IS=x3=class extends Z{constructor(t){super(t),this.search=null}clone(){return new x3(V({search:this.search}))}};l([u({type:HAe,json:{write:!0}})],IS.prototype,"search",void 0),IS=x3=l([E("esri.webdoc.applicationProperties.Viewing")],IS);const WAe=IS;var S3;let am=S3=class extends Z{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new S3(V({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};l([u({json:{write:!0}})],am.prototype,"editing",void 0),l([u({json:{write:!0}})],am.prototype,"offline",void 0),l([u({type:WAe,json:{write:!0}})],am.prototype,"viewing",void 0),am=S3=l([E("esri.webmap.ApplicationProperties")],am);const ZAe=am;var $3;let dc=$3=class extends Z{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return wB(this.url)}get isDataURI(){return kc(this.url)}clone(){return new $3({url:this.url})}};l([u({type:String,json:{write:{isRequired:!0}}})],dc.prototype,"url",void 0),l([u()],dc.prototype,"isSecureUrl",null),l([u()],dc.prototype,"isDataURI",null),dc=$3=l([E("esri.webdoc.support.SlideThumbnail")],dc);const JAe={type:xt,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?xt.fromArray(t):xt.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r!=null&&r.messages&&r.messages.push(new j("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[nt,Fy]]}}}}};var T3;let _a=T3=class extends cd(Z){constructor(t){super(t),this.name=null,this.thumbnail=new dc,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new dc({url:t}):gi(dc,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&ie.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return ir.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n!=null&&n.type!=="extent"){const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";return void(r!=null&&r.messages?r.messages.push(new j("property:unsupported",s)):ie.getLogger(this).error(s))}n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON()}clone(){return new T3(V({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};l([u({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],_a.prototype,"name",void 0),l([u({type:dc,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],_a.prototype,"thumbnail",void 0),l([ti("thumbnail")],_a.prototype,"castThumbnail",null),l([u(JAe)],_a.prototype,"timeExtent",void 0),l([u({type:ir,nonNullable:!0,json:{write:!0}})],_a.prototype,"viewpoint",null),l([oe("viewpoint",["extent","viewpoint"])],_a.prototype,"readViewpoint",null),l([le("viewpoint")],_a.prototype,"writeViewpoint",null),_a=T3=l([E("esri.webmap.Bookmark")],_a);const YAe=_a;let Ol=class extends Pe(Se){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=ro,this.viewpoint=null}};l([u({type:LI})],Ol.prototype,"background",void 0),l([u({type:FF})],Ol.prototype,"rangeInfo",void 0),l([u({type:me})],Ol.prototype,"spatialReference",void 0),l([u({type:xt})],Ol.prototype,"timeExtent",void 0),l([u({nonNullable:!0})],Ol.prototype,"timeZone",void 0),l([u({type:ir})],Ol.prototype,"viewpoint",void 0),Ol=l([E("esri.webmap.InitialViewProperties")],Ol);const LT=Ol,MQ=de.ofType(YAe),KAe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),QAe="ArcGIS Pro",XAe=jL.JSAPI;let Zt=class extends l1(bL(eI(lY))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new MQ,this.floorInfo=null,this.initialViewProperties=new LT,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=Tk(async(i,r,n)=>{const{save:s,saveAs:o}=await Q(()=>import("./webdocSaveUtils-D3V8hiZX.js"),__vite__mapDeps([314,315,316,317,318,319]),import.meta.url);switch(i){case 0:return s(this.context,this,r);case 1:return o(this.context,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=Ot(this.portalItem)}initialize(){if(this.when().catch(e=>{ie.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=XAe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=MB}readInitialViewProperties(e,i){var o,a;const r=new LT;i.background&&(r.background=LI.fromJSON(i.background));const n=(o=i.initialState)==null?void 0:o.timeExtent;n&&(r.timeExtent=xt.fromArray(n));const s=(a=i.initialState)==null?void 0:a.viewpoint;return s&&(s.rotation&&ag.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===QAe&&(s.rotation*=-1),r.viewpoint=ir.fromJSON(s)),i.mapRangeInfo&&(r.rangeInfo=FF.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=me.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){var a;if(!e)return;(a=e.background)!=null&&a.color&&(i.background=e.background.write({},n));const{timeExtent:s,viewpoint:o}=e;if(o||s){const c={};o&&(c.viewpoint=o.write({},n)),s&&(c.timeExtent=s.toArray()),i.initialState=c}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}get loaded(){return super.loaded}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new ag(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(FAe(this.context,this)),Promise.resolve(this)}loadAll(){return TI(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();B9(this,e,n=>super.read(e,n),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new j("webmap:not-loaded","Web map must be loaded before it can be serialized");throw ie.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var r,n,s,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find(a=>a.id===e.id)}async updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:$B(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(n=>pS(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(_r).toArray()}_validateJSON(e){const i=ag.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){var o,a;const e=this.applicationProperties,i=(o=e==null?void 0:e.viewing)==null?void 0:o.search,r=c=>this.allLayers.some(d=>d.id===c);if(i!=null&&i.layers&&(i.layers=i.layers.filter(c=>r(c.id))),i!=null&&i.tables&&(i.tables=i.tables.filter(c=>this.tables.some(d=>d.id===c.id))),e){const c=(a=e.editing)==null?void 0:a.locationTracking;c!=null&&c.info&&!r(c.info.layerId)&&(e.editing=null)}const n="presentation"in this?this.presentation:null,s=n==null?void 0:n.slides;s&&s.forEach(c=>{c.visibleLayers&&(c.visibleLayers=c.visibleLayers.filter(d=>r(d.id)))})}async _updateFromInternal(e,i){if(i??(i={}),await jk(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=e.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=e.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new ir({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=OAe(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(kc(e)){const i=gh(e),r=i==null?void 0:i.mediaType,n=r&&KAe.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};l([u()],Zt.prototype,"_updateFromPromise",void 0),l([u({type:ZAe,json:{write:!0}})],Zt.prototype,"applicationProperties",void 0),l([u({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Zt.prototype,"authoringApp",null),l([le("authoringApp")],Zt.prototype,"writeAuthoringApp",null),l([u({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Zt.prototype,"authoringAppVersion",null),l([le("authoringAppVersion")],Zt.prototype,"writeAuthoringAppVersion",null),l([u({type:MQ,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Zt.prototype,"bookmarks",void 0),l([u({type:kAe,json:{name:"mapFloorInfo",write:!0}})],Zt.prototype,"floorInfo",void 0),l([u({type:LT,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:LI},"initialState.timeExtent":{type:xt},"initialState.viewpoint":{type:ir},mapRangeInfo:{type:FF},spatialReference:{type:me},"timeZone:":{type:String}}}}})],Zt.prototype,"initialViewProperties",void 0),l([oe("initialViewProperties")],Zt.prototype,"readInitialViewProperties",null),l([le("initialViewProperties")],Zt.prototype,"writeInitialViewProperties",null),l([u({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Zt.prototype,"layers",void 0),l([le("layers")],Zt.prototype,"writeLayers",null),l([u({type:Ge})],Zt.prototype,"portalItem",void 0),l([u()],Zt.prototype,"resourceInfo",void 0),l([u({readOnly:!0,type:ag,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Zt.prototype,"sourceVersion",void 0),l([oe("sourceVersion")],Zt.prototype,"readSourceVersion",null),l([le("sourceVersion")],Zt.prototype,"writeSourceVersion",null),l([u({json:{read:!1,write:{ignoreOrigin:!0}}})],Zt.prototype,"tables",void 0),l([le("tables")],Zt.prototype,"writeTables",null),l([u()],Zt.prototype,"thumbnailUrl",null),l([u()],Zt.prototype,"updatingFromView",null),l([u({type:AAe,json:{write:!0}})],Zt.prototype,"widgets",void 0),Zt=l([E("esri.WebDocument2D")],Zt);const eCe=Zt;var k3;let op=k3=class extends Z{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new k3({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([u({type:String,json:{write:!0}})],op.prototype,"expression",void 0),l([u({type:String,json:{write:!0}})],op.prototype,"name",void 0),l([u({type:["boolean","date","number","string"],json:{write:!0}})],op.prototype,"returnType",void 0),l([u({type:String,json:{write:!0}})],op.prototype,"title",void 0),op=k3=l([E("esri.form.ExpressionInfo")],op);const tCe=op;let jn=class extends Z{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([Me({type:String,json:{write:!0}})],jn.prototype,"description",void 0),l([Me({type:String,json:{write:!0}})],jn.prototype,"label",void 0),l([Me()],jn.prototype,"type",void 0),l([Me({type:String,json:{write:!0}})],jn.prototype,"visibilityExpression",void 0),jn=l([wi("esri.form.elements.Element")],jn);let ES=class extends Pe(Z){constructor(e){super(e),this.type=null}};l([u()],ES.prototype,"type",void 0),ES=l([E("esri.form.elements.inputs.attachments.Input")],ES);const od=ES,FI=["any","capture","upload"];let lm=class extends od{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};l([u({type:["audio"],readOnly:!0,json:{write:!0}})],lm.prototype,"type",void 0),l([u({type:FI,json:{write:!0}})],lm.prototype,"inputMethod",void 0),l([u({type:Number,json:{write:!0}})],lm.prototype,"maxDuration",void 0),lm=l([E("esri.form.elements.inputs.attachments.AudioInput")],lm);const hV=lm;let Vv=class extends od{constructor(e){super(e),this.type="document",this.maxFileSize=null}};l([u({type:["document"],readOnly:!0,json:{write:!0}})],Vv.prototype,"type",void 0),l([u({type:Number,json:{write:!0}})],Vv.prototype,"maxFileSize",void 0),Vv=l([E("esri.form.elements.inputs.attachments.DocumentInput")],Vv);const fV=Vv;let cm=class extends od{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};l([u({type:["image"],readOnly:!0,json:{write:!0}})],cm.prototype,"type",void 0),l([u({type:FI,json:{write:!0}})],cm.prototype,"inputMethod",void 0),l([u({type:Number,json:{write:!0}})],cm.prototype,"maxImageSize",void 0),cm=l([E("esri.form.elements.inputs.attachments.ImageInput")],cm);const mV=cm;let Uv=class extends od{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};l([u({type:["signature"],readOnly:!0,json:{write:!0}})],Uv.prototype,"type",void 0),l([u({type:FI,json:{write:!0}})],Uv.prototype,"inputMethod",void 0),Uv=l([E("esri.form.elements.inputs.attachments.SignatureInput")],Uv);const gV=Uv;let um=class extends od{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};l([u({type:["video"],readOnly:!0,json:{write:!0}})],um.prototype,"type",void 0),l([u({type:FI,json:{write:!0}})],um.prototype,"inputMethod",void 0),l([u({type:Number,json:{write:!0}})],um.prototype,"maxDuration",void 0),um=l([E("esri.form.elements.inputs.attachments.VideoInput")],um);const yV=um;function AQ(t){return{nestableTypes:{base:od,key:"type",typeMap:{audio:hV,document:fV,image:mV,signature:gV,video:yV}},allTypes:{base:od,key:"type",typeMap:{attachment:t,audio:hV,document:fV,image:mV,signature:gV,video:yV}}}}function iCe(t,e,i){return t?t.map(r=>Ka(e.nestableTypes,r)):null}function rCe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function nCe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}let Ia=class extends od{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact"}get inputTypes(){return this._get("inputTypes")??null}set inputTypes(e){this._set("inputTypes",e)}castInputs(e){return iCe(e,Z2)}readInputs(e,i){return rCe(i.inputTypes,Z2)}writeInputs(e,i){i.inputTypes=nCe(e,Z2)}};l([u({type:["attachment"],readOnly:!0,json:{write:!0}})],Ia.prototype,"type",void 0),l([u({type:["any","exact","exactOrNone"],json:{write:!0}})],Ia.prototype,"attachmentAssociationType",void 0),l([u({json:{write:{isRequired:!0}}})],Ia.prototype,"inputTypes",null),l([ti("inputTypes")],Ia.prototype,"castInputs",null),l([oe("inputTypes")],Ia.prototype,"readInputs",null),l([le("inputTypes")],Ia.prototype,"writeInputs",null),Ia=l([E("esri.form.elements.inputs.attachments.AttachmentInput")],Ia);const Z2=AQ(Ia),sCe=Ia;var I3;const oCe=AQ(sCe);let ls=I3=class extends jn{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new I3({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};l([u({type:Boolean,json:{write:!0}})],ls.prototype,"allowUserRename",void 0),l([u({type:String,json:{write:{isRequired:!0}}})],ls.prototype,"attachmentKeyword",void 0),l([u({type:Boolean,json:{write:!0}})],ls.prototype,"displayFilename",void 0),l([u({type:String,json:{write:!0}})],ls.prototype,"editableExpression",void 0),l([u({type:String,json:{write:!0}})],ls.prototype,"filenameExpression",void 0),l([u({types:oCe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],ls.prototype,"input",void 0),l([u({type:Number,json:{write:!0}})],ls.prototype,"maxAttachmentCount",void 0),l([u({type:Number,json:{write:!0}})],ls.prototype,"minAttachmentCount",void 0),l([u({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],ls.prototype,"type",void 0),l([u({type:Boolean,json:{write:!0}})],ls.prototype,"useOriginalFilename",void 0),ls=I3=l([E("esri.form.elements.AttachmentElement")],ls);const vV=ls;let MS=class extends Z{constructor(e){super(e),this.type=null}};l([u()],MS.prototype,"type",void 0),MS=l([E("esri.form.elements.inputs.Input")],MS);const Mc=MS;let qv=class extends Mc{constructor(e){super(e),this.maxLength=null,this.minLength=0}};l([u({type:Number,json:{write:!0}})],qv.prototype,"maxLength",void 0),l([u({type:Number,json:{write:!0}})],qv.prototype,"minLength",void 0),qv=l([E("esri.form.elements.inputs.TextInput")],qv);const NF=qv;var E3;let AS=E3=class extends NF{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new E3({maxLength:this.maxLength,minLength:this.minLength})}};l([u({type:["barcode-scanner"],json:{read:!1,write:!0}})],AS.prototype,"type",void 0),AS=E3=l([E("esri.form.elements.inputs.BarcodeScannerInput")],AS);const aCe=AS;var M3;let dm=M3=class extends Mc{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new M3({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([u({type:String,json:{write:!0}})],dm.prototype,"noValueOptionLabel",void 0),l([u({type:Boolean,json:{write:!0}})],dm.prototype,"showNoValueOption",void 0),l([u({type:["combo-box"],json:{read:!1,write:!0}})],dm.prototype,"type",void 0),dm=M3=l([E("esri.form.elements.inputs.ComboBoxInput")],dm);const lCe=dm;var A3;function bV(t){return t??null}function wV(t){return t??null}let xa=A3=class extends Mc{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return bV(e.max)}writeMax(t,e){e.max=wV(t)}readMin(t,e){return bV(e.min)}writeMin(t,e){e.min=wV(t)}clone(){return new A3({max:this.max,min:this.min})}};l([u({type:String,json:{type:String,write:!0}})],xa.prototype,"max",void 0),l([oe("max")],xa.prototype,"readMax",null),l([le("max")],xa.prototype,"writeMax",null),l([u({type:String,json:{type:String,write:!0}})],xa.prototype,"min",void 0),l([oe("min")],xa.prototype,"readMin",null),l([le("min")],xa.prototype,"writeMin",null),l([u({type:["date-picker"],json:{read:!1,write:!0}})],xa.prototype,"type",void 0),xa=A3=l([E("esri.form.elements.inputs.DatePickerInput")],xa);const cCe=xa;var C3;function J2(t){return t??null}function Y2(t){return t??null}let Sn=C3=class extends Mc{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return J2(e.max)}writeMax(t,e){e.max=Y2(t)}readMin(t,e){return J2(e.min)}writeMin(t,e){e.min=Y2(t)}readTimeResolution(t,e){return J2(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Y2(t)}clone(){return new C3({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([u({type:Boolean,json:{write:!0}})],Sn.prototype,"includeTimeOffset",void 0),l([u({type:String,json:{type:String,write:!0}})],Sn.prototype,"max",void 0),l([oe("max")],Sn.prototype,"readMax",null),l([le("max")],Sn.prototype,"writeMax",null),l([u({type:String,json:{type:String,write:!0}})],Sn.prototype,"min",void 0),l([oe("min")],Sn.prototype,"readMin",null),l([le("min")],Sn.prototype,"writeMin",null),l([u({type:String,json:{type:String,write:!0}})],Sn.prototype,"timeResolution",void 0),l([oe("timeResolution")],Sn.prototype,"readTimeResolution",null),l([le("timeResolution")],Sn.prototype,"writeTimeResolution",null),l([u({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Sn.prototype,"type",void 0),Sn=C3=l([E("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Sn);const uCe=Sn;var O3;function _V(t){return t!=null?new Date(t):null}function xV(t){return t?t.getTime():null}let Ao=O3=class extends Mc{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return _V(e.max)}writeMax(t,e){e.max=xV(t)}readMin(t,e){return _V(e.min)}writeMin(t,e){e.min=xV(t)}clone(){return new O3({includeTime:this.includeTime,max:this.max,min:this.min})}};l([u({type:Boolean,json:{write:!0}})],Ao.prototype,"includeTime",void 0),l([u({type:Date,json:{type:Number,write:!0}})],Ao.prototype,"max",void 0),l([oe("max")],Ao.prototype,"readMax",null),l([le("max")],Ao.prototype,"writeMax",null),l([u({type:Date,json:{type:Number,write:!0}})],Ao.prototype,"min",void 0),l([oe("min")],Ao.prototype,"readMin",null),l([le("min")],Ao.prototype,"writeMin",null),l([u({type:["datetime-picker"],json:{read:!1,write:!0}})],Ao.prototype,"type",void 0),Ao=O3=l([E("esri.form.elements.inputs.DateTimePickerInput")],Ao);const dCe=Ao;var P3;let pm=P3=class extends Mc{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new P3({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([u({type:String,json:{write:!0}})],pm.prototype,"noValueOptionLabel",void 0),l([u({type:Boolean,json:{write:!0}})],pm.prototype,"showNoValueOption",void 0),l([u({type:["radio-buttons"],json:{read:!1,write:!0}})],pm.prototype,"type",void 0),pm=P3=l([E("esri.form.elements.inputs.RadioButtonsInput")],pm);const pCe=pm;var R3;let hm=R3=class extends Mc{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new R3({offValue:this.offValue,onValue:this.onValue})}};l([u({type:[String,Number],json:{write:!0}})],hm.prototype,"offValue",void 0),l([u({type:[String,Number],json:{write:!0}})],hm.prototype,"onValue",void 0),l([u({type:["switch"],json:{read:!1,write:!0}})],hm.prototype,"type",void 0),hm=R3=l([E("esri.form.elements.inputs.SwitchInput")],hm);const hCe=hm;var L3;let CS=L3=class extends NF{constructor(t){super(t),this.type="text-area"}clone(){return new L3({maxLength:this.maxLength,minLength:this.minLength})}};l([u({type:["text-area"],json:{read:!1,write:!0}})],CS.prototype,"type",void 0),CS=L3=l([E("esri.form.elements.inputs.TextAreaInput")],CS);const fCe=CS;var F3;let OS=F3=class extends NF{constructor(t){super(t),this.type="text-box"}clone(){return new F3({maxLength:this.maxLength,minLength:this.minLength})}};l([u({type:["text-box"],json:{read:!1,write:!0}})],OS.prototype,"type",void 0),OS=F3=l([E("esri.form.elements.inputs.TextBoxInput")],OS);const mCe=OS;var N3;function K2(t){return t??null}function Q2(t){return t??null}let cs=N3=class extends Mc{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return K2(e.max)}writeMax(t,e){e.max=Q2(t)}readMin(t,e){return K2(e.min)}writeMin(t,e){e.min=Q2(t)}readTimeResolution(t,e){return K2(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Q2(t)}clone(){return new N3({max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([u({type:String,json:{type:String,write:!0}})],cs.prototype,"max",void 0),l([oe("max")],cs.prototype,"readMax",null),l([le("max")],cs.prototype,"writeMax",null),l([u({type:String,json:{type:String,write:!0}})],cs.prototype,"min",void 0),l([oe("min")],cs.prototype,"readMin",null),l([le("min")],cs.prototype,"writeMin",null),l([u({type:String,json:{type:String,write:!0}})],cs.prototype,"timeResolution",void 0),l([oe("timeResolution")],cs.prototype,"readTimeResolution",null),l([le("timeResolution")],cs.prototype,"writeTimeResolution",null),l([u({type:["time-picker"],json:{read:!1,write:!0}})],cs.prototype,"type",void 0),cs=N3=l([E("esri.form.elements.inputs.TimePickerInput")],cs);const gCe=cs,yCe=aCe,vCe=lCe,bCe=cCe,wCe=uCe,_Ce=dCe,xCe=pCe,SCe=hCe,$Ce=fCe,TCe=mCe,kCe=gCe,ICe={base:Mc,key:"type",typeMap:{"barcode-scanner":yCe,"combo-box":vCe,"date-picker":bCe,"datetime-picker":_Ce,"datetimeoffset-picker":wCe,"radio-buttons":xCe,switch:SCe,"text-area":$Ce,"text-box":TCe,"time-picker":kCe}};var D3;let fs=D3=class extends jn{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new D3({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([u({types:dY,json:{read:{reader:II},write:!0}})],fs.prototype,"domain",void 0),l([u({type:Boolean,json:{write:!0}})],fs.prototype,"editable",void 0),l([u({type:String,json:{write:!0}})],fs.prototype,"editableExpression",void 0),l([u({type:String,json:{write:!0}})],fs.prototype,"fieldName",void 0),l([u({type:String,json:{write:!0}})],fs.prototype,"hint",void 0),l([u({types:ICe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],fs.prototype,"input",void 0),l([u({type:String,json:{write:!0}})],fs.prototype,"requiredExpression",void 0),l([u({type:String,json:{read:!1,write:!0}})],fs.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],fs.prototype,"valueExpression",void 0),fs=D3=l([E("esri.form.elements.FieldElement")],fs);var z3;let Pl=z3=class extends jn{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new z3({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:V(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([u({type:Number,json:{write:!0}})],Pl.prototype,"displayCount",void 0),l([u({type:["list"],json:{write:!0}})],Pl.prototype,"displayType",void 0),l([u({type:String,json:{write:!0}})],Pl.prototype,"editableExpression",void 0),l([u({type:[RR],json:{write:!0}})],Pl.prototype,"orderByFields",void 0),l([u({type:Number,json:{write:!0}})],Pl.prototype,"relationshipId",void 0),l([u({type:["relationship"],json:{read:!1,write:!0}})],Pl.prototype,"type",void 0),Pl=z3=l([E("esri.form.elements.RelationshipElement")],Pl);const SV=Pl;var j3;let fm=j3=class extends jn{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new j3({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};l([u({type:String,json:{write:!0}})],fm.prototype,"text",void 0),l([u({type:String,json:{write:!0}})],fm.prototype,"textFormat",void 0),l([u({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],fm.prototype,"type",void 0),fm=j3=l([E("esri.form.elements.TextElement")],fm);const $V=fm;let mm=class extends Pe(jn){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};l([u({type:[nB],json:{write:{isRequired:!0}}})],mm.prototype,"associationTypes",void 0),l([u({type:String,json:{write:!0}})],mm.prototype,"editableExpression",void 0),l([u({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],mm.prototype,"type",void 0),mm=l([E("esri.form.elements.UtilityNetworkAssociationsElement")],mm);const TV=mm,ECe=t=>t.type==="field",MCe=t=>t.type==="group",ACe=t=>t.type==="text";function CQ(t){return{typesWithGroup:{base:jn,key:"type",typeMap:{attachment:vV,field:fs,group:t,relationship:SV,text:$V,utilityNetworkAssociations:TV}},typesWithoutGroup:{base:jn,key:"type",typeMap:{attachment:vV,field:fs,relationship:SV,text:$V,utilityNetworkAssociations:TV}}}}function OQ(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function PQ(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function RQ(t,e,i=!0){return t?t.map(r=>Ka(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var V3;let Ea=V3=class extends jn{constructor(t){super(t),this.initialState="expanded",this.type="group"}get elements(){return this._get("elements")??null}set elements(t){this._set("elements",t)}castElements(t){return RQ(t,X2,!1)}readElements(t,e){return OQ(e.formElements,X2,!1)}writeElements(t,e){e.formElements=PQ(t,X2,!1)}clone(){return new V3({description:this.description,elements:V(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([u({json:{write:!0}})],Ea.prototype,"elements",null),l([y$("elements")],Ea.prototype,"castElements",null),l([oe("elements",["formElements"])],Ea.prototype,"readElements",null),l([le("elements")],Ea.prototype,"writeElements",null),l([u({type:["collapsed","expanded"],json:{write:!0}})],Ea.prototype,"initialState",void 0),l([u({type:String,json:{read:!1,write:!0}})],Ea.prototype,"type",void 0),Ea=V3=l([E("esri.form.elements.GroupElement")],Ea);const X2=CQ(Ea),CCe=Ea;var U3;const eM=CQ(CCe);let Co=U3=class extends Z{constructor(t){super(t),this.description=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}get elements(){return this._get("elements")??null}set elements(t){this._set("elements",t)}castElements(t){return RQ(t,eM)}readElements(t,e){return OQ(e.formElements,eM)}writeElements(t,e){e.formElements=PQ(t,eM)}clone(){return new U3({description:this.description,expressionInfos:V(this.expressionInfos),elements:V(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:n,expressionInfos:s,title:o}=this;if(Lb(i,t,r),Lb(i,t,o),!n)return[];const a=OCe(n,s).map(c=>Gr(i,t,null,c));await Promise.all(a);for(const c of n)LQ(i,{fieldsIndex:t,relationships:e},c);return Array.from(i).sort()}};function LQ(t,e,i){var n;const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(Lb(t,r,i.label),Lb(t,r,i.description),i.type){case"field":Br(t,r,i.fieldName);break;case"group":i.elements.forEach(s=>LQ(t,e,s));break;case"relationship":if(e.relationships){const s=e.relationships.find(o=>o.id===i.relationshipId);s&&Br(t,r,s.keyField)}hh(t,r,(n=i.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":Lb(t,r,i.text)}}function OCe(t,e){if(!e||e.length===0)return[];const i=FQ(t),r=[];for(const n of e)i.has(n.name)&&r.push(n.expression);return r}function FQ(t){const e=new Set;for(const i of t)if(d5(e,i.visibilityExpression),!ACe(i)){if(MCe(i))l$(e,FQ(i.elements));else if(d5(e,i.editableExpression),ECe(i)){const{requiredExpression:r,valueExpression:n}=i;l$(e,[r,n])}}return e}function Lb(t,e,i){hh(t,e,TR(i))}l([u({type:String,json:{write:!0}})],Co.prototype,"description",void 0),l([u({json:{write:!0}})],Co.prototype,"elements",null),l([ti("elements")],Co.prototype,"castElements",null),l([oe("elements",["formElements"])],Co.prototype,"readElements",null),l([le("elements")],Co.prototype,"writeElements",null),l([u({type:[tCe],json:{write:!0}})],Co.prototype,"expressionInfos",void 0),l([u({type:Boolean,json:{default:!1,write:!0}})],Co.prototype,"preserveFieldValuesWhenHidden",void 0),l([u({type:String,json:{write:!0}})],Co.prototype,"title",void 0),Co=U3=l([E("esri.form.FormTemplate")],Co);const PCe=Symbol("getSliceableSymbol");let Ew=class{};Ew=l([E("esri.graphic.GraphicOrigin")],Ew);const RCe=Symbol("isFeatureGraphicOrigin");var kV;let LCe=class extends Ew{get[(kV=RCe,r1)](){return this.layer}get[yL](){return this.layer}get[PCe](){return this.layer}constructor(e){super(),this[kV]=!0,this.type="feature",this.layer=e}get id(){return this.layer.id}};const FCe=Oxe;function IV(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function NCe(t,e,i){if(!t&&!e||!i)return;const r=R$(i);EV(t,i,r),EV(e,i,r)}function EV(t,e,i){if(t)for(const r of t)DCe(r.geometry,e,i)}function DCe(t,e,i){if(!(t!=null&&t.spatialReference)||Hi(t.spatialReference,e))return;const r=R$(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)IV(t,t.rings,r);else if("paths"in t)IV(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function MV(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=LW(i.geometryType,e,t.outSpatialReference);if(r)for(const n of i.features)r(n.geometry)}var q3;const B3=new Ze({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ki=q3=class extends Z{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,qt)}writeGeometryType(t,e,i,r){if(t)return void B3.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void B3.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=ta(t);return r&&!i&&e.spatialReference&&(r.spatialReference=me.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new q3(this.cloneProperties())}cloneProperties(){return V({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t==null?void 0:t[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=d=>Math.round((d-r)/e),o=d=>Math.round((n-d)/i),a=this.features,c=this._getQuantizationFunction(this.geometryType,s,o);for(let d=0,h=a.length;d<h;d++)c!=null&&c(a[d].geometry)||(a.splice(d,1),d--,h--);return this.transform=t,this}unquantize(){var m,v;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=w=>w*s+r,c=w=>n-w*o;let d=null,h=null;if(this.hasZ&&((m=i==null?void 0:i.scale)==null?void 0:m[2])!=null){const{translate:[,,w],scale:[,,x]}=i;d=$=>$*x+w}if(this.hasM&&((v=i==null?void 0:i.scale)==null?void 0:v[3])!=null){const{translate:[,,,w],scale:[,,,x]}=i;h=$=>$==null?$:$*x+w}const f=this._getHydrationFunction(t,a,c,d,h);for(const{geometry:w}of e)w!=null&&f&&f(w);return this.transform=null,this}readFeaturesWithClass(t,e,i){var s;const r=me.fromJSON(e.spatialReference),n=[];for(let o=0;o<t.length;o++){const a=t[o],c=i.fromJSON(a),d=(s=a.geometry)==null?void 0:s.spatialReference;c.geometry==null||d||(c.geometry.spatialReference=r);const h=a.aggregateGeometries,f=c.aggregateGeometries;if(h&&f!=null)for(const m in f){const v=f[m],w=h[m],x=w==null?void 0:w.spatialReference;v==null||x||(v.spatialReference=r)}n.push(c)}return n}_quantizePoints(t,e,i){let r,n;const s=[];for(let o=0,a=t.length;o<a;o++){const c=t[o];if(o>0){const d=e(c[0]),h=i(c[1]);d===r&&h===n||(s.push([d-r,h-n]),r=d,n=h)}else r=e(c[0]),n=i(c[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=Ym(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const c=n[o],d=this._quantizePoints(c,e,i);d&&s.push(d)}return s.length>0?(Ym(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const o=Ym(s)?s.rings:s.paths;let a,c;for(let d=0,h=o.length;d<h;d++){const f=o[d];for(let m=0,v=f.length;m<v;m++){const w=f[m];m>0?(a+=w[0],c+=w[1]):(a=w[0],c=w[1]),w[0]=e(a),w[1]=i(c)}}if(r&&n)for(let d=0,h=o.length;d<h;d++){const f=o[d];for(let m=0,v=f.length;m<v;m++){const w=f[m];w[2]=r(w[2]),w[3]=n(w[3])}}else if(r)for(let d=0,h=o.length;d<h;d++){const f=o[d];for(let m=0,v=f.length;m<v;m++){const w=f[m];w[2]=r(w[2])}}else if(n)for(let d=0,h=o.length;d<h;d++){const f=o[d];for(let m=0,v=f.length;m<v;m++){const w=f[m];w[2]=n(w[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const o=s.points;let a,c;for(let d=0,h=o.length;d<h;d++){const f=o[d];d>0?(a+=f[0],c+=f[1]):(a=f[0],c=f[1]),f[0]=e(a),f[1]=i(c)}if(r&&n)for(let d=0,h=o.length;d<h;d++){const f=o[d];f[2]=r(f[2]),f[3]=n(f[3])}else if(r)for(let d=0,h=o.length;d<h;d++){const f=o[d];f[2]=r(f[2])}else if(n)for(let d=0,h=o.length;d<h;d++){const f=o[d];f[2]=n(f[2])}}:null}};l([u({type:String,json:{write:!0}})],Ki.prototype,"displayFieldName",void 0),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ki.prototype,"exceededTransferLimit",void 0),l([u({type:[qt],json:{write:!0}})],Ki.prototype,"features",void 0),l([oe("features")],Ki.prototype,"readFeatures",null),l([u({type:[cr],json:{write:!0}})],Ki.prototype,"fields",void 0),l([u({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:B3.read}}})],Ki.prototype,"geometryType",void 0),l([le("geometryType")],Ki.prototype,"writeGeometryType",null),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ki.prototype,"hasM",void 0),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ki.prototype,"hasZ",void 0),l([u({types:Dh,json:{write:!0}})],Ki.prototype,"queryGeometry",void 0),l([oe("queryGeometry")],Ki.prototype,"readQueryGeometry",null),l([u({type:me,json:{write:!0}})],Ki.prototype,"spatialReference",void 0),l([le("spatialReference")],Ki.prototype,"writeSpatialReference",null),l([u({json:{write:!0}})],Ki.prototype,"transform",void 0),Ki=q3=l([E("esri.rest.support.FeatureSet")],Ki),Ki.prototype.toJSON.isDefaultToJSON=!0;let zCe=0,Wl=class extends bL(eI(de)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);MV(e,this.layer.spatialReference,r);const n=Ki.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],c=this._idToClientGeometry.get(a);c!==void 0&&(o.geometry=c)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new j("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return MV(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:Ke.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e==null?void 0:e.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new j("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const f=o(h);f!=null&&n.push(f)}const a=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(s.push(this._serializeFeature(h)),a&&h.geometry!=null){const f=o(h);f!=null&&a.set(f,h)}}NCe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:c,featureEditResults:d}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=c,r&&r.finish(d.uidToObjectId),this._updateIdToClientGeometries(a,d),this._createEditsResult(d)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGeometry(n)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new j("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const a=e[o],c=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),r[o]=c,i.set(`${c.uid}`,a)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const c in o){const d=o[c],h=i.get(c);h&&(h.attributes||(h.attributes={}),d===-1?delete h.attributes[a]:h.attributes[a]=d,s._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){var n;if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=(n=e.attributes)==null?void 0:n[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(zCe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?ei.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await FCe("MemorySourceWorker",{strategy:B("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:c}=this.layer,d=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",w=>{ie.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),w.preventDefault()}));const f={features:h.features,fields:i==null?void 0:i.map(w=>w.toJSON()),geometryType:KD.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:d?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:c},m=await this._connection.invoke("load",f,{signal:e});for(const w of m.warnings)ie.getLogger(this.layer).warn("#load()",`${w.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:w});m.featureErrors.length&&ie.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const v=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(v.geometryType=KD.toJSON(h.inferredGeometryType)),this.sourceJSON=v,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(m.assignedObjectIds)}};l([fR({Type:qt,ensureType:gi(qt)})],Wl.prototype,"itemType",void 0),l([u()],Wl.prototype,"type",void 0),l([u({constructOnly:!0})],Wl.prototype,"layer",void 0),l([u({readOnly:!0})],Wl.prototype,"_workerGeometryType",null),l([u()],Wl.prototype,"sourceJSON",void 0),Wl=l([E("esri.layers.graphics.sources.MemorySource")],Wl);function jCe(t){return"portalItem"in t}const VCe=t=>{const e=t;let i=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):jCe(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([u({type:String})],i.prototype,"apiKey",null),i=l([E("esri.layers.mixins.APIKeyMixin")],i),i},UCe=t=>{const e=t;let i=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Xa(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",Zce(r,ie.getLogger(this)))}};return l([u()],i.prototype,"title",null),l([u({type:String})],i.prototype,"url",null),i=l([E("esri.layers.mixins.ArcGISService")],i),i},qCe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([u({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],i.prototype,"customParameters",void 0),i=l([E("esri.layers.mixins.CustomParametersMixin")],i),i},AV={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let Zl=class extends Pe(Z){constructor(e){super(e),this.id=t0(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};l([u({type:String,json:{write:!0}})],Zl.prototype,"id",void 0),l([u({type:Number,json:AV})],Zl.prototype,"maxScale",void 0),l([u({type:Number,json:AV})],Zl.prototype,"minScale",void 0),l([u({type:String,json:{write:!0}})],Zl.prototype,"title",void 0),l([u({type:String,json:{write:!0}})],Zl.prototype,"where",void 0),Zl=l([E("esri.layers.support.DisplayFilter")],Zl);function BCe(t,e){return{...e,filterMode:t.mode}}function yqe(t,e){return NQ(t,e).next().value??null}function vqe(t,e,i){const r=GCe(t);if(r&&(Jq(e,r[0])||XM(i,r[1])))return"";const n=Array.from(NQ(t,e,i)),s=HCe(n,e,i)?"1=1":n.map(o=>o.where||"1=1").reduce((o,a)=>FM(o,a),"");return s&&s!=="1=1"?s:""}function GCe(t){if(DQ(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],Mw(i)),e[1]=Math.min(e[1],FT(r));return e}function*NQ(t,e,i){if(DQ(t)==="manual"){const r=t.filters.find(n=>n.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)WCe(r.minScale,r.maxScale,e,i)&&(yield r)}}function HCe(t,e,i){var s,o;if(t.length===0)return!0;const r=Mw((s=t.at(0))==null?void 0:s.minScale),n=FT((o=t.at(-1))==null?void 0:o.maxScale);if(XM(r,e)||Jq(n,i))return!0;for(let a=0;a<t.length-1;a++){const c=t[a],d=t[a+1];if(XM(Mw(d.minScale),FT(c.maxScale)))return!0}return!1}function WCe(t,e,i,r){return t=Mw(t),i=Mw(i),e=FT(e),!(!Ss(i,t)&&(r??i)>t)&&!Dle(e,i)&&(r===void 0||!Ss(r,t))}function DQ(t){return"mode"in t?t.mode:t.filterMode}function Mw(t){return t||Number.POSITIVE_INFINITY}function FT(t){return t||0}let ap=class extends Pe(Z){constructor(e){super(e),this.activeFilterId=null,this.filters=new(de.ofType(Zl)),this.mode="manual"}writeFilters(e,i,r,n){const s=e.toArray();this.mode==="scale"&&s.sort((o,a)=>{const c=Pme(a.minScale,o.minScale),d=o.maxScale-a.maxScale;return c===0?d:c}),i[r]=s.map(o=>o.toJSON(n))}write(e,i){return super.write(e,BCe(this,i))}};l([u({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],ap.prototype,"activeFilterId",void 0),l([u({type:de.ofType(Zl),nonNullable:!0,json:{write:!0}})],ap.prototype,"filters",void 0),l([le("filters")],ap.prototype,"writeFilters",null),l([u({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],ap.prototype,"mode",void 0),ap=l([E("esri.layers.support.DisplayFilterInfo")],ap);const ZCe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return l([u(JCe)],i.prototype,"displayFilterEnabled",void 0),l([u(YCe)],i.prototype,"displayFilterInfo",void 0),i=l([E("esri.layers.mixins.DisplayFilteredLayer")],i),i},JCe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:jt,writer(t,e,i){Ai(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},YCe={type:ap,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:jt},origins:{"web-scene":{write:!1,read:!1}}}},G3=RSe(),zQ=new Map,jQ=new Map;async function wqe(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let n=zQ.get(r);if(!n){const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Ft(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function CV(t,e,i=!1){var s,o,a;if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=jQ.get(r))==null?void 0:s.entries();if(n){for(const[c,d]of n)if(d.name===e){const h=!((o=d.stack)!=null&&o.hasForwardEdits());if(!h&&i){const[{deleteForwardEdits:f},{default:m}]=await Promise.all([Q(()=>import("./deleteForwardEdits-B7xUlN9w.js"),[],import.meta.url),Q(()=>import("./DeleteForwardEditsParameters-BTchslfb.js"),[],import.meta.url)]),v=await f(r,c,new m({sessionId:G3,moment:d.moment}));return v.success&&((a=d.stack)==null||a.clearForwardEdits()),v.success}return h}}return!0}function PS(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=jQ.get(i))==null?void 0:n.entries();if(r){for(const[s,o]of r)if(o.name===e)return o.lockType==="edit"}return!1}const DF=new D9;function VQ(t){return DF.on("apply-edits",new WeakRef(t))}function UQ(t){return DF.on("update-moment",new WeakRef(t))}function OV(t,e,i=null,r=!1){const n=Gn();return r=e==null||r,DF.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const qQ=Symbol();function _qe(t){return t!=null&&typeof t=="object"&&qQ in t}function K0(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function Fb(t,e,i){const r=new URL(t).host,n=zQ.get(r),s=o=>!o||o===n;return s(e)&&s(i)||e===i}const KCe=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=o=>{const{serviceUrl:a,layerId:c,gdbVersion:d,mayReceiveServiceEdits:h,result:f}=o,m=a===this.url,v=c!=null&&this.layerId!=null&&c===this.layerId,w=K0(this),x=K0(this)&&Fb(a,d,this.gdbVersion);if(!m||w&&!x||!v&&!h)return;const $=f.then(T=>{var L;if(this.lastEditsEventDate=new Date,v&&(T.addedFeatures.length||T.updatedFeatures.length||T.deletedFeatures.length||T.addedAttachments.length||T.updatedAttachments.length||T.deletedAttachments.length))return this.emit("edits",V(T)),T;const C=(L=T.editedFeatures)==null?void 0:L.find(({layerId:D})=>D===this.layerId);if(C){const{adds:D,updates:q,deletes:F}=C.editedFeatures,ee={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:D?D.map(({attributes:ae})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]})):[],deletedFeatures:F?F.map(({attributes:ae})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]})):[],updatedFeatures:q?q.map(({current:{attributes:ae}})=>({objectId:this.objectIdField&&ae[this.objectIdField],globalId:this.globalIdField&&ae[this.globalIdField]})):[],editedFeatures:V(T.editedFeatures),exceededTransferLimit:!1,historicMoment:V(T.historicMoment)};return this.emit("edits",ee),ee}const P={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:V(T.editedFeatures),exceededTransferLimit:!1,historicMoment:V(T.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(a,d,P.historicMoment)&&this.emit("edits",P),P}).then(T=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(a,d,T.historicMoment)&&(this.historicMoment=T.historicMoment),T));this.emit("apply-edits",{result:$})},this._updateMomentHandler=o=>{const{serviceUrl:a,gdbVersion:c,moment:d}=o,h=a===this.url,f=K0(this),m=K0(this)&&Fb(a,c,this.gdbVersion),v=K0(this)&&!Fb(a,this.gdbVersion,null);h&&f&&m&&v&&"historicMoment"in this&&this.historicMoment!==d&&(this.historicMoment=d)},this.when().then(()=>{this.addHandles(VQ(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(UQ(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(s,o,a){return"historicMoment"in this&&this.historicMoment!==a&&PS(s,o)}},e=qQ,n);return l([u()],r.prototype,"lastEditsEventDate",void 0),r=l([E("esri.layers.mixins.EditBusLayer")],r),r};var H3;const tM=new Ze({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),iM=new Ze({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Sa=H3=class extends Z{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new Fe({geometry:V(i),objectIds:V(s),spatialRelationship:r,timeExtent:V(n),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new H3({geometry:V(e),objectIds:V(n),spatialRelationship:i,timeExtent:V(r),where:t,units:s,distance:o})}};l([u({type:String,json:{write:!0}})],Sa.prototype,"where",void 0),l([u({types:Dh,json:{write:!0}})],Sa.prototype,"geometry",void 0),l([u({type:tM.apiValues,json:{name:"spatialRel",read:{reader:tM.read},write:{allowNull:!1,writer:tM.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Sa.prototype,"spatialRelationship",void 0),l([u({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Sa.prototype,"distance",void 0),l([u({type:[Number],json:{write:!0}})],Sa.prototype,"objectIds",void 0),l([u({type:iM.apiValues,json:{read:iM.read,write:{writer:iM.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Sa.prototype,"units",void 0),l([u({type:xt,json:{write:!0}})],Sa.prototype,"timeExtent",void 0),Sa=H3=l([E("esri.layers.support.FeatureFilter")],Sa);const QCe=Sa;var W3;const PV={read:{reader:dw},write:{writer:pw,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},RV={read:{reader:dw},write:{writer:pw,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},LV={name:"showExcludedLabels",default:!0};let lp=W3=class extends Z{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=e.messages)==null||r.push(new j("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new j("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new W3({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([u({type:QCe,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?Ai(i,n,e):Ai(i,null,e)}}}})],lp.prototype,"filter",void 0),l([u({json:{read:dw,write:{writer:pw,allowNull:!0},origins:{"web-map":PV,"portal-item":PV}}})],lp.prototype,"includedEffect",void 0),l([u({json:{read:dw,write:{writer:pw,allowNull:!0},origins:{"web-map":RV,"portal-item":RV}}})],lp.prototype,"excludedEffect",void 0),l([u({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":LV,"portal-item":LV}}})],lp.prototype,"excludedLabelsVisible",void 0),lp=W3=l([E("esri.layers.support.FeatureEffect")],lp);const FV={write:{allowNull:!0}},XCe={type:lp,json:{origins:{"web-map":FV,"portal-item":FV}}},eOe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([u(XCe)],i.prototype,"featureEffect",void 0),i=l([E("esri.layers.mixins.FeatureEffectLayer")],i),i};let Rl=class extends Pe(Z){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};l([u()],Rl.prototype,"creatorField",void 0),l([u()],Rl.prototype,"creationDateField",void 0),l([u()],Rl.prototype,"editorField",void 0),l([u()],Rl.prototype,"editDateField",void 0),l([u()],Rl.prototype,"realm",void 0),l([u(S$("dateFieldsTimeReference",!0))],Rl.prototype,"timeZone",void 0),Rl=l([E("esri.layers.support.EditFieldsInfo")],Rl);let Ma=class extends Pe(Z){constructor(e){super(e)}};l([u({constructOnly:!0,json:{write:!0}})],Ma.prototype,"name",void 0),l([u({constructOnly:!0,json:{write:!0}})],Ma.prototype,"fields",void 0),l([u({constructOnly:!0,json:{write:!0}})],Ma.prototype,"isAscending",void 0),l([u({constructOnly:!0,json:{write:!0}})],Ma.prototype,"indexType",void 0),l([u({constructOnly:!0,json:{write:!0}})],Ma.prototype,"isUnique",void 0),l([u({constructOnly:!0,json:{write:!0}})],Ma.prototype,"description",void 0),Ma=l([E("esri.layers.support.FeatureIndex")],Ma);async function BQ(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=GQ(t));const r=tOe(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=r}return s}function tOe(t){return GQ(t)*iOe(t)}function iOe(t){return t.capabilities.query.maxRecordCount||2e3}function GQ(t){return t.capabilities.query.supportsMaxRecordCountFactor?Fe.MAX_MAX_RECORD_COUNT_FACTOR:1}var Z3;let Bv=Z3=class extends Z{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new Z3({minValue:this.minValue,maxValue:this.maxValue})}};l([u({type:Number,json:{write:!0}})],Bv.prototype,"minValue",void 0),l([u({type:Number,json:{write:!0}})],Bv.prototype,"maxValue",void 0),Bv=Z3=l([E("esri.renderers.support.AuthoringInfoClassBreakInfo")],Bv);var J3;let mu=J3=class extends Z{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new J3({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:V(this.classBreakInfos)})}};l([u({type:String,json:{write:!0}})],mu.prototype,"field",void 0),l([u({type:String,json:{write:!0}})],mu.prototype,"normalizationField",void 0),l([u({type:String,json:{write:!0}})],mu.prototype,"label",void 0),l([u({type:[Bv],json:{write:!0}})],mu.prototype,"classBreakInfos",void 0),mu=J3=l([E("esri.renderers.support.AuthoringInfoFieldInfo")],mu);var Y3;let gm=Y3=class extends Z{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new Y3({label:this.label,value:this.value,size:this.size})}};l([u({type:String,json:{write:!0}})],gm.prototype,"label",void 0),l([u({type:Number,json:{write:!0}})],gm.prototype,"size",void 0),l([u({type:Number,json:{write:!0}})],gm.prototype,"value",void 0),gm=Y3=l([E("esri.renderers.support.AuthoringInfoSizeStop")],gm);const rOe=gm;var K3;const B_=new Ze({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),G_=new Ze({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),NV={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},DV=["high-to-low","above-and-below","centered-on","extremes"],zV=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],jV=["seconds","minutes","hours","days","months","years"],nOe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],sOe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let Ji=K3=class extends Z{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new K3({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:V(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([u({types:NV,json:{write:!0}})],Ji.prototype,"endTime",void 0),l([y$("endTime")],Ji.prototype,"castEndTime",null),l([u({type:String,json:{write:!0}})],Ji.prototype,"field",void 0),l([u({type:Number,json:{write:!0}})],Ji.prototype,"maxSliderValue",void 0),l([u({type:Number,json:{write:!0}})],Ji.prototype,"minSliderValue",void 0),l([u({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ji.prototype,"normalizationField",null),l([u({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ji.prototype,"referenceSizeScale",null),l([u({type:nOe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ji.prototype,"referenceSizeSymbolStyle",null),l([u({type:sOe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ji.prototype,"spikeSymbolStyle",null),l([u({types:NV,json:{write:!0}})],Ji.prototype,"startTime",void 0),l([y$("startTime")],Ji.prototype,"castStartTime",null),l([u({type:[rOe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Ji.prototype,"sizeStops",null),l([u({type:B_.apiValues,value:null,json:{type:B_.jsonValues,read:B_.read,write:B_.write}})],Ji.prototype,"style",null),l([u({type:zV,value:null,json:{type:zV,origins:{"web-scene":{type:DV,write:{writer:(t,e)=>{DV.includes(t)&&(e.theme=t)}}}},write:!0}})],Ji.prototype,"theme",null),l([u({type:G_.apiValues,json:{type:G_.jsonValues,read:G_.read,write:G_.write}})],Ji.prototype,"type",void 0),l([u({type:jV,json:{type:jV,write:!0}})],Ji.prototype,"units",void 0),Ji=K3=l([E("esri.renderers.support.AuthoringInfoVisualVariable")],Ji);const oOe=Ji;let lg=class extends Z{constructor(e){super(e),this.type=null}};l([u({readOnly:!0,json:{read:!1,write:!0}})],lg.prototype,"type",void 0),lg=l([E("esri.rest.support.ColorRamp")],lg);var Q3;let ic=Q3=class extends lg{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new Q3({fromColor:V(this.fromColor),toColor:V(this.toColor),algorithm:this.algorithm})}};l([Ie({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],ic.prototype,"algorithm",void 0),l([u({type:Ue,json:{type:[nt],write:{isRequired:!0}}})],ic.prototype,"fromColor",void 0),l([u({type:Ue,json:{type:[nt],write:{isRequired:!0}}})],ic.prototype,"toColor",void 0),l([u({type:["algorithmic"],json:{write:{isRequired:!0}}})],ic.prototype,"type",void 0),ic=Q3=l([E("esri.rest.support.AlgorithmicColorRamp")],ic);var X3;let Jl=X3=class extends lg{constructor(t){super(t),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(t,e,i,r){const n=t==null?void 0:t.map(o=>o.toJSON(r)),{weights:s}=this;if(n&&(s!=null&&s.length)&&n.length===(s==null?void 0:s.length)){const o=100/s.reduce((c,d)=>c+d);let a=0;n.forEach((c,d)=>{c.start=a,a+=s[d]*o,c.stop=a})}e.colorRamps=n}readWeights(t,e){var r;const i=(r=e.colorRamps)==null?void 0:r.map(({start:n,stop:s})=>n==null||s==null?-1:s-n);if(!(i!=null&&i.some(n=>n<0)))return i}clone(){return new X3({colorRamps:V(this.colorRamps)})}};l([u({type:[ic],json:{write:{isRequired:!0}}})],Jl.prototype,"colorRamps",void 0),l([le("colorRamps")],Jl.prototype,"writeColorRamps",null),l([u({type:["multipart"],json:{write:{isRequired:!0}}})],Jl.prototype,"type",void 0),l([u({type:[Number]})],Jl.prototype,"weights",void 0),l([oe("weights",["colorRamps"])],Jl.prototype,"readWeights",null),Jl=X3=l([E("esri.rest.support.MultipartColorRamp")],Jl);const aOe={key:"type",base:lg,typeMap:{algorithmic:ic,multipart:Jl}};function lOe(t){return t!=null&&t.type?t.type==="algorithmic"?ic.fromJSON(t):t.type==="multipart"?Jl.fromJSON(t):null:null}var eP;const Rd=new Ze({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),H_=new Ze({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),VV=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],cOe=["high-to-low","above-and-below","above","below"],uOe=["flow-line","wave-front"],dOe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let si=eP=class extends Z{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?lOe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new eP({classificationMethod:this.classificationMethod,colorRamp:V(this.colorRamp),fadeRatio:V(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:V(this.field1),field2:V(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([u({type:Rd.apiValues,value:null,json:{type:Rd.jsonValues,read:Rd.read,write:Rd.write,origins:{"web-document":{default:"manual",type:Rd.jsonValues,read:Rd.read,write:Rd.write}}}})],si.prototype,"classificationMethod",null),l([u({types:aOe,json:{write:!0}})],si.prototype,"colorRamp",void 0),l([oe("colorRamp")],si.prototype,"readColorRamp",null),l([u({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],si.prototype,"fadeRatio",void 0),l([u({type:[String],value:null,json:{write:!0}})],si.prototype,"fields",null),l([u({type:mu,value:null,json:{write:!0}})],si.prototype,"field1",null),l([u({type:mu,value:null,json:{write:!0}})],si.prototype,"field2",null),l([u({type:uOe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],si.prototype,"flowTheme",null),l([u({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],si.prototype,"focus",null),l([u({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],si.prototype,"isAutoGenerated",void 0),l([u({type:Number,value:null,json:{type:nt,write:!0}})],si.prototype,"numClasses",null),l([u({type:VV,json:{type:VV,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],si.prototype,"lengthUnit",void 0),l([u({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],si.prototype,"maxSliderValue",void 0),l([u({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],si.prototype,"minSliderValue",void 0),l([u({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],si.prototype,"statistics",null),l([u({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],si.prototype,"standardDeviationInterval",null),l([u({type:H_.apiValues,value:null,json:{type:H_.jsonValues,read:H_.read,write:H_.write}})],si.prototype,"type",null),l([u({type:[oOe],json:{write:!0}})],si.prototype,"visualVariables",void 0),l([u({type:dOe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],si.prototype,"univariateSymbolStyle",null),l([u({type:cOe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],si.prototype,"univariateTheme",null),si=eP=l([E("esri.renderers.support.AuthoringInfo")],si);const rM=new Ze({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let _s=class extends Z{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([u({type:si,json:{write:!0}})],_s.prototype,"authoringInfo",void 0),l([u({type:rM.apiValues,readOnly:!0,json:{type:rM.jsonValues,read:!1,write:{writer:rM.write,ignoreOrigin:!0,isRequired:!0}}})],_s.prototype,"type",void 0),_s=l([E("esri.renderers.Renderer")],_s);let Gv=class extends Pe(Z){constructor(){super(...arguments),this.showLegend=null,this.title=null}};l([u({type:Boolean,json:{write:!0}})],Gv.prototype,"showLegend",void 0),l([u({type:String,json:{write:!0}})],Gv.prototype,"title",void 0),Gv=l([E("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Gv);const HQ=Gv,nM=new Ze({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Pr=class extends Z{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(ie.getLogger(this).error(".field: field must be a string value"),null):Zw(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([u()],Pr.prototype,"index",void 0),l([u({type:nM.apiValues,readOnly:!0,json:{read:nM.read,write:{writer:nM.write,isRequired:!0}}})],Pr.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],Pr.prototype,"field",void 0),l([ti("field")],Pr.prototype,"castField",null),l([u({type:String,json:{write:!0}})],Pr.prototype,"valueExpression",void 0),l([u({type:String,json:{write:!0}})],Pr.prototype,"valueExpressionTitle",void 0),l([u({readOnly:!0})],Pr.prototype,"arcadeRequired",null),l([u({type:HQ,json:{write:!0}})],Pr.prototype,"legendOptions",void 0),Pr=l([E("esri.renderers.visualVariables.VisualVariable")],Pr);var tP;let cp=tP=class extends Z{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new tP({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([u({type:Ue,json:{type:[nt],write:{isRequired:!0}}})],cp.prototype,"color",void 0),l([u({type:String,json:{write:!0}})],cp.prototype,"label",void 0),l([u({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],cp.prototype,"value",void 0),l([le("value")],cp.prototype,"writeValue",null),cp=tP=l([E("esri.renderers.visualVariables.support.ColorStop")],cp);const pOe=cp;var iP;let gu=iP=class extends Pr{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new iP({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};l([u({readOnly:!0})],gu.prototype,"cache",null),l([u({type:["color"],json:{type:["colorInfo"]}})],gu.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],gu.prototype,"normalizationField",void 0),l([u({type:[pOe],json:{write:!0}})],gu.prototype,"stops",null),gu=iP=l([E("esri.renderers.visualVariables.ColorVariable")],gu);var rP;let ou=rP=class extends Z{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return uw(e.transparency)}writeOpacity(t,e,i){e[i]=tI(t)}clone(){return new rP({label:this.label,opacity:this.opacity,value:this.value})}};l([u({type:String,json:{write:!0}})],ou.prototype,"label",void 0),l([u({type:Number,json:{type:nt,write:{target:"transparency",isRequired:!0}}})],ou.prototype,"opacity",void 0),l([oe("opacity",["transparency"])],ou.prototype,"readOpacity",null),l([le("opacity")],ou.prototype,"writeOpacity",null),l([u({type:Number,json:{write:{isRequired:!0}}})],ou.prototype,"value",void 0),ou=rP=l([E("esri.renderers.visualVariables.support.OpacityStop")],ou);const hOe=ou;var nP;let rc=nP=class extends Pr{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new nP({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};l([u({readOnly:!0})],rc.prototype,"cache",null),l([u({type:["opacity"],json:{type:["transparencyInfo"]}})],rc.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],rc.prototype,"normalizationField",void 0),l([u({type:[hOe],json:{write:!0}})],rc.prototype,"stops",null),rc=nP=l([E("esri.renderers.visualVariables.OpacityVariable")],rc);var sP;let yu=sP=class extends Pr{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new sP({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};l([u({readOnly:!0})],yu.prototype,"cache",null),l([u({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],yu.prototype,"axis",void 0),l([u({type:["rotation"],json:{type:["rotationInfo"]}})],yu.prototype,"type",void 0),l([u({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],yu.prototype,"rotationType",void 0),yu=sP=l([E("esri.renderers.visualVariables.RotationVariable")],yu);function fOe(t){return ht(t)}var oP;let qo=oP=class extends Z{constructor(t){super(t),this.label=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}get size(){return this._get("size")}set size(t){this._set("size",t)}clone(){return new oP({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};l([u({type:String,json:{write:!0}})],qo.prototype,"label",void 0),l([u({type:Number,cast:ht,json:{write:{isRequired:!0}}})],qo.prototype,"size",null),l([u({type:Number,json:{write:{isRequired:!0}}})],qo.prototype,"value",void 0),l([u({type:Boolean,json:{write:!1}})],qo.prototype,"useMinValue",void 0),l([u({type:Boolean,json:{write:!1}})],qo.prototype,"useMaxValue",void 0),qo=oP=l([E("esri.renderers.visualVariables.support.SizeStop")],qo);let RS=class extends HQ{constructor(){super(...arguments),this.customValues=null}};l([u({type:[Number],json:{write:!0}})],RS.prototype,"customValues",void 0),RS=l([E("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],RS);const mOe=RS;function qm(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Eh(t){return t!=null&&!isNaN(t)&&isFinite(t)}function WQ(t){return t.valueExpression?"expression":t.field&&typeof t.field=="string"?"field":"unknown"}function gOe(t,e){const i=e||WQ(t),r=t.valueUnit||"unknown";return i==="unknown"?"constant":t.stops?"stops":t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?"clamped-linear":r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}const ZQ=()=>ie.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),NI=t=>ZQ().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),DI=()=>ZQ().error("Use of arcade expressions requires an arcade context"),UV=new qt,LS=Math.PI,JQ=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function YQ(t,e,i){var w;const r="visualVariables"in t?(w=t.visualVariables)==null?void 0:w.find(x=>x.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void NI("ColorVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const c=r.field,{ipData:d,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!c&&!h){const x=r.stops;return x&&x[0]&&x[0].color}if(typeof a!="number")if(h){if((i==null?void 0:i.arcade)==null)return void DI();const x={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},$=i.arcade.arcadeUtils,T=$.getViewInfo(x),C=$.createExecContext(s,T,i.timeZone);if(!f){const P=$.createSyntaxTree(r.valueExpression);f=$.createFunction(P),r.cache.compiledFunc=f}a=$.executeFunction(f,C)}else o&&(a=o[c]);const m=r.normalizationField,v=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(v)&&v!==0)){Eh(v)&&!n&&(a/=v);const x=zF(a,d);if(x){const $=x[0],T=x[1],C=$===T?r.stops[$].color:Ue.blendColors(r.stops[$].color,r.stops[T].color,x[2],i!=null?i.color:void 0);return new Ue(C)}}}function KQ(t,e,i){var w;const r="visualVariables"in t?(w=t.visualVariables)==null?void 0:w.find(x=>x.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void NI("OpacityVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const c=r.field,{ipData:d,hasExpression:h}=r.cache;let f=r.cache.compiledFunc;if(!c&&!h){const x=r.stops;return x&&x[0]&&x[0].opacity}if(typeof a!="number")if(h){if((i==null?void 0:i.arcade)==null)return void DI();const x={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},$=i.arcade.arcadeUtils,T=$.getViewInfo(x),C=$.createExecContext(s,T,i.timeZone);if(!f){const P=$.createSyntaxTree(r.valueExpression);f=$.createFunction(P),r.cache.compiledFunc=f}a=$.executeFunction(f,C)}else o&&(a=o[c]);const m=r.normalizationField,v=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(v)&&v!==0)){Eh(v)&&!n&&(a/=v);const x=zF(a,d);if(x){const $=x[0],T=x[1];if($===T)return r.stops[$].opacity;{const C=r.stops[$].opacity;return C+(r.stops[T].opacity-C)*x[2]}}}}function QQ(t,e,i){var v;const r="visualVariables"in t?(v=t.visualVariables)==null?void 0:v.find(w=>w.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void NI("RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,c=a==null?void 0:a.attributes,d=r.field,{hasExpression:h}=r.cache;let f=r.cache.compiledFunc,m=null;if(!d&&!h)return m;if(h){if((i==null?void 0:i.arcade)==null)return void DI();const w={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},x=i.arcade.arcadeUtils,$=x.getViewInfo(w),T=x.createExecContext(a,$,i.timeZone);if(!f){const C=x.createSyntaxTree(r.valueExpression);f=x.createFunction(C),r.cache.compiledFunc=f}m=x.executeFunction(f,T)}else c&&(m=c[d]);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function yOe(t,e,i){const r=typeof e=="number",n=r?null:e,s=n==null?void 0:n.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let c=t.cache.compiledFunc;if(a){const h=i!=null?i.scale:void 0,f=i!=null?i.view:void 0;o=h==null||f==="3d"?vOe(t):h}else if(!r)switch(t.inputValueType){case"expression":{if((i==null?void 0:i.arcade)==null)return void DI();const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,m=f.getViewInfo(h),v=f.createExecContext(n,m,i.timeZone);if(!c){const w=f.createSyntaxTree(t.valueExpression);c=f.createFunction(w),t.cache.compiledFunc=c}o=f.executeFunction(c,v);break}case"field":s&&(o=s[t.field]);break;case"unknown":o=null}if(!Eh(o))return null;if(r||!t.normalizationField)return o;const d=s?parseFloat(s[t.normalizationField]):null;return Eh(d)&&d!==0?o/d:null}function vOe(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function zI(t,e,i){var s;const r="visualVariables"in t?(s=t.visualVariables)==null?void 0:s.find(o=>o.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void NI("SizeVariable");const n=eX(yOe(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?void 0:n}function Bn(t,e,i){return t==null?null:qm(t)?zI(t,e,i):Eh(t)?t:null}function XQ(t,e,i){return Eh(i)&&t>i?i:Eh(e)&&t<e?e:t}function bOe(t,e,i,r){const n=Bn(e.minSize,i,r)||e.minDataValue;return t==null&&n==null?null:(t??0)+(n??0)}function wOe(t,e,i){const r=t.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=t.minSize),Bn(n,e,i)}function _Oe(t,e,i,r){const n=Bn(e.minSize,i,r);if(t==null)return n;const{minDataValue:s,maxDataValue:o}=e;if(s==null||o==null)return null;const a=(t-s)/(o-s),c=Bn(e.maxSize,i,r),d=r!=null?r.shape:void 0;if(t<=s)return n;if(t>=o)return c;if(n==null||c==null)return null;if(e.scaleBy==="area"&&d){const h=d==="circle",f=h?LS*(n/2)**2:n*n,m=f+a*((h?LS*(c/2)**2:c*c)-f);return h?2*Math.sqrt(m/LS):Math.sqrt(m)}return n+a*(c-n)}function xOe(t,e,i,r){const n=Bn(e.minSize,i,r);if(t==null||n==null)return n;const s=r!=null?r.shape:void 0,{minDataValue:o}=e;if(o==null)return null;const a=t/o,c=Bn(e.maxSize,i,r);let d=null;return d=s==="circle"?2*Math.sqrt(a*(n/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(a*n**2):a*n,XQ(d,n,c)}function SOe(t,e,i,r,n){var c,d,h;if(t==null)return null;const[s,o,a]=zF(t,n);if(s===o)return Bn((c=e.stops)==null?void 0:c[s].size,i,r);{const f=Bn((d=e.stops)==null?void 0:d[s].size,i,r),m=Bn((h=e.stops)==null?void 0:h[o].size,i,r);return f==null||m==null?null:f+(m-f)*a}}function $Oe(t,e,i,r){const n=((r==null?void 0:r.resolution)??1)*oI[e.valueUnit],s=Bn(e.minSize,i,r),o=Bn(e.maxSize,i,r),{valueRepresentation:a}=e;if(t==null)return s;let c=null;return c=a==="area"?2*Math.sqrt(t/LS)/n:a==="radius"||a==="distance"?2*t/n:t/n,XQ(c,s,o)}function eX(t,e,i,r,n){switch(e.transformationType){case"additive":return bOe(t,e,i,r);case"constant":return wOe(e,i,r);case"clamped-linear":return _Oe(t,e,i,r);case"proportional":return xOe(t,e,i,r);case"stops":return SOe(t,e,i,r,n);case"real-world-size":return $Oe(t,e,i,r);case"identity":return t;case"unknown":return null}}function TOe(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=Bn(t.minSize,UV,n),o=Bn(t.maxSize,UV,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function kOe(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const c of t.visualVariables)switch(c.type){case"color":n.push(c);break;case"opacity":s.push(c);break;case"rotation":a.push(c);break;case"size":o.push(c)}return n.forEach(c=>{const d=YQ(c,e,i);r.push({variable:c,value:d})}),s.forEach(c=>{const d=KQ(c,e,i);r.push({variable:c,value:d})}),a.forEach(c=>{const d=QQ(c,e,i);r.push({variable:c,value:d})}),o.forEach(c=>{const d=zI(c,e,i);r.push({variable:c,value:d})}),r}function zF(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,s)=>t<n?(r=s,!0):(i=s,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function IOe(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":zI(n,e,i)??"proportional";switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const Mqe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:IOe,getColor:YQ,getOpacity:KQ,getRotationAngle:QQ,getSize:zI,getSizeForValue:eX,getSizeFromNumberOrVariable:Bn,getSizeRangeAtScale:TOe,getVisualVariableValues:kOe,viewScaleRE:JQ},Symbol.toStringTag,{value:"Module"}));var aP;const W_=new Ze({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),lP=new Ze({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function qV(t){if(t!=null)return typeof t=="string"||typeof t=="number"?fOe(t):t.type==="size"?qm(t)?t:(delete(t={...t}).type,new wt(t)):void 0}function BV(t,e,i){if(typeof t!="object")return t;const r=new wt;return r.read(t,i),r}let wt=aP=class extends Pr{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&JQ.test(this.valueExpression)}}set index(t){qm(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),qm(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return WQ(this)}set maxDataValue(t){t&&this.stops&&(ie.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}get maxSize(){return this._get("maxSize")}set maxSize(t){t&&this.stops&&(ie.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",qV(t))}readMaxSize(t,e,i){return BV(t,e,i)}set minDataValue(t){t&&this.stops&&(ie.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}get minSize(){return this._get("minSize")}set minSize(t){t&&this.stops&&(ie.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",qV(t))}readMinSize(t,e,i){return BV(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(ie.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return gOe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r!=null&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new j("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?lP.read(t):null}clone(){var t,e;return new aP({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:qm(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:qm(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType==="stops"){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map(e=>e.value||0)}};l([u({readOnly:!0})],wt.prototype,"cache",null),l([u({type:W_.apiValues,json:{type:W_.jsonValues,origins:{"web-map":{read:!1}},read:W_.read,write:W_.write}})],wt.prototype,"axis",void 0),l([u()],wt.prototype,"index",null),l([u({type:String,readOnly:!0})],wt.prototype,"inputValueType",null),l([u({type:mOe,json:{write:!0}})],wt.prototype,"legendOptions",void 0),l([u({type:Number,value:null,json:{write:!0}})],wt.prototype,"maxDataValue",null),l([u({type:Number,useTypeForAutocast:!1,value:null,json:{write:!0}})],wt.prototype,"maxSize",null),l([oe("maxSize")],wt.prototype,"readMaxSize",null),l([u({type:Number,value:null,json:{write:!0}})],wt.prototype,"minDataValue",null),l([u({type:Number,useTypeForAutocast:!1,value:null,json:{write:!0}})],wt.prototype,"minSize",null),l([oe("minSize")],wt.prototype,"readMinSize",null),l([u({type:String,json:{write:!0}})],wt.prototype,"normalizationField",void 0),l([u({readOnly:!0})],wt.prototype,"arcadeRequired",null),l([u({type:String})],wt.prototype,"scaleBy",void 0),l([u({type:[qo],value:null,json:{write:!0}})],wt.prototype,"stops",null),l([u({type:["outline"],json:{write:!0}})],wt.prototype,"target",void 0),l([u({type:String,readOnly:!0})],wt.prototype,"transformationType",null),l([u({type:["size"],json:{type:["sizeInfo"]}})],wt.prototype,"type",void 0),l([u({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],wt.prototype,"useSymbolValue",void 0),l([u({type:String,json:{write:!0}})],wt.prototype,"valueExpression",void 0),l([oe("valueExpression",["valueExpression","expression"])],wt.prototype,"readValueExpression",null),l([le("web-scene","valueExpression")],wt.prototype,"writeValueExpressionWebScene",null),l([u({type:["radius","diameter","area","width","distance"],json:{write:!0}})],wt.prototype,"valueRepresentation",void 0),l([u({type:lP.apiValues,json:{write:lP.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],wt.prototype,"valueUnit",void 0),l([oe("valueUnit")],wt.prototype,"readValueUnit",null),wt=aP=l([E("esri.renderers.visualVariables.SizeVariable")],wt);const EOe={color:gu,size:wt,opacity:rc,rotation:yu},MOe=new Ze({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),AOe=/^\[([^\]]+)\]$/i;let FS=class extends Se{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter(i=>!!i),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,o=n==null?void 0:n.match(AOe),a=o==null?void 0:o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map(c=>{const d=MOe.read(c.type),h=EOe[d];h||(ie.getLogger(this).warn(`Unknown variable type: ${d}`),r!=null&&r.messages&&r.messages.push(new Is("visual-variable:unsupported",`visualVariable of type '${d}' is not supported`,{definition:c,context:r})));const f=new h;return f.read(c,r),f})}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([u()],FS.prototype,"visualVariables",null),FS=l([E("esri.renderers.visualVariables.VisualVariableFactory")],FS);const COe={base:Pr,key:"type",typeMap:{opacity:rc,color:gu,rotation:yu,size:wt}},s0=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._vvFactory=new FS}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,n,s){return this._vvFactory.readVariables(r,n,s)}writeVisualVariables(r,n,s,o){n[s]=this._vvFactory.writeVariables(r,o)}get arcadeRequiredForVisualVariables(){var r;return((r=this.visualVariables)==null?void 0:r.some(({arcadeRequired:n})=>n))??!1}hasVisualVariables(r,n){return r?this.getVisualVariablesForType(r,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(r,n){var s;return((s=this.visualVariables)==null?void 0:s.filter(o=>o.type===r&&(typeof n=="string"?o.target===n:n!==!1||!o.target)))??[]}async collectVVRequiredFields(r,n){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const o of s)o&&(o.field&&Br(r,n,o.field),o.normalizationField&&Br(r,n,o.normalizationField),o.valueExpression&&(OOe(o.valueExpression,r,n)||await Gr(r,n,null,o.valueExpression)))}};return l([u({types:[COe],value:null,json:{write:!0}})],i.prototype,"visualVariables",null),l([oe("visualVariables",["visualVariables","rotationType","rotationExpression"])],i.prototype,"readVisualVariables",null),l([le("visualVariables")],i.prototype,"writeVisualVariables",null),i=l([E("esri.renderers.mixins.VisualVariablesMixin")],i),i};function OOe(t,e,i){const r=_ae(t);return r!=null&&(Br(e,i,r),!0)}const jF=[252,146,31,255],POe=[153,153,153,255],ROe={type:"esriSMS",style:"esriSMSCircle",size:6,color:jF,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},LOe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:jF},FOe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},NOe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},DOe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},zOe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},jOe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},NT=er.fromJSON(ROe),VF=Ni.fromJSON(LOe),tX=vs.fromJSON(FOe),VOe=Et.fromJSON(NOe);function Cqe(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return NT;case"polyline":return VF;case"polygon":case"extent":return tX}return null}const Oqe=er.fromJSON(DOe),Pqe=Ni.fromJSON(zOe),Rqe=vs.fromJSON(jOe),UOe=an.fromSimpleMarkerSymbol(NT),qOe=Ko.fromSimpleLineSymbol(VF),BOe=Qs.fromSimpleFillSymbol(tX),GOe=new hc({symbolLayers:new de([new nn({material:{color:jF},edges:new sH({size:no(1),color:new Ue(POe)})})])}),HOe=new Ko({symbolLayers:new de([new rn({material:{color:new Ue([0,0,0])},size:no(1)})])}),WOe=new Qs({symbolLayers:new de([new nn({outline:{color:new Ue([0,0,0]),size:no(1)}})])});function Lqe(t){if(t==null)return null;switch(t.type){case"mesh":return GOe;case"point":case"multipoint":return UOe;case"polyline":return qOe;case"polygon":case"extent":return BOe}return null}const GV="#useCIMFallbackSymbology()",_f={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function ZOe(t,e=_f){var c,d,h,f;if(!t)return{symbol:null};const{retainId:i=_f.retainId,ignoreDrivers:r=_f.ignoreDrivers,hasLabelingContext:n=_f.hasLabelingContext,retainCIM:s=_f.retainCIM,cimFallbackEnabled:o=_f.cimFallbackEnabled}=e;let a=null;if(CH(t))a=t.clone();else if(t.type==="web-style")a=t.clone();else if(t.type==="cim"){const m=(d=(c=t.data)==null?void 0:c.symbol)==null?void 0:d.type;switch(m){case"CIMPointSymbol":a=s?t.clone():an.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(a=HOe.clone(),(h=e==null?void 0:e.logWarning)==null||h.call(e,GV,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=WOe.clone(),(f=e==null?void 0:e.logWarning)==null||f.call(e,GV,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new j("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${m||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Ni)a=Ko.fromSimpleLineSymbol(t);else if(t instanceof er)a=an.fromSimpleMarkerSymbol(t);else if(t instanceof en)a=an.fromPictureMarkerSymbol(t);else if(t instanceof vs)a=e.geometryType&&e.geometryType==="mesh"?hc.fromSimpleFillSymbol(t):Qs.fromSimpleFillSymbol(t);else{if(!(t instanceof Et))return{error:new j("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};a=n?jo.fromTextSymbol(t):an.fromTextSymbol(t)}return i&&a&&a.type!=="cim"&&(a.id=t.id),!r||a.type==="cim"||a instanceof vr||a.symbolLayers.forEach(m=>m.ignoreDrivers=!0),{symbol:a}}function DT(t,e,i,r){const n=iX(t,{},{context:r,isLabelSymbol:!1});n!=null&&Ai(i,n,e)}function HV(t,e,i,r){const n=iX(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function WV(t){return CH(t)||t instanceof vr}function JOe(t){return(t==null?void 0:t.type)==="polygon-3d"||(t==null?void 0:t.type)==="line-3d"}function iX(t,e,i){var a;if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!WV(t)){const c=ZOe(t,{retainCIM:!0,hasLabelingContext:n});return c.symbol!=null?c.symbol.write(e,r):(o==null||o.push(new j("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:c.error})),null)}return MC(r==null?void 0:r.layer)&&JOe(t)?(o==null||o.push(new j("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(a=r==null?void 0:r.layer)==null?void 0:a.declaredClass}'.`,{symbol:t,context:r})),null):(s==="web-map"||s==="portal-item"&&!MC(r==null?void 0:r.layer))&&WV(t)?(o==null||o.push(new j("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function Fqe(t,e){return Mfe(t,null,e)}const jI={types:OH,json:{write:{writer:DT},origins:{"web-scene":{types:az,write:{writer:DT},read:{reader:Ny({types:az})}}}}},UF=tR({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},jI),qF={types:{base:Mi,key:"type",typeMap:{"simple-fill":Au.typeMap["simple-fill"],"picture-fill":Au.typeMap["picture-fill"],"polygon-3d":Au.typeMap["polygon-3d"],cim:Au.typeMap.cim}},json:{write:{writer:DT},origins:{"web-scene":{type:Qs,write:{writer:DT}}}}},NS={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var cP;let ln=cP=class extends s0(_s){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new cP({description:this.description,label:this.label,symbol:V(this.symbol),visualVariables:V(this.visualVariables),authoringInfo:V(this.authoringInfo)})}};l([u({type:String,json:{write:!0}})],ln.prototype,"description",void 0),l([u({type:String,json:{write:!0}})],ln.prototype,"label",void 0),l([u(UF)],ln.prototype,"symbol",void 0),l([Ie({simple:"simple"})],ln.prototype,"type",void 0),ln=cP=l([E("esri.renderers.SimpleRenderer")],ln);const YOe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function uP(t){return t instanceof Se}function ZV(t){return t instanceof de?Object.keys(t.items):uP(t)?mn(t).keys():t?Object.keys(t):[]}function Z_(t,e){return t instanceof de?t.items[e]:t[e]}function KOe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Nb(t){return t?t.declaredClass:null}function rX(t,e){var f;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=ZV(t),n=ZV(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||KOe(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter(m=>!r.includes(m)),o=r.filter(m=>!n.includes(m)),a=r.filter(m=>n.includes(m)&&Z_(t,m)!==Z_(e,m)).concat(s,o).sort(),c=Nb(t);if(c&&YOe.has(c)&&a.length)return{type:"complete",oldValue:t,newValue:e};let d;const h=uP(t)&&uP(e);for(const m of a){const v=Z_(t,m),w=Z_(e,m);let x;if((h||typeof v!="function"&&typeof w!="function")&&v!==w&&(v!=null||w!=null)){if(i&&i[m]&&typeof i[m]=="function")x=(f=i[m])==null?void 0:f.call(i,v,w);else if(v instanceof Date&&w instanceof Date){if(v.getTime()===w.getTime())continue;x={type:"complete",oldValue:v,newValue:w}}else x=typeof v=="object"&&typeof w=="object"&&Nb(v)===Nb(w)?rX(v,w):{type:"complete",oldValue:v,newValue:w};x!=null&&(d!=null?d.diff[m]=x:d={type:"partial",diff:{[m]:x}})}}return d}function Nqe(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function QOe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Nb(t)!==Nb(e)?{type:"complete",oldValue:t,newValue:e}:rX(t,e)}function J_(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!J_(i))return!1;for(const i of e.removed)if(!J_(i))return!1;for(const i of e.changed)if(!J_(i))return!1;return!0}case"partial":for(const e in t.diff)if(!J_(t.diff[e]))return!1;return!0}}var dP;const XOe=Wi()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Hv=dP=class extends Pe(Z){static from(t){return Jw(dP,t)}constructor(t){super(t),this.title=null,this.order=null}};l([u({type:String,json:{write:!0}})],Hv.prototype,"title",void 0),l([Ie(XOe)],Hv.prototype,"order",void 0),Hv=dP=l([E("esri.renderers.support.RendererLegendOptions")],Hv);const BF=Hv;let ja=class extends Pe(Z){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};l([u(NS)],ja.prototype,"value",void 0),l([u(NS)],ja.prototype,"value2",void 0),l([u(NS)],ja.prototype,"value3",void 0),ja=l([E("esri.renderers.support.UniqueValue")],ja);let vu=class extends Pe(Z){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null}get values(){return this._get("values")}set values(e){if(e!=null){const i=typeof(e=Array.isArray(e)?e:[e])[0];e=i==="string"||i==="number"?e.map(r=>new ja({value:r})):i==="object"?e[0]instanceof ja?e:e.map(r=>new ja(r)):null}this._set("values",e)}};l([u({type:String,json:{write:!0}})],vu.prototype,"description",void 0),l([u({type:String,json:{write:!0}})],vu.prototype,"label",void 0),l([u(jI)],vu.prototype,"symbol",void 0),l([u({json:{type:[[String]],read:{reader:t=>t?t.map(e=>new ja({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(_r).map(s=>s.toString());i.push(n)}e.values=i}}}})],vu.prototype,"values",null),vu=l([E("esri.renderers.support.UniqueValueClass")],vu);let Ap=class extends Pe(Z){constructor(e){super(e),this.heading=null,this.classes=null}};l([u({type:String,json:{write:!0}})],Ap.prototype,"heading",void 0),l([u({type:[vu],json:{write:{isRequired:!0}}})],Ap.prototype,"classes",void 0),Ap=l([E("esri.renderers.support.UniqueValueGroup")],Ap);var pP;let Zo=pP=class extends Z{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new pP({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};l([u({type:String,json:{write:!0}})],Zo.prototype,"description",void 0),l([u({type:String,json:{write:!0}})],Zo.prototype,"label",void 0),l([u(UF)],Zo.prototype,"symbol",void 0),l([u(NS)],Zo.prototype,"value",void 0),Zo=pP=l([E("esri.renderers.support.UniqueValueInfo")],Zo);const JV=new Map;async function e3e(t,e){try{return{data:(await n3e(t,e)).data,baseUrl:Ece(t),styleUrl:t}}catch(i){return Ho(i),null}}function t3e(t,e,i){var c;const r=e.portal!=null?e.portal:ce.getDefault();let n;const s=`${r.url} - ${(c=r.user)==null?void 0:c.username} - ${t}`,o=JV.get(s);if(o)return o;const a=i3e(t,r,i).then(d=>(n=d,d.fetchData())).then(d=>({data:d,baseUrl:n.itemUrl??"",styleName:t}));return JV.set(s,a),a}function i3e(t,e,i){return e.load(i).then(()=>{const r=new Ii({disableExtraQuery:!0,query:`owner:${YV} AND type:${KV} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var o;let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some(d=>d.toLowerCase()===s))&&a.type===KV&&a.owner===YV){n=a;break}}if(!n)throw new j("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function r3e(t,e,i){return(t==null?void 0:t.styleUrl)!=null?e3e(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?t3e(t.styleName,e,i):Promise.reject(new j("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Vqe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function Uqe(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=sM(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=sM(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=sM(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function sM(t,e){var i,r;if(!B("enable-feature:force-wosr"))return(r=(i=t.formatInfos)==null?void 0:i.find(n=>n.type===e))==null?void 0:r.href}function n3e(t,e){const i={responseType:"json",query:{f:"json"},...e};return Ft(Qo(t),i)}const YV="esri_en",KV="Style",qqe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Wv;const QV="uvInfos-watcher",XV="uvGroups-watcher",s3e=",",o3e=gi(Zo);function a3e(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=t,a=!(!e||!i);return[{classes:(s??[]).map(c=>{var T;const{symbol:d,label:h,value:f,description:m}=c,[v,w,x]=a?((T=f==null?void 0:f.toString())==null?void 0:T.split(n||""))||[]:[f],$=[];return(e||o)&&$.push(v),i&&$.push(w),r&&$.push(x),{symbol:d,label:h,values:[$],description:m}})}]}function xf(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Ut=Wv=class extends s0(_s){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find(a=>a.value===i[s].value);o?QOe(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find(o=>o.value===e[s].value)||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:Zw(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r!=null&&r.messages?r.messages.push(new j("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):ie.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||ce.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Lh(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=yh(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?ie.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?ie.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void ie.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?o3e(t):new Zo({value:t,symbol:PH(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[xf(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void ie.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[xf(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await ph()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await ph(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const t=[];if(this._isInfosSource)for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);else for(const e of this.uniqueValueGroups??[])for(const i of e.classes??[])i.symbol&&t.push(i.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,s)=>n+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new Wv({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:V(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:V(this.visualVariables),legendOptions:V(this.legendOptions),authoringInfo:V(this.authoringInfo),backgroundFillSymbol:V(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=V(this.uniqueValueInfos),i=V(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(V(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Gr(t,e,null,this.valueExpression)];Br(t,e,this.field),Br(t,e,this.field2),Br(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return r3e(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const n=new vr({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new Zo({value:r.name,symbol:n});e.push(s),this._valueInfoMap[xf(r.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",s3e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[xf(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(QV);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(ve(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,QV)}}_watchUniqueValueGroups(){this.removeHandles(XV);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(ve(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(ve(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,XV)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const c of s)for(const d of c.classes??[]){const{symbol:h,label:f,values:m,description:v}=d;for(const w of m??[]){const{value:x,value2:$,value3:T}=w,C=[x];i&&C.push($),r&&C.push(T);const P=a?C.join(n||""):C[0]??void 0;t.push(new Zo({symbol:h,label:f,value:P,description:v}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=s.map(d=>{var T;const{symbol:h,label:f,value:m,description:v}=d,[w,x,$]=o?((T=m==null?void 0:m.toString())==null?void 0:T.split(n||""))||[]:[m];return new vu({symbol:h,label:f,description:v,values:[new ja({value:w,value2:x,value3:$})]})}),c=[new Ap({classes:a})];t&&Object.freeze(c),this._set("uniqueValueGroups",c),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{};let a=this._cache.compiledFunc;const c=s.arcadeUtils;if(!a){const h=c.createSyntaxTree(this.valueExpression);a=c.createFunction(h),this._cache.compiledFunc=a}const d=c.executeFunction(a,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._valueInfoMap[xf(d)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const n=this.field2,s=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[xf(r)]}static fromPortalStyle(t,e){const i=new Wv(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||ce.getDefault());const r=i.populateFromStyle();return r.catch(n=>{ie.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new Wv(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{ie.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};l([u({readOnly:!0})],Ut.prototype,"_cache",null),l([Ie({uniqueValue:"unique-value"})],Ut.prototype,"type",void 0),l([u(qF)],Ut.prototype,"backgroundFillSymbol",void 0),l([u({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Ut.prototype,"field",null),l([ti("field")],Ut.prototype,"castField",null),l([le("field")],Ut.prototype,"writeField",null),l([u({type:String,value:null,json:{write:!0}})],Ut.prototype,"field2",null),l([u({type:String,value:null,json:{write:!0}})],Ut.prototype,"field3",null),l([u({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Ut.prototype,"orderByClassesEnabled",void 0),l([u({type:String,value:null,json:{write:!0}})],Ut.prototype,"valueExpression",null),l([u({type:String,json:{write:!0}})],Ut.prototype,"valueExpressionTitle",void 0),l([u({type:BF,json:{write:!0}})],Ut.prototype,"legendOptions",void 0),l([u({type:String,json:{write:!0}})],Ut.prototype,"defaultLabel",void 0),l([u(tR({...jI},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Ut.prototype,"defaultSymbol",null),l([u({type:String,value:null,json:{write:!0}})],Ut.prototype,"fieldDelimiter",null),l([u({type:ce,readOnly:!0})],Ut.prototype,"portal",void 0),l([oe("portal",["styleName"])],Ut.prototype,"readPortal",null),l([u({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Ut.prototype,"styleOrigin",void 0),l([oe("styleOrigin",["styleName","styleUrl"])],Ut.prototype,"readStyleOrigin",null),l([le("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Ut.prototype,"writeStyleOrigin",null),l([u({type:[Ap],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||a3e(e)).map(r=>Ap.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ut.prototype,"uniqueValueGroups",null),l([u({type:[Zo],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Ut.prototype,"uniqueValueInfos",null),Ut=Wv=l([E("esri.renderers.UniqueValueRenderer")],Ut);var hP,Kg;let Yi=(Kg=class extends Z{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new hP(V({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},hP=Kg,Kg);l([u({type:[String],json:{write:!0}})],Yi.prototype,"attachmentTypes",void 0),l([u({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Yi.prototype,"attachmentsWhere",void 0),l([u({type:Boolean,json:{write:!0}})],Yi.prototype,"cacheHint",void 0),l([u({type:[String],json:{write:!0}})],Yi.prototype,"keywords",void 0),l([u({type:[String],json:{write:!0}})],Yi.prototype,"globalIds",void 0),l([u({json:{write:!0}})],Yi.prototype,"name",void 0),l([u({type:Number,json:{read:{source:"resultRecordCount"}}})],Yi.prototype,"num",void 0),l([u({type:[Number],json:{write:!0}})],Yi.prototype,"objectIds",void 0),l([u({type:[String],json:{write:!0}})],Yi.prototype,"orderByFields",void 0),l([u({type:Boolean,json:{default:!1,write:!0}})],Yi.prototype,"returnMetadata",void 0),l([u({type:[Number],json:{write:!0}})],Yi.prototype,"size",void 0),l([u({type:Number,json:{read:{source:"resultOffset"}}})],Yi.prototype,"start",void 0),l([le("start"),le("num")],Yi.prototype,"writeStart",null),l([u({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Yi.prototype,"where",void 0),Yi=hP=l([E("esri.rest.support.AttachmentQuery")],Yi),Yi.from=gi(Yi);const nX=Wi()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),e8="percent-of-total",t8="field",Bqe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const n=!!this.normalizationField,s=this.normalizationTotal!=null;return n||s?(r=n&&t8||s&&e8||null,n&&s&&ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==t8&&r!==e8||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return l([u({type:String,json:{name:"parameters.normalizationField",write:!0}})],i.prototype,"normalizationField",void 0),l([u({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],i.prototype,"normalizationMaxValue",void 0),l([u({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],i.prototype,"normalizationMinValue",void 0),l([u({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],i.prototype,"normalizationTotal",void 0),l([Ie(nX,{name:"parameters.normalizationType"})],i.prototype,"normalizationType",null),i=l([E("esri.rest.support.NormalizationBinParametersMixin")],i),i};var fP,Qg;let Kt=(Qg=class extends Z{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new fP(V({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},fP=Qg,Qg);l([u({type:Boolean,json:{write:!0}})],Kt.prototype,"cacheHint",void 0),l([u({type:Uo,json:{write:!0}})],Kt.prototype,"dynamicDataSource",void 0),l([u({type:String,json:{write:!0}})],Kt.prototype,"gdbVersion",void 0),l([u({type:Number,json:{write:!0}})],Kt.prototype,"geometryPrecision",void 0),l([u({type:Date})],Kt.prototype,"historicMoment",void 0),l([le("historicMoment")],Kt.prototype,"_writeHistoricMoment",null),l([u({type:Number,json:{write:!0}})],Kt.prototype,"maxAllowableOffset",void 0),l([u({json:{write:!0}})],Kt.prototype,"objectIds",void 0),l([u({type:[String],json:{write:!0}})],Kt.prototype,"orderByFields",void 0),l([u({type:[String],json:{write:!0}})],Kt.prototype,"outFields",void 0),l([u({type:me,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Kt.prototype,"outSpatialReference",void 0),l([u({json:{write:!0}})],Kt.prototype,"relationshipId",void 0),l([u({type:Number,json:{read:{source:"resultOffset"}}})],Kt.prototype,"start",void 0),l([le("start"),le("num")],Kt.prototype,"writeStart",null),l([u({type:Number,json:{read:{source:"resultRecordCount"}}})],Kt.prototype,"num",void 0),l([u({json:{write:!0}})],Kt.prototype,"returnGeometry",void 0),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Kt.prototype,"returnM",void 0),l([u({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Kt.prototype,"returnZ",void 0),l([u({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Kt.prototype,"where",void 0),Kt=fP=l([E("esri.rest.support.RelationshipQuery")],Kt),Kt.from=gi(Kt);const Gqe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Kt}},Symbol.toStringTag,{value:"Module"})),mP=new Ze({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function l3e(t,e,i,r){const n=await fd(t);if(await GF(t,e,r),!n.addAttachment)throw new j(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function GF(t,e,i){var s,o;const{attributes:r}=e,{objectIdField:n}=t;return(o=(s=t.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new j(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new j(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new j(i,"A feature is required to add/delete/update attachments")):Promise.reject(new j(i,"this layer doesn't support attachments"))}async function c3e(t,e,i,r,n){const s=await fd(t);if(await GF(t,e,n),!s.updateAttachment)throw new j(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function u3e(t,e,i){const{applyEdits:r}=await Q(()=>import("./editingSupport-CuBBnPhC.js"),[],import.meta.url),n=await t.load();let s=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await O3e(n,e.deleteFeatures,n.globalIdField)}),r(n,n.source,e,i)}async function d3e(t,e,i){const{uploadAssets:r}=await Q(()=>import("./editingSupport-CuBBnPhC.js"),[],import.meta.url),n=await t.load();return r(n,n.source,e,i)}async function p3e(t,e,i,r){const n=await fd(t);if(await GF(t,e,r),!n.deleteAttachments)throw new j(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function h3e(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new j(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function f3e(t,e,i,r){var w,x,$,T;let n=Yi.from(e);await t.load();const s=t.source,o=t.capabilities;if(!((w=o==null?void 0:o.data)!=null&&w.supportsAttachment))throw new j(r,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:c,globalIds:d,num:h,size:f,start:m,where:v}=n;if(!((x=o==null?void 0:o.operations)!=null&&x.supportsQueryAttachments)&&((a==null?void 0:a.length)>0||(d==null?void 0:d.length)>0||(f==null?void 0:f.length)>0||h||m||v))throw new j(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",n);if(!(c!=null&&c.length||d!=null&&d.length||v))throw new j(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",n);if(!s.queryAttachments)throw new j(r,"Layer source does not support queryAttachments capability",n);return!(($=o==null?void 0:o.attachment)!=null&&$.supportsOrderByFields)&&((T=n.orderByFields)!=null&&T.length)&&(n=n.clone(),n.orderByFields=null),s.queryAttachments(n)}async function m3e(t,e,i,r){const n=await fd(t);if(!n.queryObjectIds)throw new j(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Fe.from(e)??t.createQuery(),i)}async function g3e(t,e,i,r){const n=await fd(t);if(!n.queryFeatureCount)throw new j(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Fe.from(e)??t.createQuery(),i)}async function y3e(t,e,i,r){const n=await fd(t);if(!n.queryExtent)throw new j(r,"Layer source does not support queryExtent capability");return n.queryExtent(Fe.from(e)??t.createQuery(),i)}async function v3e(t,e,i,r){const n=await fd(t);if(!n.queryRelatedFeatures)throw new j(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Kt.from(e),i)}async function b3e(t,e,i,r){const n=await fd(t);if(!n.queryRelatedFeaturesCount)throw new j(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Kt.from(e),i)}async function w3e(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await J9(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function _3e(t){var o,a;const e=new Fe;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=(o=t.capabilities)==null?void 0:o.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=(a=t.capabilities)==null?void 0:a.data;r!=null&&r.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r!=null&&r.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e}function sX(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function oX(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function x3e(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function S3e(t,e,i,r){var c,d;const n=i==null?void 0:i.feature,s=!!((c=t.subtypes)!=null&&c.length);if(s&&!(i!=null&&i.excludeImpliedDomains)){const h=T3e(t,e);if(h)return h}const o=s&&$3e(t,n);if(o){const h=(d=o==null?void 0:o.domains)==null?void 0:d[e];return(h==null?void 0:h.type)==="inherited"?r:h}const a=cX(t.types,t.typeIdField,n);if(a){const h=a.domains&&a.domains[e];if(h&&(h==null?void 0:h.type)!=="inherited")return h}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const h=k3e(t,e);if(h)return h}return null}function $3e(t,e){const{subtypes:i,subtypeField:r}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!r)return null;const n=e.attributes[r];return n==null?null:i.find(s=>s.code===n)}function T3e(t,e){var o,a;const{fieldsIndex:i,subtypeField:r}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if((r&&((o=i.get(r))==null?void 0:o.name))===n&&((a=t.subtypes)!=null&&a.length)){const c=t.subtypes.map(d=>new Ep({code:aX(d.code,s),name:d.name}));if(c!=null&&c.length)return new Fu({codedValues:c})}return null}function k3e(t,e){var s,o;const{fieldsIndex:i}=t,{name:r,type:n}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?(s=i.get(t.typeIdField))==null?void 0:s.name:null)===r&&"types"in t&&((o=t.types)!=null&&o.length)){const a=t.types.map(c=>new Ep({code:aX(c.id,n),name:c.name}));return new Fu({codedValues:a})}return null}function aX(t,e){return e?uq({type:e})&&typeof t=="number"?`${t}`:Jae({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function fd(t){return(await t.load()).source}async function Hqe(t,e){if(!We)return;const i=We.findCredential(t);if(i)return i.userId;let r;try{const n=await RL(t,e);n&&(r=await We.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function lX(t,e){if(!We||We.findCredential(t))return;let i;try{const r=await RL(t,e);r&&(i=await We.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await We.getCredential(t,{signal:r})}catch{}}async function I3e(t,e,i){var n;const r=(n=t.parsedUrl)==null?void 0:n.path;r&&t.authenticationTriggerEvent===e&&await lX(r,i)}async function Wqe(t){var i;const e=(i=t.parsedUrl)==null?void 0:i.path;e&&E3e(t)&&await lX(e)}function E3e(t){return M3e(t)&&("serviceDefinitionExpression"in t&&zT(t.serviceDefinitionExpression)||"definitionExpression"in t&&zT(t.definitionExpression))}function M3e(t){var e;return!(!CW(t)||!((e=t.capabilities)!=null&&e.query.supportsCurrentUser))}function zT(t){return!!(t!=null&&t.toLowerCase().includes("current_user"))}function A3e(t){return!DS(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const oM=Ny({types:OH});function HF(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new Ut({defaultSymbol:oM(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:oM(r.symbol,r,e)}))}):new ln({symbol:oM(t.defaultSymbol,t,e)})}function C3e(t){var r,n,s;let e=(r=t.sourceJSON)==null?void 0:r.cacheMaxAge;if(!e)return!1;const i=(s=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function O3e(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach(d=>{let h=null;if("attributes"in d){const{attributes:f}=d;h={globalId:f[i],objectId:f[n]!=null&&f[n]!==-1?f[n]:null}}else h={globalId:d.globalId,objectId:d.objectId!=null&&d.objectId!==-1?d.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||r.push(h.globalId))}),r.length===0)return null;const s=t.createQuery();s.where=r.map(d=>`${i}='${d}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const o=await Tye(BQ(t,s));if(!o.ok)return null;const a=new Map,c=o.value.features;for(const d of c){const h=d.attributes[i],f=d.attributes[n];h!=null&&f!=null&&f!==-1&&a.set(LSe(h),f)}return a}function cX(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(n=>{const{id:s}=n;return s!=null&&s.toString()===r.toString()})??null}function DS(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||P3e(t)}function P3e(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function R3e(t,e,i){var s,o,a,c,d;const r=e==null?void 0:e.queryAttributeBins;if(!((s=e==null?void 0:e.operations)!=null&&s.supportsQueryBins)||!r)throw new j(i,"Layer source does not support binning");switch((o=t.binParameters)==null?void 0:o.type){case"auto-interval":if(!r.supportsAutoInterval)throw new j(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!i8(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new j(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new j(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new j(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new j(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new j(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new j(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!i8(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new j(i,"Layer source does not support normalization binning")}if((a=t.binParameters)!=null&&a.stackBy&&!r.supportsStackBy)throw new j(i,"Layer source does not support stackBy binning");if((c=t.binParameters)!=null&&c.splitBy&&!r.supportsSplitBy)throw new j(i,"Layer source does not support splitBy binning");if((d=t.binParameters)!=null&&d.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new j(i,"Layer source does not support firstDayOfWeek binning");const n=r==null?void 0:r.supportedStatistics;if(t.outStatistics&&n){const h=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:f}of t.outStatistics){const m=h.get(f);if(m&&!n[m])throw new j(i,`Layer source does not support ${f} statistic type`)}}}function i8(t,e){return t!=null&&!!(e!=null&&e[nX.toJSON(t)])}let ym=class extends Pe(Z){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([u({type:String,json:{read:{source:"shapeAreaFieldName"}}})],ym.prototype,"shapeAreaField",void 0),l([u({type:String,json:{read:{source:"shapeLengthFieldName"}}})],ym.prototype,"shapeLengthField",void 0),l([u({type:String,json:{read:t=>rde.read(t)||nde.read(t)}})],ym.prototype,"units",void 0),ym=l([E("esri.layers.support.GeometryFieldsInfo")],ym);var gP;let vm=gP=class extends Z{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new de}clone(){return new gP({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([u({type:String,json:{write:{isRequired:!0}}})],vm.prototype,"floorField",void 0),l([u({json:{read:!1,write:!1}})],vm.prototype,"viewAllMode",void 0),l([u({json:{read:!1,write:!1}})],vm.prototype,"viewAllLevelIds",void 0),vm=gP=l([E("esri.layers.support.LayerFloorInfo")],vm);function L3e(t){var s;const{nonStandardUrlAllowed:e=!1,separator:i}=t??{},r=V($W),n=(s=r.json)==null?void 0:s.write;return typeof n=="object"&&n&&(n.writer=function(o,a,c,d){Yce(this,o,i,a,d)}),{...r,set:function(o){if(o==null)return void this._set("url",o);const a=Jce({layer:this,url:o,nonStandardUrlAllowed:e,logger:ie.getLogger(this)});this._set("url",a.url),a.layerId!=null&&this._set("layerId",a.layerId)}}}function F3e(t,e){const{separator:i}=e??{},r=zi(t.url);return r!=null&&(t.dynamicDataSource!=null?r.path=mh(r.path,"dynamicLayer"):t.layerId!=null&&(r.path=mh(r.path,i??"",t.layerId.toString()))),r}const r8=new Ze({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),n8=new Ze({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let us=class extends Pe(Z){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([u({json:{read:r8.read,write:r8.write}})],us.prototype,"cardinality",void 0),l([u({json:{name:"catalogID"}})],us.prototype,"catalogId",void 0),l([u({json:{read:!0,write:!0}})],us.prototype,"composite",void 0),l([u({json:{read:!0,write:!0}})],us.prototype,"id",void 0),l([u({json:{read:!0,write:!0}})],us.prototype,"keyField",void 0),l([u({json:{read:!0,write:!0}})],us.prototype,"keyFieldInRelationshipTable",void 0),l([u({json:{read:!0,write:!0}})],us.prototype,"name",void 0),l([u({json:{read:!0,write:!0}})],us.prototype,"relatedTableId",void 0),l([u({json:{read:!0,write:!0}})],us.prototype,"relationshipTableId",void 0),l([u({json:{read:n8.read,write:n8.write}})],us.prototype,"role",void 0),us=l([E("esri.layers.support.Relationship")],us);const N3e=[["binary","application/octet-stream","bin",""]];function Yqe(t,e){return hX(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function Kqe(t,e){if(!t)return!1;const i=D3e(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function uX(t,e){return ZF(U3e(t,e))}function dX(t,e){return ZF(hX(t,e))}function Qqe(t,e){return fX(V3e(t,e))}function D3e(t,e){return dX(t.name,e)??uX(t.type,e)}function VI(t,e,i){return uX(t,i)??dX(e,i)}function pX({supportedFormats:t}){return VI("model/gltf-binary","glb",t)}function Xqe(t){const e=pX(t);return e!=null&&t.editFormats.includes(e)}function z3e({supportedFormats:t}){return VI("model/gltf+json","gltf",t)}function j3e(t){if(!t)return null;const e=pX(t),i=z3e(t);let r=null;for(const n of t.queryFormats){if(n===e)return n;n===i&&(r=n)}return r}function eBe({supportedFormats:t}){return VI("application/esri3do-SR_world","wld",t)}function tBe({supportedFormats:t}){return VI("application/esri3do-SR_prj","prj",t)}function WF(t){return[...N3e,...t]}function V3e(t,e){return WF(e).find(i=>ZF(i)===t)}function U3e(t,e){const i=t.toLowerCase();return WF(e).find(r=>fX(r)===i)}function hX(t,e){const i=t.toLowerCase();return WF(e).find(r=>q3e(r).some(n=>i.endsWith(n)))}function ZF(t){return t==null?void 0:t[0]}function fX(t){return t==null?void 0:t[1].toLowerCase()}function q3e(t){return(t==null?void 0:t[2].split(",").map(e=>e.toLowerCase()))??[]}function iBe(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function _e(t,e,i){return!!mX(t,e,i)}function bm(t,e,i){return mX(t,e,i)}function mX(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const B3e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function G3e(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function v1(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function H3e(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_cont")),percentileDiscrete:!!(e!=null&&e.includes("percentile_disc")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function W3e(t){var i;const e=(i=t==null?void 0:t.supportedNormalizationTypes)==null?void 0:i.map(r=>r.toLowerCase());return{field:!!(e!=null&&e.includes("field")),log:!!(e!=null&&e.includes("log")),naturalLog:!!(e!=null&&e.includes("naturallog")),percentOfTotal:!!(e!=null&&e.includes("percentoftotal")),squareRoot:!!(e!=null&&e.includes("squareroot"))}}function gX(t,e){return{analytics:Z3e(t),attachment:J3e(t),data:Y3e(t),metadata:K3e(t),operations:Q3e(t.capabilities,t,e),query:X3e(t,e),queryAttributeBins:iPe(t),queryRelated:ePe(t),queryTopFeatures:tPe(t),editing:rPe(t)}}function Z3e(t){return{supportsCacheHint:v1(t.advancedQueryCapabilities,"queryAnalytics")}}function J3e(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:v1(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:_e(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:_e(t,"supportsAttachmentsResizing",!1),supportsTypeWildcard:_e(t.advancedQueryCapabilities,"supportsQueryAttachmentWithTypeWildcard",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=B3e[r.name];n&&(i[n]=!!r.isEnabled)}),i}function Y3e(t){return{isVersioned:_e(t,"isDataVersioned",!1),isBranchVersioned:_e(t,"isDataBranchVersioned",!1),supportsAttachment:_e(t,"hasAttachments",!1),supportsM:_e(t,"hasM",!1),supportsZ:_e(t,"hasZ",!1)}}function K3e(t){return{supportsAdvancedFieldProperties:_e(t,"supportsFieldDescriptionProperty",!1)}}function Q3e(t,e,i){var m;const r=(t==null?void 0:t.toLowerCase().split(",").map(v=>v.trim()))??[],n=i?Xa(i):null,s=r.includes((n==null?void 0:n.serverType)==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone&&((m=e.uniqueIdInfo)==null?void 0:m.OIDFieldContainsHashValue)!==!0;let a=o&&r.includes("create"),c=o&&r.includes("delete"),d=o&&r.includes("update");const h=r.includes("changetracking"),f=e.advancedQueryCapabilities;return o&&!(a||c||d)&&(a=c=d=!0),{supportsCalculate:_e(e,"supportsCalculate",!1),supportsTruncate:_e(e,"supportsTruncate",!1),supportsValidateSql:_e(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:c,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:_e(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:_e(f,"supportsQueryAttachments",!1),supportsQueryBins:_e(f,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryPivot:_e(f,"supportsQueryPivot",!1),supportsQueryTopFeatures:_e(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:_e(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:d,supportsExceedsLimitStatistics:_e(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:_e(e,"supportsAsyncConvert3D",!1)}}function X3e(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||s>=B("mapserver-pbf-version-support"),c=E$(e),d=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:bm(t,"maxRecordCount",void 0),maxRecordCountFactor:bm(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:bm(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:bm(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:G3e(i),supportsCacheHint:_e(i,"supportsQueryWithCacheHint",!1)||v1(i,"query"),supportsCentroid:_e(i,"supportsReturningGeometryCentroid",!1),supportsCentroidOnDegeneratedQuantizedGeometry:c||e==null,supportsCompactGeometry:c,supportsCurrentUser:_e(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:_e(i,"supportsDefaultSR",!1),supportsDegeneratedQuantizedGeometry:_e(i,"supportsDegeneratedQuantizedGeometry",!1),supportsDisjointSpatialRelationship:_e(i,"supportsDisjointSpatialRel",!1),supportsDistance:_e(i,"supportsQueryWithDistance",!1),supportsDistinct:_e(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:_e(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&d.has("pbf"),supportsFullTextSearch:_e(i,"supportsFullTextSearch",!1),supportsGeometryProperties:_e(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:_e(i,"supportsHavingClause",!1),supportsHistoricMoment:_e(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:_e(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:_e(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:_e(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:_e(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:_e(i,"supportsPercentileStatistics",!1),supportsQuantization:_e(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:_e(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:_e(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:_e(r,"allowOthersToQuery",!0),supportsQueryGeometry:_e(t,"supportsReturningQueryGeometry",!1),supportsResultType:_e(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!j3e(t.infoFor3D),supportsSpatialAggregationStatistics:_e(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:_e(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:_e(t,"useStandardizedQueries",!1),supportsStatistics:_e(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:_e(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:_e(i,"supportsTrueCurve",!1),tileMaxRecordCount:bm(t,"tileMaxRecordCount",void 0)}}function ePe(t){const e=t.advancedQueryCapabilities,i=_e(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:_e(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:v1(e,"queryRelated")}}function tPe(t){return{supportsCacheHint:v1(t.advancedQueryCapabilities,"queryTopFilter")}}function iPe(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:_e(e,"supportsDateBin",!1),supportsFixedInterval:_e(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:_e(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:_e(e,"supportsFixedBoundariesBin",!1),supportsStackBy:_e(e,"supportsStackBy",!1),supportsSplitBy:_e(e,"supportsSplitBy",!1),supportsSnapToData:_e(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:_e(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:_e(e,"supportsFirstDayOfWeek",!1),supportsNormalization:_e(e,"supportsNormalization",!1),supportedStatistics:H3e(e),supportedNormalizationTypes:W3e(e)}}function rPe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:_e(t,"allowGeometryUpdates",!0),supportsGlobalId:_e(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:_e(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:_e(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:_e(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:_e(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:_e(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:_e(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:_e(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:_e(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:_e(i,"supportsAsyncApplyEdits",!1),zDefault:bm(t,"zDefault",void 0)}}function rBe(t){var e;return{operations:{supportsAppend:_e(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:_e(t,"supportsExportClip",!1),supportsExportFrameset:_e(t,"supportsExportFrameset",!1),supportsMensuration:_e(t,"supportsMensuration",!1),supportsPreviews:_e(t,"supportsPreviews",!1),supportsUpdate:_e(t,"supportsUpdate",!1)}}}let Ll=class extends Pe(Z){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=II(e[r]);return i}writeDomains(e,i){var n;if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};l([u({type:Number,json:{write:!0}})],Ll.prototype,"code",void 0),l([u({type:Object,json:{write:!0}})],Ll.prototype,"defaultValues",void 0),l([u({json:{write:!0}})],Ll.prototype,"domains",void 0),l([oe("domains")],Ll.prototype,"readDomains",null),l([le("domains")],Ll.prototype,"writeDomains",null),l([u({type:String,json:{write:!0}})],Ll.prototype,"name",void 0),Ll=l([E("esri.layers.support.Subtype")],Ll);const nPe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(de.ofType(Ma)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=me.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(r,n){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:o,editing:a}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||o.supportsEditing&&!(a.supportsUpdateByOthers&&a.supportsUpdateByAnonymous&&a.supportsDeleteByOthers&&a.supportsDeleteByAnonymous))return"load"}if(zT(this.serviceDefinitionExpression)||zT(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(C3e(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const n=this.editFieldsInfo;return(n!=null&&n.creatorField||n!=null&&n.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,n){return gX(n,this.url)}readEditingInfo(r,n){const{editingInfo:s}=n;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const n=V(r),{operations:s,editing:o}=n;return DS(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),n):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,n):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=o.supportsGeometryUpdate=!0),n)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,n){return sX(n)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||DS(this))return!1;const{operations:n,editing:s}=r;return n.supportsEditing&&!(n.supportsAdd&&n.supportsDelete&&n.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:n,editing:s}=r;return DS(this)?!n.supportsQuery:!(n.supportsAdd&&n.supportsDelete&&n.supportsEditing&&n.supportsQuery&&n.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,n){return n.type==="Table"}readMaxScale(r,n){return n.effectiveMaxScale||r||0}readMinScale(r,n){return n.effectiveMinScale||r||0}readObjectIdFieldFromService(r,n){return oX(n)}get parsedUrl(){return F3e(this)}readServiceDefinitionExpression(r,n){return n.definitionQuery||n.definitionExpression}readUniqueIdFields(r,n){var s;return(s=n.uniqueIdInfo)!=null&&s.OIDFieldContainsHashValue?n.uniqueIdInfo.fields:null}readVersion(r,n){return x3e(n)}get isUrlHostModified(){var a;const{loaded:r,url:n,_isUrlHostModified:s}=this;if(s)return!0;if(!r||!n||this.originIdOf("url")<7)return!1;const o=(a=this.sourceJSON)==null?void 0:a.preferredHost;if(!o||!Ba(n,`https://${o}`,!0))return!1;for(let c=6;c>=3;c--){const d=this.getAtOrigin("url",Hb(c));if(d)return!Ba(n,d,!0)}return!1}applyPreferredHost(r){const{url:n,portalItem:s}=this;!n||AC(s)}applyHostFromPortalItem(){const{url:r,portalItem:n}=this;if(!r||this.originIdOf("url")===7||!(n!=null&&n.url)||!AC(n)||!zL(n,jL.HOSTED_SERVICE)||Ba(r,n.url,!0)||!this._isUrlHostModificationEnabled)return;const s=Pce(n.url);this._set("url",xB(r,s)),this._isUrlHostModified=!0}};return l([u({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),l([u({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),l([u({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),l([oe("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),l([u(S$("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),l([u({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),l([u({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),l([u({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),l([u({readOnly:!0,type:Rl})],i.prototype,"editFieldsInfo",void 0),l([u({readOnly:!0})],i.prototype,"editingInfo",void 0),l([oe("editingInfo")],i.prototype,"readEditingInfo",null),l([u({readOnly:!0})],i.prototype,"effectiveCapabilities",null),l([u()],i.prototype,"effectiveEditingEnabled",null),l([u((()=>{const r=V(gye),n=r.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},r})())],i.prototype,"elevationInfo",void 0),l([u()],i.prototype,"fieldsIndex",void 0),l([u({type:vm,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:jt}}})],i.prototype,"floorInfo",void 0),l([u({type:Ke,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),l([u()],i.prototype,"gdbVersion",void 0),l([u({readOnly:!0,type:ym,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),l([u({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:mP.read}}}})],i.prototype,"geometryType",void 0),l([u({type:String})],i.prototype,"globalIdField",void 0),l([oe("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),l([u({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),l([u({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),l([u({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),l([u({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),l([u({readOnly:!0,type:tn})],i.prototype,"heightModelInfo",void 0),l([u({type:Date})],i.prototype,"historicMoment",void 0),l([u({type:de.ofType(Ma),readOnly:!0})],i.prototype,"indexes",void 0),l([u({readOnly:!0})],i.prototype,"isTable",void 0),l([oe("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),l([u({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),l([u(wye)],i.prototype,"maxScale",void 0),l([oe("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),l([u(bye)],i.prototype,"minScale",void 0),l([oe("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),l([u({type:String})],i.prototype,"objectIdField",void 0),l([oe("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),l([u({readOnly:!0})],i.prototype,"parsedUrl",null),l([u(S$("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),l([u({type:[us],readOnly:!0})],i.prototype,"relationships",void 0),l([u({type:Boolean})],i.prototype,"returnM",void 0),l([u({type:Boolean})],i.prototype,"returnZ",void 0),l([u({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),l([u({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),l([oe("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),l([u({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),l([u()],i.prototype,"sourceJSON",void 0),l([u({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),l([u({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),l([u({type:[Ll],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),l([u({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),l([u({type:[String],readOnly:!0})],i.prototype,"uniqueIdFields",void 0),l([oe("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],i.prototype,"readUniqueIdFields",null),l([u(L3e({nonStandardUrlAllowed:!0}))],i.prototype,"url",void 0),l([u({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),l([oe("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),l([u({readOnly:!0})],i.prototype,"isUrlHostModified",null),i=l([E("esri.layers.mixins.FeatureLayerBase")],i),i};let sPe=class extends Ew{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[r1](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},xu=class extends Pe(Z){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};l([u({type:String,json:{write:!0}})],xu.prototype,"expression",void 0),l([u({type:String,json:{write:!0}})],xu.prototype,"title",void 0),l([u({type:String,json:{write:!0}})],xu.prototype,"returnType",void 0),xu=l([E("esri.layers.support.ExpressionInfo")],xu);var yP,Xg;let Fr=(Xg=class extends Z{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new yP({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:V(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},yP=Xg,Xg);l([u({type:Boolean,json:{write:!0}})],Fr.prototype,"isAutoGenerated",void 0),l([u({type:String,json:{write:!0}})],Fr.prototype,"name",void 0),l([u({type:String,json:{write:!0}})],Fr.prototype,"alias",void 0),l([u({type:String,json:{write:!0}})],Fr.prototype,"onStatisticField",void 0),l([u({type:xu,json:{write:!0}})],Fr.prototype,"onStatisticExpression",void 0),l([u({type:String,json:{write:!0}})],Fr.prototype,"statisticType",void 0),Fr=yP=l([E("esri.layers.support.AggregateField")],Fr);let Wu=class extends Z{constructor(){super(...arguments),this.type=null}};l([u({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Wu.prototype,"type",void 0),Wu=l([E("esri.layers.support.FeatureReduction")],Wu);const JF="__begin__",YF="__end__",oPe=new RegExp(JF,"ig"),aPe=new RegExp(YF,"ig"),s8=new RegExp("^"+JF,"i"),o8=new RegExp(YF+"$","i"),jT='"',lPe=jT+" + ",cPe=" + "+jT;function uPe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function dPe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function KF(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=uPe(t.labelExpression),e.type="conventional"),e}function pPe(t){const e=KF(t);if(!e)return null;switch(e.type){case"conventional":return vP(e.expression);case"arcade":return e.expression}return null}function hPe(t){const e=KF(t);if(!e)return null;switch(e.type){case"conventional":return mPe(e.expression);case"arcade":return yX(e.expression)}return null}function vP(t){let e;return t?(e=ld(t,i=>JF+'$feature["'+i+'"]'+YF),e=s8.test(e)?e.replace(s8,""):jT+e,e=o8.test(e)?e.replace(o8,""):e+jT,e=e.replaceAll(oPe,lPe).replaceAll(aPe,cPe)):e='""',e}const fPe=/^\s*\{([^}]+)\}\s*$/i;function mPe(t){const e=t==null?void 0:t.match(fPe);return(e==null?void 0:e[1].trim())||null}const gPe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,yPe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,vPe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function yX(t){if(!t)return null;let e=gPe.exec(t)||yPe.exec(t);return e?e[1]||e[3]:(e=vPe.exec(t),e?e[2]:null)}var bP,ey;let Yl=(ey=class extends Z{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?vP(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=vP(this.value)),e!=null&&(i[r]=e)}clone(){return new bP({expression:this.expression,title:this.title,value:this.value})}},bP=ey,ey);l([u({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Yl.prototype,"expression",void 0),l([oe("expression",["expression","value"])],Yl.prototype,"readExpression",null),l([le("expression")],Yl.prototype,"writeExpression",null),l([u({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yl.prototype,"title",void 0),l([u({json:{read:!1,write:!1}})],Yl.prototype,"value",void 0),Yl=bP=l([E("esri.layers.support.LabelExpressionInfo")],Yl);var wP;const Y_=new Ze({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function K_(t,e,i){return{enabled:!MC(i==null?void 0:i.layer)}}function vX(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function bPe(t){return(t==null?void 0:t.type)==="map-image"}function bX(t){var e,i;return!!bPe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function wPe(t){return vX(t)||bX(t==null?void 0:t.layer)}var ty;let Xt=(ty=class extends Z{static evaluateWhere(e,i){const r=(n,s,o)=>{switch(s){case"=":return n==o;case"<>":return n!=o;case">":return n>o;case">=":return n>=o;case"<":return n<o;case"<=":return n<=o}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(i[n[0]],n[1],n[2]);if(n.length===7){const s=r(i[n[0]],n[1],n[2]),o=n[3],a=r(i[n[4]],n[5],n[6]);switch(o){case"AND":return s&&a;case"OR":return s||a}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.symbol=VOe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=dPe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=yX(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,n){if(e==null&&this.labelExpression!=null&&vX(n))e=new Yl({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(n);s.expression&&(i[r]=s)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}get repeatLabelDistance(){return this._get("repeatLabelDistance")}set repeatLabelDistance(e){this._set("repeatLabelDistance",e)}getLabelExpression(){return KF(this)}getLabelExpressionArcade(){return pPe(this)}getLabelExpressionSingleField(){return hPe(this)}hash(){return JSON.stringify(this)}clone(){return new wP({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:V(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:V(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},wP=ty,ty);l([u({type:String,json:{write:!0}})],Xt.prototype,"name",void 0),l([u({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:K_}}}}})],Xt.prototype,"allowOverrun",void 0),l([u({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:K_}}}}})],Xt.prototype,"deconflictionStrategy",void 0),l([u({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&bX(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Xt.prototype,"labelExpression",void 0),l([oe("labelExpression")],Xt.prototype,"readLabelExpression",null),l([le("labelExpression")],Xt.prototype,"writeLabelExpression",null),l([u({type:Yl,json:{write:{overridePolicy:(t,e,i)=>wPe(i)?{allowNull:!0}:{enabled:!1}}}})],Xt.prototype,"labelExpressionInfo",void 0),l([le("labelExpressionInfo")],Xt.prototype,"writeLabelExpressionInfo",null),l([u({type:Y_.apiValues,json:{type:Y_.jsonValues,read:Y_.read,write:Y_.write}})],Xt.prototype,"labelPlacement",void 0),l([u({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Xt.prototype,"labelPosition",void 0),l([u({type:Number})],Xt.prototype,"maxScale",void 0),l([le("maxScale")],Xt.prototype,"writeMaxScale",null),l([u({type:Number})],Xt.prototype,"minScale",void 0),l([le("minScale")],Xt.prototype,"writeMinScale",null),l([u({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:K_}}}}})],Xt.prototype,"repeatLabel",void 0),l([u({type:Number,cast:ht,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:K_}}}}})],Xt.prototype,"repeatLabelDistance",null),l([u({types:Afe,json:{origins:{"web-scene":{types:Cfe,write:HV,default:null}},write:HV,default:null}})],Xt.prototype,"symbol",void 0),l([u({type:Boolean,json:{write:!0}})],Xt.prototype,"useCodedValues",void 0),l([u({type:String,json:{write:!0}})],Xt.prototype,"where",void 0),Xt=wP=l([E("esri.layers.support.LabelClass")],Xt);var _P;let Bo=_P=class extends Z{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new _P({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};l([u({type:String,json:{write:!0}})],Bo.prototype,"description",void 0),l([u({type:String,json:{write:!0}})],Bo.prototype,"label",void 0),l([u({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Bo.prototype,"minValue",void 0),l([u({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Bo.prototype,"maxValue",void 0),l([u(UF)],Bo.prototype,"symbol",void 0),Bo=_P=l([E("esri.renderers.support.ClassBreakInfo")],Bo);var xP;const wX="log",zS="percent-of-total",jS="field",Q_=new Ze({esriNormalizeByLog:wX,esriNormalizeByPercentOfTotal:zS,esriNormalizeByField:jS}),_Pe=gi(Bo);let Ri=xP=class extends s0(_s){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const s=new Bo;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(t,e,i,r){const n=t.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(ie.getLogger(this).error(".field: field must be a string value"),null):Zw(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&jS||i&&zS||null,e&&i&&ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==jS&&t!==zS||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new Bo({minValue:t,maxValue:e,symbol:PH(i)}):_Pe(V(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&ie.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await ph()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await ph(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new xP({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:V(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:V(this.visualVariables),legendOptions:V(this.legendOptions),authoringInfo:V(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Gr(t,e,null,this.valueExpression)];Br(t,e,this.field),Br(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{},{valueExpression:a}=this;let c=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const d=s.arcadeUtils;if(!c){const f=d.createSyntaxTree(a);c=d.createFunction(f),this._compiledValueExpression.compiledFunction=c}this._compiledValueExpression.valueExpression=a;const h=d.executeFunction(c,d.createExecContext(t,d.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===wX)n=Math.log(n)*Math.LOG10E;else if(r!==zS||s==null||isNaN(s)){if(r===jS&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};l([u(qF)],Ri.prototype,"backgroundFillSymbol",void 0),l([u({type:[Bo],json:{write:{isRequired:!0}}})],Ri.prototype,"classBreakInfos",void 0),l([oe("classBreakInfos")],Ri.prototype,"readClassBreakInfos",null),l([le("classBreakInfos")],Ri.prototype,"writeClassBreakInfos",null),l([u({type:String,json:{write:!0}})],Ri.prototype,"defaultLabel",void 0),l([u(jI)],Ri.prototype,"defaultSymbol",void 0),l([u({type:String,json:{write:!0}})],Ri.prototype,"field",void 0),l([ti("field")],Ri.prototype,"castField",null),l([u({type:Boolean})],Ri.prototype,"isMaxInclusive",void 0),l([u({type:BF,json:{write:!0}})],Ri.prototype,"legendOptions",void 0),l([u({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ri.prototype,"minValue",null),l([u({type:String,json:{write:!0}})],Ri.prototype,"normalizationField",void 0),l([u({type:Number,json:{write:!0}})],Ri.prototype,"normalizationTotal",void 0),l([u({type:Q_.apiValues,value:null,json:{type:Q_.jsonValues,read:Q_.read,write:Q_.write}})],Ri.prototype,"normalizationType",null),l([Ie({classBreaks:"class-breaks"})],Ri.prototype,"type",void 0),l([u({type:String,json:{write:!0}})],Ri.prototype,"valueExpression",void 0),l([u({type:String,json:{write:!0}})],Ri.prototype,"valueExpressionTitle",void 0),Ri=xP=l([E("esri.renderers.ClassBreaksRenderer")],Ri);const SP=-3,xPe=SP-1,SPe=!!B("esri-tests-disable-gpu-memory-measurements");let $Pe=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db.clear()}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const r=this._db.get(e.id+i);return(r==null?void 0:r.size)??0}put(e,i,r,n,s){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,0)),n>this._maxSize)return void this._notifyRemove(i,r,n,0);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return SPe||console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,0);const a=1+Math.max(s,xPe)-SP;this._db.set(i,new TPe(r,n,a)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i){i=e.id+i;const r=this._db.get(i);if(!r)return;this._size-=r.size,e.size-=r.size;let n=r.entry.usedMemory;for(;n>this._maxSize;){const s=this._notifyRemove(i,r.entry,n,1);if(!(s!=null&&s>0))return void this._db.delete(i);n=s}r.size=n,this._size+=n,e.size+=n,this._checkSize()}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const c=o.lifetime;r[c]=(r[c]||0)+o.size,this._users.forEach(d=>{const{id:h,name:f}=d;if(a.startsWith(h)){const m=i[f]||0;i[f]=m+o.size}})});const n={};this._users.forEach(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const c=i[a]||0;i[a]=c,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(i);s.sort((o,a)=>i[a]-i[o]),s.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+SP-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,0))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,n){var a;const s=(a=this._users.get(e.split(aM)[0]))==null?void 0:a.removeFunc,o=s==null?void 0:s(i,n,r);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach((e,i)=>this._checkSizeLimits(e,i)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const n=i==null?void 0:i.id;let s=!0;for(;s;){s=!1;for(const[o,a]of this._db)if(a.lifetime===0&&(!n||o.startsWith(n))){const c=i??this._users.get(o.split(aM)[0]);if(this._purgeItem(o,a,c),r.size<=.9*e)return;s||(s=this._db.has(o))}}for(const[o,a]of this._db)if(!n||o.startsWith(n)){const c=i??this._users.get(o.split(aM)[0]);if(this._purgeItem(o,a,c),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,1);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},TPe=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const aM=":";let kPe=class{constructor(e,i){this.removeFunc=i,this._storage=new $Pe,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},a8=class _X{static parse(e,i,r){const n=[],s=[],o=e.split(";");for(let a=0;a<o.length;a++){const c=o[a];if(c){if(c.includes("po:")){const d=c.slice(3).split("|");if(d.length===3){const[h,f,m]=d,v=EPe(h,f,m);v&&s.push(v)}continue}if(c.includes("|")){for(const d of c.split("|"))if(i.has(d)){n.push(d);break}}else if(i.has(c))n.push(c);else if(a===0){n.length=0,n.push(MPe(r));break}}}return new _X(n,s)}constructor(e,i){this.partNames=e,this.overrides=i}};function IPe(t,e){if(t==="DashTemplate")return e.split(" ").map(i=>Number(i));if(t==="Color"){const i=new Ue(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function EPe(t,e,i){return{primitiveName:t,propertyName:e,value:IPe(e,i),defaultValue:null}}function MPe(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var iy;let za=(iy=class{},iy.instance=new Hn("Etc/UTC"),iy);function APe(t){return t instanceof Oh?t===za.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function dBe(t){return APe(t)?za.instance:t}function CPe(t){return"timeZone"in t}function OPe(t){return"timeZone"in t}function PPe(t){return"dateFieldsTimeZone"in t}const RPe=new Map;let VT=class VS{static fromJSON(e){return new VS(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new VS(e.fields??[],c8(e))}static fromLayerJSON(e){return new VS(e.fields??[],c8(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=l8(o);if(o&&a){const c=bp(o);this._fieldsMap.set(o,s),this._fieldsMap.set(c,s),this._normalizedFieldsMap.set(a,s),r.push(`${c}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),dq(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):$R(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),lD(s)||cD(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)lD(e)||cD(e)||e.nullable||zae(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(bp(e))??this._normalizedFieldsMap.get(l8(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(ie.getLogger("esri.layers.support.FieldsIndex").errorOnce(new j("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),ed):xX.has(i.type)?Xu:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===Xu?za.instance:i===ed?Di.utcInstance:Ah(RPe,i,()=>Hn.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return pq(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(e=>Yb(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function bp(t){return t.trim().toLowerCase()}function l8(t){var e;return((e=Tae(t))==null?void 0:e.toLowerCase())??""}const xX=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function c8(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=PPe(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?Ex(t.dateFieldsTimeReference):null,c=n?CPe(n)?n.timeZone??a:n.dateFieldsTimeReference?Ex(n.dateFieldsTimeReference):a??ed:null,d=r?OPe(r)?r.timeZone??a:r.timeReference?Ex(r.timeReference):a:null,h=new Map([[bp((n==null?void 0:n.creationDateField)??""),c],[bp((n==null?void 0:n.editDateField)??""),c],[bp(s),d],[bp(o),d]]);for(const{name:f,type:m}of t.fields)if(xX.has(m))e.set(f,Xu);else if(m!=="date"&&m!=="esriFieldTypeDate")e.set(f,null);else if(i)e.set(f,Xu);else{const v=h.get(bp(f??""))??a;e.set(f,v)}return e}const SX={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};let LPe=class extends Error{constructor(...e){super(...e)}},u8=class $X extends LPe{constructor(e,i){super(QF(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,$X),i!=null&&i.loc&&(this.loc=i.loc)}},FPe=class TX extends Error{constructor(e,i,r,n){super("Execution error - "+QF(r)+ld(SX[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,TX),r!=null&&r.loc&&(this.loc=r.loc)}};function QF(t){var e,i;return t&&t.loc?`Line : ${(e=t.loc.start)==null?void 0:e.line}, ${(i=t.loc.start)==null?void 0:i.column}: `:""}let hBe=class kX extends Error{constructor(e,i,r,n){super("Compilation error - "+QF(r)+ld(SX[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,kX),r!=null&&r.loc&&(this.loc=r.loc)}},fBe=class IX extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,IX)}};function mBe(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&(e!=null&&e.loc)?new u8(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e!=null&&e.loc?new u8(i,{cause:i}):i)}const NPe={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};let gBe=class EX extends Error{constructor(e,i){super(ld(NPe[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,EX)}};function US(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let yBe=class{constructor(e,i){const r=new Map;for(const n of e){const s=US(n);if(r.has(s))throw new Error(`${n} already added as ${r.get(s)}`);r.set(s,n)}if(i!=null)for(const[n,s]of i){const o=US(n);if(r.has(o))throw new Error(`${n} already associated with ${r.get(o)}`);r.set(o,s)}this._enumMap=r}lookup(e){return this._enumMap.get(US(e))}get(e){const i=this.lookup(e);if(i==null)throw new FPe(null,"InvalidParameter",null);return i}};const DPe={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};let zPe=class MX extends Error{constructor(e,i){super(ld(DPe[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,MX)}};function Sf(t,e,i){return t<e?t-e:t>i?t-i:0}function $f(t,e,i){return t<e?e:t>i?i:t}let mc=class Oi{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,o=0,a=0,c){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(a))return null;const d=Te.local(e,i).daysInMonth;let h=Te.fromObject({day:$f(r,1,d),year:e,month:$f(i,1,12),hour:$f(n,0,23),minute:$f(s,0,59),second:$f(o,0,59),millisecond:$f(a,0,999)},{zone:Ca(c)});return h=h.plus({months:Sf(i,1,12),days:Sf(r,1,d),hours:Sf(n,0,23),minutes:Sf(s,0,59),seconds:Sf(o,0,59),milliseconds:Sf(a,0,999)}),new Oi(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=Ca(i);return e.isUnknownTimeZone||r===za.instance?Oi.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Oi(e._date.setZone(r))}static dateJSToArcadeDate(e){return new Oi(Te.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=Ca(i);return new Oi(Te.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new Oi(Te.fromMillis(e,{zone:za.instance}))}static unknownDateJSToArcadeDate(e){return new Oi(Te.fromMillis(e.getTime(),{zone:za.instance}))}static epochToArcadeDate(e,i="system"){const r=Ca(i);return new Oi(Te.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new Oi(e)}clone(){return new Oi(this._date)}changeTimeZone(e){const i=Ca(e);return Oi.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=Ca(i);return e.zone===za.instance||r===za.instance?Oi.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Oi(e.setZone(r))}static nowToArcadeDate(e){const i=Ca(e);return new Oi(Te.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Oi(Te.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Oi.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===za.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new Oi(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Oi(this._date.toUTC())}toLocal(){return new Oi(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=Te.fromISO(e,{setZone:!0});return new Oi(i)}};function Ca(t,e=!0){if(t instanceof Oh)return t;switch(US(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return za.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(t)){const r=Di.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=Hn.create(t);if(!i.isValid){if(e)throw new zPe("TimeZoneNotRecognized");return null}return i}function d8(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.startsWith("[")&&r.endsWith("]")?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const p8="esri.core.sql.dateonly";let jPe=class ds{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=p8}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===p8}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return ds.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new ds(this._year,this._month,this._day)}toDateTime(e){return Te.fromObject({day:this.day,month:this.month,year:this.year},{zone:Ca(e)})}toDateTimeLuxon(e){return Te.fromObject({day:this.day,month:this.month,year:this.year},{zone:Ca(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=d8(e)),!e)return"";const r=this.toDateTime("unknown");return mc.dateTimeToArcadeDate(r).toFormat(e,{locale:eo(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return mc.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return ds.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return Te.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=Te.fromMillis(e,{zone:Di.utcInstance});return i.isValid?ds.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=Te.fromSeconds(e,{zone:Di.utcInstance});return i.isValid?ds.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new ds(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const n=new ds(e,i,r);return n.isValid===!1?null:n}static fromDateJS(e){return ds.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return ds.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=d8(i))&&r.push(i);else if(i===null||i===""){const n=Te.fromISO(e,{setZone:!0});return n.isValid?ds.fromParts(n.year,n.month,n.day):null}for(const n of r){const s=Te.fromFormat(e,i??n);if(s.isValid)return new ds(s.year,s.month,s.day)}return null}static fromNow(e="system"){const i=Te.fromJSDate(new Date).setZone(Ca(e));return new ds(i.year,i.month,i.day)}};function bBe(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new Ke({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function wBe(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function X_(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function h8(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const f8="esri.core.sql.timeonly";let VPe=class $a{constructor(e,i,r,n){this._hour=e,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass=f8}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===f8}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return $a.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new $a(this.hour,this.minute,this.second,this.millisecond)}isValid(){return X_(this.hour)&&X_(this.minute)&&X_(this.second)&&X_(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=h8(e))?Te.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:eo(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,n){const s=new $a(e,i,r,n);return s.isValid()?s:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new $a(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24),s=Math.floor(e%1e3);return new $a(n,r,i,s)}static fromDateJS(e){return new $a(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new $a(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=h8(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const s=Te.fromFormat(e,n);if(s.isValid)return new $a(s.hour,s.minute,s.second,s.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return $a.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return Te.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const UPe=["geometry","scale","timeProperties"];function _Be(t,e){if(e!=null)for(const i of UPe)e.hasArcadeDependency(i)&&t.add(i);return t}function xBe(t,e){return AX.create(t,e,null,["$feature","$view"])}function qPe(t,e,i){return AX.create(t,e,i,["$feature","$view","$config"])}let AX=class CX{static async create(e,i,r,n){const{arcade:s,Dictionary:o}=await ph();let a;try{a=s.parseScript(e)}catch(v){throw new j("arcade-bad-expression","Failed to parse arcade script",{script:e,error:v})}const c=s.scriptUsesGeometryEngine(a);c&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,a,null,!1,c);const d={vars:n.reduce((v,w)=>({...v,[w]:null}),{}),spatialReference:i,useAsync:!1},h=s.compileScript(a,d);let f=null;r!=null&&(f=new o(r),f.immutable=!0);const m=new o;return m.immutable=!1,m.setField("scale",0),new CX(e,s,a,h,i,m,f,o)}constructor(e,i,r,n,s,o,a,c){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=n,this._spatialReference=s,this._viewDict=o,this._configDict=a,this._dictionaryCtor=c,this._dependencies=new Map,this._featureReader=new OX,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){var n;const r=(n=i.$view)==null?void 0:n.timeZone;if(i.$view){let s;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:o,currentEnd:a}=i.$view.timeProperties;s=new this._dictionaryCtor({currentStart:o!=null?r!=null?mc.epochToArcadeDate(o,r):mc.unknownEpochToArcadeDate(o):void 0,currentEnd:a!=null?r!=null?mc.epochToArcadeDate(a,r):mc.unknownEpochToArcadeDate(a):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},OX=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const n=i??new VT(PX(e.attributes));this._boundTarget=e,this._boundSchema.fields=n.fields,this._boundSchema.fieldsIndex=n,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=ta(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===Xu}field(e,i=!0){const r=this._getField(e);if(r){const n=this._boundTarget.attributes[r.name];if(n==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return jPe.fromReader(n);case"time-only":case"esriFieldTypeTimeOnly":return VPe.fromReader(n);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return mc.fromReaderAsTimeStampOffset(n);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?mc.unknownEpochToArcadeDate(n):mc.epochToArcadeDate(n,this.contextTimeZone??ro);default:return n}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){var i;return{attributes:this._boundTarget.attributes,geometry:(e==null?void 0:e.keepGeometryType)===!0?this.geometry():((i=this.geometry())==null?void 0:i.toJSON())??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function PX(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let BPe=class RX{static async from(e,i,r){const n=e.dictionary_version?gQ.parse(e.dictionary_version):null,s=new Set(e.itemsNames),o={};if(i)for(const f in i)o[f]=i[f];if(e.authoringInfo.configuration)for(const f of e.authoringInfo.configuration)o.hasOwnProperty(f.name)||(o[f.name]=f.value);const a=new Set(e.authoringInfo.symbol);for(const f of Object.keys(r))a.delete(f);a.size&&ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:a});const c=await qPe(e.expression,null,o);if(!c)throw new j("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const d=!n||!n.greaterEqual(4,0);d&&ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:n});const h=new GPe(r,d);return new RX(d,s,c,h)}constructor(e,i,r,n){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=n}get itemNames(){return this._itemNames}evaluate(e,i,r,n){try{return this._reader.bind(e,r,n),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(s){ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:s})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new VT(e);const i=e.map(r=>({...r,type:"esriFieldTypeString"}));return new VT(i)}},GPe=class extends OX{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};const m8={Relative:0,Absolute:1},HPe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},$P={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:m8.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:m8.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function WPe(t){return typeof t=="function"}function TBe(t,e,i,r){return WPe(t)?t(e,i,r):t}function kBe(t){return[t.r,t.g,t.b,t.a]}const ZPe=` /-,
`;function g8(t){let e=t.length;for(;e--;)if(!ZPe.includes(t.charAt(e)))return!1;return!0}function IBe(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.slice(r,n);i.push([s,null,g8(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length){const s=t.slice(r);i.push([s,null,g8(s)])}return i}function EBe(t,e,i){let r="",n=null;for(const s of e){const[o,a,c]=s;if(o!=null&&o!=="")c?n=o:(n!=null&&(r+=n,n=null),r+=o);else{const d=t.readAttribute(a);d!=null&&d!==""&&(n!==null&&(r+=n,n=null),r+=d)}}return LX(r,i)}function MBe(t,e,i,r){let n="",s=null;for(const o of e){const[a,c,d]=o;if(a!=null&&a!=="")d?s=a:(s!=null&&(n+=s,s=null),n+=a);else{let h=c;i!=null&&(h=iRe(c,i));const f=t.attributes[h];f!=null&&f!==""&&(s!=null&&(n+=s,s=null),n+=f)}}return LX(n,r)}function LX(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function ABe(t,e,i,r,n,s,o=!0){const a=e/n,c=i/s,d=Math.ceil(a/2),h=Math.ceil(c/2);for(let f=0;f<s;f++)for(let m=0;m<n;m++){const v=4*(m+(o?s-f-1:f)*n);let w=0,x=0,$=0,T=0,C=0,P=0,L=0;const D=(f+.5)*c;for(let q=Math.floor(f*c);q<(f+1)*c;q++){const F=Math.abs(D-(q+.5))/h,ee=(m+.5)*a,ae=F*F;for(let ne=Math.floor(m*a);ne<(m+1)*a;ne++){let ue=Math.abs(ee-(ne+.5))/d;const X=Math.sqrt(ae+ue*ue);X>=-1&&X<=1&&(w=2*X*X*X-3*X*X+1,w>0&&(ue=4*(ne+q*e),L+=w*t[ue+3],$+=w,t[ue+3]<255&&(w=w*t[ue+3]/250),T+=w*t[ue],C+=w*t[ue+1],P+=w*t[ue+2],x+=w))}}r[v]=T/x,r[v+1]=C/x,r[v+2]=P/x,r[v+3]=L/$}}function JPe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function CBe(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function OBe(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function PBe(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function RBe(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function YPe(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const LBe=(t,e=0)=>t==null||isNaN(t)?e:t,FBe=(t,e)=>t??e,NBe=(t,e)=>t??e,DBe=t=>t.tintColor?JPe(t.tintColor):[255,255,255,1];let KPe=class{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}};function jBe(t){return new KPe(t)}function VBe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function UBe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function qBe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function BBe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function y8(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=y8(e);if(i!=null)return i}break;case"CIMTextSymbol":return y8(t.symbol);case"CIMSolidFill":return t.color}return null}function v8(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=v8(i);if(r!=null)return r}break}case"CIMTextSymbol":return v8(t.symbol);case"CIMSolidStroke":return t.color}}function GBe(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function b8(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=b8(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return b8(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function HBe(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function WBe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function ZBe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const JBe=t=>t.includes("data:image/svg+xml");function YBe(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function UI(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function KBe(t,e,i,r,n,s,o=!0){const{infos:a}=s;let c=1,d=0,h=0,f=0,m=1;for(const{absoluteAnchorPoint:x,offsetX:$,offsetY:T,rotation:C,size:P,frameHeight:L,rotateClockWise:D,scaleSymbolsProportionally:q}of a)m=x?1:c,h=_8($,T,d,m,h),f=w8($,T,d,m,f),L&&(q||o)&&(c*=P/L),d=x8(C,D,d);const v=_8(r,n,d,m,h),w=w8(r,n,d,m,f);return{size:t*c,rotation:x8(e,i,d),offsetX:v,offsetY:w}}function QPe(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>QPe(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function XPe(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...HPe[e]];const i=$P[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function eRe(t){return t.split(" ").map(e=>Number(e))}function tRe(t){return typeof t=="string"?eRe(t):t}function QBe(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=tRe(t.dashTemplate)),t}function TP(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return TP(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return TP(i.symbol)}}return"Normal"}function XBe(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??$P.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&YPe(i.markerPlacement)){const r=i.size??$P.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function iRe(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function eGe(t){return t.map(e=>({...e,propertyName:UI(e.propertyName)}))}function tGe(t){const e={};for(const i in t){const r=t[i];e[UI(i)]=r}return e}function w8(t,e,i,r,n){const s=i*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*t+o*e)*r+n}return e*r+n}function _8(t,e,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*t-Math.sin(s)*e)*r+n:t*r+n}function x8(t,e,i){return e?i-t:i+t}function iGe(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let s=e[UI(i)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=XPe(e.type,i.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function rGe(t,e,i){if(e[UI(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function nGe(t,e){return Math.max(Math.min((t??e)/100,1),0)}const rRe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let FX=class{constructor(e,i,r,n){this.url=e,this.fieldMap=r,this.dictionaryInfo=n,this._symbolPartCache=new kPe(100);const s=async()=>BPe.from(await n,i,r);this._evaluator=s()}async getSymbolAsync(e,i,r=!0){var f;const n=await this._evaluator,s=(i==null?void 0:i.fields)??PX(e.attributes),o=n.createDictionaryFieldsIndex(s),a=n.evaluate(e,(i==null?void 0:i.scale)??0,o,i==null?void 0:i.spatialReference);if(a==null)return null;const c=Wy(e.geometry),d=a8.parse(a,n.itemNames,c),h=c==="esriGeometryPoint"&&!((f=e.geometry)!=null&&f.hasZ);return await this._cimPartsToCIMSymbol(e,d.partNames,d.overrides,h,i,r,o)}async getSymbolForControlString(e,i,r){const n=await this._evaluator,s=a8.parse(e,n.itemNames,i),o=i==="esriGeometryPoint"&&!r,a=S8(await Promise.all(s.partNames.map(c=>this._getSymbolPart(c))),s.overrides,o);return new Nr({data:a})}async _cimPartsToCIMSymbol(e,i,r,n,s,o,a){const c=i.map(f=>this._getSymbolPart(f,s));let d=await Promise.all(c);if(o&&this.fieldMap&&d.length>0){const{OverrideHelper:f}=await Q(()=>import("./OverrideHelper-C80mPzpW.js"),__vite__mapDeps([211,165,212,52]),import.meta.url);d=V(d);for(const m of d)f.applyDictionaryTextOverrides(m,e,this.fieldMap,a,TP(m))}const h=S8(d,r,n);return new Nr({data:h})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,n=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:s}=await Ft(n,{responseType:"json",query:{f:"json"},...i});return s}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function S8(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const n of t){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return i&&(r.callout=rRe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var kP;let Oo=kP=class extends s0(_s){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new FX(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new kP({config:V(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:V(this.fieldMap),url:V(this.url),visualVariables:V(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Gr(t,e,null,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await Ft(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};l([u({type:FX})],Oo.prototype,"_loader",null),l([u({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Oo.prototype,"config",void 0),l([u({type:Object,json:{write:!0}})],Oo.prototype,"fieldMap",void 0),l([u({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Oo.prototype,"scaleExpression",void 0),l([le("scaleExpression")],Oo.prototype,"writeData",null),l([u({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Oo.prototype,"scaleExpressionTitle",void 0),l([u({type:String,json:{write:!0}})],Oo.prototype,"url",void 0),l([le("visualVariables")],Oo.prototype,"writeVisualVariables",null),Oo=kP=l([E("esri.renderers.DictionaryRenderer")],Oo);var IP;let Fl=IP=class extends Z{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(ie.getLogger(this).error(".field: field must be a string value"),null):Zw(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new IP({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([u({type:Ue,json:{type:[Number],write:!0}})],Fl.prototype,"color",void 0),l([u({type:String,json:{write:!0}})],Fl.prototype,"field",void 0),l([ti("field")],Fl.prototype,"castField",null),l([u({type:String,json:{write:!0}})],Fl.prototype,"label",void 0),l([u({type:String,json:{write:!0}})],Fl.prototype,"valueExpression",void 0),l([u({type:String,json:{write:!0}})],Fl.prototype,"valueExpressionTitle",void 0),Fl=IP=l([E("esri.renderers.support.AttributeColorInfo")],Fl);const NX=Fl;var EP;let qS=EP=class extends Z{constructor(){super(...arguments),this.unit=null}clone(){return new EP({unit:this.unit})}};l([u({type:String,json:{write:!0}})],qS.prototype,"unit",void 0),qS=EP=l([E("esri.renderers.support.DotDensityLegendOptions")],qS);const nRe=qS;var MP;let $n=MP=class extends s0(_s){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Ue([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ni,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(t){super.visualVariables=t}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new vs({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new MP({attributes:V(this.attributes),backgroundColor:V(this.backgroundColor),dotBlendingEnabled:V(this.dotBlendingEnabled),dotShape:V(this.dotShape),dotSize:V(this.dotSize),dotValue:V(this.dotValue),legendOptions:V(this.legendOptions),outline:V(this.outline),referenceScale:V(this.referenceScale),seed:V(this.seed),visualVariables:V(this.visualVariables),authoringInfo:V(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Gr(t,e,null,i.valueExpression),i.field&&t.add(i.field)}};l([u({type:[NX],json:{write:!0}})],$n.prototype,"attributes",void 0),l([u({type:Ue,json:{write:!0}})],$n.prototype,"backgroundColor",void 0),l([u({type:Boolean,json:{write:!0}})],$n.prototype,"dotBlendingEnabled",void 0),l([u({type:String,json:{write:!1}})],$n.prototype,"dotShape",void 0),l([u({type:Number,json:{write:!0}})],$n.prototype,"dotSize",void 0),l([u({type:nRe,json:{write:!0}})],$n.prototype,"legendOptions",void 0),l([u({type:Ni,json:{default:null,write:!0}})],$n.prototype,"outline",void 0),l([u({type:Number,json:{write:!0}})],$n.prototype,"dotValue",void 0),l([u({type:Number,json:{write:!0}})],$n.prototype,"referenceScale",void 0),l([u({type:Number,json:{write:!0}})],$n.prototype,"seed",void 0),l([Ie({dotDensity:"dot-density"})],$n.prototype,"type",void 0),$n=MP=l([E("esri.renderers.DotDensityRenderer")],$n);var AP;let Nu=AP=class extends Z{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new AP({color:this.color&&this.color.clone(),ratio:this.ratio})}};l([u({type:Ue,json:{type:[nt],default:null,write:{isRequired:!0}}})],Nu.prototype,"color",void 0),l([u({type:Number,json:{write:{isRequired:!0}}})],Nu.prototype,"ratio",void 0),Nu=AP=l([E("esri.renderers.support.HeatmapColorStop")],Nu);let wm=class extends Pe(Z){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([u({type:String,json:{write:!0}})],wm.prototype,"minLabel",void 0),l([u({type:String,json:{write:!0}})],wm.prototype,"maxLabel",void 0),l([u({type:String,json:{write:!0}})],wm.prototype,"title",void 0),wm=l([E("esri.renderers.support.HeatmapLegendOptions")],wm);function sRe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function oRe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function aRe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function lRe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function DX(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function zX(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function jX(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function cRe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function uRe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function dRe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function pRe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function hRe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function fRe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function mRe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function VX(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function UX(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function qX(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function BX(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function gRe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function yRe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function vRe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o),t}function bRe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function GX(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function wRe(t,e=1){const i=Jk;let r,n,s,o,a,c;do r=2*i()-1,n=2*i()-1,a=r*r+n*n;while(a>=1);do s=2*i()-1,o=2*i()-1,c=s*s+o*o;while(c>=1);const d=Math.sqrt((1-a)/c);return t[0]=e*r,t[1]=e*n,t[2]=e*s*d,t[3]=e*o*d,t}function _Re(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function xRe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],c=i[2],d=i[3],h=d*r+a*s-c*n,f=d*n+c*r-o*s,m=d*s+o*n-a*r,v=-o*r-a*n-c*s;return t[0]=h*d+v*-o+f*-c-m*-a,t[1]=f*d+v*-a+m*-o-h*-c,t[2]=m*d+v*-c+h*-a-f*-o,t[3]=e[3],t}function SRe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function $Re(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function TRe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],c=e[2],d=e[3],h=fn();return Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-c)<=h*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(s-d)<=h*Math.max(1,Math.abs(s),Math.abs(d))}const kRe=DX,IRe=zX,ERe=jX,MRe=VX,ARe=UX,CRe=qX,ORe=BX;Object.freeze(Object.defineProperty({__proto__:null,add:lRe,ceil:cRe,copy:sRe,copyVec3:oRe,dist:MRe,distance:VX,div:ERe,divide:jX,dot:bRe,equals:TRe,exactEquals:$Re,floor:uRe,inverse:yRe,len:CRe,length:qX,lerp:GX,max:pRe,min:dRe,mul:IRe,multiply:zX,negate:gRe,normalize:vRe,random:wRe,round:hRe,scale:fRe,scaleAndAdd:mRe,set:aRe,sqrDist:ARe,sqrLen:ORe,squaredDistance:UX,squaredLength:BX,str:SRe,sub:kRe,subtract:DX,transformMat4:_Re,transformQuat:xRe},Symbol.toStringTag,{value:"Module"}));function qI(){return[0,0,0,0]}function PRe(t){return[t[0],t[1],t[2],t[3]]}function o0(t,e,i,r){return[t,e,i,r]}function RRe(t,e,i,r){return[t,e,i,r]}function LRe(t,e=qI()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function HX(){return qI()}function WX(){return o0(1,1,1,1)}function ZX(){return o0(1,0,0,0)}function JX(){return o0(0,1,0,0)}function YX(){return o0(0,0,1,0)}function KX(){return o0(0,0,0,1)}const FRe=HX(),NRe=WX(),DRe=ZX(),zRe=JX(),jRe=YX(),VRe=KX();Object.freeze(Object.defineProperty({__proto__:null,ONES:NRe,UNIT_W:VRe,UNIT_X:DRe,UNIT_Y:zRe,UNIT_Z:jRe,ZEROS:FRe,clone:PRe,create:qI,freeze:RRe,fromArray:LRe,fromValues:o0,ones:WX,unitW:KX,unitX:ZX,unitY:JX,unitZ:YX,zeros:HX},Symbol.toStringTag,{value:"Module"}));const XF=2.4;function URe(t){return no(t*XF)}function qRe(t){return Rhe(t)/XF}function BRe(t,e,i,r){let{color:n,ratio:s}=e,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const c=Es((r-s)/(a-s),0,1);GX(t,n.toArray(),o.toArray(),c)}function aGe(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,c)=>a.ratio-c.ratio).map(({color:a,ratio:c})=>({color:a,ratio:Math.max(c,.001)})),t.length<1)return i;let r=t[0],n=t[0],s=1;const o=qI();for(let a=0;a<512;a++){const c=(a+.5)/512;for(;c>n.ratio&&s<t.length;)r=n,n=t[s++];BRe(o,r,n,c),i.set(o,4*a)}return i}function lGe(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function cGe(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var CP;function $8(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=t;return a}}return t}let Qi=CP=class extends _s{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new Nu({ratio:0,color:new Ue("rgba(255, 140, 0, 0)")}),new Nu({ratio:.75,color:new Ue("rgba(255, 140, 0, 1)")}),new Nu({ratio:.9,color:new Ue("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return $8(t)}get blurRadius(){return qRe(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",URe(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get radius(){return this._get("radius")??18}set radius(t){this._set("radius",t)}get _pixelIntensityToDensity(){return 24/(XF**2*this.blurRadius**4)}read(t,e){t=$8(t),super.read(t,e)}getSymbol(){return new er}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&Br(t,e,i),r&&typeof r=="string"&&await Gr(t,e,null,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new CP({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:V(this.colorStops),field:this.field,legendOptions:V(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([u({type:si,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qi.prototype,"authoringInfo",void 0),l([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Qi.prototype,"blurRadius",null),l([u({type:[Nu],json:{write:{isRequired:!0}}})],Qi.prototype,"colorStops",void 0),l([u({type:String,json:{write:!0}})],Qi.prototype,"field",void 0),l([u({type:wm,json:{write:!0}})],Qi.prototype,"legendOptions",void 0),l([u({type:Number,json:{write:!0}})],Qi.prototype,"maxDensity",void 0),l([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Qi.prototype,"maxPixelIntensity",null),l([u({type:Number,json:{write:!0}})],Qi.prototype,"minDensity",void 0),l([u({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Qi.prototype,"minPixelIntensity",null),l([u({type:Number,cast:ht,json:{write:!0}})],Qi.prototype,"radius",null),l([u({type:Number,range:{min:0},json:{default:0,write:!0}})],Qi.prototype,"referenceScale",void 0),l([Ie({heatmap:"heatmap"})],Qi.prototype,"type",void 0),l([u({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Qi.prototype,"valueExpression",void 0),l([u({type:String})],Qi.prototype,"valueExpressionTitle",void 0),l([u({readOnly:!0})],Qi.prototype,"_pixelIntensityToDensity",null),Qi=CP=l([E("esri.renderers.HeatmapRenderer")],Qi);let wp=class extends Pe(Z){constructor(){super(...arguments),this.color=new Ue([0,0,0,0]),this.label=null,this.threshold=0}};l([u({type:Ue,json:{write:!0}})],wp.prototype,"color",void 0),l([u({type:String,json:{write:!0}})],wp.prototype,"label",void 0),l([u({type:Number,range:{min:0,max:1},json:{write:!0}})],wp.prototype,"threshold",void 0),wp=l([E("esri.renderers.support.OthersCategory")],wp);const GRe={base:Pr,key:"type",typeMap:{size:wt,opacity:rc}};let Tn=class extends s0(Pe(_s)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ue([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new wp,this.legendOptions=null,this.outline=null,this.type="pie-chart",this.visualVariables=null}get size(){return this._get("size")??12}set size(e){this._set("size",e)}getSymbol(){var e;return new er({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(_r)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Gr(e,i,null,r.valueExpression),r.field&&e.add(r.field)}};l([u({type:[NX],json:{write:!0}})],Tn.prototype,"attributes",void 0),l([u(qF)],Tn.prototype,"backgroundFillSymbol",void 0),l([u({type:Ue,json:{write:!0}})],Tn.prototype,"defaultColor",void 0),l([u({type:String,json:{write:!0}})],Tn.prototype,"defaultLabel",void 0),l([u({type:Number,range:{min:0,max:1},json:{write:!0}})],Tn.prototype,"holePercentage",void 0),l([u({type:wp,json:{write:!0}})],Tn.prototype,"othersCategory",void 0),l([u({type:BF,json:{write:!0}})],Tn.prototype,"legendOptions",void 0),l([u({type:Ni,json:{default:null,write:!0}})],Tn.prototype,"outline",void 0),l([u({type:Number,cast:ht,json:{write:!0}})],Tn.prototype,"size",null),l([Ie({pieChart:"pie-chart"})],Tn.prototype,"type",void 0),l([u({types:[GRe]})],Tn.prototype,"visualVariables",void 0),Tn=l([E("esri.renderers.PieChartRenderer")],Tn);const b1={key:"type",base:_s,typeMap:{heatmap:Qi,simple:ln,"unique-value":Ut,"class-breaks":Ri,"dot-density":$n,dictionary:Oo,"pie-chart":Tn},errorContext:"renderer"},HRe={key:"type",base:_s,typeMap:{simple:ln,"unique-value":Ut,"class-breaks":Ri,heatmap:Qi},errorContext:"renderer",validate:WRe};function WRe(t){switch(t.type){case"simple":return ZRe(t);case"unique-value":return JRe(t);case"class-breaks":return YRe(t);case"heatmap":return t}}function ZRe(t){if(t.symbol)return t;ie.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function JRe(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||ie.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function YRe(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||ie.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function pGe(t,e){return Aw(t,null,e)}const KRe=Ny({types:b1});function Aw(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new Is("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):KRe(t,e,i):null}var OP;let gr=OP=class extends Wu{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=ht("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Ai(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?Aw(r,e,i)??void 0:HF(e,i)}clone(){return new OP({fields:V(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:V(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:V(this.popupTemplate),renderer:V(this.renderer),binType:V(this.binType),size:this.size})}};l([Ie({binning:"binning"})],gr.prototype,"type",void 0),l([Ie({geohash:"geohash",square:"square"}),u({type:["geohash","square"]})],gr.prototype,"binType",void 0),l([u({type:Number,json:{write:!0}})],gr.prototype,"fixedBinLevel",void 0),l([u({type:[Xt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],gr.prototype,"labelingInfo",void 0),l([u(lI)],gr.prototype,"labelsVisible",void 0),l([u({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],gr.prototype,"maxScale",void 0),l([u(aI)],gr.prototype,"popupEnabled",void 0),l([u({type:Rh,json:{name:"popupInfo",write:!0}})],gr.prototype,"popupTemplate",void 0),l([u({cast:t=>t==="auto"?t:on(ht(t))})],gr.prototype,"size",void 0),l([u({type:[Fr],json:{write:!0}})],gr.prototype,"fields",void 0),l([le("fields")],gr.prototype,"writeFields",null),l([u({types:b1,json:{write:{target:"drawingInfo.renderer"}}})],gr.prototype,"renderer",void 0),l([oe("renderer",["drawingInfo.renderer"])],gr.prototype,"readRenderer",null),gr=OP=l([E("esri.layers.support.FeatureReductionBinning")],gr);var PP;function T8(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Li=PP=class extends Z{constructor(t){super(t),this.type="cluster",this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}get clusterRadius(){return this._get("clusterRadius")??ht("80px")}set clusterRadius(t){this._set("clusterRadius",t)}get clusterMinSize(){return this._get("clusterMinSize")??ht("12px")}set clusterMinSize(t){this._set("clusterMinSize",t)}get clusterMaxSize(){return this._get("clusterMaxSize")??ht("50px")}set clusterMaxSize(t){this._set("clusterMaxSize",t)}readRenderer(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?T8(r)?null:Aw(r,e,i)??void 0:HF(e,i)}readSymbol(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&T8(r)){const o=Aw(r,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,r){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new ln({symbol:t});e.drawingInfo={renderer:a.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Ai(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>Fr.fromJSON(r))}clone(){return new PP({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:V(this.labelingInfo),labelsVisible:this.labelsVisible,fields:V(this.fields),maxScale:this.maxScale,renderer:V(this.renderer),symbol:V(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:V(this.popupTemplate)})}};l([u({type:["cluster"],readOnly:!0,json:{write:!0}})],Li.prototype,"type",void 0),l([u({cast:t=>t==="auto"?t:on(ht(t)),json:{write:!0}})],Li.prototype,"clusterRadius",null),l([u({type:Number,cast:ht,json:{write:!0}})],Li.prototype,"clusterMinSize",null),l([u({type:Number,cast:ht,json:{write:!0}})],Li.prototype,"clusterMaxSize",null),l([u({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Li.prototype,"maxScale",void 0),l([u(aI)],Li.prototype,"popupEnabled",void 0),l([u({type:Rh,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Li.prototype,"popupTemplate",void 0),l([u({types:b1,json:{write:{target:"drawingInfo.renderer"}}})],Li.prototype,"renderer",void 0),l([oe("renderer",["drawingInfo.renderer"])],Li.prototype,"readRenderer",null),l([u({types:Efe})],Li.prototype,"symbol",void 0),l([oe("symbol",["drawingInfo.renderer"])],Li.prototype,"readSymbol",null),l([le("symbol")],Li.prototype,"writeSymbol",null),l([u({type:[Xt],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Li.prototype,"labelingInfo",void 0),l([u(lI)],Li.prototype,"labelsVisible",void 0),l([u({type:[Fr],json:{write:!0}})],Li.prototype,"fields",void 0),l([le("fields")],Li.prototype,"writeFields",null),l([oe("fields")],Li.prototype,"readFields",null),Li=PP=l([E("esri.layers.support.FeatureReductionCluster")],Li);var RP;let Db=RP=class extends Wu{constructor(t){super(t),this.type="selection"}clone(){return new RP}};l([u({type:["selection"]})],Db.prototype,"type",void 0),Db=RP=l([E("esri.layers.support.FeatureReductionSelection")],Db);const k8={key:"type",base:Wu,typeMap:{cluster:Li,binning:gr}},QRe={types:{key:"type",base:Wu,typeMap:{selection:Db,cluster:Li,binning:gr}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:k8},"portal-item":{types:k8},"web-scene":{types:{key:"type",base:Wu,typeMap:{selection:Db}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:jt}}}}},XRe=()=>ie.getLogger("esri.views.2d.layers.support.clusterUtils");B.add("esri-cluster-arcade-enabled",!0);const eLe=B("esri-cluster-arcade-enabled"),tLe=new Set(["simple-line","simple-fill","picture-fill"]);function I8(t,e){let i=e.clone();if(!iLe(i))return i;if(e.symbols.some(r=>tLe.has(r.type))&&(i=new ln({symbol:new er})),i.authoringInfo||(i.authoringInfo=new si),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");r.forEach(n=>{n.type==="rotation"?n.field?n.field=Ld(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=Q0(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=Ld(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=Ld(t,n.field,"avg","number"):n.valueExpression&&(n.field=Q0(t,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Ld(t,r.field,"sum","number"):r.valueExpression&&(r.field=Q0(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Ld(t,i.field,"mode","string"):i.valueExpression&&(i.field=Q0(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Ld(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Ld(t,i.field,"avg","number"):i.valueExpression&&(i.field=Q0(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const iLe=t=>{const e=i=>XRe().error(new j("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!eLe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function rLe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+yF(s)}}}function Q0(t,e,i,r){const n=yF(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(o=>o.name===s)||t.push(new Fr({name:s,isAutoGenerated:!0,onStatisticExpression:new xu({expression:e,returnType:r}),statisticType:i})),s}function Ld(t,e,i,r,n){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const s=rLe(i,e,n);return t.some(o=>o.name===s)||(i==="avg_norm"?t.push(new Fr({name:s,isAutoGenerated:!0,onStatisticExpression:new xu({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new Fr({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const nLe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.aggregateGraphicOrigin=new sPe(this),this.addHandles(ve(()=>this.renderer,()=>{if(this.featureReduction){const n=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",n)}},pr))}set featureReduction(r){const n=this._normalizeFeatureReduction(r);this._set("featureReduction",n)}set renderer(r){}_withClusterVariable(r,n,s){const o=r.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(a=>a.type==="size")||o.visualVariables.push(new wt({field:"cluster_count",stops:[new qo({value:1}),new qo({useMinValue:!0,size:n}),new qo({useMaxValue:!0,size:s})]}))),o}_normalizeFeatureReduction(r){var m;if((r==null?void 0:r.type)!=="cluster")return r;const n=r.clone(),s=[new Fr({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(n.fields??[]).filter(v=>!v.isAutoGenerated),a=r.renderer&&!((m=r.renderer.authoringInfo)!=null&&m.isAutoGenerated),{clusterMinSize:c,clusterMaxSize:d}=n;if(a){n.fields=[...s,...o];const v=this._withClusterVariable(n.renderer,c,d);return n.effectiveFeatureRenderer=v,n.effectiveClusterRenderer=v,n}if(r.symbol){if(n.fields=[...s,...o],n.renderer=null,!this.renderer)return n.effectiveFeatureRenderer=null,n.effectiveClusterRenderer=null,n;const v=I8(s,this.renderer),w=this._withClusterVariable(v,c,d),x="visualVariables"in w&&w.visualVariables?w.visualVariables:[],$=new ln({symbol:r.symbol,visualVariables:x});return n.fields=[...s,...o],n.effectiveFeatureRenderer=w,n.effectiveClusterRenderer=$,n}if(!this.renderer)return r;const h=I8(s,this.renderer);n.fields=[...s,...o],n.renderer=h;const f=this._withClusterVariable(h,c,d);return n.effectiveFeatureRenderer=f,n.effectiveClusterRenderer=f,n}};return l([u({readOnly:!0,clonable:!1})],i.prototype,"aggregateGraphicOrigin",void 0),l([u(QRe)],i.prototype,"featureReduction",null),i=l([E("esri.layers.mixins.FeatureReductionLayer")],i),i};var LP;const ex=new Ze({asc:"ascending",desc:"descending"});var ry;let _p=(ry=class extends Z{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new LP({field:this.field,valueExpression:this.valueExpression,order:this.order})}},LP=ry,ry);l([u({type:String,json:{write:!0}})],_p.prototype,"field",void 0),l([u({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],_p.prototype,"valueExpression",void 0),l([u({type:ex.apiValues,json:{type:ex.jsonValues,read:ex.read,write:ex.write}})],_p.prototype,"order",void 0),_p=LP=l([E("esri.layers.support.OrderByInfo")],_p);function sLe(t,e,i){if(!t)return null;const r=t.find(s=>!!s.field);if(!r)return null;const n=new _p;return n.read(r,i),[n]}function oLe(t,e,i,r){const n=t.find(s=>!!s.field);n&&Ai(i,[n.toJSON()],e)}const aLe={type:[_p],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:sLe},write:{writer:oLe}}},lLe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([u(aLe)],i.prototype,"orderBy",void 0),i=l([E("esri.layers.mixins.OrderedLayer")],i),i};let Zv=class extends Se{constructor(e){super(e),this.updating=!1,this.status="unknown"}};l([u()],Zv.prototype,"updating",void 0),l([u()],Zv.prototype,"status",void 0),Zv=l([E("esri.layers.support.PublishingInfo")],Zv);const cLe=Symbol(),uLe=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const o=new Zv;return this._checkPublishingStatus(o),o}_checkPublishingStatus(s){let c=0;const d=async f=>{let m;s.updating=!0;try{m=await this.fetchPublishingStatus()}catch{m="unavailable"}m!=="published"&&m!=="unavailable"||(s.status==="publishing"&&this.refresh(),h.remove()),s.status=m,s.updating=!1,h.removed||(c=setTimeout(d,f,f+125))},h={removed:!1,remove(){this.removed=!0,clearTimeout(c)}};this.when().catch(()=>h.remove()),d(250),this.addHandles(h)}},e=cLe,n);return l([u({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=l([E("esri.layers.mixins.PublishableLayer")],r),r};let dLe=class extends Ew{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[r1](){return this.trackInfoProvider.trackInfo}},Ws=class extends Pe(Z){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};l([u({type:[Xt],json:{write:!0}})],Ws.prototype,"labelingInfo",void 0),l([u(lI)],Ws.prototype,"labelsVisible",void 0),l([u({types:b1,json:{write:!0}})],Ws.prototype,"renderer",void 0),l([u({type:Boolean,json:{write:!0}})],Ws.prototype,"visible",void 0),Ws=l([E("esri.layers.support.TrackPartInfo")],Ws);let kn=class extends Pe(Z){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new Ws({renderer:new ln({symbol:NT.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Ws({renderer:new ln({symbol:NT.clone()})}),this.trackLines=new Ws({renderer:new ln({symbol:VF.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const n=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Ai(r,n,i)}};l([u({type:Boolean,json:{write:!0}})],kn.prototype,"enabled",void 0),l([u({type:[Fr],json:{write:!0}})],kn.prototype,"fields",void 0),l([le("fields")],kn.prototype,"writeFields",null),l([u({type:Ws,json:{write:!0}})],kn.prototype,"latestObservations",void 0),l([u({type:Xs,json:{write:!0}})],kn.prototype,"maxDisplayDuration",void 0),l([u({type:Number,json:{write:!0}})],kn.prototype,"maxDisplayObservationsPerTrack",void 0),l([u(aI)],kn.prototype,"popupEnabled",void 0),l([u({type:Rh,json:{name:"popupInfo",write:!0}})],kn.prototype,"popupTemplate",void 0),l([u({type:Ws,json:{write:!0}})],kn.prototype,"previousObservations",void 0),l([u({type:Ws,json:{write:!0}})],kn.prototype,"trackLines",void 0),l([u({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],kn.prototype,"timeField",void 0),kn=l([E("esri.layers.support.TrackInfo")],kn);const pLe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new dLe(this),this.trackInfo=null}};return l([u({readOnly:!0,clonable:!1})],i.prototype,"trackGraphicOrigin",void 0),l([u({type:kn})],i.prototype,"trackInfo",void 0),i=l([E("esri.layers.mixins.TrackableLayer")],i),i},E8=new Ze({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Oa=class extends Pe(Z){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([u({json:{write:!0}})],Oa.prototype,"name",void 0),l([u({json:{write:!0}})],Oa.prototype,"description",void 0),l([u({json:{read:E8.read,write:E8.write}})],Oa.prototype,"drawingTool",void 0),l([u({json:{write:!0}})],Oa.prototype,"prototype",void 0),l([u({json:{write:!0}})],Oa.prototype,"thumbnail",void 0),Oa=l([E("esri.layers.support.FeatureTemplate")],Oa);let Aa=class extends Pe(Z){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=II(e[r]);return i}writeDomains(e,i){var n;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};l([u({json:{write:!0}})],Aa.prototype,"id",void 0),l([u({json:{write:!0}})],Aa.prototype,"name",void 0),l([u({json:{write:!0}})],Aa.prototype,"domains",void 0),l([oe("domains")],Aa.prototype,"readDomains",null),l([le("domains")],Aa.prototype,"writeDomains",null),l([u({type:[Oa],json:{write:!0}})],Aa.prototype,"templates",void 0),Aa=l([E("esri.layers.support.FeatureType")],Aa);let Su=class extends Pe(Z){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};l([Me({type:String,json:{write:!0}})],Su.prototype,"alias",void 0),l([Me({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Su.prototype,"name",void 0),l([Me({types:Iq,json:{write:!0}})],Su.prototype,"fieldFormat",void 0),Su=l([wi("esri.layers.support.FieldConfiguration")],Su);function hLe(t){const{popupTemplate:e,fieldsIndex:i}=t,r=e==null?void 0:e.fieldInfos;if(!(r!=null&&r.length)||!i)return;const n=[];for(const s of r){const{fieldName:o,label:a}=s,c=i.get(o);if(!c)continue;const d=a&&a!==c.alias?a:null,h=Mle(s,c);(d||h)&&n.push(new Su({name:c.name,alias:d,fieldFormat:h}))}return n.length?n:null}function fLe(t){const{fields:e}=t;if(!(e!=null&&e.length))return;const i=[];for(const r of e){const n=Ph(r)?ub(r):null;n&&i.push(new Su({name:r.name,fieldFormat:n}))}return i.length?i:null}function mLe(t,e){const{popupTemplate:i,fieldsIndex:r}=t;if(!i||!r)return;const n=gLe(t,e,i.fieldInfos);if(!n)return;const s=i.clone();return s.fieldInfos=n,s}function gLe(t,e,i){e??(e=[]),i=V(i)??[];let r=!1;const n=new Map;for(const s of e){const o=t.fieldsIndex.get(s.name);o&&n.set(o.name,s)}for(const s of i){const o=t.fieldsIndex.get(s.fieldName);if(!o)continue;const a=n.get(o.name);s.label=(a==null?void 0:a.alias)||o.alias,s.format=Ph(o)&&(a!=null&&a.fieldFormat)?CR(a.fieldFormat,o):null,r=!0,n.delete(o.name)}for(const s of n.values()){const o=yLe(t,s);o&&(i.push(o),r=!0)}return r?i:null}function yLe(t,e){const{name:i,alias:r,fieldFormat:n}=e,s=t.fieldsIndex.get(i);if(!s||!r&&!n)return;const o=r||s.alias,a=Ph(s)&&n?CR(n,s):null;return new Lk({fieldName:s.name,label:o,format:a,visible:!1,isEditable:sq(s,t)})}function vLe(){return{fields:{type:[cr],value:null,set:function(t){if(t&&B("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");ie.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return VT.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||ie.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return Pk(this.fieldsIndex,t)}}}}const lM=()=>ie.getLogger("esri.layers.support.labelingInfo"),bLe=/\[([^[\]]+)\]/gi;function M8(t,e,i){return t?t.map(r=>{var s;const n=new Xt;if(n.read(r,i),n.labelExpression){const o=e.fields||((s=e.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(bLe,(a,c)=>`[${wLe(c,o)}]`)}return n}):null}function wLe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const A8=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],_Le={esriGeometryPoint:A8,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:A8,esriGeometryEnvelope:null};function wGe(t,e){const i=[];for(const r of t){const n=r.labelPlacement,s=_Le[e];if(!r.symbol)return lM().warn("No ILabelClass symbol specified."),[];if(!s)return lM().error(new j("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(s.includes(n))i.push(r);else{const o=s[0];n&&lM().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const xLe="relationships/",SLe="expression/",$Le=/<br\s*\/*>/gi;let Qr=class extends Se{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||u1(()=>ph()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??Q(()=>import("./featureUtils-yar331Yx.js"),__vite__mapDeps([188,54]),import.meta.url).then(e=>this._featureUtils=e)}get calculatedExpressions(){var i;const e=new de;if(!this.expressionsUsedInTitle.length)return e;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){var i,r,n;let e=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof e!="string"?[]:(e=e.toLowerCase(),((n=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:n.filter(s=>e.includes(`{expression/${s.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){var r,n;const e=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const s of((n=this.calculatedExpressions)==null?void 0:n.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const a of o){const c=a.split("."),d=this.fieldsIndex.get(c.at(-1)??"");d&&e.add(d.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const s of i){const o=this.fieldsIndex.get(s);o&&e.add(o.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){var i,r;let e="";return this.displayField&&(e=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),e||(e=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const n=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(n)??""}async getTitles(e,i,r){var o;const n=new Map,s=(r==null?void 0:r.timeZone)??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,(o=this._arcadeTask)==null?void 0:o.promise]);r!=null&&r.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:c,workingTitle:d}=this,h=d&&c;i.forEach(f=>{const m=f.getObjectId()??f.attributes[e.objectIdField];let v=h?a({attributes:f.attributes,expressionAttributes:null,fieldInfoMap:c,globalAttributes:this._createFormattedAttributes(e,f,s).global,layer:e,text:d}):"";r!=null&&r.removeHTML&&(v=Ame.sanitize(v).replaceAll($Le," ")),n.set(m,v)})}catch{}return n}async _checkAndReQueryGraphics(e,i){const r=i.map(n=>n.getObjectId()??n.attributes[e.objectIdField]).filter(_r);if(r.length!==i.length)return i;if(i.some(n=>!sle(n,this.requiredFields))){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=r;const s=await e.queryFeatures(n);if((s==null?void 0:s.features.length)===i.length)return s.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=this.fieldsIndex.get(r.fieldName),s=(n==null?void 0:n.name)??r.fieldName;r.fieldName=s,i.set(s.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){var a,c;const n=((a=this.effectivePopupTemplate)==null?void 0:a.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((c=this._arcadeTask)!=null&&c.value)){const d=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const h of this.calculatedExpressions)try{s[`expression/${h.name}`]=h.func({vars:{$feature:d}})}catch{}}const o={...i.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return TR(e).filter(i=>!(i.startsWith(xLe)||i.startsWith(SLe)))}};l([u({readOnly:!0})],Qr.prototype,"_arcadeTask",null),l([u()],Qr.prototype,"_featureUtils",void 0),l([u({readOnly:!0})],Qr.prototype,"featureUtilsPromise",null),l([u({readOnly:!0})],Qr.prototype,"calculatedExpressions",null),l([u()],Qr.prototype,"displayField",void 0),l([u()],Qr.prototype,"effectivePopupTemplate",void 0),l([u()],Qr.prototype,"expressionsUsedInTitle",null),l([u()],Qr.prototype,"fieldsIndex",void 0),l([u()],Qr.prototype,"fieldInfoMap",null),l([u()],Qr.prototype,"fields",void 0),l([u()],Qr.prototype,"objectIdField",void 0),l([u()],Qr.prototype,"requiredFields",null),Qr=l([E("esri.layers.support.TitleCreator")],Qr);const _m=[];function TLe(t,e){if(E$(t.url??""))return!0;const{wkid:i}=e;for(const r of _m){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}_m.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),_m.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),_m.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),_m.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),_m.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function kLe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await PL(r.populateFromStyle());if(Lt(i),n.ok===!1){const s=n.error;e!=null&&e.messages&&e.messages.push(new Is("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function ILe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=CLe({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!o.length)return null;const a=RLe({titleBase:n,fields:i,displayField:t}),c=PLe();return new Rh({title:a,content:c,fieldInfos:o})}const ELe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):Dae(t,e);function MLe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(ALe),t}function ALe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:C8(t)?-1:C8(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function CLe(t,e){const i=e==null?void 0:e.visibleFieldNames;return MLe({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||LLe,sortDisabled:e==null?void 0:e.sortDisabled}).map(r=>new Lk({fieldName:r.name,isEditable:sq(r,t),label:r.alias,format:OLe(r),visible:ELe(r,{...t,visibleFieldNames:i})}))}function OLe(t){switch(t.type){case"small-integer":case"integer":return new vc({digitSeparator:!0,places:0});case"single":case"double":return new vc({digitSeparator:!0,places:2});case"string":return ale(t.name)?new vc({digitSeparator:!0,places:0}):void 0;default:return}}function PLe(){return[new zq,new fq]}function RLe(t){const e=Eae(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function C8(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const LLe=["geometry","blob","raster","guid","xml"],or="FeatureLayer";function tx(t,e){return new j("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function O8(t){return t&&t instanceof de}const cM=vLe();function uM(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let $e=class extends nPe(nLe(eOe(uLe(KCe(ZCe(bW(lLe(QW(pLe(KW(YW(UCe(EW(ZW(l1(qCe(VCe(Pe(Qt))))))))))))))))))){constructor(...t){super(...t),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new LCe(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=me.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=Tk(async(e,i,r)=>{const{save:n,saveAs:s}=await Q(()=>import("./featureLayerUtils-BwiPGThT.js"),__vite__mapDeps([320,315,321,319,33]),import.meta.url);switch(e){case 0:return n(this,i);case 1:return s(this,r,i)}})}destroy(){var t;(t=this.source)==null||t.destroy()}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){var r;const e=t!=null?t.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(e).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(Ho).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(e);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new j("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(e))}).then(()=>I3e(this,"load",t));return this.addResolvingPromise(i),Promise.resolve(this)}get _titleCreator(){const t=this._get("_titleCreator");return Ot(t),new Qr({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(t,e){return e=e.layerDefinition||e,gX(e,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var t;return!(this.loaded&&!((t=this.capabilities)!=null&&t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,i){return this._readEditingEnabled(e,!0,i)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,i,r){this._writeEditingEnabled(t,e,!0,r)}get effectiveEditingEnabled(){return A3e(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(t){if(this._hasMemorySource()||(this._override("fieldConfigurations",t),!this.loaded))return;const e=mLe(this,t);e&&this._set("popupTemplate",e)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden("fieldConfigurations")?this._get("fieldConfigurations"):hLe(this)||null}readIsTable(t,e){return(e=(e==null?void 0:e.layerDefinition)??e).type==="Table"||!e.geometryType}writeIsTable(t,e,i,r){r!=null&&r.writeLayerSchema&&Ai(i,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return sX(e.layerDefinition||e)}readObjectIdField(t,e){return oX(e.layerDefinition||e)}writePopupTemplate(t,e,i,r){t&&(e[i]=t.toJSON({...r,writeFieldFormat:!(r!=null&&r.writeLayerSchema)}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){oD(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,i){var n;e=e.layerDefinition||e;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if(r){const s=Aw(r,e,i)??void 0;return s||ie.getLogger(this).error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:i}),s}return HF(e,i)}get source(){return this._get("source")}set source(t){t||(t=null);const e=this._get("source");e!==t&&((Array.isArray(t)||t instanceof de)&&(t=new Wl({layer:this,items:t})),O8(e)&&this._resetMemorySource(e),O8(t)&&this._initMemorySource(t),this._set("source",t))}readSource(t,e){const i=Ki.fromJSON(e.featureSet);return new Wl({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(t,e){const i=e.editFieldsInfo,r=i==null?void 0:i.creatorField,n=i==null?void 0:i.editorField;return t=t==null?void 0:t.map(s=>Oa.fromJSON(s)),this._fixTemplates(t,r),this._fixTemplates(t,n),t}readTitle(t,e){var n,s,o;const i=((n=e.layerDefinition)==null?void 0:n.name)??e.name,r=e.title||((s=e.layerDefinition)==null?void 0:s.title);if(i){const a=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?Hce(this.url,i):i;let c=i;if(!c&&this.url){const d=Xa(this.url);d!=null&&(c=d.title)}return c?(this.sublayerTitleMode==="item-title-and-service-name"&&a&&a!==c&&(c=a+" - "+c),ZR(c)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(t,e){var i;return e.title||((i=e.layerDefinition)==null?void 0:i.name)}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(n=>n.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(t,e){t=(e=e.layerDefinition||e).types;const i=e.editFieldsInfo,r=i==null?void 0:i.creatorField,n=i==null?void 0:i.editorField;return t==null?void 0:t.map(s=>(s=Aa.fromJSON(s),this._fixTemplates(s.templates,r),this._fixTemplates(s.templates,n),s))}readVisible(t,e){var i;return((i=e.layerDefinition)==null?void 0:i.defaultVisibility)!=null?!!e.layerDefinition.defaultVisibility:e.visibility!=null?!!e.visibility:void 0}async addAttachment(t,e){const i=await l3e(this,t,e,or);return this.lastEditsEventDate=new Date,i}async updateAttachment(t,e,i){const r=await c3e(this,t,e,i,or);return this.lastEditsEventDate=new Date,r}async applyEdits(t,e){return u3e(this,t,e)}async uploadAssets(t,e){return d3e(this,t,e)}createFieldConfigurations(){return fLe(this)}createPopupTemplate(t){return ILe(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:e}=await p9(Q(()=>import("./FeatureLayerSource-BaYpvi7F.js"),__vite__mapDeps([322,74,79,323,324,325,98,91,326,327,60,51,328,329,109,110,111,112,12,13,11,192,10]),import.meta.url),t);return new e({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:t})}createQuery(){const t=_3e(this);t.dynamicDataSource=this.dynamicDataSource;const e=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=wx(this.definitionExpression,e);return t.where=i||"1=1",t}async deleteAttachments(t,e){const i=await p3e(this,t,e,or);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(t){return h3e(this,t,or)}async getFeatureTitle(t,e){return this._titleCreator.getTitle(this,t,e)}async getFeatureTitles(t,e){return this._titleCreator.getTitles(this,t,e)}getFeatureType(t){return cX(this.types,this.typeIdField,t)}getFieldAlias(t){var i;const e=this.getField(t);if(e)return((i=this.getFieldConfiguration(e.name))==null?void 0:i.alias)||e.alias}getFieldConfiguration(t){var e;return t=t.toLowerCase(),(e=this.fieldConfigurations)==null?void 0:e.find(i=>i.name.toLowerCase()===t)}getFieldDomain(t,e){var i;return S3e(this,t,e,((i=this.getField(t))==null?void 0:i.domain)??null)}async queryAttachments(t,e){return f3e(this,t,e,or)}async queryFeatures(t,e){const i=await this.load(),r=await i.source.queryFeatures(Fe.from(t)??i.createQuery(),e),n=this.graphicOrigin;if(r!=null&&r.features)for(const s of r.features)s.layer=s.sourceLayer=i,s.origin=n;return r}async queryObjectIds(t,e){return await m3e(this,t,e,or)}async queryFeatureCount(t,e){return g3e(this,t,e,or)}async queryExtent(t,e){return y3e(this,t,e,or)}async queryRelatedFeatures(t,e){return v3e(this,t,e,or)}async queryRelatedFeaturesCount(t,e){return b3e(this,t,e,or)}async queryPivot(t,e){var o;const{source:i,capabilities:r}=await this.load();if(!i.queryPivot||!((o=r==null?void 0:r.operations)!=null&&o.supportsQueryPivot))throw new j(or,"Layer source does not support queryPivot capability");const n=await Q(()=>import("./PivotQuery-BK1QHKE_.js").then(a=>a.P),[],import.meta.url),s=await i.queryPivot(n.default.from(t),e);if(s!=null&&s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryTopFeatures(t,e){var o;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((o=r==null?void 0:r.query)!=null&&o.supportsTopFeaturesQuery))throw new j(or,"Layer source does not support queryTopFeatures capability");const n=await Q(()=>import("./TopFeaturesQuery-2SSKedwO.js"),[],import.meta.url),s=await i.queryTopFeatures(n.default.from(t),e);if(s!=null&&s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryAttributeBins(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryAttributeBins)throw new j(or,"Layer source does not support queryAttributeBins capability");R3e(t,r,or);const n=await Q(()=>import("./AttributeBinsQuery-jV_zI3Ms.js"),__vite__mapDeps([245,48,58]),import.meta.url),s=await i.queryAttributeBins(n.default.from(t),e);if(s.features)for(const o of s.features)o.layer=o.sourceLayer=this;return s}async queryTopObjectIds(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new j(or,"Layer source does not support queryTopObjectIds capability");const n=await Q(()=>import("./TopFeaturesQuery-2SSKedwO.js"),[],import.meta.url);return(await i.queryTopObjectIds(n.default.from(t),e)).filter(ase)}async queryTopFeaturesExtent(t,e){var s;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((s=r==null?void 0:r.query)!=null&&s.supportsTopFeaturesQuery))throw new j(or,"Layer source does not support queryTopExtents capability");const n=await Q(()=>import("./TopFeaturesQuery-2SSKedwO.js"),[],import.meta.url);return i.queryTopExtents(n.default.from(t),e)}async queryTopFeatureCount(t,e){var s;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((s=r==null?void 0:r.query)!=null&&s.supportsTopFeaturesQuery))throw new j(or,"Layer source does not support queryFeatureCount capability");const n=await Q(()=>import("./TopFeaturesQuery-2SSKedwO.js"),[],import.meta.url);return i.queryTopCount(n.default.from(t),e)}read(t,e){const i=t.featureCollection;if((i||t.type==="Feature Collection")&&(this.resourceInfo=t),i){const{layers:r,showLegend:n}=i;(r==null?void 0:r.length)===1&&(super.read(r[0],e),n!=null&&super.read({showLegend:n},e))}super.read(t,e),(e==null?void 0:e.origin)==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){e={...e,origin:(e==null?void 0:e.origin)??void 0,writeLayerSchema:(e==null?void 0:e.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:n}=e;if(this.dynamicDataSource)return n==null||n.push(tx(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&r!=="tables")return n==null||n.push(tx(this,`a table source can only be written to tables, not ${r}`)),null;if(this._hasMemorySource())return n==null||n.push(tx(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&r==="tables")return n==null||n.push(tx(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new j(or,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var e;return!!this.loaded&&(((e=this.source)==null?void 0:e.type)==="memory"||TLe(this,t))}async save(t){return this._debouncedSaveOperations(0,t)}async saveAs(t,e){return this._debouncedSaveOperations(1,e,t)}_readEditingEnabled(t,e,i){var n;let r=(n=t.layerDefinition)==null?void 0:n.capabilities;return r?this._hasEditingCapability(r):(r=t.capabilities,e&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,i,r){var n,s;if(!t){const o=(s=(n=this.capabilities)==null?void 0:n.operations)!=null&&s.supportsSync?"Query,Sync":"Query";Ai("layerDefinition.capabilities",o,e),i&&!(r!=null&&r.writeLayerSchema)&&(e.capabilities=o)}}_fetchFirstValidLayerId(t){return Ft(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const i=e.data;if(i)return this.applyPreferredHost(i),this.findFirstValidLayerId(i)})}async initLayerProperties(t){var e;return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(e=this.portalItem)==null?void 0:e.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),oD(this.renderer,this.fieldsIndex),tq(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),kLe(this,{origin:"service"})}async hasDataChanged(){return w3e(this)}async fetchPublishingStatus(){const t=this.source;return t!=null&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){var e,i;const t=((e=this.parsedUrl)==null?void 0:e.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,e){t&&t.forEach(i=>{var n;const r=(n=i.prototype)==null?void 0:n.attributes;r&&e&&delete r[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new j("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new j("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this.addHandles([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};l([u({clonable:!1,readOnly:!0})],$e.prototype,"_titleCreator",null),l([u(_ye)],$e.prototype,"attributeTableTemplate",void 0),l([oe("service","capabilities")],$e.prototype,"readCapabilities",null),l([u({json:{origins:{"web-scene":{write:!1}},write:!0}})],$e.prototype,"charts",void 0),l([u({readOnly:!0})],$e.prototype,"createQueryVersion",null),l([u({json:{read:{source:"layerDefinition.copyrightText"}}})],$e.prototype,"copyright",void 0),l([u({json:{read:{source:"layerDefinition.displayField"}}})],$e.prototype,"displayField",void 0),l([u({types:Au,readOnly:!0})],$e.prototype,"defaultSymbol",void 0),l([u({type:Uo})],$e.prototype,"dynamicDataSource",void 0),l([u({type:Boolean})],$e.prototype,"editingEnabled",null),l([oe(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],$e.prototype,"readEditingEnabled",null),l([oe("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],$e.prototype,"readEditingEnabledFromWebMap",null),l([le(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],$e.prototype,"writeEditingEnabled",null),l([le("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],$e.prototype,"writeEditingEnabledToWebMap",null),l([u({readOnly:!0})],$e.prototype,"effectiveEditingEnabled",null),l([u({clonable:!1,readOnly:!0})],$e.prototype,"featureTitleFields",null),l([u({type:[Su],json:{name:"layerDefinition.fieldConfigurations",write:{overridePolicy(t,e,i){return{enabled:!(i!=null&&i.writeLayerSchema),ignoreOrigin:this.originIdOf(e)===1}}}}})],$e.prototype,"fieldConfigurations",null),l([u({...cM.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:uM}}}}})],$e.prototype,"fields",void 0),l([u(cM.fieldsIndex)],$e.prototype,"fieldsIndex",void 0),l([u({type:Co,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],$e.prototype,"formTemplate",void 0),l([u({json:{read:{source:"layerDefinition.extent"}}})],$e.prototype,"fullExtent",void 0),l([u({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:uM,writer(t,e,i){const r=t?mP.toJSON(t):null;r&&Ai(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:mP.read}}})],$e.prototype,"geometryType",void 0),l([u({readOnly:!0,clonable:!1})],$e.prototype,"graphicOrigin",void 0),l([u({json:{read:{source:"layerDefinition.hasM"}}})],$e.prototype,"hasM",void 0),l([u({json:{read:{source:"layerDefinition.hasZ"}}})],$e.prototype,"hasZ",void 0),l([u(vye)],$e.prototype,"id",void 0),l([u({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],$e.prototype,"infoFor3D",void 0),l([u({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],$e.prototype,"isTable",void 0),l([oe("service","isTable",["type","geometryType"]),oe("isTable",["layerDefinition.type","layerDefinition.geometryType"])],$e.prototype,"readIsTable",null),l([le("web-map","isTable")],$e.prototype,"writeIsTable",null),l([u(lI)],$e.prototype,"labelsVisible",void 0),l([u({type:[Xt],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:M8,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:M8,write:{layerContainerTypes:jt}}})],$e.prototype,"labelingInfo",void 0),l([u((()=>{const t=V(yye);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Ai(r,tI(e),i)}}},t})())],$e.prototype,"opacity",void 0),l([u(TW)],$e.prototype,"legendEnabled",void 0),l([u({type:["show","hide"],json:(()=>{const t=V(IW.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],$e.prototype,"listMode",void 0),l([oe("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],$e.prototype,"readGlobalIdField",null),l([u({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:uM}}}}})],$e.prototype,"objectIdField",void 0),l([oe("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],$e.prototype,"readObjectIdField",null),l([u({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:jt}}})],$e.prototype,"operationalLayerType",void 0),l([u(cM.outFields)],$e.prototype,"outFields",void 0),l([u({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],$e.prototype,"path",void 0),l([u(aI)],$e.prototype,"popupEnabled",void 0),l([u({type:Rh,json:{name:"popupInfo",write:!0}})],$e.prototype,"popupTemplate",void 0),l([le("popupTemplate")],$e.prototype,"writePopupTemplate",null),l([u({readOnly:!0})],$e.prototype,"defaultPopupTemplate",null),l([u({types:b1,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:HRe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:jt,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:jt})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:jt})}}})],$e.prototype,"renderer",null),l([oe("service","renderer",["drawingInfo.renderer","defaultSymbol"]),oe("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],$e.prototype,"readRenderer",null),l([u()],$e.prototype,"resourceInfo",void 0),l([u((()=>{const t=V(mye);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],$e.prototype,"screenSizePerspectiveEnabled",void 0),l([u({clonable:!1})],$e.prototype,"source",null),l([oe("portal-item","source",["featureSet"]),oe("web-map","source",["featureSet"])],$e.prototype,"readSource",null),l([u({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],$e.prototype,"spatialReference",void 0),l([u({type:Number})],$e.prototype,"subtypeCode",void 0),l([u({type:[Oa]})],$e.prototype,"templates",void 0),l([oe("templates",["editFieldsInfo","creatorField","editorField","templates"])],$e.prototype,"readTemplates",null),l([u({type:ar})],$e.prototype,"timeInfo",void 0),l([u()],$e.prototype,"title",void 0),l([oe("service","title",["name"]),oe("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],$e.prototype,"readTitle",null),l([oe("web-map","title",["layerDefinition.name","title"])],$e.prototype,"readTitleFromWebMap",null),l([u({type:String})],$e.prototype,"sublayerTitleMode",void 0),l([u({json:{read:!1}})],$e.prototype,"type",void 0),l([u({type:String})],$e.prototype,"typeIdField",void 0),l([oe("service","typeIdField"),oe("typeIdField",["layerDefinition.typeIdField"])],$e.prototype,"readTypeIdField",null),l([u({type:[Aa]})],$e.prototype,"types",void 0),l([oe("service","types",["types"]),oe("types",["layerDefinition.types"])],$e.prototype,"readTypes",null),l([u({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:jt}}}}})],$e.prototype,"visible",void 0),l([oe("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],$e.prototype,"readVisible",null),$e=l([E("esri.layers.FeatureLayer")],$e);const xGe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return $e}},Symbol.toStringTag,{value:"Module"}));let Nl=class extends Z{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};l([u({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],Nl.prototype,"moment",void 0),l([u({type:Boolean,json:{write:!0}})],Nl.prototype,"fullUpdate",void 0),l([u({type:Boolean,json:{write:!0}})],Nl.prototype,"validateErrorsCreated",void 0),l([u({type:Boolean,json:{write:!0}})],Nl.prototype,"exceededTransferLimit",void 0),l([u({type:[Object],json:{write:!0}})],Nl.prototype,"serviceEdits",void 0),l([u({type:[Object],json:{write:!0}})],Nl.prototype,"discoveredSubnetworks",void 0),Nl=l([E("esri.rest.networks.support.ValidateNetworkTopologyResult")],Nl);const FLe=Nl,NLe=Wi()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let au=class extends FLe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Ft(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(gt()),this.checkJobStatus().then(a=>{const{status:c}=a;switch(this.status=c,c){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([u()],au.prototype,"editsResolver",void 0),l([u({type:String,json:{write:!0}})],au.prototype,"statusUrl",void 0),l([Ie(NLe)],au.prototype,"status",void 0),l([u({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],au.prototype,"submissionTime",void 0),l([u({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],au.prototype,"lastUpdatedTime",void 0),au=l([E("esri.networks.support.TopologyValidationJobInfo")],au);const DLe=au;function zLe(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=QX(t),o=[];switch(t.ruleType){case 2:case 3:i==="from"&&Go(e,r,!1)?o.push(s):i==="to"&&Go(e,s,!1)&&o.push(r);break;case 4:case 1:Go(e,r,!0)?o.push(s):Go(e,s,!0)&&o.push(r);break;case 5:n&&(Go(e,n,!0)?(o.push(r),o.push(s)):(Go(e,r,!0)||Go(e,s,!0))&&o.push(n));break;default:return[]}return o}function Jv(t,e,i){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=QX(t);switch(t.ruleType){case 2:case 3:return ix(e,i,r,s,!1,!1);case 4:case 1:return ix(e,i,r,s,!0,!0);case 5:return ix(e,i,r,n,!0,!0)||ix(e,i,s,n,!0,!0);default:return!1}}function ix(t,e,i,r,n,s){if(!i||!r)return!1;const o=Go(t,i,s),a=Go(e,r,s);if(n){const c=Go(t,r,s),d=Go(e,i,s);return o&&a||c&&d}return o&&a}function jLe(t,e){var n;const i=(n=t.terminal)==null?void 0:n.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function Go(t,e,i){var s,o,a,c;const{assetGroupCode:r,assetTypeCode:n}=t;return("layerId"in t?t.layerId===((s=e.networkSource)==null?void 0:s.layerId):t.networkSourceId===((o=e.networkSource)==null?void 0:o.sourceId))&&(r==null||r===((a=e.assetGroup)==null?void 0:a.assetGroupCode))&&(n==null||n===((c=e.assetType)==null?void 0:c.assetTypeCode))&&(!i||!("terminalId"in t)||jLe(e,t))}function QX(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function Tf(t){var n;let e=null,i=null,r=null;if(Z9(t))e=FP(t),[i,r]=VLe(t);else if(_u(t)){e=((n=t.parent)==null?void 0:n.layerId)??null;const[s]=UT(t);s===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function FP(t){var r;const{sourceLayer:e}=t;let i;return AW(e)?i=e.layerId:_u(e)&&(i=(r=e.parent)==null?void 0:r.layerId),i??null}function VLe(t){const[e,i]=UT(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function UT(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function P8(t,e){if(t==="Utility Network Layer"){const{default:i}=await Q(()=>Promise.resolve().then(()=>iFe),void 0,import.meta.url);return new i({layerUrl:e})}return null}async function ULe(t){var o;let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof Ge||(e={...e,portalItem:new Ge(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new j("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await Ft(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=n.data.type)!=null&&o.includes(s))return P8(n.data.type,r);if(n.data.layers){const a=n.data.layers.find(c=>c.type.includes(s));if(a){const c=`${r}/${a.id}`;return P8(a.type,c)}}return null}let ui=class extends l1(zh){static fromPortalItem(t){return ULe(t)}constructor(t){super(t),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this._historicMoment=null,this._gdbVersion=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=e=>{const{serviceUrl:i,gdbVersion:r,result:n}=e,s=i===this.featureServiceUrl,o=Fb(i,r,this.gdbVersion);s&&o&&n.then(a=>{PS(i,r)&&(this.historicMoment=a.historicMoment)})},this._updateMomentHandler=e=>{const{serviceUrl:i,gdbVersion:r,moment:n}=e,s=i===this.featureServiceUrl,o=Fb(i,r,this.gdbVersion);s&&o&&(this.historicMoment=n)},this.when().then(()=>{this.addHandles([VQ(this._applyEditsHandler),UQ(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(t=>{hr(t)||ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}get loaded(){return super.loaded}get datasetName(){var t;return((t=this.dataElement)==null?void 0:t.name)??null}get owner(){var t;return((t=this.dataElement)==null?void 0:t.userIdentity)??null}get schemaGeneration(){var t;return((t=this.dataElement)==null?void 0:t.schemaGeneration)??null}get parsedUrl(){return zi(this.layerUrl)}get featureServiceUrl(){return Xa(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Xa(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}get gdbVersion(){return this._gdbVersion}set gdbVersion(t){this._gdbVersion=t}get historicMoment(){return this._historicMoment}set historicMoment(t){this._historicMoment=t}async load(t){return this.addResolvingPromise(this._load(t)),this}async _load(t){await Promise.all([this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),t),this._fetchLayerMetaData(this.layerUrl,t)])}getLayerIdBySourceId(t){if(!this.dataElement)return null;const e=this._layerIdBySourceId.get(t);if(e!=null)return e;const i=this.dataElement.domainNetworks,r=this._traverseNetworkSources(i,this._layerIdBySourceId,"sourceId","layerId",t);return r>=0?r:null}getSourceIdByLayerId(t){if(!this.dataElement)return null;const e=this._sourceIdByLayerId.get(t);if(e!=null)return e;const i=this.dataElement.domainNetworks,r=this._traverseNetworkSources(i,this._sourceIdByLayerId,"layerId","sourceId",t);return r>=0?r:null}getObjectIdsFromElements(t){const e=[],i=new Map;for(const n of t){const s=this.getLayerIdBySourceId(n.networkSourceId);if(s==null)continue;let o=i.get(s);o===void 0&&(o=[]),o.push(n.objectId),i.set(s,o)}const r=this.featureServiceUrl;return i.forEach((n,s)=>e.push({layerUrl:`${r}/${s}`,objectIds:n})),e}async queryNamedTraceConfigurations(t,e){var o;const[{queryNamedTraceConfigurations:i},{default:r}]=await Promise.all([Q(()=>import("./queryNamedTraceConfigurations-oxca4p5q.js"),[],import.meta.url),Q(()=>import("./QueryNamedTraceConfigurationsParameters-CQv-enzh.js"),[],import.meta.url)]),n=this.networkServiceUrl,s=r.from(t);return(o=await i(n,s,{...e}))==null?void 0:o.namedTraceConfigurations}async validateTopology(t,e){var d,h,f;if(!t.validateArea)throw new j("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:i},{default:r}]=await Promise.all([Q(()=>import("./validateNetworkTopology-CQiPcFyU.js"),[],import.meta.url),Q(()=>import("./ValidateNetworkTopologyParameters-BFDLbUwL.js"),[],import.meta.url)]),n=r.from(t);PS(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionID=G3,await CV(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionID=null,n.gdbVersion=this.gdbVersion;const s=this.networkServiceUrl,o=this.featureServiceUrl,a=OV(o,null,this.gdbVersion,!0),c=await i(s,n,{...e});if(c!=null&&c.serviceEdits){const m=[];for(const v of c.serviceEdits){const{editedFeatures:w}=v,x=w!=null&&w.spatialReference?new me(w.spatialReference):null;m.push({layerId:v.layerId,editedFeatures:{adds:((d=w==null?void 0:w.adds)==null?void 0:d.map($=>rx($,x)))||[],updates:((h=w==null?void 0:w.updates)==null?void 0:h.map($=>({original:rx($[0],x),current:rx($[1],x)})))||[],deletes:((f=w==null?void 0:w.deletes)==null?void 0:f.map($=>rx($,x)))||[],spatialReference:x}})}a.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:m,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(t,e){let i=null;if(!t.validateArea)throw new j("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const d=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");i=(await Ft(d,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:r},{default:n}]=await Promise.all([Q(()=>import("./validateNetworkTopology-CQiPcFyU.js"),[],import.meta.url),Q(()=>import("./ValidateNetworkTopologyParameters-BFDLbUwL.js"),[],import.meta.url)]),s=n.from(t);PS(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=G3,await CV(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion||i;const o=this.networkServiceUrl,a=this.featureServiceUrl?OV(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await r(o,s,{...e});return new DLe({statusUrl:c,editsResolver:a})}getSourceTypeById(t){if(!this.dataElement)return null;for(const e of this.dataElement.domainNetworks)for(const i of[e.edgeSources??[],e.junctionSources??[]])for(const r of i)if(r.sourceId===t)return i===e.edgeSources?"edge":"junction";return null}_traverseNetworkSources(t,e,i,r,n){for(const s of t)for(const o of[s.edgeSources??[],s.junctionSources??[]])for(const a of o)if(a[i]===n)return e.set(n,a[r]),a[r];return-1}async _fetchLayerMetaData(t,e){const i=await Ft(t,{responseType:"json",query:{f:"json"},...e});this.sourceJSON=i.data,this.read(i.data,{origin:"service"})}async _fetchDataElement(t,e,i){if(this.dataElement)return;const r=await Ft(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([e]),f:"json"},...i}).then(n=>{var s;return(s=n.data.layerDataElements)==null?void 0:s[0]});r&&this.read(r,{origin:"service"})}};function rx(t,e){return new qt({attributes:t.attributes,geometry:ta({...t.geometry,spatialReference:e})})}l([u({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],ui.prototype,"id",void 0),l([u({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],ui.prototype,"title",void 0),l([u({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],ui.prototype,"layerUrl",void 0),l([u({type:Object,json:{origins:{service:{read:!0}},read:!1}})],ui.prototype,"dataElement",void 0),l([u({type:Ke,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],ui.prototype,"fullExtent",void 0),l([u({type:me,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],ui.prototype,"spatialReference",void 0),l([u({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],ui.prototype,"type",void 0),l([u({readOnly:!0})],ui.prototype,"datasetName",null),l([u({readOnly:!0})],ui.prototype,"owner",null),l([u({readOnly:!0})],ui.prototype,"schemaGeneration",null),l([u({readOnly:!0})],ui.prototype,"parsedUrl",null),l([u({readOnly:!0})],ui.prototype,"featureServiceUrl",null),l([u({readOnly:!0})],ui.prototype,"networkServiceUrl",null),l([u({readOnly:!0})],ui.prototype,"layerId",null),l([u()],ui.prototype,"sourceJSON",void 0),l([u({readOnly:!0})],ui.prototype,"networkSystemLayers",null),l([u({type:String})],ui.prototype,"gdbVersion",null),l([u({type:Date})],ui.prototype,"historicMoment",null),l([u()],ui.prototype,"_historicMoment",void 0),l([u()],ui.prototype,"_gdbVersion",void 0),ui=l([E("esri.networks.Network")],ui);const qLe=ui;let lu=class extends $c(zh){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Ft}initialize(){}async load(e){const i=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const n=new Map,[s,o]=UT(e.sourceLayer);if(!s||!o)return"";const a=Tf(e),c=Tf(i);r.forEach(h=>{const{type:f,direction:m}=h;this._getRulesForAssociationType(f).forEach(v=>{zLe(v,a,m).filter(w=>{var x;return((x=w.networkSource)==null?void 0:x.layerId)===c.layerId}).forEach(w=>{var T,C;const x=(T=w.assetGroup)==null?void 0:T.assetGroupCode,$=(C=w.assetType)==null?void 0:C.assetTypeCode;if(x!=null&&$!=null){const P=n.get(x)??new Set;P.add($),n.set(x,P)}})})});let d=[];return this._mergeAssetCodes(n).forEach((h,f)=>{const m=`${s} IN (${f})`,v=use(o,[...h]);m&&v&&d.push(wx(m,v))}),d.length>1&&(d=d.map(h=>`(${h})`)),d.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return FP(e)==null?[]:i.filter(n=>this.canAssociateFeatures(e,n,r))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=Tf(e),s=Tf(i);return r.some(o=>{const{type:a,direction:c}=o;return this._getRulesForAssociationType(a).some(d=>c==="to"?Jv(d,s,n):Jv(d,n,s))})}getLayersCanAssociateWith(e,i,r){return FP(e)==null?[]:i.filter(n=>this.canAssociateFeatureToLayer(e,n,r))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=Tf(e),s=Tf(i);return r.some(o=>{const{type:a,direction:c}=o;return this._getRulesForAssociationType(a).some(d=>c==="to"?Jv(d,s,n):Jv(d,n,s))})}getFeatureSQL(e,i){var d,h;const r=e.layerId.toString(),n=(d=e.fieldsIndex)==null?void 0:d.normalizeFieldName("assetGroup"),s=(h=e.fieldsIndex)==null?void 0:h.normalizeFieldName("assetType"),o=n?i.attributes[n]:null,a=s?i.attributes[s]:null,c=this.rulesHash[r];if(c){const f=c.assetGroupHash[o];if(f)return f.assetTypeHash[a]||null}return null}_initializeRulesTable(){var r,n,s,o,a,c,d,h,f,m,v;const e={},i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const w of this.rules){if(w.ruleType===3){this.rulesCategorized.attachment.push(w);continue}if(w.ruleType===2){this.rulesCategorized.containment.push(w);continue}if(w.ruleType===1){this.rulesCategorized.connectivity.push(w);continue}this.rulesCategorized.connectivity.push(w);let x=[[0,1],[1,0]];w.ruleType===5&&(x=[[0,2],[2,0],[1,2],[2,1]]);for(const $ of x){const T=$.shift(),C=$.shift();let P=!1;switch(w.ruleType){case 5:P=T===0||T===1;break;case 4:P=T===1}const L=i[T],D=((r=w[L.networkSourceId])==null?void 0:r.layerId.toString())??"",q=(s=(n=w[L.assetGroupId])==null?void 0:n.assetGroupCode)==null?void 0:s.toString(),F=w[L.assetTypeId],ee=(o=F==null?void 0:F.assetTypeCode)==null?void 0:o.toString(),ae=i[C],ne=((a=w[ae.networkSourceId])==null?void 0:a.layerId.toString())??"",ue=(d=(c=w[ae.assetGroupId])==null?void 0:c.assetGroupCode)==null?void 0:d.toString(),X=w[ae.assetTypeId],J=(h=X==null?void 0:X.assetTypeCode)==null?void 0:h.toString(),H=e[D]??{assetGroupHash:{}};if(!(q&&ee&&ue&&J))continue;const ge=H.assetGroupHash[q]??{assetTypeHash:{}},be=ge.assetTypeHash[ee]??{};if(be[ne]=be[ne]??{},P){be[D]=be[D]??{};const we=wx(`assetgroup = ${q}`,`assettype = ${ee}`);(X==null?void 0:X.connectivityPolicy)==="esriNECPEndVertex"?be[D].endVertex=(f=be[D])!=null&&f.endVertex?`${be[D].endVertex}`:`(${we})`:be[D].anyVertex=be[D].anyVertex?`${be[D].anyVertex}`:`(${we})`}const Ee=wx(`assetgroup = ${ue}`,`assettype = ${J}`);(X==null?void 0:X.connectivityPolicy)==="esriNECPEndVertex"?be[ne].endVertex=(m=be[ne])!=null&&m.endVertex?FM(be[ne].endVertex,Ee):`(${Ee})`:be[ne].anyVertex=(v=be[ne])!=null&&v.anyVertex?FM(be[ne].anyVertex,Ee):`(${Ee})`,ge.assetTypeHash[ee]=be,H.assetGroupHash[q]=ge,e[D]=H}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===1);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===4||r.ruleType===5);default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[n,s]of e){const o=new Set([n]);for(const[c,d]of e)n!==c&&!r.has(c)&&this._areSetsEqual(s,d)&&(o.add(c),r.add(c));const a=Array.from(o).sort().join(",");i.set(a,s)}return i}_canSupportAssociations(e){return e.every(i=>{const r=Z9(i)?i.sourceLayer:i,[n,s]=UT(r);return n!=null&&s!=null})}};l([u({constructOnly:!0})],lu.prototype,"rulesLayer",void 0),l([u({constructOnly:!0})],lu.prototype,"rules",void 0),l([u({readOnly:!0})],lu.prototype,"rulesHash",void 0),l([u()],lu.prototype,"rulesCategorized",void 0),l([u({constructOnly:!0})],lu.prototype,"request",void 0),lu=l([E("esri.networks.RulesTable")],lu);let Ds=class extends Z{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};l([u({type:[Object],json:{write:!0}})],Ds.prototype,"conditionBarriers",void 0),l([u({type:[Object],json:{write:!0}})],Ds.prototype,"outputConditions",void 0),l([u({type:[Object],json:{write:!0}})],Ds.prototype,"functions",void 0),l([u({type:[Object],json:{write:!0}})],Ds.prototype,"functionBarriers",void 0),l([u({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Ds.prototype,"traversabilityScope",void 0),l([u({type:String,json:{write:!0}})],Ds.prototype,"shortestPathNetworkAttributeName",void 0),l([u({type:Boolean,json:{write:!0}})],Ds.prototype,"includeBarriers",void 0),l([u({type:Boolean,json:{write:!0}})],Ds.prototype,"validateConsistency",void 0),l([u({type:Boolean,json:{write:!0}})],Ds.prototype,"ignoreBarriersAtStartingPoints",void 0),Ds=l([E("esri.networks.support.TraceConfiguration")],Ds);const eN=Ds,dM=new Ze({Clean:"clean",Dirty:"dirty"}),Du=new Ze({Physical:"physical",Virtual:"virtual"}),pM=new Ze({"Start and end":"start-and-end",Start:"start",Midspan:"midspan",End:"end"}),nx=new Ze({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"}),sx=new Ze({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),BLe="{00000000-0000-0000-0000-000000000000}",GLe=new Ze({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),HLe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},IGe=new Ze({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let zt=class extends Pe(eN){constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};l([u({type:[Object],json:{write:!0}})],zt.prototype,"filterBarriers",void 0),l([u({type:String,json:{write:!0}})],zt.prototype,"arcadeExpressionBarrier",void 0),l([u({type:String,json:{write:!0}})],zt.prototype,"circuitName",void 0),l([u({type:String,json:{write:!0}})],zt.prototype,"domainNetworkName",void 0),l([u({type:String,json:{write:!0}})],zt.prototype,"filterBitsetNetworkAttributeName",void 0),l([u({type:[Object],json:{write:!0}})],zt.prototype,"filterFunctionBarriers",void 0),l([u({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],zt.prototype,"filterScope",void 0),l([u({type:Boolean,json:{write:!0}})],zt.prototype,"includeContainers",void 0),l([u({type:Boolean,json:{write:!0}})],zt.prototype,"includeContent",void 0),l([u({type:Boolean,json:{write:!0}})],zt.prototype,"includeIsolated",void 0),l([u({type:Boolean,json:{write:!0}})],zt.prototype,"includeStructures",void 0),l([u({type:Boolean,json:{write:!0}})],zt.prototype,"allowIndeterminateFlow",void 0),l([u({type:Boolean,json:{write:!0}})],zt.prototype,"includeUpToFirstSpatialContainer",void 0),l([u({type:Boolean,json:{write:!0}})],zt.prototype,"inferConnectivity",void 0),l([u({type:Number,json:{write:!0}})],zt.prototype,"maxHops",void 0),l([u({type:Object,json:{write:!0}})],zt.prototype,"nearestNeighbor",void 0),l([u({type:Number,json:{write:!0}})],zt.prototype,"numPaths",void 0),l([u({type:[Object],json:{write:!0}})],zt.prototype,"outputFilterCategories",void 0),l([u({type:[Object],json:{write:!0}})],zt.prototype,"outputFilters",void 0),l([u({type:[Object],json:{write:!0}})],zt.prototype,"propagators",void 0),l([u({type:String,json:{write:!0}})],zt.prototype,"subnetworkName",void 0),l([u({type:String,json:{write:!0}})],zt.prototype,"targetTierName",void 0),l([u({type:String,json:{write:!0}})],zt.prototype,"diagramTemplateName",void 0),l([u({type:String,json:{write:!0}})],zt.prototype,"tierName",void 0),l([u({type:Boolean,json:{write:!0}})],zt.prototype,"validateLocatability",void 0),zt=l([E("esri.networks.support.UNTraceConfiguration")],zt);const WLe=zt;let In=class extends FH{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?WLe.fromJSON(e):eN.fromJSON(e)}};l([u({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],In.prototype,"globalId",void 0),l([u({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],In.prototype,"title",void 0),l([u({type:eN,json:{origins:{service:{read:!0,write:!0}},read:!1}})],In.prototype,"traceConfiguration",void 0),l([oe("service","traceConfiguration")],In.prototype,"readTraceConfiguration",null),l([u({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],In.prototype,"creationDate",void 0),l([u({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],In.prototype,"creator",void 0),l([u({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],In.prototype,"description",void 0),l([u({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],In.prototype,"minStartingPoints",void 0),l([u({json:{origins:{service:{read:!0,write:!0}},read:!1}})],In.prototype,"resultTypes",void 0),l([u({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],In.prototype,"tags",void 0),l([u({type:sx.apiValues,json:{type:sx.jsonValues,origins:{service:{read:sx.read,write:sx.write}},read:!1}})],In.prototype,"traceType",void 0),In=l([E("esri.networks.support.NamedTraceConfiguration")],In);const ZLe=In;function JLe(t){var T,C,P,L,D,q,F,ee,ae,ne,ue,X,J,H,ge;const e=t==null?void 0:t.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",n="fromterminalid",s="fromfirstunit",o="fromnumunits",a="tonetworksourceid",c="toglobalid",d="toterminalid",h="tofirstunit",f="tonumunits",m="status",v="associationtype",w="iscontentvisible",x="percentalong",$="globalid";return{fromNetworkSourceId:((T=e==null?void 0:e.get(i))==null?void 0:T.name)??i,fromGlobalId:((C=e==null?void 0:e.get(r))==null?void 0:C.name)??r,fromTerminalId:((P=e==null?void 0:e.get(n))==null?void 0:P.name)??n,fromFirstUnit:((L=e==null?void 0:e.get(s))==null?void 0:L.name)??s,fromNumUnits:((D=e==null?void 0:e.get(o))==null?void 0:D.name)??o,toNetworkSourceId:((q=e==null?void 0:e.get(a))==null?void 0:q.name)??a,toGlobalId:((F=e==null?void 0:e.get(c))==null?void 0:F.name)??c,toTerminalId:((ee=e==null?void 0:e.get(d))==null?void 0:ee.name)??d,toFirstUnit:((ae=e==null?void 0:e.get(h))==null?void 0:ae.name)??h,toNumUnits:((ne=e==null?void 0:e.get(f))==null?void 0:ne.name)??f,status:((ue=e==null?void 0:e.get(m))==null?void 0:ue.name)??m,associationType:((X=e==null?void 0:e.get(v))==null?void 0:X.name)??v,isContentVisible:((J=e==null?void 0:e.get(w))==null?void 0:J.name)??w,percentAlong:((H=e==null?void 0:e.get(x))==null?void 0:H.name)??x,globalId:((ge=e==null?void 0:e.get((t==null?void 0:t.globalIdField)??$))==null?void 0:ge.name)??$}}function AGe(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const n=e.fieldsIndex.get("assetgroup"),s=e.fieldsIndex.get("assettype");return[n==null?void 0:n.name,s==null?void 0:s.name].filter(o=>o!=null)}return[]}let ps=class extends Se{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTable=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var e;(e=this.associationsTable)==null||e.destroy()}async loadAssociationsTable(e){if(!this.associationsTable){const{associationsTableUrl:i}=this;if(!i)throw new j("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new $e({url:i})}return await this.associationsTable.load(e),this.associationsTable}async loadSubnetworksTable(e){if(!this.subnetworksTable){const{subnetworksTableUrl:i}=this;if(!i)throw new j("utility-network-system-layers:missing-subnetworks-table-url","Unable to load the subnetworks table, as the `subnetworksTableUrl` is not set.");this.subnetworksTable=new $e({url:i})}return await this.subnetworksTable.load(e),this.subnetworksTable}};l([u({constructOnly:!0})],ps.prototype,"rulesTableId",void 0),l([u({constructOnly:!0})],ps.prototype,"rulesTableUrl",void 0),l([u()],ps.prototype,"subnetworksTable",void 0),l([u({constructOnly:!0})],ps.prototype,"subnetworksTableId",void 0),l([u({constructOnly:!0})],ps.prototype,"subnetworksTableUrl",void 0),l([u({constructOnly:!0})],ps.prototype,"dirtyAreasLayerId",void 0),l([u({constructOnly:!0})],ps.prototype,"dirtyAreasLayerUrl",void 0),l([u()],ps.prototype,"associationsTable",void 0),l([u({constructOnly:!0})],ps.prototype,"associationsTableId",void 0),l([u({constructOnly:!0})],ps.prototype,"associationsTableUrl",void 0),ps=l([E("esri.networks.support.NetworkSystemLayers")],ps);let xm=class extends Z{constructor(e){super(e),this.id=null,this.name=null}};l([u({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],xm.prototype,"id",void 0),l([u({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],xm.prototype,"name",void 0),l([u({type:Boolean,json:{write:!0}})],xm.prototype,"isUpstreamTerminal",void 0),xm=l([E("esri.networks.support.Terminal")],xm);const YLe=xm,ox=new Ze({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Kl=class extends Z{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};l([u({type:String,json:{write:!0}})],Kl.prototype,"defaultConfiguration",void 0),l([u({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Kl.prototype,"id",void 0),l([u({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Kl.prototype,"name",void 0),l([u({type:[YLe],json:{write:!0}})],Kl.prototype,"terminals",void 0),l([u({type:ox.apiValues,json:{type:ox.jsonValues,read:ox.read,write:ox.write}})],Kl.prototype,"traversabilityModel",void 0),Kl=l([E("esri.networks.support.TerminalConfiguration")],Kl);let An=class extends Z{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};l([u({json:{write:!1}})],An.prototype,"type",void 0),l([u({type:Number,json:{write:!0}})],An.prototype,"assetGroupCode",void 0),l([u({type:Number,json:{write:!0}})],An.prototype,"assetTypeCode",void 0),l([u({type:String,json:{write:!0}})],An.prototype,"globalId",void 0),l([u({type:Number,json:{write:!0}})],An.prototype,"networkSourceId",void 0),l([u({type:Number,json:{write:!0}})],An.prototype,"objectId",void 0),l([u({type:Number,json:{write:!0}})],An.prototype,"positionFrom",void 0),l([u({type:Number,json:{write:!0}})],An.prototype,"positionTo",void 0),l([u({type:Number,json:{write:!0}})],An.prototype,"terminalId",void 0),An=l([E("esri.rest.networks.support.NetworkElement")],An);let Js=class extends An{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};l([u({json:{write:!1}})],Js.prototype,"type",void 0),l([u({json:{write:!0}})],Js.prototype,"firstUnit",void 0),l([u({json:{write:!0}})],Js.prototype,"numUnits",void 0),Js=l([E("esri.rest.networks.support.TelecomNetworkElement")],Js);let Dl=class extends Z{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new Js({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new Js({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};l([u({type:Js,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],Dl.prototype,"edgeElement",void 0),l([oe("edgeElement")],Dl.prototype,"readEdgeElement",null),l([le("edgeElement")],Dl.prototype,"writeEdgeElement",null),l([u({type:Js,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],Dl.prototype,"junctionElement",void 0),l([oe("junctionElement")],Dl.prototype,"readJunctionElement",null),l([le("junctionElement")],Dl.prototype,"writeJunctionElement",null),Dl=l([E("esri.networks.support.CircuitPathConnectivityElement")],Dl);const KLe=Dl;let Po=class extends Pe(Z){constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null,this.networkSourceId=null}};l([u({type:String,json:{write:!0}})],Po.prototype,"globalId",void 0),l([u({type:Boolean,json:{write:!0}})],Po.prototype,"isFilterBarrier",void 0),l([u({type:Number,json:{write:!0}})],Po.prototype,"percentAlong",void 0),l([u({type:Number,json:{write:!0}})],Po.prototype,"terminalId",void 0),l([u({type:nx.apiValues,json:{type:nx.jsonValues,read:{reader:nx.read,source:"traceLocationType"},write:{writer:nx.write,target:"traceLocationType"}}})],Po.prototype,"type",void 0),l([u({type:Number,json:{write:!0}})],Po.prototype,"firstUnit",void 0),l([u({type:Number,json:{write:!0}})],Po.prototype,"numUnits",void 0),l([u({type:Number})],Po.prototype,"networkSourceId",void 0),Po=l([E("esri.rest.networks.support.TraceLocation")],Po);const R8=Po;let zl=class extends Z{constructor(e){super(e),this.pathId=null,this.order=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};l([u({type:Number,json:{write:!0}})],zl.prototype,"pathId",void 0),l([u({type:Number,json:{write:!0}})],zl.prototype,"order",void 0),l([u({type:R8,json:{write:!0}})],zl.prototype,"startingPoint",void 0),l([u({type:R8,json:{write:!0}})],zl.prototype,"stoppingPoint",void 0),l([u({type:[KLe],json:{write:!0}})],zl.prototype,"pathConnectivity",void 0),l([u({type:hi,json:{write:!0}})],zl.prototype,"geometry",void 0),zl=l([E("esri.networks.support.CircuitPath")],zl);const tN=zl;let cu=class extends Z{constructor(e){super(e),this.sourceId=null,this.globalId=null,this.terminalId=1,this.firstUnit=1,this.numUnits=1}};l([u({type:Number,json:{write:!0}})],cu.prototype,"sourceId",void 0),l([u({type:String,json:{write:!0}})],cu.prototype,"globalId",void 0),l([u({type:Number,json:{write:!0}})],cu.prototype,"terminalId",void 0),l([u({type:Number,json:{write:!0}})],cu.prototype,"firstUnit",void 0),l([u({type:Number,json:{write:!0}})],cu.prototype,"numUnits",void 0),cu=l([E("esri.networks.support.CircuitLocation")],cu);const qT=cu;let jl=class extends Z{constructor(e){super(e),this.name=null,this.globalId=null,this.providerId=null,this.consumerId=null,this.isReserved=!1,this.attributes=null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};l([u({type:String,json:{write:!0}})],jl.prototype,"name",void 0),l([u({type:String,json:{write:!0}})],jl.prototype,"globalId",void 0),l([u({type:String})],jl.prototype,"providerId",void 0),l([u({type:String})],jl.prototype,"consumerId",void 0),l([u({type:Boolean,json:{write:!0}})],jl.prototype,"isReserved",void 0),l([u({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],jl.prototype,"attributes",void 0),jl=l([E("esri.networks.support.Subcircuit")],jl);const XX=jl;let Ta=class extends Z{constructor(e){super(e),this.sectionId=null,this.role="start-and-end",this.sectionType="physical",this.startLocation=null,this.stopLocation=null,this.subcircuit=null,this.path=null}normalizeCtorArgs(e){if(e===void 0)return e;const{sectionId:i,startLocation:r,stopLocation:n,subcircuit:s}=e;return(r||n)&&s?(delete e.startLocation,delete e.stopLocation,ie.getLogger(this).warn("Cannot instantiate CircuitSection with both start/stop locations and subcircuit.",`CircuitSection with ID '${i}' was defaulted to having a subcircuit only.`)):(r&&!n||!r&&n)&&!s&&ie.getLogger(this).warn(`CircuitSection with ID '${i}' must have both start and stop locations.`,"Create/alter operations involving this section will fail unless both are populated."),e}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.subcircuit=null}setSubcircuit(e){this.subcircuit=e,this.startLocation=null,this.stopLocation=null}};l([u({type:Number,json:{write:!0}})],Ta.prototype,"sectionId",void 0),l([u({type:pM.apiValues,json:{type:pM.jsonValues,read:pM.read},readOnly:!0})],Ta.prototype,"role",void 0),l([u({type:Du.apiValues,json:{type:Du.jsonValues,read:Du.read,write:Du.write}})],Ta.prototype,"sectionType",void 0),l([u({type:qT,json:{write:!0}})],Ta.prototype,"startLocation",void 0),l([u({type:qT,json:{write:!0}})],Ta.prototype,"stopLocation",void 0),l([u({type:XX,json:{write:!0}})],Ta.prototype,"subcircuit",void 0),l([u({type:tN,readOnly:!0})],Ta.prototype,"path",void 0),Ta=l([E("esri.networks.support.CircuitSection")],Ta);let Ui=class extends Z{constructor(e){super(e),this._sectionIdLookup=new Map,this.attributes=null,this.circuitManager=null,this.circuitType="physical",this.globalId=null,this.isDeleted=!1,this.lastExportedTime=null,this.lastVerifiedTime=null,this.name=null,this.sections=null,this.startLocation=null,this.status="dirty",this.stopLocation=null,this.subcircuits=[]}initialize(){this.addHandles([ve(()=>this.sections,e=>{this._sectionIdLookup.clear(),e!=null&&Array.from(e.keys()).forEach(i=>this._sectionIdLookup.set(i.sectionId,i))},Pt)])}normalizeCtorArgs(e){if(e===void 0)return e;const{name:i,startLocation:r,stopLocation:n,sections:s}=e;return(r||n)&&s?(delete e.startLocation,delete e.stopLocation,ie.getLogger(this).warn("Cannot instantiate Circuit with both start/stop locations and sections.",`Circuit '${i}' was defaulted to having sections only.`)):(r&&!n||!r&&n)&&!s&&ie.getLogger(this).warn(`Non-sectioned circuit '${i}' must have both start and stop locations.`,"Create/alter operations involving this circuit will fail unless both are populated."),e}get isSectioned(){return this.startLocation==null&&this.stopLocation==null&&this.sections!=null}readSections(e,i){const{sectionOrder:r,sections:n}=i,s=new Map;if(n==null)return null;if(this._sectionIdLookup.clear(),n.forEach(o=>this._sectionIdLookup.set(o.sectionId,Ta.fromJSON(o))),r==null)return Array.from(this._sectionIdLookup.values()).forEach(o=>s.set(o,[])),s;for(const[o,a]of Object.entries(r)){const c=Number(o),d=this._sectionIdLookup.get(c);if(d==null)continue;const h=a.map(f=>this._sectionIdLookup.get(f)).filter(_r);s.set(d,h)}return s}writeSections(e,i){const r={},n=[];e==null||e.forEach((s,o)=>{const a=o.sectionId.toString(),c=s.map(d=>d.sectionId);r[a]=c,n.push(o.toJSON())}),i.sectionOrder=r,i.sections=n}getSectionById(e){return this._sectionIdLookup.get(e)??null}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.sections=null}setSections(e){this.sections=e,this.startLocation=null,this.stopLocation=null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};l([u({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],Ui.prototype,"attributes",void 0),l([u()],Ui.prototype,"circuitManager",void 0),l([u({type:Du.apiValues,json:{type:Du.jsonValues,read:Du.read,write:Du.write}})],Ui.prototype,"circuitType",void 0),l([u({type:String,json:{write:!0}})],Ui.prototype,"globalId",void 0),l([u({type:Boolean,readOnly:!0})],Ui.prototype,"isDeleted",void 0),l([u({type:Boolean,json:{write:!0},readOnly:!0})],Ui.prototype,"isSectioned",null),l([u({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],Ui.prototype,"lastExportedTime",void 0),l([u({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],Ui.prototype,"lastVerifiedTime",void 0),l([u({type:String,json:{write:!0}})],Ui.prototype,"name",void 0),l([u({json:{read:{source:["sectionOrder","sections"]},write:!0}})],Ui.prototype,"sections",void 0),l([oe("sections")],Ui.prototype,"readSections",null),l([le("sections")],Ui.prototype,"writeSections",null),l([u({type:qT,json:{write:!0}})],Ui.prototype,"startLocation",void 0),l([u({type:dM.apiValues,json:{type:dM.jsonValues,read:dM.read}})],Ui.prototype,"status",void 0),l([u({type:qT,json:{write:!0}})],Ui.prototype,"stopLocation",void 0),l([u({type:[XX],json:{write:!0}})],Ui.prototype,"subcircuits",void 0),Ui=l([E("esri.networks.support.Circuit")],Ui);let up=class extends Z{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){return Ui.fromJSON(i)}};l([u({type:Ui,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],up.prototype,"circuit",void 0),l([oe("circuit")],up.prototype,"readCircuit",null),l([u({type:hi,json:{write:!0}})],up.prototype,"geometry",void 0),l([u({type:tN,json:{write:!0}})],up.prototype,"path",void 0),up=l([E("esri.rest.networks.circuits.support.CircuitTraceResult")],up);const QLe=up;let Sm=class extends Z{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};l([u({type:hi,json:{write:!0},readOnly:!0})],Sm.prototype,"line",void 0),l([u({type:Gs,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],Sm.prototype,"multipoint",void 0),l([u({type:ei,json:{write:!0},readOnly:!0})],Sm.prototype,"polygon",void 0),Sm=l([E("esri.rest.networks.support.AggregatedGeometry")],Sm);const XLe=Sm;let $m=class extends Z{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};l([u({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],$m.prototype,"functionType",void 0),l([u({type:String,json:{write:!0},readOnly:!0})],$m.prototype,"networkAttributeName",void 0),l([u({type:Number,json:{write:!0},readOnly:!0})],$m.prototype,"result",void 0),$m=l([E("esri.rest.networks.support.FunctionResult")],$m);const eFe=$m;let hs=class extends Z{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null&&Array.isArray(i.elements)?i.elements.map(r=>"firstUnit"in r&&"numUnits"in r?new Js({...r}):new An({...r})):[]}writeNetworkElements(e,i){i.elements=e.map(r=>r.toJSON())}};l([u({type:XLe,json:{write:!0},readOnly:!0})],hs.prototype,"aggregatedGeometry",void 0),l([u({type:[QLe],json:{write:!0},readOnly:!0})],hs.prototype,"circuits",void 0),l([u({type:[An],json:{write:!0},readOnly:!0})],hs.prototype,"elements",void 0),l([oe("elements")],hs.prototype,"readNetworkElements",null),l([le("elements")],hs.prototype,"writeNetworkElements",null),l([u({type:[eFe],json:{write:!0},readOnly:!0})],hs.prototype,"globalFunctionResults",void 0),l([u({type:Boolean,json:{write:!0},readOnly:!0})],hs.prototype,"kFeaturesForKNNFound",void 0),l([u({type:[tN],json:{write:!0},readOnly:!0})],hs.prototype,"paths",void 0),l([u({type:Boolean,json:{write:!0},readOnly:!0})],hs.prototype,"startingPointsIgnored",void 0),l([u({type:[String],json:{write:!0},readOnly:!0})],hs.prototype,"warnings",void 0),hs=l([E("esri.rest.networks.support.TraceResult")],hs);const tFe=Wi()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let dp=class extends hs{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Ft(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(gt()),this.checkJobStatus().then(a=>{const{status:c}=a;switch(this.status=c,c){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([u({type:String,json:{write:!0}})],dp.prototype,"statusUrl",void 0),l([Ie(tFe)],dp.prototype,"status",void 0),l([u({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],dp.prototype,"submissionTime",void 0),l([u({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],dp.prototype,"lastUpdatedTime",void 0),dp=l([E("esri.networks.support.TraceJobInfo")],dp);let zs=class extends qLe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._circuitManagerMap=new Map,this._terminalById=new Map,this._unitIdentifierManager=null}initialize(){this.addHandles(ve(()=>[this.gdbVersion,this.historicMoment],()=>{this.networkSystemLayers.associationsTable&&(this.networkSystemLayers.associationsTable.gdbVersion!==this.gdbVersion&&(this.networkSystemLayers.associationsTable.gdbVersion=this.gdbVersion),this.networkSystemLayers.associationsTable.historicMoment!==this.historicMoment&&(this.networkSystemLayers.associationsTable.historicMoment=this.historicMoment))}))}get _rulesLayer(){const{gdbVersion:e,historicMoment:i}=this,r=this.networkSystemLayers.rulesTableUrl;return new $e({url:r,gdbVersion:e,historicMoment:i})}get _utilityLayerList(){var i,r;const e=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map(n=>{var s,o;(s=n==null?void 0:n.edgeSources)==null||s.map(({layerId:a,sourceId:c})=>{this._layerIdBySourceId.set(c,a),this._sourceIdByLayerId.set(a,c),e.add(a)}),(o=n==null?void 0:n.junctionSources)==null||o.map(({layerId:a,sourceId:c})=>{this._layerIdBySourceId.set(c,a),this._sourceIdByLayerId.set(a,c),e.add(a)})}),e}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,r,n,s,o,a,c;return new ps({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(c=this.sourceJSON)==null?void 0:c.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(i=>Kl.fromJSON(i)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(i=>i.domainNetworkName))||[]}get hasTelecomNetwork(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.some(i=>i.isTelecomNetwork))??!1}get associationsTable(){return this.networkSystemLayers.associationsTable}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await super._load(e),await Promise.all([this._loadNamedTraceConfigurationsFromNetwork(e),this.networkSystemLayers.loadAssociationsTable(e)])}getTerminalConfiguration(e){var d,h,f,m;let i=null,r=null;const n=e.sourceLayer;let s=null;if((n==null?void 0:n.type)==="feature"){if(s=n.layerId,s===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(s=((d=n==null?void 0:n.parent)==null?void 0:d.layerId)??null,s===null))return null;const o=e.attributes;if(o==null)return null;for(const v of Object.keys(o))v.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(v)),v.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(v));if(!this.dataElement)return null;let a=null;const c=this.dataElement.domainNetworks;for(const v of c){const w=(h=v.junctionSources)==null?void 0:h.find(x=>x.layerId===s);if(w){const x=(f=w.assetGroups)==null?void 0:f.find($=>$.assetGroupCode===i);if(x){const $=(m=x.assetTypes)==null?void 0:m.find(T=>T.assetTypeCode===r);if($!=null&&$.isTerminalConfigurationSupported){a=$.terminalConfigurationId;break}}}}if(a!=null){const v=this.dataElement.terminalConfigurations,w=v==null?void 0:v.find(x=>x.terminalConfigurationId===a);return w?Kl.fromJSON(w):null}return null}getTierNames(e){var r,n;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find(s=>s.domainNetworkName===e);return((n=i==null?void 0:i.tiers)==null?void 0:n.map(s=>s.name))||[]}async getRulesTable(){var s;const e=this._rulesLayer;e.loaded||await e.load();const i=(s=this.dataElement)==null?void 0:s.domainNetworks;if(!i)return null;const r=i.flatMap(o=>[...o.edgeSources||[],...o.junctionSources||[]]),n=(await this._queryRulesTable(e)).map(o=>this._hydrateRuleInfo(e,r,o));return new lu({rulesLayer:e,rules:n})}async getCircuitManager(e){var n;if(!this.hasTelecomNetwork)return null;const i=(n=this.dataElement)==null?void 0:n.domainNetworks.find(s=>s.domainNetworkName===e&&s.isTelecomNetwork);if(!i)return null;const{default:r}=await Q(()=>import("./CircuitManager-neB6SB1O.js"),[],import.meta.url);return Ah(this._circuitManagerMap,e,()=>new r({utilityNetwork:this,telecomDomainNetwork:i}))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await Q(()=>import("./UnitIdentifierManager-Dw1lgnrS.js"),[],import.meta.url);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(e))}isUtilityLayer(e){var i,r;return"layerId"in e?e.layerId!=null&&this._utilityLayerList.has(e.layerId)&&(((i=e.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(((r=e.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:n}]=await Promise.all([Q(()=>import("./queryAssociations-BNZsSvYd.js"),__vite__mapDeps([330,331]),import.meta.url),Q(()=>import("./QueryAssociationsParameters-BGudeeTW.js"),[],import.meta.url)]),s=n.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await r(this.networkServiceUrl,s,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([Q(()=>import("./synthesizeAssociationGeometries-dPvUzHfu.js"),__vite__mapDeps([332,331]),import.meta.url),Q(()=>import("./SynthesizeAssociationGeometriesParameters-DwiMz4P-.js"),[],import.meta.url)]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([Q(()=>import("./trace-B4ApXt1s.js"),[],import.meta.url),Q(()=>import("./TraceParameters-PXuCzppB.js"),[],import.meta.url)]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([Q(()=>import("./trace-B4ApXt1s.js"),[],import.meta.url),Q(()=>import("./TraceParameters-PXuCzppB.js"),[],import.meta.url)]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new dp({statusUrl:s})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:n}=e;if(!r||!n)return!1;await i.load();let s=null;switch(e.associationType){case"containment":s=i.rulesCategorized.containment;break;case"attachment":s=i.rulesCategorized.attachment;break;default:s=i.rulesCategorized.connectivity}return s.some(o=>Jv(o,r,n))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:n,fromTerminalId:s,fromFirstUnit:o,fromNumUnits:a,toNetworkSourceId:c,toGlobalId:d,toTerminalId:h,toFirstUnit:f,toNumUnits:m,associationType:v,isContentVisible:w,percentAlong:x,globalId:$}=JLe(i);return{addFeatures:e.map(T=>{var P,L,D,q,F,ee,ae,ne,ue,X;const C=new qt({attributes:{[r]:(P=T.fromNetworkElement)==null?void 0:P.networkSourceId,[n]:(L=T.fromNetworkElement)==null?void 0:L.globalId,[s]:(D=T.fromNetworkElement)==null?void 0:D.terminalId,[c]:(q=T.toNetworkElement)==null?void 0:q.networkSourceId,[d]:(F=T.toNetworkElement)==null?void 0:F.globalId,[h]:(ee=T.toNetworkElement)==null?void 0:ee.terminalId,[v]:HLe[T.associationType],[w]:T.isContentVisible==null?void 0:T.isContentVisible?1:0,[x]:T.percentAlong,[$]:T.globalId}});return T.fromNetworkElement instanceof Js&&(C.attributes[o]=(ae=T.fromNetworkElement)==null?void 0:ae.firstUnit,C.attributes[a]=(ne=T.fromNetworkElement)==null?void 0:ne.numUnits),T.toNetworkElement instanceof Js&&(C.attributes[f]=(ue=T.toNetworkElement)==null?void 0:ue.firstUnit,C.attributes[m]=(X=T.toNetworkElement)==null?void 0:X.numUnits),C}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}generateDeleteAssociations(e){var o;const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers,n={id:r,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}};if(((o=this.dataElement)==null?void 0:o.schemaGeneration)===-8){const a=this._generateDeleteTelecomAssociationPayload(e);return{...n,deleteAssociations:a}}const s=e.map(a=>({globalId:a.globalId}));return{...n,deleteFeatures:s}}generateCombineNetworkElements(e){return{id:this._ensureSingleSourceIdAsValidLayerId(e),combineGroupedObjects:[{globalIds:e.map(i=>i.globalId)}]}}generateDivideNetworkElements(e,i){return{id:this._ensureSingleSourceIdAsValidLayerId([e]),divideGroupedObjects:[{globalId:e.globalId,numUnits:i}]}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async loadSubnetworksTable(){return this.networkSystemLayers.loadSubnetworksTable()}async _loadNamedTraceConfigurationsFromNetwork(e){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(s=>s.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find(a=>a.globalId===s.globalId);if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),o=n.get("CREATIONDATE"),a=n.get("FROMNETWORKSOURCEID"),c=n.get("FROMASSETGROUP"),d=n.get("FROMASSETTYPE"),h=n.get("FROMTERMINALID"),f=n.get("TONETWORKSOURCEID"),m=n.get("TOASSETGROUP"),v=n.get("TOASSETTYPE"),w=n.get("TOTERMINALID"),x=n.get("VIANETWORKSOURCEID"),$=n.get("VIAASSETGROUP"),T=n.get("VIAASSETTYPE"),C=n.get("VIATERMINALID"),P=r.attributes[s.name],L=new Date(r.attributes[o.name]),D=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[c.name],assetTypeId:r.attributes[d.name],terminalId:r.attributes[h.name]},{networkSourceId:r.attributes[f.name],assetGroupId:r.attributes[m.name],assetTypeId:r.attributes[v.name],terminalId:r.attributes[w.name]},{networkSourceId:r.attributes[x.name],assetGroupId:r.attributes[$.name],assetTypeId:r.attributes[T.name],terminalId:r.attributes[C.name]}],q={ruleType:P,creationDate:L};for(const F of[0,1,2]){if(P!==5&&F===2)continue;const ee=D[F],ae=i.find(H=>H.sourceId===ee.networkSourceId),ne=ae==null?void 0:ae.assetGroups.find(H=>H.assetGroupCode===ee.assetGroupId),ue=ne==null?void 0:ne.assetTypes.find(H=>H.assetTypeCode===ee.assetTypeId),X=this._getTerminal(ue,ee);let J="";switch(F){case 0:J="from";break;case 1:J="to";break;case 2:J="via"}q[`${J}NetworkSource`]=ae,q[`${J}AssetGroup`]=ne,q[`${J}AssetType`]=ue,q[`${J}Terminal`]=X==null?void 0:X.toJSON()}return q}_getTerminal(e,i){var s,o;const r=e==null?void 0:e.terminalConfigurationId,n=(s=this.terminalConfigurations)==null?void 0:s.find(a=>a.id===r);return((o=n==null?void 0:n.terminals)==null?void 0:o.find(a=>a.id===i.terminalId))??null}async _queryRulesTable(e){const{gdbVersion:i,historicMoment:r}=this,n=new Fe({where:"1=1",outFields:["*"],gdbVersion:i,historicMoment:r});return(await BQ(e,n)).features}_generateDeleteTelecomAssociationPayload(e){return e.map(i=>({globalId:i.globalId??BLe,associationType:GLe.toJSON(i.associationType),fromSourceId:i.fromNetworkElement.networkSourceId,fromGlobalId:i.fromNetworkElement.globalId,fromTerminalId:i.fromNetworkElement.terminalId,toSourceId:i.toNetworkElement.networkSourceId,toGlobalId:i.toNetworkElement.globalId,toTerminalId:i.toNetworkElement.terminalId}))}_ensureSingleSourceIdAsValidLayerId(e){const i=Cie(e.map(s=>s.networkSourceId));if(i.length>1)throw new j("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");const r=i[0],n=this.getLayerIdBySourceId(r);if(n==null)throw new j("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");return n}};l([u({readOnly:!0})],zs.prototype,"_rulesLayer",null),l([u({type:[ZLe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],zs.prototype,"sharedNamedTraceConfigurations",void 0),l([u({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],zs.prototype,"type",void 0),l([u({readOnly:!0})],zs.prototype,"serviceTerritoryFeatureLayerId",null),l([u({readOnly:!0})],zs.prototype,"networkSystemLayers",null),l([u({readOnly:!0})],zs.prototype,"terminalConfigurations",null),l([u({readOnly:!0})],zs.prototype,"domainNetworkNames",null),l([u({readOnly:!0})],zs.prototype,"hasTelecomNetwork",null),l([u({readOnly:!0,json:{read:!1}})],zs.prototype,"associationsTable",null),zs=l([E("esri.networks.UtilityNetwork")],zs);const eee=zs,iFe=Object.freeze(Object.defineProperty({__proto__:null,default:eee},Symbol.toStringTag,{value:"Module"}));let Tm=class extends Pe(Z){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};l([u({type:String,json:{write:{isRequired:!0}}})],Tm.prototype,"expression",void 0),l([u({type:["number","string"],json:{write:!0}})],Tm.prototype,"returnType",void 0),l([u({type:String,json:{write:!0}})],Tm.prototype,"title",void 0),Tm=l([E("esri.webdoc.geotriggersInfo.ExpressionInfo")],Tm);const tee=Tm,ax=new Ze({deviceLocation:"device-location"});let Yv=class extends Pe(Z){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};l([u({type:tee,json:{write:!0}})],Yv.prototype,"filterExpression",void 0),l([u({type:ax.apiValues,readOnly:!0,json:{type:ax.jsonValues,read:ax.read,write:ax.write}})],Yv.prototype,"type",void 0),Yv=l([E("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],Yv);const rFe=Yv;let Kv=class extends Pe(Z){constructor(e){super(e),this.geometry=null,this.where=null}};l([u({types:Dh,json:{read:ta,write:!0}})],Kv.prototype,"geometry",void 0),l([u({type:String,json:{write:!0}})],Kv.prototype,"where",void 0),Kv=l([E("esri.webdoc.geotriggersInfo.FeatureFilter")],Kv);const nFe=Kv;let km=class extends Pe(Z){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};l([u({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],km.prototype,"layerId",void 0),l([u({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],km.prototype,"layerUrl",void 0),l([Ie({featureLayer:"feature-layer"},{readOnly:!0})],km.prototype,"type",void 0),km=l([E("esri.webdoc.geotriggersInfo.FeatureLayerSource")],km);const sFe=km;let pp=class extends Pe(Z){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};l([u({type:sFe,json:{write:{isRequired:!0}}})],pp.prototype,"fenceSource",void 0),l([u({type:nFe,json:{write:!0}})],pp.prototype,"filter",void 0),l([u({type:Number,json:{write:!0}})],pp.prototype,"bufferDistance",void 0),l([Ie({features:"features"},{readOnly:!0})],pp.prototype,"type",void 0),pp=l([E("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],pp);const oFe=pp;let BS=class extends Pe(Z){constructor(e){super(e),this.type="fence"}};l([Ie({fence:"fence"},{readOnly:!0})],BS.prototype,"type",void 0),BS=l([E("esri.webdoc.geotriggersInfo.Geotrigger")],BS);const iee=BS;let Qv=class extends Pe(Z){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};l([u({type:tee,json:{write:!0}})],Qv.prototype,"expressionInfo",void 0),l([u({type:[String],json:{write:!0}})],Qv.prototype,"requestedActions",void 0),Qv=l([E("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],Qv);const aFe=Qv,lFe=new Ze({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),cFe=new Ze({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),lx=new Ze({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Ro=class extends iee{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};l([Ie(lFe)],Ro.prototype,"enterExitRule",void 0),l([u({type:rFe,json:{write:{isRequired:!0}}})],Ro.prototype,"feed",void 0),l([Ie(cFe)],Ro.prototype,"feedAccuracyMode",void 0),l([u({type:lx.apiValues,json:{type:lx.jsonValues,read:lx.read,write:{writer:lx.write,isRequired:!0}}})],Ro.prototype,"fenceNotificationRule",void 0),l([u({type:oFe,json:{write:{isRequired:!0}}})],Ro.prototype,"fenceParameters",void 0),l([u({type:String,json:{write:!0}})],Ro.prototype,"name",void 0),l([u({type:aFe,json:{write:!0}})],Ro.prototype,"notificationOptions",void 0),l([Ie({fence:"fence"},{readOnly:!0})],Ro.prototype,"type",void 0),Ro=l([E("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Ro);const uFe=Ro,dFe={base:iee,key:"type",typeMap:{fence:uFe}};let GS=class extends Pe(Z){constructor(e){super(e),this.geotriggers=null}};l([u({types:[dFe],json:{write:{isRequired:!0}}})],GS.prototype,"geotriggers",void 0),GS=l([E("esri.webdoc.GeotriggersInfo")],GS);const pFe=GS;let HS=class extends Pe(Z){constructor(e){super(e),this.enabled=!0}};l([u({type:Boolean,nonNullable:!0,json:{write:!0}})],HS.prototype,"enabled",void 0),HS=l([E("esri.webdoc.ips.AppleIPSProperties")],HS);const hFe=HS;let WS=class extends Pe(Z){constructor(e){super(e),this.enabled=!0}};l([u({type:Boolean,nonNullable:!0,json:{write:!0}})],WS.prototype,"enabled",void 0),WS=l([E("esri.webdoc.ips.GNSSProperties")],WS);const fFe=WS;let Im=class extends Pe(Z){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};l([u({type:Boolean,nonNullable:!0,json:{write:!0}})],Im.prototype,"enabled",void 0),l([u({type:Number,nonNullable:!0,json:{write:!0}})],Im.prototype,"distance",void 0),l([u({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],Im.prototype,"units",void 0),Im=l([E("esri.webdoc.ips.PathSnappingProperties")],Im);const mFe=Im;let ZS=class extends Pe(Z){constructor(e){super(e),this.enabled=!0}};l([u({type:Boolean,nonNullable:!0,json:{write:!0}})],ZS.prototype,"enabled",void 0),ZS=l([E("esri.webdoc.ips.SmoothingProperties")],ZS);const gFe=ZS;let hp=class extends Pe(Z){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};l([u({type:hFe,json:{name:"AppleIPS",write:!0}})],hp.prototype,"appleIPS",void 0),l([u({type:fFe,json:{name:"GNSS",write:!0}})],hp.prototype,"gnss",void 0),l([u({type:gFe,json:{write:!0}})],hp.prototype,"smoothing",void 0),l([u({type:mFe,json:{write:!0}})],hp.prototype,"pathSnapping",void 0),hp=l([E("esri.webdoc.ips.Configuration")],hp);const yFe=hp;let Em=class extends Pe(Z){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:n}=i;if(n)return new Ge({id:n,portal:r==null?void 0:r.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}};l([u({type:Ge,json:{write:{isRequired:!0}}})],Em.prototype,"portalItem",void 0),l([oe("portalItem",["itemId"])],Em.prototype,"readPortalItem",null),l([le("portalItem",{itemId:{type:String}})],Em.prototype,"writePortalItem",null),Em=l([E("esri.webdoc.ips.PositioningService")],Em);const vFe=Em;let Xv=class extends Pe(Z){constructor(e){super(e),this.positioningService=null,this.configuration=null}};l([u({type:vFe,json:{write:{isRequired:!0}}})],Xv.prototype,"positioningService",void 0),l([u({type:yFe,json:{write:!0}})],Xv.prototype,"configuration",void 0),Xv=l([E("esri.webdoc.IPSInfo")],Xv);const bFe=Xv,wFe={currentVersion:yQ,createInitialViewProperties:()=>new LT,parseVersion:ag.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},_Fe=de.ofType(eee);var ny;let fp=(ny=class extends eCe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return wFe}loadAll(){return TI(this,e=>{var i,r;e(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new j("webmap:empty-resource","Expected a JSON resource but got nothing")}},ny.VERSION=yQ,ny);l([u({type:pFe,json:{write:!0}})],fp.prototype,"geotriggersInfo",void 0),l([u({type:bFe,json:{write:!0,name:"mapIPSInfo"}})],fp.prototype,"ipsInfo",void 0),l([u({json:{write:!0}})],fp.prototype,"presentation",void 0),l([u({type:_Fe,json:{read:!0,write:!0}})],fp.prototype,"utilityNetworks",void 0),fp=l([E("esri.WebMap")],fp);const xFe=fp,iN=t=>(...e)=>{const i=gJ(),r=new t(...e),n=r.exports;mJ(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),y_e(r);const o=[r.component,...i].reverse();return dF(o,a=>a===void 0?void 0:SFe(r,a,n),n)},SFe=(t,{host:e,key:i,isReactive:r},n)=>{var f;const s=e,o=s[i]!==t.exports,a=s[i]!==n,c=n!==t.exports;if(o&&!a&&c&&(s[i]=t.exports),e===t.component){if(r){const m=t.component.manager;a&&m.W(t,s[i]),t.onUpdate(v=>{if(v.has(i)){const w=s[i];w!==t.exports&&m.W(t,w)}})}t.O=r?void 0:i}const h=(f=t.component.constructor.elementProperties.get(i))==null?void 0:f.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(h?__e(()=>{s[i]=t.exports}):s[i]=t.exports)})},Pi=(t,e)=>{const r=e0().manager;r.onLoaded(()=>r.onLifecycle(()=>Wn(t,e,n.emit)));const n=pF();return n},ree=(t,e)=>i=>$Fe(i,t);var zp,sy,ku;class nee extends xI{constructor(i,r){super(i);Le(this,zp);Le(this,sy);Le(this,ku);this.Y=new Map,this.A=void 0,ke(this,sy,SJ());const n=this;ke(n,ku,r),n.Z(),n.setProvisionalExports(see(i,new WeakRef(n),i.M.length-1,n.instance,n.Y),!1),uF(i,s=>{if(s){const o=ve(()=>i[s],a=>{if(a===n.instance)return;const c=n.instance;n.exports=a,n.instance=a,n.Y.forEach((d,h)=>i.requestUpdate(d,c[h])),G(n,zp)&&c.destroy(),ke(n,zp,!1)},{sync:!0});n.onDestroy(o.remove)}},n.exports)}get exports(){return $J(G(this,sy)),super.exports}set exports(i){super.exports=i,G(this,sy).notify()}Z(){var r;const i=this;i.instance="prototype"in G(i,ku)&&"declaredClass"in G(i,ku).prototype?new(G(i,ku)):G(r=i,ku).call(r),ke(i,zp,!0)}hostConnected(){this.exports=this.instance}hostDestroy(){var i,r;G(this,zp)&&((r=(i=this.instance).destroy)==null||r.call(i))}}zp=new WeakMap,sy=new WeakMap,ku=new WeakMap;const $Fe=iN(nee),see=(t,e,i,r,n)=>new Proxy(r,{get:(s,o)=>{const a=s[o];if(typeof o=="symbol"||n.has(o))return a;const c=t.M[i];return c.A=o,dF(t,d=>{if(c.A=void 0,d!==void 0){const h=d.key;n.set(o,h);const f=t.constructor.getPropertyOptions(h),m=o!==h&&h.toLowerCase().includes("disable");TFe(e,f,o,h,m),f.i===void 0&&kFe(f,i,o,m)}},a)}}),TFe=(t,e,i,r,n,s)=>s=ve(()=>{const o=t.deref();return o===void 0||o.component.manager.destroyed?s=s.remove():o.exports[i]},(o,a)=>{if(!s)return;const c=t.deref().component;c==null||c.requestUpdate(r,n?!a:a),e.c=!1},{sync:!0}),kFe=(t,e,i,r)=>{t.d.get=function(){var s;const n=(s=this.M[e])==null?void 0:s.exports[i];return r?!n:n},t.d.set=function(n){const s=this.M[e];s.A!==i&&(s.exports[i]=r?!n:n)}},IFe=t=>t.Y,EFe=(t,e)=>{const i=e.manager.useRefSync(t);i==null||i.hostDestroy(),i==null||i.Z(),i==null||i.hostConnected()};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const MFe=Ht`@charset "UTF-8";@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-view{--esri-view-outline-color: var(--calcite-color-brand);--esri-view-outline: 2px solid var(--esri-view-outline-color);--esri-view-outline-offset: -2px;margin:0;padding:0;display:flex;height:100%;width:100%}.esri-view .esri-view-user-storage{overflow:hidden}.esri-view .esri-view-root{-webkit-tap-highlight-color:var(--calcite-color-foreground-1);-webkit-tap-highlight-color:transparent;border:none;flex:100%;margin:0;padding:0;position:relative}.esri-view .esri-view-surface{-webkit-user-select:none;user-select:none;direction:ltr;border:none;outline:0;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-view .esri-view-surface--touch-none{touch-action:none}.esri-view .esri-view-surface--touch-pan{touch-action:pan-x pan-y}.esri-view .esri-view-surface:focus:after{box-sizing:border-box;z-index:999;outline:var(--esri-view-outline);outline-offset:var(--esri-view-outline-offset);content:"";pointer-events:none;width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden}.esri-view .esri-view-surface[data-navigating=true]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=copy]{cursor:copy}.esri-view .esri-view-surface[data-cursor=crosshair]{cursor:crosshair}.esri-view .esri-view-surface[data-cursor=help]{cursor:help}.esri-view .esri-view-surface[data-cursor=move]{cursor:move}.esri-view .esri-view-surface[data-cursor=pointer]{cursor:pointer}.esri-view .esri-view-surface[data-cursor=progress]{cursor:progress}.esri-view .esri-view-surface[data-cursor=grab]{cursor:grab}.esri-view .esri-view-surface[data-cursor=grabbing]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=n-resize]{cursor:n-resize}.esri-view .esri-view-surface[data-cursor=e-resize]{cursor:e-resize}.esri-view .esri-view-surface[data-cursor=s-resize]{cursor:s-resize}.esri-view .esri-view-surface[data-cursor=w-resize]{cursor:w-resize}.esri-view .esri-view-surface[data-cursor=ne-resize]{cursor:ne-resize}.esri-view .esri-view-surface[data-cursor=nw-resize]{cursor:nw-resize}.esri-view .esri-view-surface[data-cursor=se-resize]{cursor:se-resize}.esri-view .esri-view-surface[data-cursor=sw-resize]{cursor:sw-resize}.esri-view .esri-view-surface[data-cursor=ew-resize]{cursor:ew-resize}.esri-view .esri-view-surface[data-cursor=ns-resize]{cursor:ns-resize}.esri-view .esri-view-surface[data-cursor=nesw-resize]{cursor:nesw-resize}.esri-view .esri-view-surface[data-cursor=nwse-resize]{cursor:nwse-resize}.esri-view .esri-view-surface[data-cursor=none]{cursor:none}.esri-view .esri-display-object,.esri-view .esri-bitmap{-webkit-user-drag:none;-webkit-user-select:none;user-select:none;border:none;margin:0;padding:0;position:absolute}.esri-view .esri-bitmap{transform-origin:0 0;max-width:none}:root{view-transition-name:none}::view-transition{pointer-events:none}.esri-ui{box-sizing:border-box;z-index:0;pointer-events:none;contain:layout;font-size:var(--calcite-font-size);position:absolute;inset:0;overflow:hidden;container:esri-view-canvas/size}.esri-ui calcite-flow,.esri-ui calcite-panel{z-index:1;position:relative}.esri-ui .esri-component{pointer-events:auto}.esri-ui .esri-fov-overlay-outer{pointer-events:none;place-content:center;width:100%;height:100%;display:grid}.esri-ui .esri-fov-overlay{text-shadow:0 0 1px var(--calcite-color-foreground-1),0 0 2px var(--calcite-color-foreground-1),0 0 3px var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);font-size:var(--calcite-font-size-3);-webkit-user-select:none;user-select:none;pointer-events:none;flex-direction:row;align-items:center;gap:7px;animation:1s forwards fadeInAnimation;display:flex}.esri-ui .esri-fov-overlay-reset{cursor:pointer;pointer-events:auto}.esri-ui .esri-fov-overlay-text{pointer-events:none}@keyframes fadeInAnimation{0%{opacity:0}to{opacity:1}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}.esri-ui-corner{display:flex;position:absolute}.esri-ui-inner-container{position:absolute;inset:0}.esri-ui-manual-container>.esri-component{position:absolute}.esri-ui-manual-container .esri-swipe{z-index:-1}.esri-ui-top-left,.esri-ui-top-right{flex-flow:column}.esri-ui-top-left{align-items:flex-start;top:0;left:0}.esri-ui-top-right{align-items:flex-end;top:0;right:0}.esri-ui-bottom-left,.esri-ui-bottom-right{flex-flow:row;align-items:flex-end}.esri-ui-bottom-right{flex-flow:row-reverse;bottom:0;right:0}.esri-ui-bottom-right .esri-component{margin-left:10px}.esri-ui-top-right .esri-component,.esri-ui-top-left .esri-component{margin-bottom:10px}.esri-ui-bottom-left{bottom:0;left:0}.esri-ui-bottom-left .esri-component{margin-right:10px}:dir(rtl) .esri-ui-top-left{align-items:flex-end}:dir(rtl) .esri-ui-top-right{align-items:flex-start}:dir(rtl) .esri-ui-bottom-left{flex-direction:row-reverse}:dir(rtl) .esri-ui-bottom-right{flex-direction:row}.esri-zoom-box__container{width:100%;height:100%;position:relative}.esri-zoom-box__overlay{cursor:crosshair;width:100%;height:100%;position:absolute;top:0;left:0}.esri-zoom-box__overlay-background{fill:#0000001a}.esri-zoom-box__outline{fill:var(--calcite-color-transparent);stroke:var(--calcite-color-brand);stroke-dasharray:1 1;stroke-width:var(--calcite-spacing-base)}.esri-overlay-surface{z-index:0;pointer-events:none;-webkit-user-select:none;user-select:none;border:none;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-text-overlay-item{white-space:nowrap;font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight);display:block;position:absolute;overflow:hidden}.esri-text-overlay-item-anchor-bottom{transform:translate(-50%,-100%)}.esri-text-overlay-item-anchor-bottom-right{transform:translate(-100%,-100%)}.esri-text-overlay-item-anchor-bottom-left{transform:translateY(-100%)}.esri-text-overlay-item-anchor-top{transform:translate(-50%)}.esri-text-overlay-item-anchor-top-right{transform:translate(-100%)}.esri-text-overlay-item-anchor-top-left{transform:translate(0)}.esri-text-overlay-item-anchor-center{transform:translate(-50%,-50%)}.esri-text-overlay-item-anchor-right{transform:translate(-100%,-50%)}.esri-text-overlay-item-anchor-left{transform:translateY(-50%)}.esri-line-overlay-item,.esri-outline-overlay-item,.esri-box-overlay-item{white-space:nowrap;display:block;position:absolute;overflow:hidden}.esri-shadow-cast__tooltip{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-shadow-cast__tooltip__content{margin-top:-8px-var(--calcite-spacing-xxs);padding:var(--calcite-spacing-xs) var(--calcite-spacing-sm);background:var(--calcite-color-foreground-1);width:max-content;position:absolute;transform:translate(-50%,-100%)}.esri-shadow-cast__tooltip__content:after{content:"";border:8px solid var(--calcite-color-transparent);border-top-color:var(--calcite-color-foreground-1);box-sizing:inherit;width:0;height:0;display:block;position:absolute;bottom:1px;left:50%;transform:translate(-50%,100%)}.esri-attribution{position:absolute;bottom:0;left:0;right:0;background-color:var(--calcite-color-transparent-tint)!important;flex-flow:row;justify-content:space-between;align-items:center;font-size:var(--calcite-font-size-sm)!important;line-height:var(--calcite-font-line-height-fixed-base)!important;display:flex}.esri-attribution__link{color:var(--calcite-color-text-1)}.esri-attribution__link:hover,.esri-attribution__link:active,.esri-attribution__link:visited,.esri-attribution__link:focus{color:var(--calcite-color-text-1)}.esri-attribution__sources{text-overflow:ellipsis;white-space:nowrap;flex:1 0;align-self:flex-start;padding:0 5px;font-weight:var(--calcite-font-weight-light);overflow:hidden}.esri-attribution__sources[role=button]{font-size:1em}.esri-attribution__powered-by{color:var(--calcite-color-text-2);text-align:right;white-space:nowrap;align-self:flex-end;padding:0 5px;font-weight:var(--calcite-font-weight-normal)}.esri-attribution--open{z-index:2}.esri-attribution__sources--open{white-space:normal}.esri-button{box-sizing:border-box;cursor:pointer;white-space:normal;word-break:normal;color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info);justify-content:center;align-items:center;width:100%;min-height:var(--calcite-spacing-xxxl);padding:6px 7px;font-family:inherit;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out,border .125s ease-in-out;display:flex;overflow:hidden;&:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info-hover);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info-hover)}}.esri-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-text-2);border:1px solid var(--calcite-color-text-2)}.esri-button.esri-button--small{min-height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size-sm)}.esri-button.esri-button--half{width:50%;display:inline-block}.esri-button.esri-button--third{width:33%;display:inline-block}.esri-button--secondary{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-button--tertiary{color:var(--calcite-color-brand);background-color:var(--calcite-color-transparent);border-color:var(--calcite-color-transparent)}.esri-button--tertiary:hover{color:var(--calcite-color-brand-hover);background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-transparent)}.esri-button--disabled{opacity:.4;pointer-events:none}.esri-button--drill-in{outline-offset:-4px;cursor:pointer;text-align:unset;background-color:var(--calcite-color-foreground-1);border:none;border-radius:2px;justify-content:space-between;align-items:center;margin:var(--calcite-spacing-md) 7px;padding:var(--calcite-spacing-md) 7px;text-decoration:none;transition:background-color .125s ease-in-out;display:flex;box-shadow:0 0 0 1px #adadad4d}.esri-button--drill-in:hover,.esri-button--drill-in:focus{background-color:var(--calcite-color-foreground-2)}.esri-button--drill-in__title{font-size:var(--calcite-font-size)}.esri-button--drill-in [class^=esri-icon-],.esri-button--drill-in [class*=" esri-icon-"]{padding:0 7px}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button:is(calcite-button):not(:hover){--calcite-icon-color: var(--calcite-color-text-3)}.esri-widget--button:not([appearance]),.esri-widget--button[appearance=solid]{--calcite-color-foreground-3: var(--calcite-color-foreground-1)}.esri-widget--button:is(calcite-button){--calcite-offset-invert-focus: 1}.esri-widget--button calcite-loader[inline]{margin:auto}.esri-button--secondary{color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);&:hover{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-status-info);border:1px solid var(--calcite-color-status-info)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-hidden{display:none!important}[class^=esri-icon-],[class*=" esri-icon-"]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:var(--calcite-font-weight-normal);line-height:1;font-family:CalciteWebCoreIcons!important}.esri-icon-close:before{content:"";color:inherit}.esri-icon-drag-horizontal:before{content:"";color:inherit}.esri-icon-drag-vertical:before{content:"";color:inherit}.esri-icon-handle-horizontal:before{content:"";color:inherit}.esri-icon-handle-vertical:before{content:"";color:inherit}.esri-icon-check-mark:before{content:"";color:inherit}.esri-icon-left-triangle-arrow:before{content:"";color:inherit}.esri-icon-right-triangle-arrow:before{content:"";color:inherit}.esri-icon-down-arrow:before{content:"";color:inherit}.esri-icon-up-arrow:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-left:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-right:before{content:"";color:inherit}.esri-icon-overview-arrow-top-left:before{content:"";color:inherit}.esri-icon-overview-arrow-top-right:before{content:"";color:inherit}.esri-icon-maximize:before{content:"";color:inherit}.esri-icon-minimize:before{content:"";color:inherit}.esri-icon-checkbox-unchecked:before{content:"";color:inherit}.esri-icon-checkbox-checked:before{content:"";color:inherit}.esri-icon-radio-unchecked:before{content:"";color:inherit}.esri-icon-radio-checked:before{content:"";color:inherit}.esri-icon-up-arrow-circled:before{content:"";color:inherit}.esri-icon-down-arrow-circled:before{content:"";color:inherit}.esri-icon-left-arrow-circled:before{content:"";color:inherit}.esri-icon-right-arrow-circled:before{content:"";color:inherit}.esri-icon-zoom-out-fixed:before{content:"";color:inherit}.esri-icon-zoom-in-fixed:before{content:"";color:inherit}.esri-icon-refresh:before{content:"";color:inherit}.esri-icon-edit:before{content:"";color:inherit}.esri-icon-authorize:before{content:"";color:inherit}.esri-icon-map-pin:before{content:"";color:inherit}.esri-icon-blank-map-pin:before{content:"";color:inherit}.esri-icon-table:before{content:"";color:inherit}.esri-icon-plus:before{content:"+";color:inherit}.esri-icon-minus:before{content:"";color:inherit}.esri-icon-beginning:before{content:"";color:inherit}.esri-icon-reverse:before{content:"";color:inherit}.esri-icon-pause:before{content:"";color:inherit}.esri-icon-play:before{content:"";color:inherit}.esri-icon-forward:before{content:"";color:inherit}.esri-icon-end:before{content:"";color:inherit}.esri-icon-erase:before{content:"";color:inherit}.esri-icon-up-down-arrows:before{content:"";color:inherit}.esri-icon-left:before{content:"";color:inherit}.esri-icon-right:before{content:"";color:inherit}.esri-icon-announcement:before{content:"";color:inherit}.esri-icon-notice-round:before{content:"";color:inherit}.esri-icon-notice-triangle:before{content:"";color:inherit}.esri-icon-home:before{content:"";color:inherit}.esri-icon-locate:before{content:"";color:inherit}.esri-icon-expand:before{content:"";color:inherit}.esri-icon-collapse:before{content:"";color:inherit}.esri-icon-layer-list:before{content:"";color:inherit}.esri-icon-basemap:before{content:"";color:inherit}.esri-icon-globe:before{content:"";color:inherit}.esri-icon-applications:before{content:"";color:inherit}.esri-icon-arrow-up-circled:before{content:"";color:inherit}.esri-icon-arrow-down-circled:before{content:"";color:inherit}.esri-icon-arrow-left-circled:before{content:"";color:inherit}.esri-icon-arrow-right-circled:before{content:"";color:inherit}.esri-icon-minus-circled:before{content:"";color:inherit}.esri-icon-plus-circled:before{content:"";color:inherit}.esri-icon-add-attachment:before{content:"";color:inherit}.esri-icon-attachment:before{content:"";color:inherit}.esri-icon-calendar:before{content:"";color:inherit}.esri-icon-close-circled:before{content:"";color:inherit}.esri-icon-browser:before{content:"";color:inherit}.esri-icon-collection:before{content:"";color:inherit}.esri-icon-comment:before{content:"";color:inherit}.esri-icon-configure-popup:before{content:"";color:inherit}.esri-icon-contact:before{content:"";color:inherit}.esri-icon-dashboard:before{content:"";color:inherit}.esri-icon-deny:before{content:"";color:inherit}.esri-icon-description:before{content:"";color:inherit}.esri-icon-directions:before{content:"";color:inherit}.esri-icon-directions2:before{content:"";color:inherit}.esri-icon-documentation:before{content:"";color:inherit}.esri-icon-duplicate:before{content:"";color:inherit}.esri-icon-review:before{content:"";color:inherit}.esri-icon-environment-settings:before{content:"";color:inherit}.esri-icon-error:before{content:"";color:inherit}.esri-icon-error2:before{content:"";color:inherit}.esri-icon-experimental:before{content:"";color:inherit}.esri-icon-feature-layer:before{content:"";color:inherit}.esri-icon-filter:before{content:"";color:inherit}.esri-icon-grant:before{content:"";color:inherit}.esri-icon-group:before{content:"";color:inherit}.esri-icon-key:before{content:"";color:inherit}.esri-icon-labels:before{content:"";color:inherit}.esri-icon-tag:before{content:"";color:inherit}.esri-icon-layers:before{content:"";color:inherit}.esri-icon-left-arrow:before{content:"";color:inherit}.esri-icon-right-arrow:before{content:"";color:inherit}.esri-icon-link-external:before{content:"";color:inherit}.esri-icon-link:before{content:"";color:inherit}.esri-icon-loading-indicator:before{content:"";color:inherit}.esri-icon-maps:before{content:"";color:inherit}.esri-icon-marketplace:before{content:"";color:inherit}.esri-icon-media:before{content:"";color:inherit}.esri-icon-media2:before{content:"";color:inherit}.esri-icon-menu:before{content:"";color:inherit}.esri-icon-mobile:before{content:"";color:inherit}.esri-icon-phone:before{content:"";color:inherit}.esri-icon-navigation:before{content:"";color:inherit}.esri-icon-pan:before{content:"";color:inherit}.esri-icon-printer:before{content:"";color:inherit}.esri-icon-pie-chart:before{content:"";color:inherit}.esri-icon-chart:before{content:"";color:inherit}.esri-icon-line-chart:before{content:"";color:inherit}.esri-icon-question:before{content:"";color:inherit}.esri-icon-resend-invitation:before{content:"";color:inherit}.esri-icon-rotate:before{content:"";color:inherit}.esri-icon-save:before{content:"";color:inherit}.esri-icon-settings:before{content:"";color:inherit}.esri-icon-settings2:before{content:"";color:inherit}.esri-icon-share:before{content:"";color:inherit}.esri-icon-sign-out:before{content:"";color:inherit}.esri-icon-support:before{content:"";color:inherit}.esri-icon-user:before{content:"";color:inherit}.esri-icon-time-clock:before{content:"";color:inherit}.esri-icon-trash:before{content:"";color:inherit}.esri-icon-upload:before{content:"";color:inherit}.esri-icon-download:before{content:"";color:inherit}.esri-icon-zoom-in-magnifying-glass:before{content:"";color:inherit}.esri-icon-search:before{content:"";color:inherit}.esri-icon-zoom-out-magnifying-glass:before{content:"";color:inherit}.esri-icon-locked:before{content:"";color:inherit}.esri-icon-unlocked:before{content:"";color:inherit}.esri-icon-favorites:before{content:"";color:inherit}.esri-icon-compass:before{content:"";color:inherit}.esri-icon-down:before{content:"";color:inherit}.esri-icon-up:before{content:"";color:inherit}.esri-icon-chat:before{content:"";color:inherit}.esri-icon-dock-bottom:before{content:"";color:inherit}.esri-icon-dock-left:before{content:"";color:inherit}.esri-icon-dock-right:before{content:"";color:inherit}.esri-icon-organization:before{content:"";color:inherit}.esri-icon-north-navigation:before{content:"";color:inherit}.esri-icon-locate-circled:before{content:"";color:inherit}.esri-icon-dial:before{content:"";color:inherit}.esri-icon-polygon:before{content:"";color:inherit}.esri-icon-polyline:before{content:"";color:inherit}.esri-icon-visible:before{content:"";color:inherit}.esri-icon-non-visible:before{content:"";color:inherit}.esri-icon-link-vertical:before{content:"";color:inherit}.esri-icon-unlocked-link-vertical:before{content:"";color:inherit}.esri-icon-link-horizontal:before{content:"";color:inherit}.esri-icon-unlocked-link-horizontal:before{content:"";color:inherit}.esri-icon-swap:before{content:"";color:inherit}.esri-icon-cta-link-external:before{content:"";color:inherit}.esri-icon-reply:before{content:"";color:inherit}.esri-icon-public:before{content:"";color:inherit}.esri-icon-share2:before{content:"";color:inherit}.esri-icon-launch-link-external:before{content:"";color:inherit}.esri-icon-rotate-back:before{content:"";color:inherit}.esri-icon-pan2:before{content:"";color:inherit}.esri-icon-tracking:before{content:"";color:inherit}.esri-icon-expand2:before{content:"";color:inherit}.esri-icon-arrow-down:before{content:"";color:inherit}.esri-icon-arrow-up:before{content:"";color:inherit}.esri-icon-hollow-eye:before{content:"";color:inherit}.esri-icon-play-circled:before{content:"";color:inherit}.esri-icon-volume-off:before{content:"";color:inherit}.esri-icon-volume-on:before{content:"";color:inherit}.esri-icon-bookmark:before{content:"";color:inherit}.esri-icon-lightbulb:before{content:"";color:inherit}.esri-icon-sketch-rectangle:before{content:"";color:inherit}.esri-icon-north-navigation-filled:before{content:"";color:inherit}.esri-icon-default-action:before{content:"";color:inherit}.esri-icon-undo:before{content:"";color:inherit}.esri-icon-redo:before{content:"";color:inherit}.esri-icon-cursor:before{content:"";color:inherit}.esri-icon-cursor-filled:before{content:"";color:inherit}.esri-icon-measure:before{content:"";color:inherit}.esri-icon-measure-line:before{content:"";color:inherit}.esri-icon-measure-area:before{content:"";color:inherit}.esri-icon-legend:before{content:"";color:inherit}.esri-icon-sliders:before{content:"";color:inherit}.esri-icon-sliders-horizontal:before{content:"";color:inherit}.esri-icon-cursor-marquee:before{content:"";color:inherit}.esri-icon-lasso:before{content:"";color:inherit}.esri-icon-elevation-profile:before{content:"";color:inherit}.esri-icon-slice:before{content:"";color:inherit}.esri-icon-line-of-sight:before{content:"";color:inherit}.esri-icon-zoom-to-object:before{content:"";color:inherit}.esri-icon-urban-model:before{content:"";color:inherit}.esri-icon-measure-building-height-shadow:before{content:"";color:inherit}.esri-icon-partly-cloudy:before{content:"";color:inherit}.esri-attachments__progress-bar:before,.esri-attachments__progress-bar:after{opacity:var(--calcite-opacity-100);content:"";height:1px;transition:opacity .5s ease-in-out;position:absolute;top:0}.esri-attachments__progress-bar:before{z-index:0;background-color:var(--calcite-color-foreground-2);width:100%}.esri-attachments__progress-bar:after{z-index:0;background-color:var(--calcite-color-text-2);width:20%;animation:1.5s linear infinite looping-progresss-bar-ani}.esri-attachments{background-color:var(--calcite-color-background)!important;width:100%}.esri-attachments__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-attachments__loader{background:url(data:image/gif;base64,R0lGODlhIQAnALMKAAB6wrze86TR7Y3F53W44V6s2kaf1C+TzheGyNPq+f///wAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDdDRTgwM0Q3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDdDRTgwMkQ3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyYThhNjgzLWIwNjctNDhhZi05Nzc0LTZiOTZkM2RhMjI2OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkEAAoALAAAAAAhACcAAASOUMlJq70W6L2xv1z4jVPIkaTZoZ+qsa0Ley4wY7WU7Dyv9z1JTgEMEos7oeyI/DUVQ2SSWVSqnFUq0GrCbrXGqNQbXkoTZB/UPAarxc8zV+SeytfXOlo/P/H/cFl3gV+DbHFthEaGeXeMXX+PdI6Jh4KVjW2SfpRPQzcVn6AlS6OkeaZ9K6l4kKyirLEXEQAh+QQJBAAKACwAAAAAIQAnAAAEqFDJSau9OOutkP8fx4GkuJGgqaGhirGe+8JSYN+3CCM1jkuJoFAo2fV8NuBwWKQpkDnFktlxQpPSabDJOiKVWi7K6wNPxaXn1bxEp9RQNtUI/2bD1W69fD/nx3s/fW1/aVcBckSFb4eJW4stjYNzVmuTinSSWo+ZlpsJbpGem6ExgVGfpTynWKmQppqkr6uxeJ1xl5yVuCdOMhV0vxTBwqrFw77HysvFEQAh+QQFBAAKACwAAAAAIQAnAAAEqFDJSau9OOvNez5gGHqaaJKfOaKXugpwHHcuKMk4Xd/4rCTAYFBSO/B6AolwSdwpkDDlcqgoHnvSaaLpuuZ+2m3VCU2CtVyVV5adpk9PaJs57saRc+FbtPaFxVZ3WGdudWqCX397L3KEdIFleVSQjYqGcJGOepd8iGyak2SVYYs2nn6knIx4oEClRqdRrYCirJaUtqm4gxu7X71OLBWBwhTExcjJysseEQAh+QQJBAAKACwBAAMAFAAhAAAEU9DIOZW9WNGd+6Zd9lXKYJ7nKFloqxpsm6qxPLy1jJf2TfO2Xc83yrl+Q2FPGUQunc0iUAelSpPV4/W5jX6MKKb1O9WSsd0xpxzOtqUhyy6u+dEjACH5BAkEAAoALAAAAAAhACcAAASAUMlJq7046827/10hjiOIkahErCwboqXSzi9cqLPL2SKeEzWYLxdMyX7AHW9IU9qYrSIJqtvwbsefNIZMWpdZolMYbn6f5ejY2N320lXNlbpyY9vrKbye5yLtdF5yYHhnZIWDaIgZc3uCjIR/fW+LJ5Fak3eShkYmnp+goaKjHREAIfkECQQACgAsAAAAACEAJwAABKhQyUmrvTjrzbv/IFaMJNkRaJpKZXuqKtuaHBwrM73ZK54XkoRwOJTwULJckEg0HpOzJVPo5EFdimlRcSRcS9Jp1falaancp0+ZPY9h5VGY+b79gG1tvXefN9NWa1F5YoBkglhnCXtIiGCEdIZwjmZuknY/fltdcXiKjF6UcpB/nKKelqZ9pJtqq5+XfJmsaKqzsLZsuK6zO7xsvoGrIRXDxMfIycrLxBEAIfkEBQQACgAsAAAAACEAJwAABKdQyUmrvTjrzbu3RiiKXzaeJXaO3eC+r7SSHGzLs9HasZLrioRwOJTwej8JcWk8DnAz5bKocD59Oek00TxCV9ppl/dFBbfcqrPMOm/HN2zULVZ75WA6007Gm9FpVmw0gHAwgyFhe4J+bYV8cUl6RIZIWZNUjJKPmpeca42EaJUuiECfd5ujkIehiZhCpFeqb6yWc6h9khudcykVu78TwcKuQMXIycrKEQAh+QQJBAAKACwBAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnhjMNC3BiFzXN6zvsx7rBxSiiDsjCclT4Jg2p48DjD6p1YAytclqpUNsddvqZskxcRF8VCfZS3fzah7DuRovOie3TutrdHlnd2WDdoIZeoVpgG+JGIuQF5J/LhWTl5kumyqdJp+XoqMiEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OIPNef5VJ4KkInYleHqptgKtu8bYC5NJruuSLe3AH5BnegmHieOwZ1Qgc8pgceZ8RndM6jNZRWZPV+L2O+ouzVIfGrsmqsdt6BQc58Lf1joZpe/jvX5NcHeCeYRahnl/Z4d0g4qFgI1lj4CLUpN8lWeXbCpNNCGgoRNqpKWjp6anc2WsrXyvrBEAIfkECQQACgAsAAAAACEAJwAABKlQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnvvCUmDft5TsPC/BiBoOp+v1fjTFkKgwHhVA4TJQdCaQLOmy6sSitEOu0UsCM607cmpqEz+jSrbbB02yqU20unWfp+tZcVN+V4Bfglt5VnsxiGGKXYZljmd6kmtykGOXfJlohXB9mm92npahpoucjaKfjEGUOaN0qIOzf7WJJ6W2u4EyFXDAFMLDr8bEScjLzBoRACH5BAUEAAoALAAAAAAhACcAAASqUMlJq7046827t0coil82niV2jum1koogz3P3hhKtS0nv+5LbIaerKX7I4I1YFPCQQIWQWXxCE8oXdXe8YqXLWNPZvWZXW5oVekaJm+skWPuultlzdJ3r/U73andyf2NkfW0sgEaHeW6FcT+IMI+CkY2JlIyEY5BRm3CVnmGZXpI4ijKdPaZDqIall5Ocoauxp6Rmtq2UG592vaOzwHQtFH/FE8fIy8zNzBEAIfkECQQACgAsDAADABQAIQAABFPQyDmVvVjRnfumXfZVymCe5yhZaKsabJuqsTy8tYyX9k3ztl3PN8q5fkNhTxlELp3NIlAHpUqT1eP1uY1+jCim9TvVkrHdMacczralIcsurvnRIwAh+QQJBAAKACwAAAAAIQAnAAAEgFDJSau9OOvNu/8gVowkGV5lKhFs23ZpubouHI8zzdp3rvMxHw2oUuhenBvOeCQQZczj0xT9JZXC2rVXHW6DXe1GWcgix9jwWUM2777FphMOlU+Xdjo1j+by2Wl/GW1qb31ggiKBTXdlhXOHcYx6eJORdZaAfpmDaSefoKGio58RACH5BAkEAAoALAAAAAAhACcAAASoUMlJq7046827/2AoFWRZdkSqqqNpouvauiQcpzMtJXzfSzeWgnZS+I7AICHn2h1/CuVySCw4n4lkkPkyYrNRJbf4BUvHNS9We0Nb1U92zH2Nh7dUYh15b+d1cHxnf02BPnIyhF1liEJVb4x9c4pkX404lGmRg497h5KJnYZQnFWepGKZkJagjqajPJdTopuptKylehy5gBu8hb62ryIUosTHyMnKyxIRACH5BAUEAAoALAAAAAAhACcAAASpUMlJq7046827/5IhjiOIkah5oWQ3vDAcsqIbxzMtJXzfSzecglZT+I7A4CvH2h1/CuVySHQ+E0klM2W8YqPSbat7zQbFJfLTfEMXvV/pwG2wrsFaqk6NxJ/1TXw+bEJEdYJQcnR2fYqAXHCEMo9jkX5tlGmWjoaMg5eFVYg8klOdo3FhmW9epXOrh5uqp7J5tK2gk6cbnKK8s74qE7vCi8XDwcfKy8wWEQAh+QQJBAAKACwMAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzTf6INh5YThqpXliqbhe7dcFdF1LMTLbNh7vPJqvBQwOU0XesZTsKXLN2/PHCUqhVWtgqdpot1Ni1sp1ebVl2dgYRq6VbebbiT2T413NN62bX6l2bHV6aHhmhHeDGXuGaoFwihiMkReTgC8UlC+aK5wnniOgmKOjEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OGsFuvdbyH2fuJGlmaGgirGd+8LyBQNSou97zvOSm++nGxKDNAWxp1wmkCzjTwocRZtLKlOIPXanVpS2+K1ync/yNokep89ON1SsJrfDJHn9zY7v53l/gnBZg32Fd4ReiYeLfopgjFd3knSUj42RmJN+lYE1FFygE6KjeCmmpy2ppaOtoK+pFhEAIfkECQQACgAsAAAAACEAJwAABI1QyUmrvTjrzTf6INh5YThqpXliqbhe7ffCsZTcOG7nuRQjO94tKPTVFEIdMpkwtog8aE/xkyqZTeoRax1qn8tkN1sNF83Rb2rMVpfaXLcqHi/Tmc41elrf4vdKdn99YHdici6GZ4KHhHqKaYxnjm+AXpRzg3+SaZguMxRloBOio4gypnmVqaWjramwLxEAIfkEBQQACgAsAAAAACEAJwAABIpQyUmrvTjrzbv/0iGOI4iRqHmhpGqxpUvBopTcOG7neUjvvBsw6IMNeceegnZI6hTBJ9MphEYTRRYVa41mU11iGLn8jZVX7vT8TH9b7Kq7bIxz5+s53qy/vmN9XnRadlt/NYWJeX6KfIx7dYFii4KQhJJklGKWYJhKazKHTaGipKWmoKGppqytrBEAIfkECQQACgAsFwADAAkAIQAABBLQyEmrvTjrzbv/YCiOZGmeZQQAIfkECQQACgAsAAAAACEAJwAABFBQyUmrvTjrzbv/YCgVZFmKlqmilWqylHvCo1zQtYwr9o33O+DPFiQOdUdXEUkTNo1PJsw5hValLGrWusWitF9u2CsCl8Vncsi8Ru/e8PguAgAh+QQJBAAKACwAAAAAIQAnAAAEhlDJSau9OOvNu/9gKIZEaZpjda4ptZ5SIs9zTNPSiyo3zveynI5gAxZ7Qt3xtvQNiT9jFKl4NmtTZnV4DWad3C8W6LWKveRE8tVVn93mdHvNes+3Srs+Tr7zpXJ4bHqBf1SFYYGIeYp9gnWNUoZai4ORVJM+lXUtjzCdnjudZqClpqeoqRsRACH5BAUEAAoALAAAAAAhACcAAASFUMlJq7046827/2AojuQ2nChaTmkrJXAcv7IstSldw/p+46deTWhTAIOK3SypTPyAxGXTaTxGeUzlE3elTreurE88rELJxa+Zi5Y2wbk2Vn0cdO/rsJpulXvfeXF7gHV4fGeDWoEqfniFjZCPiWOSgIdsk2WVipdhK4+ffSujpKWmp6grEQAh+QQJBAAKACwXAAYACQAbAAAEEFDISau9OOvNu/9gKI5kyUUAIfkECQQACgAsAAAAACEAJwAABElQyUmrvTjrzbv/YCiOZGkqQaqqJ7qu7QufMkvXQYzrNS/7L+DMhMvdesdfMrgclopCG3HXlD6pU2RWuWV2nSRoa0wum8/o9CYCACH5BAUEAAoALAAAAAAhACcAAARsUMlJq7046827/2AojmRpckmqqtLqti6rxDKdwjQe6+9s8ytg7efLFXfHni0hvCWDz6Fx2WRGndSrNcsldqfeMHiM/JbFZ7ISvVZDze20PE5/s+1u6Ry/19f9fH9Yd4CFTieIiYqLjI2OjyQRACH5BAUEAAoALAAAAAABAAEAAAQCUEUAIfkEBQQACgAsAAAAAAEAAQAABAJQRQA7) 50% no-repeat;width:100%;height:64px}.esri-attachments__actions{flex-flow:wrap;padding:6px 7px;display:flex}.esri-attachments__item-add-icon{font-size:var(--calcite-font-size-xl);margin:0;padding:0 7px}.esri-attachments__delete-button{color:var(--calcite-color-status-danger);width:auto;margin-right:auto}.esri-attachments .esri-attachments__items{width:100%;margin:0;padding:0;display:flex}.esri-attachments .esri-attachments__item{margin:0;line-height:var(--calcite-font-line-height-relative-tight);list-style-type:none}.esri-attachments__item-button{outline-offset:-4px;cursor:pointer;width:100%;text-align:unset;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-foreground-1);border-radius:var(--calcite-border-width-md);align-items:center;margin:0 0 var(--calcite-spacing-xs);padding:var(--calcite-spacing-xs) 7px;text-decoration:none;transition:border-color .125s ease-in-out;display:flex;box-shadow:0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-button:focus,.esri-attachments__item-button:hover{border-color:var(--calcite-color-border-white)}.esri-attachments__item-link{text-decoration:none;display:block;position:relative}.esri-attachments__item-link:hover .esri-attachments__item-link-overlay,.esri-attachments__item-link:focus .esri-attachments__item-link-overlay{opacity:1}.esri-attachments__item-add{background-color:var(--calcite-color-background);padding:6px 0}.esri-attachments__add-attachment-button{align-items:baseline!important;border-radius:var(--calcite-corner-radius-xs);border:none!important;justify-content:flex-start!important;padding:12px 3px!important;font-size:var(--calcite-font-size-sm)!important;transition:background-color .25s ease-in-out}.esri-attachments__add-attachment-button:hover{background-color:var(--calcite-color-foreground-1)!important;text-decoration:none;box-shadow:0 1px 2px #0000004d}.esri-attachments__item-link-overlay{opacity:0;pointer-events:none;-webkit-user-select:none;user-select:none;justify-content:center;align-items:center;transition:opacity .25s ease-in-out;display:flex;position:absolute;inset:0}.esri-attachments__item-link-overlay-icon{color:var(--calcite-color-foreground-2);background-color:var(--calcite-color-foreground-1);border-radius:100%;justify-content:center;align-items:center;padding:18px;display:flex}.esri-attachments__item-link-overlay-icon svg{fill:var(--calcite-color-foreground-1)}.esri-attachments__item-mask{justify-content:center;align-items:center;width:64px;height:64px;display:flex;position:relative;overflow:hidden;box-shadow:0 0 0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-2);padding:24px 0}.esri-attachments__item-mask--icon .esri-attachments__image{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}.esri-attachments__metadata{justify-content:space-between;margin-top:3px;display:flex}.esri-attachments__metadata .esri-attachments__metadata-fieldset{text-align:center;background-color:var(--calcite-color-foreground-1);border:none;flex:0 calc(50% - 1px);margin:0;padding:6px 7px;font-size:var(--calcite-font-size-sm)}.esri-attachments__file-name{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;margin-bottom:3px;font-size:var(--calcite-font-size-sm);display:inline-block}.esri-attachments__file-fieldset{border:none;margin:0;padding:var(--calcite-spacing-md) 7px}.esri-attachments__file-input{opacity:0;z-index:-1;width:.1px;height:.1px;position:absolute;overflow:hidden}.esri-attachments__container--list .esri-attachments__items{flex-flow:column}.esri-attachments__container--list .esri-attachments__item-mask{flex:none;margin-right:7px;position:relative}.esri-attachments__container--list .esri-attachments__image{max-width:unset;max-height:unset;left:50%}.esri-attachments__container--list .esri-attachments__label{flex:auto;justify-content:space-between;display:flex}.esri-attachments__container--list .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;cursor:pointer;flex:1 0 0}.esri-attachments__container--list .esri-attachments__item-chevron-icon{cursor:pointer;flex:none;padding:0 15px}.esri-attachments__container--preview .esri-attachments__items{flex-flow:wrap;align-items:center}.esri-attachments__container--preview .esri-attachments__item{width:100%;margin-bottom:var(--calcite-spacing-md)}.esri-attachments__container--preview .esri-attachments__item-mask{width:100%;height:auto}.esri-attachments__container--preview .esri-attachments__item-button{box-shadow:none;flex-flow:column}.esri-attachments__container--preview .esri-attachments__item-button .esri-attachments__label{margin:var(--calcite-spacing-md) 0}.esri-attachments__container--preview .esri-attachments__image{max-width:100%}.esri-attachments__container--preview .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;text-align:center;text-overflow:ellipsis;width:calc(100% - 15px);margin-top:var(--calcite-spacing-md);overflow:hidden}.esri-attachments__container--preview .esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-1)}.esri-attachments__form-node{background-color:var(--calcite-color-foreground-1);padding:6px 7px;box-shadow:var(--calcite-shadow-sm)}.esri-attachments__form-node .esri-attachments__item-mask{box-shadow:none;width:unset;height:unset}.esri-attachments__form-node .esri-attachments__image{max-width:100%}.esri-attachments__error-message{background-color:var(--calcite-color-foreground-1);border-top:3px solid var(--calcite-color-status-danger);margin:6px 7px;padding:var(--calcite-spacing-md) 15px;animation:.25s ease-in-out esri-fade-in-down;box-shadow:0 1px 2px #0000004d}.esri-attachments__progress-bar{width:100%;position:absolute}.esri-attachments__item-mask:dir(rtl){margin-left:7px;margin-right:0}.esri-feature-form{letter-spacing:0em;background:var(--calcite-color-background);padding:var(--esri-widget-padding)}.esri-feature-form__disabled-notice{margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form .esri-feature-utility-network-associations,.esri-feature-form .esri-feature-form-utility-network-association-list{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info__description{color:var(--calcite-color-text-2)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info h5{font-size:inherit}.esri-feature-form__form{flex-direction:column;display:flex}.esri-feature-form__centered-button{align-self:center}.esri-feature-form__description-text{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-feature-form__list-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature-form__related-records_header{margin-bottom:var(--calcite-spacing-xs);display:flex}.esri-feature-form__related-records_header span{flex-grow:1}.esri-feature-form__related-records_label calcite-notice,.esri-feature-form__related-records_label .esri-feature-form__description-text{margin-bottom:var(--calcite-spacing-xs)}.esri-feature-form__related-records_list{min-height:40px;margin-bottom:var(--calcite-spacing-xs)}label.esri-feature-form__label{gap:.5em;margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__label{opacity:1;flex-direction:column;justify-content:space-between;margin-bottom:var(--calcite-spacing-xs);transition:opacity .25s,margin .25s;display:flex;position:relative}.esri-feature-form__label:last-child{margin-bottom:0}.esri-feature-form__label-text-content{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;align-items:center;display:flex}.esri-feature-form__form-header{margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__form-header .esri-feature-form__description-text~.esri-widget__heading{margin-bottom:0}.esri-feature-form__input{width:100%}.esri-feature-form__input:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}textarea.esri-feature-form__input{resize:vertical}.esri-feature-form__input--disabled{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__field-error-message{padding:7px 0;font-size:var(--calcite-font-size-sm)}.esri-feature-form__date-input-container{flex-direction:column;display:flex}.esri-feature-form__date-input-container .esri-feature-form__input{margin-bottom:3px}.esri-feature-form__date-input-container :last-child{margin-bottom:0}.esri-feature-form__input--radio-group{flex-direction:column;display:flex}.esri-feature-form__input--radio-label{align-items:center;display:flex}.esri-feature-form__input--switch{margin:7px 0}.esri-feature-form__group{margin:0 0 var(--calcite-spacing-md);background-color:inherit;margin-inline:-10px}.esri-feature-form__group--sequential{border-bottom:none;border-inline-start:3px solid #adadad4d}.esri-feature-form__group--active{border-inline-start-color:var(--calcite-color-status-info)}.esri-feature-form__text-element{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal)}.esri-feature-form__text-element a{transition:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start inset-size,opacity,outline-color,transform var(--calcite-animation-timing) ease-in-out 0s,outline 0s,outline-offset 0s;background-color:var(--calcite-color-background);background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));color:var(--calcite-color-text-link);background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px;border-style:none;padding:0;text-decoration:none;display:inline;position:relative}.esri-feature-form__text-element a:hover,.esri-feature-form__text-element a:focus{background-size:100% 1px,100% 1px}.esri-feature-form__text-element a:active{background-size:100% 2px,100% 2px}.esri-feature-form__text-element a.calcite--rtl{background-position:100% 100%,100% 100%}.esri-feature-form__text-element code{border:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-3);white-space:normal;word-break:break-word;color:var(--calcite-color-text-2);font-family:var(--calcite-code-family);border-radius:var(--calcite-spacing-base);padding:.25em;font-size:85%}.esri-feature-form__text-element h1,.esri-feature-form__text-element h2,.esri-feature-form__text-element h3,.esri-feature-form__text-element h4,.esri-feature-form__text-element h5{color:var(--calcite-color-text-1);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-bold);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element h5{font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__text-element h6{color:var(--calcite-color-text-2);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-medium);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element p{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal);margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form__text-element strong{font-weight:var(--calcite-font-weight-bold)}:dir(rtl) .esri-feature-form__date-input-part:first-child .esri-feature-form__input{border-left:none;border-right:1px solid #adadad4d}.esri-feature-form-utility-network-association-layers{background-color:var(--calcite-color-background)}.esri-feature-form-utility-network-association-layers__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-layers__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-layers__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__list-container{min-height:var(--calcite-spacing-xxxl);margin-bottom:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__feature-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-feature-form-utility-network-association-layers__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);top:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__filter-options-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header{flex-direction:row;align-items:baseline;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header span{flex-grow:1}.esri-feature-form-utility-network-association-layers__spatial-select-container{flex-direction:column;align-items:flex-end;gap:6px;display:flex}.esri-feature-form-utility-network-association-layers__spatial-select-toolbar{--calcite-action-group-border-color: transparent;border-width:var(--calcite-border-width-sm, 1px);border-radius:var(--calcite-corner-radius-round, 4px);border-style:solid;border-color:var(--calcite-color-border-3, var(--calcite-color-inverse));width:100%;min-height:min-content;overflow:hidden}.esri-feature-form-utility-network-association-layers__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-feature-form-utility-network-association-layers__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-form-utility-network-association-list{background-color:var(--calcite-color-foreground-1)}.esri-feature-form-utility-network-association-list__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-list__header calcite-block{margin-block-start:-18px;margin-inline:-15px}.esri-feature-form-utility-network-association-list__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-list__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__list-container{flex-direction:column;min-height:var(--calcite-spacing-xxxl);display:flex}.esri-feature-form-utility-network-association-list__list-container calcite-fab{margin-block:var(--calcite-spacing-md);flex-direction:row;align-self:center;display:flex}.esri-feature-form-utility-network-association-settings{--calcite-block-padding: 0;background-color:var(--calcite-color-foreground-1);flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings calcite-block{border:1px solid var(--calcite-color-border-3);margin-block:0}.esri-feature-form-utility-network-association-settings calcite-block:first-of-type{border-radius:var(--calcite-spacing-sm) var(--calcite-spacing-sm) 0 0}.esri-feature-form-utility-network-association-settings calcite-block:last-of-type{border-top:none;border-radius:0 0 var(--calcite-spacing-sm) var(--calcite-spacing-sm);margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings calcite-block calcite-label{margin-inline:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings__info-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings__info-container>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature{letter-spacing:0em;isolation:isolate;position:relative;width:100%}.esri-feature__title{word-break:break-word;word-wrap:break-word;font-size:var(--calcite-font-size);display:block}.esri-feature calcite-icon{box-sizing:content-box}.esri-feature__attachments{display:flex}.esri-feature__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-relationship{position:relative}.esri-feature-relationship__list{min-height:var(--calcite-spacing-xxxl)}.esri-feature-relationship__list-item--hidden{display:none}.esri-feature-utility-network-associations{position:relative}.esri-feature__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);position:sticky;top:var(--calcite-spacing-md)}.esri-feature__feature-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-icon-loading-indicator{display:inline-block}.esri-feature__content-element{margin-bottom:24px;padding:0 7px}.esri-feature__content-element .esri-widget__heading{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature__content-element:only-child,.esri-feature__content-node--text{margin-bottom:3px}.esri-feature__content-node{flex-direction:column;display:flex}.esri-feature__text{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature-attachments{flex-flow:column wrap;align-items:flex-start}.esri-feature__last-edited-info{padding-top:var(--calcite-spacing-xs);font-size:var(--calcite-font-size-sm)}:dir(rtl) .esri-feature__attachments-title{margin:0 0 0 auto}:dir(rtl) .esri-feature__attachments--list .esri-feature__attachment-item-mask{margin-left:7px;margin-right:0}.esri-feature-content__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-feature-content__loader{background:url(./assets/attachments/images/loading-throb.gif) 50% no-repeat;width:100%;height:64px}.esri-feature-content{font-size:var(--calcite-font-size)}.esri-feature-content h1,.esri-feature-content h2,.esri-feature-content h3,.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{letter-spacing:0;color:var(--calcite-color-text-2);margin:.5em 0;font-weight:var(--calcite-font-weight-semibold);line-height:normal}.esri-feature-content h1{font-size:1.75em}.esri-feature-content h2{font-size:1.5em}.esri-feature-content h3{font-size:1.25em}.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{font-size:1em}.esri-widget__heading.esri-feature-element-info__title{color:var(--calcite-color-text-2);margin-top:0;margin-bottom:.2em;font-size:var(--calcite-font-size-xl);font-weight:var(--calcite-font-weight-normal)}.esri-feature-element-info__description{margin-bottom:var(--calcite-font-size-xs);font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-normal)}.esri-feature-content p{margin:0 0 1.2em;font-size:var(--calcite-font-size)}.esri-feature-content p:last-child{margin-block-end:0}.esri-feature-content img{image-orientation:from-image;max-width:100%;max-height:100%}.esri-feature-content video{max-width:100%;max-height:100%}.esri-feature-content figure{margin:0;padding:0}.esri-feature-content figcaption{margin:.2em 0 0;padding:0;font-size:var(--calcite-font-size-sm);font-style:italic;display:block}.esri-feature-content ul,.esri-feature-content ol{margin-block:1rem}.esri-feature-content ul:first-child,.esri-feature-content ol:first-child{margin-block-start:0}.esri-feature-content a{color:var(--calcite-color-text-3)}.esri-feature-content a:hover,.esri-feature-content a:focus{color:var(--calcite-color-text-2)}.esri-features{--calcite-color-background: $background-color;flex-direction:column;display:flex}.esri-features img{image-orientation:from-image}.esri-features__flow-item--collapsed{--calcite-flow-item-header-border-block-end: none}.esri-features__container{background-color:var(--calcite-color-background)}.esri-features__container:not(:empty){padding:var(--calcite-spacing-md)}.esri-features .esri-feature,.esri-features .esri-feature-relationship,.esri-features .esri-feature-utility-network-associations{background-color:#0000}.esri-features__heading{word-break:break-word;word-wrap:break-word}.esri-features__header,.esri-features__footer{background-color:var(--calcite-color-foreground-1);flex:1;justify-content:flex-end;align-items:center;display:flex}.esri-features__pagination-text{padding-inline:var(--calcite-spacing-sm);color:var(--calcite-color-text-3);font-size:var(--calcite-font-size-sm)}.esri-features__loader{align-self:center;padding-inline:1rem}.esri-features__pagination-action-bar{flex:1}.esri-features__pagination-menu-button{border-inline-start:1px solid var(--calcite-color-border-3)}.esri-features__icon{flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg);display:inline-block}.esri-features__action-image{background-position:50%;background-repeat:no-repeat;background-size:contain;flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg)}.esri-features__header{border-block-end:1px solid var(--calcite-color-border-3)}.esri-features__content-feature{--calcite-flow-item-footer-padding: 0}.esri-features__feature-menu-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-features__action--exit{transform:scaleX(-1)}.esri-feature-media__container{flex-flow:wrap;align-items:center;width:100%;min-height:150px;margin-top:var(--calcite-spacing-xs);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button{cursor:pointer;color:var(--calcite-color-text-3);background:0 0;border:none;justify-content:center;align-items:center;padding-block:var(--calcite-spacing-xs);padding-inline:var(--calcite-spacing-sm);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button:hover,.esri-feature-media__container .esri-feature-media__pagination-button:focus{color:var(--calcite-color-text-2);fill:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2)}.esri-feature-media__item-title{margin:0;font-size:var(--calcite-font-size-md)}.esri-feature-media__item-caption{padding-block-start:3px;font-size:var(--calcite-font-size-sm)}.esri-feature-media__item{justify-content:center;align-items:flex-start;width:100%;height:auto;margin-block:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-navigation{flex:0 100%;justify-content:space-between;align-items:flex-start;margin-block-end:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-text{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-media__pagination{flex:none;align-items:center;display:flex;overflow:hidden}.esri-feature-media__pagination:only-child{margin-inline-start:auto}.esri-feature-media__pagination-text{color:var(--calcite-color-text-3);padding-inline:var(--calcite-spacing-base);font-size:var(--calcite-font-size-sm)}.esri-feature-media__item-container{flex:0 auto;width:100%}.esri-feature-media__item-container img{max-width:100%}.esri-feature-media__item-container img[src$=".SVG"],.esri-feature-media__item-container img[src$=".svg"]{width:100%}.esri-feature-media__chart{background-color:var(--calcite-color-foreground-1);width:100%;height:155px}:dir(rtl) .esri-feature-media__image-summary{margin:0 .5em 0 0}:dir(rtl) .esri-feature-media__pagination-icon{transform:rotate(180deg)}.esri-identity-modal__info,.esri-identity-modal__notice{margin:0;margin-bottom:var(--calcite-spacing-md)}.esri-ui .esri-popup{z-index:1;pointer-events:none;flex-flow:column;display:flex;position:absolute}.esri-ui .esri-popup .esri-features{flex:1;width:100%}.esri-ui .esri-popup .esri-widget__heading{margin:0}.esri-ui .esri-popup--hidden{display:none}.esri-popup--shadow{box-shadow:0 1px 4px #000c}.esri-popup--aligned-top-center{transform-origin:50% 100%}.esri-popup--aligned-bottom-center{transform-origin:50% -5%}.esri-popup--aligned-top-left,.esri-popup--aligned-bottom-left{transform-origin:100%}.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-right{transform-origin:-5%}.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right{animation:.2s ease-in-out popup-intro-animation-down}.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right{animation:.2s ease-in-out popup-intro-animation-up}.esri-popup__main-container{z-index:1;pointer-events:auto;background-color:var(--calcite-color-foreground-1);width:340px;min-height:48px;max-height:340px;display:flex;position:relative;overflow:hidden}.esri-popup__pointer{width:0;height:0;position:absolute}.esri-popup__pointer-direction{content:"";background-color:var(--calcite-color-foreground-1);width:var(--calcite-spacing-md);height:var(--calcite-spacing-md);position:absolute}.esri-popup--aligned-top-center .esri-popup__pointer{margin:0 0 0 -6px;top:100%;left:50%}.esri-popup--aligned-bottom-center .esri-popup__pointer{margin:0 0 0 -6px;bottom:100%;left:50%}.esri-popup--aligned-top-left .esri-popup__pointer{bottom:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-bottom-left .esri-popup__pointer{top:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-top-right .esri-popup__pointer{bottom:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-bottom-right .esri-popup__pointer{top:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction,.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{transform:scale(.75,2) rotate(45deg)}.esri-popup--aligned-top-left .esri-popup__pointer-direction,.esri-popup--aligned-bottom-left .esri-popup__pointer-direction,.esri-popup--aligned-top-right .esri-popup__pointer-direction,.esri-popup--aligned-bottom-right .esri-popup__pointer-direction{top:-6px;left:-6px;transform:scaleY(3.5) rotate(45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction{top:-6px;left:0}.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{bottom:-6px;left:0}.esri-view-width-xlarge .esri-popup__main-container{width:460px}.esri-view-width-large .esri-popup__main-container{width:400px}.esri-view-width-medium .esri-popup__main-container{width:340px}.esri-view-width-less-than-medium .esri-popup__main-container{width:280px}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{margin-bottom:var(--calcite-spacing-xl)}.esri-view-width-xsmall .esri-popup--is-docked-top-center,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{width:auto;margin:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{width:100%;max-height:75%;position:absolute;left:0;right:0}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{bottom:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container{top:0}.esri-view-height-xlarge .esri-popup__main-container{max-height:460px}.esri-view-height-xlarge.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:410px}.esri-view-height-large .esri-popup__main-container{max-height:400px}.esri-view-height-large.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:350px}.esri-view-height-less-than-medium .esri-popup__main-container{max-height:300px}.esri-view-height-less-than-medium.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:250px}.esri-popup--is-docked{margin:15px 15px 30px;animation:.25s ease-out esri-docking-animation;inset:0}.esri-ui .esri-popup--is-docked{flex-flow:row}.esri-popup--is-docked-top-left,.esri-popup--is-docked-top-center,.esri-popup--is-docked-top-right{align-items:flex-start}.esri-popup--is-docked-bottom-left,.esri-popup--is-docked-bottom-center,.esri-popup--is-docked-bottom-right{align-items:flex-end}.esri-popup--is-docked-top-left,.esri-popup--is-docked-bottom-left{justify-content:flex-start}.esri-popup--is-docked-top-center,.esri-popup--is-docked-bottom-center{justify-content:center}.esri-popup--is-docked-top-right,.esri-popup--is-docked-bottom-right{justify-content:flex-end}.esri-popup--is-docked-top-left .esri-popup__main-container,.esri-popup--is-docked-top-right .esri-popup__main-container,.esri-popup--is-docked-bottom-left .esri-popup__main-container,.esri-popup--is-docked-bottom-right .esri-popup__main-container{max-height:80%}.esri-popup--is-docked-top-center .esri-popup__main-container,.esri-popup--is-docked-bottom-center .esri-popup__main-container{max-height:40%}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none}}.esri-tooltip{--calcite-input-padding-inline: .5rem;--calcite-input-height: 1.5rem;--field-height: .875rem;--field-height--input: var(--calcite-input-height);--field-row-gap: 1px;--field-column-gap: var(--calcite-app-spacing-2);--field-input-width: 6.5rem;--field-title-extra-margin: var(--calcite-app-spacing-6);--field-title-color: var(--calcite-color-text-2);--field-value-color: var(--calcite-color-text-1);--font-size: var(--calcite-font-size--3);--font-size--input: var(--calcite-font-size--2);--content-padding-inline: var(--calcite-app-spacing-2);--content-padding-block: var(--calcite-app-spacing-2);--help-message-border-spacing: var(--calcite-app-spacing-2);--help-message-min-width: 7rem;--icon-size--feedback: .625rem;z-index:1;will-change:transform;width:fit-content;position:absolute;top:0;left:0;overflow:visible}.esri-tooltip-content{gap:var(--content-padding-block);border:solid 1px var(--calcite-color-border-3);padding-block:var(--content-padding-block);padding-inline:var(--content-padding-inline);color:var(--calcite-color-text-2);width:min-content;line-height:var(--calcite-font-line-height-relative-tight);font-size:var(--font-size);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);touch-action:none;view-transition-name:tooltip-content;background:var(--calcite-color-foreground-2);border-radius:.25rem;flex-direction:column;display:flex;position:relative;box-shadow:0 6px 20px -4px #0000001a,0 4px 12px -2px #00000014;outline:none!important}.esri-tooltip-content:empty{opacity:0}.esri-tooltip-content__header{margin-block-start:calc(var(--content-padding-block) * -1);margin-inline:calc(var(--content-padding-inline) * -1);border-block-end:solid 1px var(--calcite-color-border-3);justify-content:flex-start;block-size:24px;padding-block-end:0;display:flex}.esri-tooltip-content__header__spacer{flex-grow:1;flex-shrink:1}.esri-tooltip-content__header__actions{flex-grow:0;flex-shrink:0;padding-inline-end:var(--content-padding-inline)}.esri-tooltip-content__header calcite-button{--calcite-offset-invert-focus: 1}.esri-tooltip-content--input{--field-height: var(--field-height--input);background:var(--calcite-color-foreground-1);pointer-events:all;-webkit-backdrop-filter:none;backdrop-filter:none}.esri-tooltip-content--input:not(:focus-within){opacity:.8}.esri-tooltip.calcite-mode-dark .esri-tooltip-content,.esri-tooltip.calcite-mode-dark .esri-tooltip-content--input{background:var(--calcite-color-foreground-1)}.esri-tooltip-table{grid-gap:var(--field-row-gap) var(--field-column-gap);grid-template-columns:max-content 1fr max-content max-content;align-items:flex-start;width:max-content;display:grid}.esri-tooltip-field{display:contents}.esri-tooltip-field__title,.esri-tooltip-field__value{block-size:var(--field-height);white-space:nowrap;color:var(--calcite-color-text-3);justify-content:flex-start;align-items:center;display:flex}.esri-tooltip-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-field__value{color:var(--field-value-color);grid-column:span 3}.esri-tooltip-editable-field{display:contents}.esri-tooltip-editable-field__title,.esri-tooltip-editable-field__value{block-size:var(--field-height);white-space:nowrap;justify-content:flex-start;align-items:center}.esri-tooltip-editable-field__title{display:flex}.esri-tooltip-editable-field__value{font-variant-numeric:tabular-nums;display:contents}.esri-tooltip-editable-field__value__content{grid-column:span 3;align-items:center;min-width:max-content;display:flex}.esri-tooltip-editable-field__value__content--read-only{padding-inline:var(--calcite-input-padding-inline);block-size:var(--calcite-input-height);line-height:var(--calcite-input-height);font-size:var(--calcite-font-size--2)}.esri-tooltip-editable-field--feedback.esri-tooltip-editable-field--locked .esri-tooltip-editable-field__value__content{grid-column:span 2}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__value__content{color:var(--field-value-color);align-self:center}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__lock-icon{width:var(--icon-size--feedback);min-width:var(--icon-size--feedback);height:var(--icon-size--feedback);min-height:var(--icon-size--feedback);align-self:center;margin-top:-2px}.esri-tooltip-editable-field--input{padding:0}.esri-tooltip-editable-field--input .esri-tooltip-editable-field__title{font-size:var(--font-size--input)}.esri-tooltip-editable-field__input-wrapper{inline-size:var(--field-input-width)}.esri-tooltip-editable-field__input-message{text-wrap:auto;width:100%;margin-block-end:var(--calcite-input-message-spacing-value)}.esri-tooltip-editable-field__input-suffix{line-height:var(--field-height--input)}.esri-tooltip-editable-field__button{width:var(--field-height--input)}.esri-tooltip-value-by-value span:nth-child(2){margin-inline:7px}.esri-tooltip-help-message{gap:var(--calcite-app-spacing-2);margin-inline:calc(var(--content-padding-inline) * -1);border-block-start:solid 1px var(--calcite-color-border-3);padding-block-start:var(--content-padding-inline);padding-inline:var(--content-padding-inline);width:auto;min-width:var(--help-message-min-width);text-align:left;text-wrap:balance;white-space:break-spaces;font-size:var(--font-size);border-block-end:1px solid var(--calcite-color-foreground-1);justify-content:center;align-items:center;display:flex}.esri-tooltip-help-message:only-child{border-block:none;padding-block-start:var(--field-row-gap)}.esri-tooltip-help-message__icon{color:var(--calcite-color-status-info)}.esri-tooltip-help-message__text{padding-block-start:2px}.esri-tooltip ::view-transition-old(tooltip-content){animation-duration:.1s}.esri-tooltip ::view-transition-new(tooltip-content){animation-duration:.1s}.esri-tooltip{--offset-start: calc(-100% - var(--offset))}.esri-tooltip--debug:after{--size: 10px;margin-top:calc(var(--size) * -.5);margin-left:calc(var(--size) * -.5);width:var(--size);height:var(--size);content:"";background:var(--calcite-color-status-danger);position:absolute;top:0;left:0}.esri-tooltip--bottom .esri-tooltip-content{transform:translate(-50%,var(--offset))}.esri-tooltip--bottom-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--bottom-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}.esri-tooltip--leading.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),-50%)}.esri-tooltip--leading-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--leading-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--top .esri-tooltip-content{transform:translate(-50%,var(--offset-start))}.esri-tooltip--top-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--top-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),-50%)}.esri-tooltip--trailing-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}`;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const fr="arcgis-map",li={base:fr,containerUI:`${fr}-container-ui`,containerElement:`${fr}-container-ui__element`,containerElementDefaultSlot:`${fr}-container-ui__element-default`,containerElementPopupSlot:`${fr}-container-ui__element-popup`,containerTopLeftColumn:`${fr}-container-ui__top-left-column`,containerTopRightColumn:`${fr}-container-ui__top-right-column`,containerBottomLeftRow:`${fr}-container-ui__bottom-left-row`,containerBottomRightRow:`${fr}-container-ui__bottom-right-row`,containerElementTopLeft:`${fr}-container-ui__element-top-left`,containerElementTopRight:`${fr}-container-ui__element-top-right`,containerElementBottomLeft:`${fr}-container-ui__element-bottom-left`,containerElementBottomRight:`${fr}-container-ui__element-bottom-right`,containerElementTopStart:`${fr}-container-ui__element-top-start`,containerElementTopEnd:`${fr}-container-ui__element-top-end`,containerElementBottomStart:`${fr}-container-ui__element-bottom-start`,containerElementBottomEnd:`${fr}-container-ui__element-bottom-end`},ts={topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",topStart:"top-start",topEnd:"top-end",bottomStart:"bottom-start",bottomEnd:"bottom-end",popup:"popup"};function AFe(t,e,i){return te`<div class=${Cr({[li.containerElementPopupSlot]:!0})}><slot name=${ts.popup} @slotchange=${e}></slot></div><div class=${Cr({[li.containerElementDefaultSlot]:!0})}>${i}<slot></slot></div><div class=${Cr({[li.containerTopLeftColumn]:!0})}><div class=${Cr({[li.containerElement]:!0,[li.containerElementTopLeft]:!0})}><slot name=${ts.topLeft}></slot></div><div class=${Cr({[li.containerElement]:!0,[li.containerElementTopStart]:!0})}><slot name=${t==="ltr"?ts.topStart:ts.topEnd}></slot></div></div><div class=${Cr({[li.containerTopRightColumn]:!0})}><div class=${Cr({[li.containerElement]:!0,[li.containerElementTopRight]:!0})}><slot name=${ts.topRight}></slot></div><div class=${Cr({[li.containerElement]:!0,[li.containerElementTopEnd]:!0})}><slot name=${t==="ltr"?ts.topEnd:ts.topStart}></slot></div></div><div class=${Cr({[li.containerBottomLeftRow]:!0})}><div class=${Cr({[li.containerElement]:!0,[li.containerElementBottomLeft]:!0})}><slot name=${ts.bottomLeft}></slot></div><div class=${Cr({[li.containerElement]:!0,[li.containerElementBottomStart]:!0})}><slot name=${t==="ltr"?ts.bottomStart:ts.bottomEnd}></slot></div></div><div class=${Cr({[li.containerBottomRightRow]:!0})}><div class=${Cr({[li.containerElement]:!0,[li.containerElementBottomRight]:!0})}><slot name=${ts.bottomRight}></slot></div><div class=${Cr({[li.containerElement]:!0,[li.containerElementBottomEnd]:!0})}><slot name=${t==="ltr"?ts.bottomEnd:ts.bottomStart}></slot></div></div>`}const CFe=Ht`:host{--arcgis-internal-color-black-30: color-mix(in srgb, #000000 30.2%, transparent);--arcgis-internal-box-shadow: var(--calcite-spacing-none) var(--calcite-spacing-px) var(--calcite-spacing-base) var(--arcgis-internal-color-black-30);--arcgis-internal-top-max-width: calc(min(100cqw, 100vw) - var(--calcite-spacing-xxxl));--arcgis-internal-panel-width: 300px;--arcgis-internal-panel-height: 100%;--arcgis-internal-panel-height-sm: 240px;--arcgis-internal-panel-height-md: 420px;--arcgis-internal-panel-height-lg: 540px;--arcgis-internal-panel-height-xl: 680px;--arcgis-internal-basemap-gallery-width-lg: 450px;--arcgis-expand-max-height: var(--calcite-spacing-xxxl);--arcgis-collapse-icon-flip: scaleX(1);--arcgis-row-direction: row;--arcgis-legend-internal-width: 300px;--arcgis-layout-overlay-space-top: 0px;--arcgis-layout-overlay-space-bottom: 0px;--arcgis-layout-overlay-space-left: 0px;--arcgis-layout-overlay-space-right: 0px;--arcgis-internal-sketch-justify-content: flex-start}:host{display:block;position:relative;height:100%;width:100%;padding:var(--calcite-spacing-none);margin:var(--calcite-spacing-none);container:arcgis-map-container/size;contain:layout}::slotted(:is([closed],[closed="true"])){display:none}:dir(rtl) ::slotted(:not(arcgis-swipe)){direction:rtl}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-attachments,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-coordinate-conversion,arcgis-daylight,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-elevation-profile,arcgis-expand,arcgis-feature-form,arcgis-features,arcgis-feature-table,arcgis-fullscreen,arcgis-grid-controls,arcgis-home,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-link-chart-layout-switcher,arcgis-locate,arcgis-measurement,arcgis-navigation-toggle,arcgis-oriented-imagery-viewer,arcgis-print,arcgis-search,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-time-slider,arcgis-time-zone-label,arcgis-track,arcgis-utility-network-associations,arcgis-utility-network-trace,arcgis-utility-network-validate-topology,arcgis-version-management,arcgis-video-player,arcgis-weather,arcgis-zoom)){box-shadow:var(--arcgis-internal-box-shadow)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width);min-width:var(--calcite-spacing-xxxl);min-height:var(--calcite-spacing-xxxl);transition:max-height .25s ease-in-out;overflow-y:auto}.arcgis-map-container-ui{position:absolute;inset:var(--calcite-spacing-none);padding:var(--calcite-spacing-none);z-index:var(--calcite-z-index);pointer-events:none;background:none}.arcgis-map-container-ui__element{display:flex;flex-direction:column;pointer-events:none;width:max-content;max-width:100%}.arcgis-map-container-ui__element .esri-widget--panel{min-width:var(--arcgis-internal-panel-width)}.arcgis-map-container-ui__element-popup,.arcgis-map-container-ui__element-default{pointer-events:none;max-width:100%;position:absolute;display:block;inset:var(--calcite-spacing-none);width:100%;::slotted(:not(arcgis-swipe)){pointer-events:auto}}.arcgis-map-container-ui__top-left-column{position:absolute;top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-top:var(--calcite-spacing-lg);margin-left:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-left:var(--arcgis-layout-overlay-space-left);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}}.arcgis-map-container-ui__top-left-column:dir(rtl){align-items:flex-end;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__top-right-column{position:absolute;top:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;margin-top:var(--calcite-spacing-lg);margin-right:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-right:var(--arcgis-layout-overlay-space-right);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__top-right-column:dir(rtl){align-items:flex-start;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-top-left{top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-left:dir(rtl){align-items:flex-end}.arcgis-map-container-ui__element-top-right{position:relative;justify-content:flex-start;align-items:flex-end;margin-left:auto;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-right:dir(rtl){align-items:flex-start}.arcgis-map-container-ui__element-top-start{position:relative;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-start:dir(rtl){align-items:flex-end;--arcgis-internal-sketch-justify-content: flex-start;::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}}.arcgis-map-container-ui__element-top-end{position:relative;justify-content:flex-start;align-items:flex-end;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-end:dir(rtl){align-items:flex-start;--arcgis-internal-sketch-justify-content: flex-end}.arcgis-map-container-ui__bottom-left-row{position:absolute;bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:row;align-items:flex-end;max-width:100%;margin-left:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-left:var(--arcgis-layout-overlay-space-left);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-right:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}}.arcgis-map-container-ui__bottom-left-row:dir(rtl){flex-direction:row-reverse;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__bottom-right-row{position:absolute;bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:row-reverse;align-items:flex-end;max-width:100%;margin-right:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-right:var(--arcgis-layout-overlay-space-right);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-left:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}}.arcgis-map-container-ui__bottom-right-row:dir(rtl){flex-direction:row;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-bottom-left{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-right{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-start{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-right:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-start}}.arcgis-map-container-ui__element-bottom-end{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-left:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__element>*{pointer-events:auto}@container arcgis-map-container (height >= 0){::slotted(arcgis-sketch){--responsive-toolbar-vert-width: var(--calcite-spacing-none);--responsive-toolbar-vert-height: min(100vh - 120px, 100cqh - 120px);--responsive-toolbar-horiz-width: min(100vw - 60px, 100cqw - 60px);--responsive-toolbar-horiz-height: var(--calcite-spacing-none)}}@container arcgis-map-container (max-height: 544px) or (max-width: 544px){::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-button-display: none;--arcgis-internal-floor-filter-menu-width: 225px}}@container arcgis-map-container (max-height: 499.99px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-sm);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-sm)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-sm)}}@container arcgis-map-container (min-height: 500px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-md);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 320px;--arcgis-internal-floor-filter-levels-max-height: 320px}}@container arcgis-map-container (min-height: 768px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 420px;--arcgis-internal-floor-filter-levels-max-height: 420px}}@container arcgis-map-container (min-height: 992px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}}@container arcgis-map-container (min-height: 1200px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-xl);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-xl)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-xl)}}@container arcgis-map-container (min-width: 544px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 768px){::slotted(:is(arcgis-legend[card-style-layout="auto"])){--arcgis-legend-internal-width: auto}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 992px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 1200px){::slotted(:is(arcgis-basemap-gallery)){width:var(--arcgis-internal-basemap-gallery-width-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}`;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const OFe={"top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right","bottom-leading":"bottom-start","bottom-trailing":"bottom-end","top-leading":"top-start","top-trailing":"top-end"},PFe=["manual"];function cx(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el),t.position&&PFe.includes(t.position)?t.el.removeAttribute("slot"):t.position&&(t.el.slot=OFe[t.position]);const e=RFe(t);if(!e){const i=jFe(t);if(!i){aee(t);return}return F8(i,t,!0),i}return LFe(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?FFe(e,t):e.localName==="arcgis-placement"?NFe(e,t):F8(e,t,!1)),e}function RFe({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(L8.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&L8.has(e.ownedBy.localName))return e.ownedBy}}const L8=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function LFe(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function BI(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let n=function(s){s.target===t&&(BI(t,e,i),t.removeEventListener(i,n))};t.addEventListener(i,n)}}const FFe=(t,e)=>BI(t,i=>{const r=rN(e);e.el.shadowRoot?t.content=e.el:e.el.childElem&&t.content!=null&&r.append(e.el.childElem),e.el.view=i}),NFe=(t,e)=>BI(t,i=>{const r=rN(e);e.el.childElem&&r.append(e.el.childElem),e.el.view=i}),F8=(t,e,i)=>BI(t,r=>{i&&aee(e),e.el.view=r,e.referenceElement=t},"arcgisViewReadyChange");function DFe(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function zFe(t,e){return oee(e==null?void 0:e.center,t)}function oee(t,e){if(typeof e=="string")return oee(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||n!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}function aee(t){t.el.childElem&&rN(t).append(t.el.childElem)}function rN(t){return t.el.shadowRoot??t.el}function jFe(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),n=t.el.getRootNode();return(r?void 0:n.querySelector(`#${i}`))??n.querySelector(i)??void 0}function VFe(t,e){return t.assignedElements({flatten:!0}).filter(r=>r.matches(e))}const UFe=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},qFe=(t,e,i)=>{const r=BFe(e).subscribe;return r(n=>{n.some(o=>UFe(t,o.target))&&i()})},hM={},BFe=t=>{const e=t.join(","),i=hM[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),hM[e]=void 0)})};return hM[e]=s,s},GFe=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return;i=o.host}},HFe=(t,e,i)=>{const r=GFe(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},WFe=t=>lee(void 0,t),nN=t=>e=>lee(e,t);class ZFe extends vJ{constructor(e,i){super(e);const r=this.exports;try{jm(this.component);const n=i(this.component,this),s=this.exports!==r;if(m_e(n)){s||this.setProvisionalExports(n);const o=n.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}}const lee=iN(ZFe),N8="ltr",JFe=()=>WFe((t,e)=>{e.exports=N8,e.onLifecycle(()=>{const i=()=>{const r=HFe(t.el,"dir",N8);e.exports=r==="rtl"?"rtl":"ltr"};return i(),qFe(t.el,["dir"],i)})}),YFe=t=>QFe,KFe="arcgisPropertyChange",QFe=(...t)=>{const e=e0(),i=pF(KFe,void 0,e);let r=!0;return e.manager.onUpdated(n=>{if(r||!e.el.isConnected){r=!1;return}for(const s of t)n.has(s)&&i.emit({name:s})}),i};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */let XFe=class extends xI{constructor(e){super(e),this.direction=JFe(),this.component.listen("arcgisViewClick",i=>{this._handleOpenPopup(i.detail)}),this.component.listenOn(globalThis,"unhandledrejection",i=>{var r;if(((r=i.reason)==null?void 0:r.name)==="webgl:required"){const{name:n}=i.reason;this.webGLError={name:n}}})}hostLifecycle(){return gn(()=>{var e;return(e=this.component.view.popup)==null?void 0:e.visible},()=>{var e;(e=this.popupRef)!=null&&e.visible&&(this.popupRef.visible=!1)})}openPopup(e){this.popupRef?this.popupRef.open(e):this.component.view.openPopup(e)}closePopup(){this.popupRef?this.popupRef.visible=!1:this.component.view.closePopup()}async _handleOpenPopup(e){var i,r;if(this.popupRef&&!this.component.popupDisabled){e.stopPropagation();const{location:n,promises:s}=await((i=this.popupRef)==null?void 0:i.handleViewClick(e));s!=null&&s.length&&(this.component.view.closePopup(),(r=this.popupRef)==null||r.open({location:n,promises:s}))}}_handlePopupSlotChange(e){const i=VFe(e.target,"arcgis-popup");!this.popupRef&&i.length?this.popupRef=i[0]:i.length||(this.popupRef=void 0)}_webGLErrorAlert(){return this.webGLError?te`<calcite-alert icon=x-octagon kind=danger open .label=${this.webGLError.name}><div slot=title>Unable to display map. WebGL2 support is required.</div><div slot=message>Ensure that your browser and hardware meet the minimum requirements.</div><calcite-link slot=link href=https://esriurl.com/webgl-faq>https://esriurl.com/webgl-faq</calcite-link></calcite-alert>`:null}render(){return AFe(this.direction,e=>this._handlePopupSlotChange(e),this._webGLErrorAlert())}};const eNe=nN((t,e)=>{const i=wy();return e.onLifecycle(()=>ve(()=>{var s;const{map:r}=t;if(!r||r.destroyed)return[];const n=[];return r.loadError&&n.push(r),(s=r.basemap)!=null&&s.loadError&&n.push(r.basemap),r.ground.loadError&&n.push(r.ground),[...r.allLayers,...r.allTables].forEach(o=>{o.loadError&&n.push(o)}),n},r=>{r.length&&(t.loadErrorSources=r,i.emit())})),i}),tNe=nN((t,e)=>{const i=wy();return e.onLifecycle(()=>ve(()=>{var r;return(r=t.view)==null?void 0:r.readyState},r=>{(r==="map-content-error"||r==="rendering-error")&&i.emit()})),i});/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const iNe=ree(xFe),rNe=ree(xAe);var sh;let cee=(sh=class extends mT{constructor(){super(),this._containerRef=ks(),this._mapRef=ks(),this._uiController=new XFe(this),this.extraContent=new de,this.arcgisLoadError=eNe(this),this.arcgisViewReadyError=tNe(this),this._map=iNe(this),this.view=rNe(this),this.animationsDisabled=this.view.animationsEnabled,this.allLayerViews=this.view.allLayerViews,this.analyses=this.view.analyses,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.spatialReferenceLocked=this.view.spatialReferenceLocked,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewAnalysisViewCreate=Pi(()=>this.view,"analysis-view-create"),this.arcgisViewAnalysisViewCreateError=Pi(()=>this.view,"analysis-view-create-error"),this.arcgisViewAnalysisViewDestroy=Pi(()=>this.view,"analysis-view-destroy"),this.arcgisViewChange=wy(),this.arcgisViewClick=Pi(()=>this.view,"click"),this.arcgisViewDoubleClick=Pi(()=>this.view,"double-click"),this.arcgisViewDrag=Pi(()=>this.view,"drag"),this.arcgisViewHold=Pi(()=>this.view,"hold"),this.arcgisViewImmediateClick=Pi(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Pi(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Pi(()=>this.view,"key-down"),this.arcgisViewKeyUp=Pi(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Pi(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Pi(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Pi(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Pi(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Pi(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Pi(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Pi(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Pi(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Pi(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=wy(),this.view.ui={components:[]}}get aria(){var e;return(e=this.view)==null?void 0:e.aria}set aria(e){this.view&&(this.view.aria=e)}get attributionItems(){var e;return((e=this.view)==null?void 0:e.attributionItems)??[]}get center(){return this.view.center}set center(e){const i=zFe(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){var i;e&&!((i=this.extent)!=null&&i.equals(e))&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){var e;return(e=this._map.portalItem)==null?void 0:e.id}set itemId(e){EFe(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){DFe(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){var r;(r=this.map)==null||r.add(e,i)}async addLayers(e,i){var r;(r=this.map)==null||r.addMany(e,i)}async addTable(e){var i;(i=this.map)==null||i.tables.add(e)}async addTables(e,i){var r;(r=this.map)==null||r.tables.addMany(e,i)}async closePopup(){this._uiController.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){this._uiController.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e==null?void 0:e()).catch(i)}async whenAnalysisView(e){return await this.view.whenAnalysisView(e)}async whenLayerView(e){var i;return await((i=this.view)==null?void 0:i.whenLayerView(e))}loaded(){var i;const e=this;e.el.childElem=this._mapRef.value,(i=this.view).container??(i.container=e.el.childElem),this.map||(this.map=this._map),this.manager.onLifecycle(()=>[ve(()=>this.map,r=>{r&&(this._map=r)},{initial:!0,sync:!0}),ve(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),ve(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}renderMain(){return te`<div class=${Cr(li.base)} ${Bt(this._mapRef)}></div>`}render(){return te`<section class=${Cr(li.containerUI)} ${Bt(this._containerRef)}>${this._uiController.render()}${this.extraContent}</section>${this.renderMain()}`}},sh.properties={_map:16,view:32,animationsDisabled:5,aria:0,attributionItems:32,allLayerViews:0,analyses:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,spatialReferenceLocked:5,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9,loadErrorSources:0},sh.styles=[MFe,CFe],sh);TJ("arcgis-map",cee);const js="esri-layer-list",gl=`${js}__item`,X0={base:js,actionMenu:`${js}__action-menu`,actionGroup:`${js}__action-group`,filterNoResults:`${js}__filter-no-results`,item:gl,itemActive:`${gl}--active`,itemContentBottom:`${gl}-content-bottom`,itemMessage:`${gl}-message`,itemActionIcon:`${gl}-action-icon`,itemActionImage:`${gl}-action-image`,itemTemporaryIcon:`${gl}-temporary-icon`,itemTableIcon:`${gl}-table-icon`,itemCatalogIcon:`${gl}-catalog-icon`,statusIndicator:`${js}__status-indicator`,publishing:`${js}__publishing`,updating:`${js}__updating`,connectionStatus:`${js}__connection-status`,connectionStatusConnected:`${js}__connection-status--connected`,visibleToggle:`${js}__visible-toggle`,visibleIcon:`${js}__visible-icon`},pHe=()=>n0({action:()=>Q(()=>Promise.resolve().then(()=>FZ),void 0,import.meta.url)});function hHe(t,e,i){const{title:r,textEnabled:n}=e,{type:s,active:o,uid:a,disabled:c,indicator:d}=t;return t.visible?je("calcite-action",{...e,active:s==="toggle"&&t.value,appearance:"solid","data-action-id":t.id,"data-action-uid":a,disabled:c,icon:NP(t),indicator:d,loading:o,scale:"s",text:r??"",title:n?void 0:r},i):null}function NP(t){return t.icon?t.icon:"image"in t&&t.image||t.className?void 0:"question"}function nNe(t){return t?{backgroundImage:`url(${t})`}:{}}function fHe({action:t,feature:e}){const i=e==null?void 0:e.attributes,r="image"in t?t.image:void 0;return r&&i?zJ(r,i):r??""}const uee={hide:"hide",hideChildren:"hide-children"},sNe=10,oNe=2;function aNe({exclusive:t,visible:e,visibilityAppearance:i}){const r=i==="checkbox";return e?t?"circle-f":r?"check-square-f":"view-visible":t?"circle":r?"square":"view-hide"}function lNe({connectionStatus:t,publishing:e}){return t?t==="connected"?"beacon":"offline":e?"square":"bullet-point"}function cNe(t){return(t==null?void 0:t.listMode)===uee.hideChildren}function BT(t){return(t==null?void 0:t.listMode)??void 0}function uNe(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function dNe(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function pNe(t){if(!t)return"inherited";const e=bNe(sN(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function hNe(t){t==null||t.removeMany(t.filter(e=>e==null?void 0:e.destroyed))}function dee(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function fNe(t,e){t&&(t.filterPredicate=e?i=>e(Fo(i)):void 0)}function mNe(t){const e=(t!=null&&t.layer&&sN(t.layer)?t.layer.layer:void 0)??(t==null?void 0:t.layer);return!!e&&e.type!=="catalog"&&(wNe(e)??!0)}function gNe(t){return BT(t)!==uee.hide}function yNe(t,e){if(!t||e==null||isNaN(e))return!1;const i=uNe(t),r=dNe(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,s=r!=null&&!isNaN(r)&&r>0&&e<r;return n||s}function pee(t,e){t==null||t.sort((i,r)=>{const n="uid"in i?e.indexOf(i.uid):-1,s="uid"in r?e.indexOf(r.uid):-1;return n>s?-1:n<s?1:0})}function vNe(t,e){const i=t==null?void 0:t.layer;if(!i)return;const r=dee(i);if(!r)return;let n;r==="layers"&&"layers"in i?n=i.layers:r==="sublayers"&&"sublayers"in i&&(n=i.sublayers),pee(n,e)}function D8(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function sN(t){return t!=null&&"layer"in t&&t.layer!=null}function bNe(t){const e=hee(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function wNe(t){const e=hee(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function hee(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function Fo(t){return t==null?void 0:t["data-item"]}function z8(t){return t==null?void 0:t.getAttribute("data-layer-type")}function _Ne(t){const{children:e,error:i}=t,r="incompatible"in t&&t.incompatible;return!!(e!=null&&e.filter(n=>!n.hidden).length)&&!i&&!r}function xNe(t){for(const e of t)for(const i of e)if(i.type==="button"||i.type==="toggle")return i}var DP,oh;let tt=(oh=class extends Bh{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=i=>{this.item.actionsOpen=i.currentTarget.open},this._setTooltipReference=i=>{var r,n;(n=this.onTooltipReferenceChange)==null||n.call(this,(r=this.item.layer)==null?void 0:r.uid,i)},this._removeTooltipReference=()=>{var i,r;(r=this.onTooltipReferenceChange)==null||r.call(this,(i=this.item.layer)==null?void 0:i.uid,null)}}loadDependencies(){return n0({"action-group":()=>Q(()=>Promise.resolve().then(()=>p1e),void 0,import.meta.url),"action-menu":()=>Q(()=>Promise.resolve().then(()=>l1e),void 0,import.meta.url),action:()=>Q(()=>Promise.resolve().then(()=>FZ),void 0,import.meta.url),icon:()=>Q(()=>Promise.resolve().then(()=>bZ),void 0,import.meta.url),"list-item":()=>Q(()=>import("./index-CKvIWSMV.js"),__vite__mapDeps([333,334,335,336,337,338,339]),import.meta.url),list:()=>Q(()=>import("./index-3_D1eKb0.js"),__vite__mapDeps([340,341,342,338]),import.meta.url),notice:()=>Q(()=>import("./index-mvB4j3Qt.js"),[],import.meta.url)})}render(){var x,$;const e=this.parentTitles??[],{_title:i,item:r,activeItem:n,selectionMode:s,selectedItems:o,messages:a,parent:c,css:d,dragDisabled:h}=this,f="visibleAtCurrentTimeExtent"in r&&"layerInvisibleAtTime"in a&&!r.visibleAtCurrentTimeExtent?`${i} (${a.layerInvisibleAtTime})`:"visibleAtCurrentScale"in r&&"layerInvisibleAtScale"in a&&!r.visibleAtCurrentScale?`${i} (${a.layerInvisibleAtScale})`:i,m="parent"in r&&(($=(x=r.parent)==null?void 0:x.layer)==null?void 0:$.type)==="catalog",{layer:v}=r,w="visibleAtCurrentScale"in r&&!r.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in r&&!r.visibleAtCurrentTimeExtent;return je("calcite-list-item",{afterCreate:T=>this._focusSelectedDragEl(T,r),afterUpdate:T=>this._focusSelectedDragEl(T,r),class:this.classes(d.item,"itemActive"in d&&{[d.itemActive]:n===r}),"data-item":r,"data-layer-id":v==null?void 0:v.id,dragDisabled:!r.sortable||m||h,expanded:"open"in r&&r.open,id:v==null?void 0:v.uid,key:`list-item-${v==null?void 0:v.uid}`,label:i,metadata:{parentTitles:e,_title:i},selected:s!=="none"&&o.includes(r),title:f,unavailable:w,value:v==null?void 0:v.uid,onCalciteListItemSelect:T=>"visible"in r&&this._handleCalciteListItemSelect(T,r,c),onCalciteListItemToggle:T=>"open"in r&&this._handleCalciteListItemToggle(T,r)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:i,visibleElements:r,css:n}=this;if(!r.statusIndicators)return null;const{publishing:s}=e,o="updating"in e&&e.updating&&!i,a="connectionStatus"in e?e.connectionStatus:void 0,c=!!a;return je("calcite-icon",{class:this.classes(n.statusIndicator,{[n.publishing]:s},"updating"in n&&{[n.updating]:o},"connectionStatus"in n&&{[n.connectionStatus]:c},"connectionStatusConnected"in n&&{[n.connectionStatusConnected]:c&&a==="connected"}),icon:lNe({connectionStatus:a,publishing:s}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:i,css:r}=this,{layer:n}=e,s="temporaryLayerIndicators"in i&&i.temporaryLayerIndicators,o="temporaryTableIndicators"in i&&i.temporaryTableIndicators,a=n&&"persistenceEnabled"in n&&(cI(n)||!n.persistenceEnabled);return(s||o)&&a?je("calcite-icon",{class:r.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{_title:e,item:i,parent:r,messages:n,visibilityAppearance:s,css:o}=this;if(!("visible"in i&&"layerVisibility"in n&&"showLayer"in n&&"hideLayer"in n&&"visibleToggle"in o&&s))return null;const{visible:a}=i,c=this._getParentVisibilityMode(r);if(c==="inherited")return null;const d=aNe({visible:a,exclusive:c==="exclusive",visibilityAppearance:s}),h=s==="checkbox",f=n.layerVisibility,m=zJ(a?n.hideLayer:n.showLayer,{layerName:e});return je("calcite-action",{appearance:"transparent",class:o.visibleToggle,icon:h?d:void 0,key:"visibility-toggle",label:m,onclick:()=>this._toggleVisibility(i,r),scale:"s",slot:h?"actions-start":"actions-end",text:f,title:m},h?null:je("calcite-icon",{class:this.classes({[o.visibleIcon]:c!=="exclusive"&&a}),icon:d,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:je("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!(e!=null&&e.visible))return null;const{open:i,title:r,disabled:n}=e;return je("calcite-action",{active:i,appearance:"transparent",disabled:n,icon:NP(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:r??"",title:r??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:i}=this,r=i.options;return je("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:i.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},je("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:r,title:r}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>je("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(i=>this._renderAction({action:i,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:e}=this,i=this.item.layer,r=(i==null?void 0:i.type)==="catalog-footprint",n=(i==null?void 0:i.type)==="sublayer"&&kz(i,"footprints");return"itemCatalogIcon"in e&&(r||n)?je("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:e}=this,i=this.item.layer,r=(i==null?void 0:i.type)==="catalog-dynamic-group",n=(i==null?void 0:i.type)==="sublayer"&&kz(i,"layers-in-view");return"itemCatalogIcon"in e&&(r||n)?je("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:i,visibleElements:r}=this;if(!("visible"in i))return;const{layer:n}=i,s=(n==null?void 0:n.type)==="catalog-dynamic-group";return"catalogLayerList"in r&&r.catalogLayerList&&s?je("calcite-action",{appearance:"transparent",disabled:!n.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(i),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:i,rootGroupUid:r,listModeDisabled:n,selectionMode:s,displayMode:o}=this;if(!("children"in i))return;const a=[...this.parentTitles??[],i.title],{children:c,layer:d}=i,h=(d==null?void 0:d.type)!=="catalog-dynamic-group"&&_Ne(i),f=!n&&cNe(d),m=(d==null?void 0:d.type)==="group",v=!f&&!h&&e&&m,w=!!e&&"childrenSortable"in i&&i.childrenSortable&&mNe(i);return h||v?je("calcite-list",{canPull:x=>!!this.canMove&&this.canMove(x,"pull"),canPut:x=>!!this.canMove&&this.canMove(x,"put"),"data-item":i,"data-layer-type":r,displayMode:o,dragEnabled:w,group:m?r:`${r}-${d==null?void 0:d.uid}`,key:`child-list-${d==null?void 0:d.uid}`,label:i.title,selectionAppearance:"border",selectionMode:s},c==null?void 0:c.filter(x=>!x.hidden&&(this.visibleElements.errors||!x.error)).toArray().map(x=>this._renderItem(x,i,a)),this._renderedTablesItem):null}get _hasTables(){var r,n;const{layerTablesEnabled:e}=this,i=this.item.layer;if(!e||!i)return!1;switch(i.type){case"knowledge-graph":return e.includes(i.type)&&"tables"in i&&!!((r=i.tables)!=null&&r.length);case"map-image":case"tile":return e.includes(i.type)&&"subtables"in i&&!!((n=i.subtables)!=null&&n.length);default:return!1}}get _renderedTablesItem(){const{item:e,messages:i,css:r}=this,{layer:n}=e;return"itemTableIcon"in r&&"visible"in e&&"tables"in i&&this._hasTables?je("calcite-list-item",{class:r.item,"data-layer-id":n==null?void 0:n.id,dragDisabled:!0,key:`list-item-table-list-tables-${n==null?void 0:n.uid}`,label:i.tables,title:i.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},je("calcite-icon",{class:r.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),je("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:i,css:r}=this;return e.error?je("div",{class:r.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},je("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},je("div",{slot:"message"},"tableError"in i?i.tableError:i.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in i?je("div",{class:r.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},je("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},je("div",{slot:"message"},i.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:xNe(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(i=>i.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,i)=>e+i.length,0)}_renderAction(e){const{item:i}=this,{action:r,textEnabled:n}=e;if(!r)return null;const{active:s,disabled:o,title:a,type:c,indicator:d}=r;return je("calcite-action",{active:c==="toggle"&&r.value,appearance:"transparent","data-action-id":r.id,disabled:o,icon:NP(r),indicator:d,key:`action-${r.uid}`,loading:s,onclick:()=>this._triggerAction(i,r),scale:"s",slot:n?void 0:"actions-end",text:a??"",textEnabled:n,title:a??void 0},this._renderFallbackIcon(r))}_renderFallbackIcon(e){const{css:i}=this,{icon:r}=e,n="className"in e?e.className:void 0;if(r)return null;const s="image"in e?e.image:void 0,o={[i.itemActionIcon]:!!n,[i.itemActionImage]:!!s};return n&&(o[n]=!0),s||n?je("span",{"aria-hidden":"true",class:this.classes(i.itemActionIcon,o),key:"icon",styles:nNe(s)}):null}_renderItem(e,i,r=[]){var n;return je(DP,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${(n=e.layer)==null?void 0:n.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,i){i&&e&&(i.type==="toggle"&&(i.value=!i.value),this.onAction(i,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){var i;e&&((i=this.onCatalogOpen)==null||i.call(this,e))}_focusSelectedDragEl(e,i){var r,n;this.selectedDragItemLayerUid===((r=i.layer)==null?void 0:r.uid)&&(Rb(e),(n=this.onSelectedDragItemLayerUidChange)==null||n.call(this,null))}_handleCalciteListItemToggle(e,i){e.stopPropagation(),i.open=e.target.expanded}_getParentVisibilityMode(e){return e&&"visibilityMode"in e?e.visibilityMode:null}_handleCalciteListItemSelect(e,i,r){if(Fo(e.target)!==i)return;const n=this._getParentVisibilityMode(r);this.selectionMode==="none"&&n!=="inherited"&&this._toggleVisibility(i,r)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,i){!e||!("visible"in e)||this._getParentVisibilityMode(i)==="exclusive"&&e.visible||(e.visible=!e.visible)}},DP=oh,oh.vnodeSelector="calcite-list-item",oh);l([u()],tt.prototype,"activeItem",void 0),l([u()],tt.prototype,"canMove",void 0),l([u()],tt.prototype,"css",void 0),l([u()],tt.prototype,"displayMode",void 0),l([u()],tt.prototype,"dragEnabled",void 0),l([u()],tt.prototype,"dragDisabled",void 0),l([u()],tt.prototype,"item",void 0),l([u()],tt.prototype,"layerTablesEnabled",void 0),l([u()],tt.prototype,"listModeDisabled",void 0),l([u()],tt.prototype,"messages",void 0),l([u()],tt.prototype,"messagesCommon",void 0),l([u()],tt.prototype,"onAction",void 0),l([u()],tt.prototype,"onPanelOpen",void 0),l([u()],tt.prototype,"onCatalogOpen",void 0),l([u()],tt.prototype,"onTablesOpen",void 0),l([u()],tt.prototype,"onSelectedDragItemLayerUidChange",void 0),l([u()],tt.prototype,"onTooltipReferenceChange",void 0),l([u()],tt.prototype,"parent",void 0),l([u()],tt.prototype,"parentTitles",void 0),l([u()],tt.prototype,"rootGroupUid",void 0),l([u()],tt.prototype,"selectionMode",void 0),l([u()],tt.prototype,"selectedItems",void 0),l([u()],tt.prototype,"selectedDragItemLayerUid",void 0),l([u()],tt.prototype,"visibleElements",void 0),l([u()],tt.prototype,"visibilityAppearance",void 0),l([u()],tt.prototype,"_title",null),l([u()],tt.prototype,"_renderedItemStatus",null),l([u()],tt.prototype,"_renderedItemTemporaryIcon",null),l([u()],tt.prototype,"_renderedItemToggle",null),l([u()],tt.prototype,"_renderedPanel",null),l([u()],tt.prototype,"_renderedPanelAction",null),l([u()],tt.prototype,"_renderedActions",null),l([u()],tt.prototype,"_renderedActionMenu",null),l([u()],tt.prototype,"_renderedActionMenuContent",null),l([u()],tt.prototype,"_renderedCatalogFootprintIcon",null),l([u()],tt.prototype,"_renderedCatalogDynamicIcon",null),l([u()],tt.prototype,"_renderedCatalogSelectNode",null),l([u()],tt.prototype,"_renderedChildList",null),l([u()],tt.prototype,"_hasTables",null),l([u()],tt.prototype,"_renderedTablesItem",null),l([u()],tt.prototype,"_renderedItemMessage",null),l([u()],tt.prototype,"_singleAction",null),l([u()],tt.prototype,"_filteredSections",null),l([u()],tt.prototype,"_actionsCount",null),tt=DP=l([E("esri.widgets.LayerList.LayerListItem")],tt);const SNe=tt;function j8(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}let Ar=class extends cd(Bh){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([ve(()=>this._canCreateLegend,()=>this._createLegend(),Pt),ve(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Pt)])}destroy(){this._legend=Ot(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const r="legend";return e===r||e!=null&&!!Array.isArray(e)&&e.includes(r)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,r=e==null?void 0:e.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var o;const e=(o=this.listItem)==null?void 0:o.layer;if(!e||e.type==="subtype-sublayer")return null;const i=sN(e)?e:null,r=e==null?void 0:e.parent,n=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,s="";return n&&r?{layer:r,title:s,sublayerIds:[n.mapLayerId]}:{layer:e,title:s}}get disabled(){var n;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return je("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r,open:n}=this;return e&&!r&&n?e==="legend"&&i?je("div",{key:"legend-widget"},i.render()):typeof e=="string"?je("div",{innerHTML:e,key:e}):rV(e)?je("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?je("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(r=>this._renderContent(r)):this._renderContent(e):null}async _createLegend(){if(Ot(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await Q(()=>import("./Legend-rjl1oZhh.js"),__vite__mapDeps([343,246,209,268,237,239,155,344,191,194,190,165,189,54,345,346,28,29,30,347,124,125,120,13,12,126,127,123,128,117,348,217,211,212,52]),import.meta.url),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:rV(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};l([u()],Ar.prototype,"_legend",void 0),l([u()],Ar.prototype,"_canCreateLegend",null),l([u()],Ar.prototype,"_legendOptions",null),l([u()],Ar.prototype,"_legendLayerInfo",null),l([u()],Ar.prototype,"content",void 0),l([u()],Ar.prototype,"disabled",null),l([u()],Ar.prototype,"flowEnabled",void 0),l([u()],Ar.prototype,"icon",null),l([u()],Ar.prototype,"image",void 0),l([u()],Ar.prototype,"listItem",void 0),l([u()],Ar.prototype,"open",void 0),l([u()],Ar.prototype,"title",null),l([u()],Ar.prototype,"visible",void 0),Ar=l([E("esri.widgets.LayerList.ListItemPanel")],Ar);const fee=Ar;var eb;const $Ne=de.ofType({key:"type",defaultKeyValue:"button",base:zk,typeMap:{button:sB,toggle:oB}}),mee=de.ofType($Ne),fM="layer",ux="child-list-mode",TNe="hide";let kt=eb=class extends cd(Se){constructor(t){super(t),this.actionsSections=new mee,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(de.ofType(eb)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.view=null}initialize(){if(this.addHandles([ve(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),Pt),ve(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),Pt),ve(()=>this.view,t=>this._updateChildrenView(t),Pt),ve(()=>this.panel,t=>this._setListItemOnPanel(t),Pt)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(r=>r.layer===i)??null}set panel(t){const e=this._get("panel");t!==e&&t&&(e==null||e.destroy()),this._set("panel",t)}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new fee(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=un(this,"layer.layer");return(!t||t&&un(this,"layer.layer.loaded"))&&un(this,"layer.title")||un(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return!!(e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing")}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return!!((t=this.layer)!=null&&t.visible)}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t,e;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!yNe(this.layer,(e=this.view)==null?void 0:e.scale)}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return pNe(this.layer)}clone(){return new eb({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){var e;(e=this.children)==null||e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,r=t.filter(n=>!i.some(s=>s.layer===n));i.addMany(this._createChildItems(r,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(r=>!!r.layer&&!t.includes(r.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(ux),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(ux),this.listModeDisabled||this.addHandles(t.toArray().map(e=>ve(()=>e.listMode,()=>this._compileChildren(t))),ux)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>BT(i)!==TNe);t!=null&&t.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),fM)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.reverse().map(i=>e||gNe(i)?new eb({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(_r)}_watchLayerProperties(t){if(this.removeHandles(fM),this.removeHandles(ux),!t)return;if((!this.listModeDisabled&&BT(t))==="hide-children")return void this.children.destroyAll();const e=dee(t);e&&this.addHandles(ve(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},Pt),fM)}};l([u({type:mee})],kt.prototype,"actionsSections",void 0),l([u()],kt.prototype,"actionsOpen",void 0),l([u()],kt.prototype,"checkPublishStatusEnabled",void 0),l([u({type:de.ofType(kt)})],kt.prototype,"children",void 0),l([u()],kt.prototype,"childrenSortable",void 0),l([u({readOnly:!0})],kt.prototype,"connectionStatus",null),l([u({readOnly:!0})],kt.prototype,"error",null),l([u()],kt.prototype,"hidden",void 0),l([u({readOnly:!0})],kt.prototype,"incompatible",null),l([u()],kt.prototype,"layer",void 0),l([u({readOnly:!0})],kt.prototype,"layerView",null),l([u()],kt.prototype,"listItemCreatedFunction",void 0),l([u({nonNullable:!0})],kt.prototype,"listModeDisabled",void 0),l([u()],kt.prototype,"open",void 0),l([u({type:fee})],kt.prototype,"panel",null),l([ti("panel")],kt.prototype,"castPanel",null),l([u()],kt.prototype,"parent",void 0),l([u({value:!0})],kt.prototype,"sortable",null),l([u()],kt.prototype,"title",null),l([u({readOnly:!0})],kt.prototype,"publishing",null),l([u({readOnly:!0})],kt.prototype,"updating",null),l([u()],kt.prototype,"view",void 0),l([u()],kt.prototype,"visible",null),l([u({readOnly:!0})],kt.prototype,"visibleAtCurrentScale",null),l([u({readOnly:!0})],kt.prototype,"visibleAtCurrentTimeExtent",null),l([u({readOnly:!0})],kt.prototype,"visibilityMode",null),kt=eb=l([E("esri.widgets.LayerList.ListItem")],kt);const oN=kt,$o={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},kNe="hide",gee=de.ofType(oN);let ka=class extends Dy{constructor(t){super(t),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new gee,this.view=null}initialize(){this.addHandles([ve(()=>{var t;return((t=this.view)==null?void 0:t.ready)===!0},()=>this._viewHandles(),Pt),ve(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),ve(()=>j8(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],$o.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:t}=this;return t!=null&&t.ready?"ready":t?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(t=>t.children).length}triggerAction(t,e){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:e})}moveListItem(t,e,i,r){var m,v;const n=t==null?void 0:t.layer;if(!n||n.type==="subtype-sublayer"||n.type==="sublayer")return;const s=(v=(m=this.view)==null?void 0:m.map)==null?void 0:v.layers,o=e?D8(e):s,a=i?D8(i):s;if(!o||!a)return;const{operationalItems:c}=this,d=(e==null?void 0:e.children)||c,h=(i==null?void 0:i.children)||c,f=a.length-r;t.parent=i||null,d.remove(t),o.remove(n),h.includes(t)||h.add(t,f),a.includes(n)||a.add(n,f),this._compileList()}_createLayerViewHandles(t){this.removeHandles($o.layerViews),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),$o.layerViews)}_createMapLayerHandles(t){this.removeHandles($o.mapLayers),this._compileList(),t&&this.addHandles(t.on("change",()=>this._compileList()),$o.mapLayers)}_createListItem(t){const{view:e,listItemCreatedFunction:i,checkPublishStatusEnabled:r,listModeDisabled:n}=this;return new oN({checkPublishStatusEnabled:r,listModeDisabled:n,layer:t,listItemCreatedFunction:i,view:e})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(t){return t?this.listModeDisabled?t:t.filter(e=>BT(e)!==kNe):void 0}_watchLayersListMode(t){this.removeHandles($o.layerListMode),t&&!this.listModeDisabled&&this.addHandles(ve(()=>t.filter(e=>"listMode"in e).map(e=>e.listMode).toArray(),()=>this._compileList()),$o.layerListMode)}_compileList(){var r,n;const t=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.layers,e=j8(this.view)&&!this.view.inGeographicLayout?t==null?void 0:t.filter(({type:s})=>s==="link-chart"):t;this._watchLayersListMode(e);const i=this._getViewableLayers(e);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(t){const{operationalItems:e}=this;t.forEach(i=>{e.some(r=>r.layer===i)||e.add(this._createListItem(i))})}_removeItems(t){const{operationalItems:e}=this,i=[];e.forEach(r=>{r&&t&&t.includes(r.layer)||i.push(r)}),e.destroyMany(i)}_sortItems(t){const{operationalItems:e}=this;e.sort((i,r)=>{const n=t.indexOf(i.layer),s=t.indexOf(r.layer);return n>s?-1:n<s?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:t}=this;this.removeHandles([$o.mapLayers,$o.layerViews,$o.viewLayers]),t!=null&&t.ready?this.addHandles([ve(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},e=>this._createMapLayerHandles(e),Pt),ve(()=>{var e;return(e=this.view)==null?void 0:e.allLayerViews},e=>this._createLayerViewHandles(e),Pt)],$o.viewLayers):this._removeAllItems()}};l([u()],ka.prototype,"checkPublishStatusEnabled",void 0),l([u()],ka.prototype,"listItemCreatedFunction",void 0),l([u({nonNullable:!0})],ka.prototype,"listModeDisabled",void 0),l([u({type:gee})],ka.prototype,"operationalItems",void 0),l([u({readOnly:!0})],ka.prototype,"state",null),l([u()],ka.prototype,"totalItems",null),l([u()],ka.prototype,"view",void 0),ka=l([E("esri.widgets.LayerList.LayerListViewModel")],ka);const yee=ka;let Vs=class extends Se{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"catalogLayerList",void 0),l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"closeButton",void 0),l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"collapseButton",void 0),l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"errors",void 0),l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"filter",void 0),l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"flow",void 0),l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"heading",void 0),l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"statusIndicators",void 0),l([u({type:Boolean,nonNullable:!0})],Vs.prototype,"temporaryLayerIndicators",void 0),Vs=l([E("esri.widgets.LayerList.LayerListVisibleElements")],Vs);const vee=Vs,INe=["label","description","metadata"],ENe=de.ofType(oN),V8="nested";let it=class extends cd(Bh){constructor(t,e){super(t,e),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new Gu,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new Gu,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new de(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=oNe,this.minFilterItems=sNe,this.openedLayers=new de,this.openedLayerLists=new de,this.selectedItems=new ENe,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new yee,this.visibilityAppearance="default",this.visibleElements=new vee,this._canMove=({dragEl:i,fromEl:r,toEl:n},s)=>{var L,D,q;const o=s==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,a=Fo(i);if(!(a!=null&&a.sortable))return!1;const c=Fo(r),d=z8(r),h=Fo(n),f=z8(n),m=!!d&&!!f&&d===f,v={selected:a,from:c,to:h},w=r.group,x=n.group,$=((L=c==null?void 0:c.layer)==null?void 0:L.type)??"",T=((D=h==null?void 0:h.layer)==null?void 0:D.type)??"",C=new Set(["map-image","catalog","knowledge-graph"]);return w&&x&&typeof o=="function"?o.call(null,v):m&&!C.has($)&&!C.has(T)&&((q=a==null?void 0:a.layer)==null?void 0:q.type)!=="sublayer"},this._onCatalogOpen=i=>{var r,n;this.openedLayers.push((r=i.layer)==null?void 0:r.parent),this._focusLayerFlowItem=(n=i.layer)==null?void 0:n.uid},this._onTablesOpen=i=>{var r;this.openedLayers.push(i.layer),this._focusLayerFlowItem=(r=i.layer)==null?void 0:r.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(i,r)=>{r?this._tooltipReferenceMap.set(i,r):this._tooltipReferenceMap.delete(i)},this._onSelectedDragItemLayerUidChange=i=>{this._selectedDragItemLayerUid=i},this._onTriggerAction=(i,r)=>{this.triggerAction(i,r)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=i=>{if(this.visibilityAppearance!=="default")return;const r=Array.from(i.composedPath()).find(n=>{var s;return(s=n.classList)==null?void 0:s.contains(X0.item)});this._activeItem=Fo(r)},this._onCalciteListOrderChange=i=>{const{_lastDragDetail:r}=this,{toEl:n,fromEl:s,dragEl:o,newIndex:a}=i;if(s&&n&&!((r==null?void 0:r.newIndex)===a&&(r==null?void 0:r.dragEl)===o&&(r==null?void 0:r.toEl)===n&&(r==null?void 0:r.fromEl)===s)){if(this._lastDragDetail=i,this._selectedDragItemLayerUid=o.value,s===n){const c=Array.from(s.children).filter(d=>d==null?void 0:d.matches("calcite-list-item")).map(d=>d.value);return void this._sortLayers(s,c)}this._moveLayerFromChildList({toEl:n,fromEl:s,dragEl:o,newIndex:a})}}}initialize(){this.addHandles([Wn(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),Pt),Wn(()=>this.viewModel.operationalItems,"change",()=>hNe(this.selectedItems),Pt),ve(()=>[this.filterPredicate,this._rootListEl],()=>fNe(this._rootListEl,this.filterPredicate))])}loadDependencies(){return n0({button:()=>Q(()=>Promise.resolve().then(()=>wI),void 0,import.meta.url),flow:()=>Q(()=>import("./index-CaYVYvC0.js"),[],import.meta.url),"flow-item":()=>Q(()=>import("./index-BzFQTQI8.js"),[],import.meta.url),list:()=>Q(()=>import("./index-3_D1eKb0.js"),__vite__mapDeps([340,341,342,338]),import.meta.url),notice:()=>Q(()=>import("./index-mvB4j3Qt.js"),[],import.meta.url),tooltip:()=>Q(()=>import("./index-Cz-dCGoQ.js"),[],import.meta.url)})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(t=>t.children.filter(e=>{var i;return((i=e.layer)==null?void 0:i.type)!=="catalog-dynamic-group"})).length}get _visibleItems(){var t;return(t=this.operationalItems)==null?void 0:t.filter(e=>!e.hidden&&(this.visibleElements.errors||!e.error))}get _openedPanelItems(){return this._visibleItems.flatten(t=>t.children).filter(({hidden:t,panel:e})=>!t&&(e==null?void 0:e.open)&&!e.disabled&&e.flowEnabled)}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:t}=this;return t.toArray().map((e,i)=>this._renderLayerFlowItem(e,i===t.length-1))}get icon(){return"layers"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(t){this.viewModel.listItemCreatedFunction=t}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(t){this.viewModel.operationalItems=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}triggerAction(t,e){return this.viewModel.triggerAction(t,e)}render(){var i;const t=(i=this.viewModel)==null?void 0:i.state,e={[pn.hidden]:t==="loading",[pn.disabled]:t==="disabled"};return je("div",{class:this.classes(X0.base,pn.widget,pn.panel,e)},this._renderItemTooltips(),this._renderItems())}async _createFlowList(t,e){const{_layerListMap:i}=this,r=i.get(t);if(r)return r;const n=t.type==="catalog"?await this._createCatalogLayerList(t):await this._createTableList(t);return e.aborted||i.set(t,n),n}async _handleOpenedLayersChange(){var a;const{_layerListMap:t,openedLayers:e,openedLayerLists:i}=this;(a=this._openedLayersController)==null||a.abort();const r=new AbortController,{signal:n}=r;this._openedLayersController=r,t.forEach((c,d)=>{e.includes(d)||(c.destroy(),t.delete(d))});const s=await Promise.all(e.map(c=>this._createFlowList(c,n)));if(n.aborted)return;i.removeAll(),i.addMany(s);const o=i.at(-1);o?"catalogLayer"in o?(this._set("catalogLayerList",o),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",o)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(t){var r,n;const{_tooltipReferenceMap:e,messages:i}=this;return t?je("calcite-tooltip",{key:`tooltip-${(r=t.layer)==null?void 0:r.uid}`,overlayPositioning:"fixed",referenceElement:e.get((n=t.layer)==null?void 0:n.uid)},i.layerIncompatibleTooltip):null}_renderItemTooltipNodes(t){var e;return t.incompatible?this._renderItemTooltip(t):(e=t.children)==null?void 0:e.filter(i=>!i.hidden).toArray().map(i=>this._renderItemTooltipNodes(i))}_renderItemTooltips(){var t;return(t=this._visibleItems)==null?void 0:t.toArray().map(e=>this._renderItemTooltipNodes(e))}_renderNoItemsMessage(){return je("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return je("div",{class:X0.itemMessage,key:"esri-layer-list__no-items"},je("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(t){const{default:e}=await Q(()=>import("./CatalogLayerList-D6TtcxHB.js"),[],import.meta.url),{headingLevel:i,catalogOptions:r,view:n,filterPlaceholder:s,listItemCreatedFunction:o,minFilterItems:a,selectionMode:c,visibilityAppearance:d,_onCatalogOpen:h,_onTablesOpen:f,layerTablesEnabled:m}=this;return new e({headingLevel:i,view:n,filterPlaceholder:s,listItemCreatedFunction:o,minFilterItems:a,selectionMode:c,visibilityAppearance:d,...r,catalogLayer:t,layerTablesEnabled:m,onCatalogOpen:h,onTablesOpen:f})}_getTableListParams(t){switch(t.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:t.tables};case"map-image":return{...this.mapImageOptions,tables:t.subtables};case"tile":return{...this.tileOptions,tables:t.subtables};default:return null}}async _createTableList(t){const{default:e}=await Q(()=>import("./TableList-Cv1Dgwwm.js"),[],import.meta.url),{headingLevel:i,selectionMode:r,dragEnabled:n}=this;return new e({headingLevel:i,selectionMode:r,dragEnabled:n,...this._getTableListParams(t)})}_renderLayerFlowItem(t,e){var s;const{messages:i,openedLayers:r}=this,n=t.title||this.messages.untitledLayer;return je("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":t.uid,description:n,heading:i[t.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${t.uid}`,selected:e,onCalciteFlowItemBack:o=>{o.preventDefault(),r.pop();const a=r.at(-1);a?this._focusLayerFlowItem=a.uid:this._focusRootFlowItem=!0}},(s=this._layerListMap.get(t))==null?void 0:s.render())}_renderPanelFlowItems(){const{_openedPanelItems:t,openedLayers:e}=this;return t.toArray().map(({title:i,panel:r},n)=>{const s=()=>this._handlePanelFlowItemBack(r);return je("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:i,heading:r.title,headingLevel:this.headingLevel,key:`flow-panel-${r.uid}`,selected:!e.length&&n===t.length-1,onCalciteFlowItemBack:o=>{o.preventDefault(),s()}},r.render(),je("calcite-button",{appearance:"transparent",onclick:s,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(t){t.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(t){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,Rb(t))}_focusLayerFlowItemNode(t){this._focusLayerFlowItem===t.dataset.layerUid&&(this._focusLayerFlowItem=null,Rb(t))}_focusPanelFlowItemNode(t){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,Rb(t))}_renderItems(){const{visible:t,collapsed:e,_visibleItems:i,_openedPanelItems:r,_filterEnabled:n,_rootGroupUid:s,visibleElements:{closeButton:o,collapseButton:a,heading:c,flow:d},_dragEnabled:h,selectionMode:f,filterText:m,openedLayers:v,filterPlaceholder:w,messages:x}=this,$=[je("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:o,closed:!t,collapsed:e,collapsible:a,heading:c?x.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!v.length&&!r.length,onCalciteFlowItemClose:()=>this.visible=!1},i!=null&&i.length?null:this._renderNoItems(),je("calcite-list",{afterCreate:T=>{this._rootListEl=T,T.addEventListener("focusin",this._setActiveItem),T.addEventListener("focusout",this._clearActiveItem)},afterRemoved:T=>{this._rootListEl=null,T.removeEventListener("focusin",this._setActiveItem),T.removeEventListener("focusout",this._clearActiveItem)},canPull:T=>this._canMove(T,"pull"),canPut:T=>this._canMove(T,"put"),"data-layer-type":s,displayMode:V8,dragEnabled:h,filterEnabled:n,filterPlaceholder:w,filterProps:INe,filterText:n?m:"",group:s,key:"root-list",label:x.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:f,onCalciteListChange:T=>this._handleCalciteListChange(T),onCalciteListDragEnd:T=>this._handleCalciteListDragEnd(T.detail),onCalciteListFilter:T=>{var C;return this.filterText=((C=T.currentTarget)==null?void 0:C.filterText)??""},onCalciteListOrderChange:T=>this._onCalciteListOrderChange(T.detail)},i.toArray().map(T=>this._renderItem(T)),n?je("div",{class:X0.filterNoResults,slot:"filter-no-results"},je("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return t?d?je("calcite-flow",{key:"root-flow"},$):$:null}_renderItem(t,e,i){var r;return je(SNe,{activeItem:this._activeItem,canMove:this._canMove,css:X0,displayMode:V8,dragEnabled:this.dragEnabled,item:t,key:`layerListItem-${(r=t.layer)==null?void 0:r.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:e,parentTitles:i,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:t,fromEl:e,dragEl:i,newIndex:r}){const n=Fo(i),s=Fo(t),o=Fo(e);this.viewModel.moveListItem(n,o,s,r)}_handleCalciteListDragEnd(t){const{fromEl:e,dragEl:i,oldIndex:r}=t;e.insertBefore(i,e.children[r])}_sortLayers(t,e){var i,r;if(t)if(t===this._rootListEl)pee((r=(i=this.view)==null?void 0:i.map)==null?void 0:r.layers,e);else{const n=Fo(t);if(!n)return;vNe(n,e)}}_handleCalciteListChange(t){const{selectionMode:e,selectedItems:i}=this;if(e==="none")return;const r=t.target.selectedItems.map(n=>Fo(n)).filter(Boolean);i.removeAll(),i.addMany(r)}};l([u()],it.prototype,"_rootListEl",void 0),l([u()],it.prototype,"_activeItem",void 0),l([u()],it.prototype,"_tooltipReferenceMap",void 0),l([u()],it.prototype,"_focusRootFlowItem",void 0),l([u()],it.prototype,"_focusPanelFlowItem",void 0),l([u()],it.prototype,"_focusLayerFlowItem",void 0),l([u()],it.prototype,"_layerListMap",void 0),l([u()],it.prototype,"_totalItems",null),l([u()],it.prototype,"_visibleItems",null),l([u()],it.prototype,"_openedPanelItems",null),l([u()],it.prototype,"_dragEnabled",null),l([u()],it.prototype,"_filterEnabled",null),l([u()],it.prototype,"_renderedOpenLayerFlowItems",null),l([u({readOnly:!0})],it.prototype,"catalogLayerList",void 0),l([u()],it.prototype,"catalogOptions",void 0),l([u()],it.prototype,"collapsed",void 0),l([u()],it.prototype,"dragEnabled",void 0),l([u()],it.prototype,"filterPlaceholder",void 0),l([u()],it.prototype,"filterPredicate",void 0),l([u()],it.prototype,"filterText",void 0),l([u()],it.prototype,"headingLevel",void 0),l([u()],it.prototype,"icon",null),l([u()],it.prototype,"knowledgeGraphOptions",void 0),l([u()],it.prototype,"label",null),l([u()],it.prototype,"layerTablesEnabled",void 0),l([u()],it.prototype,"listItemCanGiveFunction",void 0),l([u()],it.prototype,"listItemCanReceiveFunction",void 0),l([u()],it.prototype,"listItemCreatedFunction",null),l([u()],it.prototype,"mapImageOptions",void 0),l([u(),ky("esri/widgets/LayerList/t9n/LayerList")],it.prototype,"messages",void 0),l([u(),ky("esri/t9n/common")],it.prototype,"messagesCommon",void 0),l([u()],it.prototype,"minDragEnabledItems",void 0),l([u()],it.prototype,"minFilterItems",void 0),l([u({readOnly:!0})],it.prototype,"openedLayers",void 0),l([u({readOnly:!0})],it.prototype,"openedLayerLists",void 0),l([u()],it.prototype,"operationalItems",null),l([u()],it.prototype,"selectedItems",void 0),l([u()],it.prototype,"selectionMode",void 0),l([u({readOnly:!0})],it.prototype,"tableList",void 0),l([u()],it.prototype,"tileOptions",void 0),l([u()],it.prototype,"view",null),l([UMe("trigger-action"),u({type:yee})],it.prototype,"viewModel",void 0),l([u()],it.prototype,"visibilityAppearance",void 0),l([u({type:vee,nonNullable:!0})],it.prototype,"visibleElements",void 0),it=l([E("esri.widgets.LayerList")],it);const MNe=it;var Dw,Q8;let ANe=(Q8=class extends xI{constructor(i){super(i);Le(this,Dw);this.setProvisionalExports(void 0)}hostConnected(){this.component.manager.loadedCalled&&cx(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){var n;const{el:i}=this.component,r=((n=i.shadowRoot)==null?void 0:n.firstElementChild)??i.firstElementChild??void 0;i.childElem??(i.childElem=r),ke(this,Dw,gn(()=>this.component.view!=null,()=>{this.component.arcgisReady.emit()},{once:!0,initial:!0,sync:!0})),i.isConnected&&cx(this.component)}hostDisconnected(){var i,r,n;typeof this.component.el.childElem=="object"&&((r=(i=this.component.view)==null?void 0:i.ui)==null||r.remove(this.component.el.childElem)),(n=G(this,Dw))==null||n.remove()}hostUpdate(i){i.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&cx(this.component),i.has("referenceElement")&&cx(this.component)}},Dw=new WeakMap,Q8);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const CNe=(t,e)=>i=>PNe(i,t);var dk,zw,jw,ad,bee,wee,_ee;class ONe extends nee{constructor(i,r){var d;super(i,r);Le(this,ad);Le(this,dk,new Map);Le(this,zw);Le(this,jw);new ANe(i);const n=this,s=n.instance;let o=s.viewModel,a=s.visibleElements;const c=new Proxy(this.exports,{get(h,f,m){return f==="viewModel"?o:f==="visibleElements"?a:Reflect.get(h,f,m)}});if(ke(n,jw,s),n.instance=c,n.exports=c,o){const h={component:i,get exports(){return n.instance.viewModel}};IFe(n).set("viewModel","viewModel"),i.addController(h),o=see(i,new WeakRef(h),g_e(i)-1,o,G(n,dk))}n.instance.visibleElements&&(a=nr(d=n,ad,bee).call(d,s))}hostConnected(){this.instance=G(this,jw),super.hostConnected()}hostLoad(){ke(this,zw,ve(()=>this.component.el.view,i=>{const r=this.instance;!("view"in r)&&typeof r.viewModel=="object"?r.viewModel.view=i:r.view=i,!("map"in r)&&typeof r.viewModel=="object"?r.viewModel.map=i==null?void 0:i.map:r.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostUpdate(i){i.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:i}=this.component;i.childElem??(i.childElem=document.createElement("div")),this.instance.container=i.childElem,(this.component.el.shadowRoot??this.component.el).appendChild(this.instance.container),this.component.closed!==void 0&&this.onLifecycle(()=>ve(()=>this.instance.visible,r=>this.component.closed=!r,{initial:!0}))}hostDestroy(){var i;(i=G(this,zw))==null||i.remove(),super.hostDestroy()}}dk=new WeakMap,zw=new WeakMap,jw=new WeakMap,ad=new WeakSet,bee=function(i){return new Proxy(i.visibleElements,{get:(r,n)=>{if(typeof n=="symbol"||n in Promise.prototype)return r[n];const s=[n],o=nr(this,ad,wee).call(this,s);return uF(this.component,a=>{const c=a;this.component[c]=!1;let d=i.visibleElements??{},h;for(const m of s.slice(0,-1))if(typeof d[m]=="object"&&d[m]!==null)d=d[m];else{h=!!d[m];break}h===void 0&&(h=!!(d[s.slice(-1)[0]]??!0));const f=c.startsWith("hide")||c.startsWith("show")?c.startsWith("hide"):h;this.onUpdate(m=>{if(m.has(c)){const v=this.component[c];nr(this,ad,_ee).call(this,s,v,f)}})},o)}})},wee=function(i){const r=new Proxy({},{get:(n,s)=>{const o=Reflect.get(n,s);return typeof s=="symbol"||s in Promise.prototype?o:(i.push(s),r)}});return r},_ee=function(i,r,n){let s=this.instance.visibleElements??{};for(const a of i.slice(0,-1))(typeof s[a]!="object"||s[a]===null)&&(s[a]={}),s=s[a];const o=!!(n?!r:r);s[i.at(-1)]=o};const PNe=iN(ONe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const RNe=Ht`@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-legend{overflow:hidden;overflow-y:auto}.esri-legend__message{padding:.5em 1em}.esri-legend__service{border-bottom:1px solid rgba(110,110,110,.3);padding:var(--esri-widget-padding);word-wrap:break-word}.esri-legend__service:last-child{border-bottom:none}.esri-legend__layer{margin-left:7px;overflow:auto}.esri-legend__group-layer-child{margin-left:7px;padding-right:0;padding-left:0}.esri-legend__layer-table{display:flex;flex-flow:column;margin-bottom:12px;width:100%}.esri-legend__layer-child-table{display:table;margin-bottom:12px;width:100%;border-collapse:collapse}.esri-legend__layer-body{margin-left:7px}.esri-legend__layer-row{display:flex}.esri-legend__layer-cell{padding:4px 0;min-width:100px;vertical-align:middle;word-break:break-word}.esri-legend__layer-cell--symbols{min-width:10px;text-align:center}.esri-legend--card__color-ramp-container{justify-content:center}.esri-legend__layer-table--size-ramp{display:table}.esri-legend__layer-table--size-ramp .esri-legend__layer-row{display:table-row}.esri-legend__layer-table--size-ramp .esri-legend__layer-cell{display:table-cell}.esri-legend__size-ramp~.esri-legend__layer-cell--info{width:80%;max-width:80%}.esri-legend__layer-cell--info{padding-right:7px;padding-left:7px;max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.esri-legend__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.esri-legend__imagery-layer-cell--stretched{padding:0;vertical-align:top;line-height:1}.esri-legend__imagery-layer-info--stretched{padding:0 2px;vertical-align:top}.esri-legend__symbol{display:flex;justify-content:center}.esri-legend__layer-caption{display:table-caption;padding:6px 0;word-break:break-word}.esri-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.esri-legend__ramps{margin-left:3px}.esri-legend__color-ramp{width:24px}.esri-legend__opacity-ramp{background-image:url(../base/images/transparent-bg.png)}.esri-legend__ramp-tick{position:absolute;right:1px;left:auto;border-top:1px solid rgba(110,110,110,.3);width:4px;line-height:0}.esri-legend__ramp-label{position:relative;padding:0 7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.esri-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent rgba(50,50,50,.8) transparent transparent;width:0;height:0;content:""}.esri-legend__ramp-label:first-child{margin-top:-4px}.esri-legend__ramp-label:last-child{bottom:-3px}.esri-legend-layer-caption{display:table-caption;padding:6px 0}:dir(rtl) .esri-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent rgba(50,50,50,.8)}:dir(rtl) .esri-legend__layer,:dir(rtl) .esri-legend__group-layer-child,:dir(rtl) .esri-legend__layer-body{margin-right:7px;margin-left:0;overflow:auto}:dir(rtl) .esri-legend__ramps{margin-right:3px;margin-left:auto}.esri-legend--card{display:flex;position:relative;transition:max-width .25s ease-in-out;background:#fff;overflow-x:auto}.esri-legend--card__section{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;border-left:1px solid rgba(110,110,110,.3);padding:12px 15px;min-width:300px;overflow:auto;font-size:var(--calcite-font-size-sm)}.esri-legend--card__section:first-child{border-left:none}.esri-legend--card__message{padding:.5em 1em}.esri-legend--card__service-caption-container{border-bottom:1px solid rgba(110,110,110,.3);padding:12px 15px;height:45px;font-weight:var(--calcite-font-weight-semibold)}.esri-legend--card__service-caption-text{margin:0;padding-bottom:20px;overflow:auto}.esri-legend--card__layer-caption{margin-bottom:12px;padding:6px 0;font-weight:var(--calcite-font-weight-normal)}.esri-legend--card__service-content{display:flex;height:calc(100% - 45px)}.esri-legend--card__label-container{display:flex;flex-wrap:wrap}.esri-legend--card__relationship-label-container{display:flex;flex-direction:column}.esri-legend--card__relationship-label-container .esri-legend--card__layer-row{padding-bottom:.5em}.esri-legend--card__relationship-label-container .esri-legend--card__layer-row:last-child{padding-bottom:0}.esri-legend--card__relationship-section{border:none}.esri-legend--card__label-element{margin:.1em;padding:.5em 1em;min-width:4em;min-height:2.7em;text-align:center}.esri-legend--card__image-label{padding-right:7px;padding-left:7px}.esri-legend--card__layer-row,.esri-legend--card__size-ramp-container{display:flex;align-items:center}.esri-legend--card__size-ramp-preview{display:flex}.esri-legend--card__ramp-label{margin:0 .5em;white-space:nowrap}.esri-legend--card__pie-chart-ramp-preview{display:flex;justify-content:center}.esri-legend--card__interval-separator{text-align:center;font-size:.5em}.esri-legend--card__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.esri-legend--card__symbol-container{position:relative}.esri-legend--card__interval-separators-container{position:absolute;top:50px;left:50%;transform:translate(-50%,-50%)}.esri-legend--card__carousel-title{margin:0}.esri-legend--card__service{border-left:1px solid rgba(110,110,110,.3);min-width:fit-content}.esri-legend--card__symbol{display:block;margin:auto}.esri-legend--stacked{display:flex;flex-direction:column;min-width:300px}.esri-legend--stacked .esri-legend--card__carousel{width:300px;max-height:420px}.esri-legend--stacked .esri-legend--card__carousel-item{max-height:388px}.esri-legend--stacked calcite-carousel-item[selected]{flex:1}.esri-legend--stacked .esri-legend--card__section{box-sizing:border-box;border:none;width:100%;min-width:unset;height:auto;overflow:auto}.esri-legend--stacked .esri-legend--card__size-ramp-row{flex-direction:column}.esri-legend--stacked .esri-legend--card__symbol-row{display:table-row;margin:5px 0;width:100%}.esri-legend--stacked .esri-legend--card__label-cell{display:table-cell;vertical-align:middle}.esri-legend--stacked .esri-legend--card__symbol-cell{display:table-cell;vertical-align:middle;text-align:center}.esri-legend--stacked .esri-legend--card__carousel-indicator-container{display:flex;justify-content:center;box-shadow:0 -1px #6e6e6e4d;width:300px;height:32px;overflow:auto}.esri-legend--stacked .esri-legend--card__carousel-indicator{display:flex;align-items:center;justify-content:center;cursor:pointer;width:16px;height:auto}.esri-legend--stacked .esri-legend--card__carousel-indicator:before{display:block;transition:background-color 125ms ease-in-out;border-radius:50%;box-shadow:0 0 0 1px #6e6e6e;background-color:transparent;width:10px;height:10px;content:""}.esri-legend--stacked .esri-legend--card__carousel-indicator:hover:before,.esri-legend--stacked .esri-legend--card__carousel-indicator--activated:before,.esri-legend--stacked .esri-legend--card__carousel-indicator--activated:hover:before{background-color:var(--calcite-color-text-3)}.esri-ui-corner{max-width:100%}.esri-ui-corner .esri-legend--card{max-height:420px}:dir(rtl) .esri-view-width-greater-than-small .esri-legend--card__section{border-right:1px solid rgba(110,110,110,.3);border-left:0}:dir(rtl) .esri-view-width-greater-than-small .esri-legend--card__section:first-child{border-right:none}.esri-relationship-ramp--diamond__container{display:flex;font-size:var(--calcite-font-size-sm)}.esri-relationship-ramp--diamond__left-column{align-self:center;padding-right:5px;max-width:85px;text-align:right}.esri-relationship-ramp--diamond__right-column{align-self:center;padding-left:5px;max-width:85px;text-align:left}.esri-relationship-ramp--diamond__middle-column{display:flex;flex-direction:column;text-align:center}.esri-relationship-ramp--diamond__middle-column--label{align-self:center;max-width:85px}.esri-relationship-ramp--diamond__middle-column--ramp{width:85px;height:85px}.esri-relationship-ramp--square__table{display:table;font-size:var(--calcite-font-size-sm)}.esri-relationship-ramp--square__table-row{display:table-row}.esri-relationship-ramp--square__table-cell{display:table-cell}.esri-relationship-ramp--square__table-label{max-width:95px}.esri-relationship-ramp--square__table-label--left-bottom{vertical-align:bottom;text-align:left}.esri-relationship-ramp--square__table-label--right-bottom{vertical-align:bottom;text-align:right}.esri-relationship-ramp--square__table-label--left-top{vertical-align:top;text-align:left}.esri-relationship-ramp--square__table-label--right-top{vertical-align:top;text-align:right}.esri-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}.esri-univariate-above-and-below-ramp__label{position:relative;margin-left:7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.esri-univariate-above-and-below-ramp__label:before{display:block;position:absolute;top:.45em;left:-19px;border-width:1px 0 0;border-style:solid;width:14px;height:0;content:""}.esri-univariate-above-and-below-ramp__label:first-child{top:-6px}.esri-univariate-above-and-below-ramp__label:last-child{bottom:-6px}.esri-univariate-above-and-below-ramp__color--card{position:relative}.esri-univariate-above-and-below-ramp__color--card:before{display:block;position:absolute;top:1px;border-right:1px solid #000;border-left:1px solid #000;width:100%;height:15px;content:""}:dir(rtl) .esri-univariate-above-and-below-ramp__label{margin-right:7px;margin-left:auto}:dir(rtl) .esri-univariate-above-and-below-ramp__label:before{right:-19px;left:auto}.esri-spike-ramp__container{display:flex;flex-direction:row;gap:var(--calcite-spacing-sm-plus);margin-left:var(--calcite-spacing-sm)}.esri-spike-ramp__preview-container{display:flex;position:relative;gap:var(--calcite-spacing-sm-plus);border-bottom:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);padding:0 var(--calcite-spacing-xl)}.esri-spike-ramp__preview{display:flex;gap:var(--calcite-spacing-sm-plus);align-items:end}.esri-spike-ramp__symbol-preview{display:flex}.esri-spike-ramp__lines{display:flex;position:absolute;bottom:0}.esri-spike-ramp__labels-container{display:flex;position:relative;top:-5px;flex:1;min-width:120px}.esri-spike-ramp__label{position:relative;padding:0 7px;line-height:1em;word-break:break-all;font-size:var(--calcite-font-size-sm)}.esri-spike-ramp__label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent rgba(50,50,50,.8) transparent transparent;width:0;height:0;content:""}.esri-item-list{width:100%}.esri-item-list__filter-container--sticky{z-index:1;position:sticky;top:0}.esri-item-list__group{margin-top:var(--calcite-spacing-md)}.esri-item-list__scroller{overflow-y:auto}.esri-ui .esri-item-list__scroller{z-index:0;position:relative}.esri-ui .esri-item-list__scroller--enabled{max-height:420px}.esri-item-list__group__header{color:var(--calcite-color-text-2);font-weight:var(--calcite-font-weight-medium)}.esri-item-list__list-item{cursor:pointer;min-height:var(--calcite-spacing-xxxl)}.esri-item-list__list-item[class^=esri-icon-],.esri-item-list__list-item[class*=" esri-icon-"]{padding-inline-end:2.8px}.esri-item-list__list-item--disabled{cursor:default}.esri-item-list__list-item-icon{justify-content:center;align-items:center;min-width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);display:flex}.esri-item-list__list-item-icon span{line-height:0}.esri-thumbnail-preview{background-position:50%;width:22px;height:22px}.esri-item-list__no-matches-message{justify-content:center;align-items:center;height:96px;display:flex}.esri-layer-list{display:flex;width:100%}.esri-layer-list__filter-no-results{padding:var(--calcite-spacing-md) 15px}.esri-layer-list__item{--calcite-list-item-icon-center: 8.5px}.esri-layer-list__item-table-icon,.esri-layer-list__item-catalog-icon{margin-inline-end:0}.esri-layer-list__item-action-image{text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;flex:0 0 var(--calcite-spacing-xl);width:var(--calcite-spacing-xl);height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size)}.esri-layer-list__action-menu .esri-layer-list__action-group{display:none}.esri-layer-list__action-menu[open] .esri-layer-list__action-group{display:flex}.esri-layer-list__visible-icon{visibility:hidden}.esri-layer-list__item--active:hover>.esri-layer-list__visible-toggle>.esri-layer-list__visible-icon,.esri-layer-list__item--active:focus>.esri-layer-list__visible-toggle>.esri-layer-list__visible-icon,.esri-layer-list__item--active:focus-within>.esri-layer-list__visible-toggle>.esri-layer-list__visible-icon{visibility:visible}.esri-layer-list__status-indicator{visibility:hidden;color:var(--calcite-color-text-1);margin-inline:0}.esri-layer-list__publishing{visibility:visible;color:var(--calcite-color-text-2);transform-origin:var(--calcite-list-item-icon-center) var(--calcite-list-item-icon-center);animation:2s infinite esri-layer-list__publishing-anim}.esri-layer-list__updating{visibility:visible;animation:2s infinite esri-layer-list__updating-anim}.esri-layer-list__connection-status{visibility:visible;color:var(--calcite-color-status-warning);width:var(--calcite-spacing-xl);height:var(--calcite-spacing-xl);margin-inline:7px}.esri-layer-list__connection-status--connected{color:var(--calcite-color-status-success)}.esri-layer-list__item-content-bottom{margin:var(--calcite-spacing-md) 15px}.esri-layer-list__item-content-bottom .esri-legend__service{padding:0 0 var(--calcite-spacing-md)}.esri-layer-list__item-message{margin:var(--calcite-spacing-md) 15px}@keyframes esri-layer-list__updating-anim{0%,40%{color:var(--calcite-color-foreground-1)}50%,80%{color:var(--calcite-color-brand)}to{color:var(--calcite-color-foreground-1)}}@keyframes esri-layer-list__publishing-anim{0%,20%{transform:rotate(45deg)}80%,to{transform:rotate(135deg)}}`;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const LNe=nN((t,e)=>(e.onLoaded(()=>{const i=t.el;t.listenOn(i.childElem,"calciteFlowItemClose",()=>{t.arcgisClose.emit(),t.autoDestroyDisabled||t.destroy()})}),wy()));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/5.0/esri/copyright.txt for details.
v5.0.0-next.43 */const FNe=CNe(MNe),pk=class pk extends mT{constructor(){super(...arguments),this.widget=FNe(this),this.viewModel=this.widget.viewModel,this.arcgisClose=LNe(this),this.view=this.widget.view,this.autoDestroyDisabled=!1,this.catalogOptions=this.widget.catalogOptions,this.closed=!1,this.collapsed=this.widget.collapsed,this.dragEnabled=this.widget.dragEnabled,this.filterPlaceholder=this.widget.filterPlaceholder,this.filterPredicate=this.widget.filterPredicate,this.filterText=this.widget.filterText,this.headingLevel=this.widget.headingLevel,this.hideCatalogLayerList=this.widget.visibleElements.catalogLayerList,this.hideFlow=this.widget.visibleElements.flow,this.hideStatusIndicators=this.widget.visibleElements.statusIndicators,this.icon=this.widget.icon,this.knowledgeGraphOptions=this.widget.knowledgeGraphOptions,this.label=this.widget.label,this.listItemCreatedFunction=this.widget.listItemCreatedFunction,this.minDragEnabledItems=this.widget.minDragEnabledItems,this.minFilterItems=this.widget.minFilterItems,this.openedLayers=this.widget.openedLayers,this.selectedItems=this.widget.selectedItems,this.selectionMode=this.widget.selectionMode,this.showCloseButton=this.widget.visibleElements.closeButton,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.showErrors=this.widget.visibleElements.errors,this.showFilter=this.widget.visibleElements.filter,this.showHeading=this.widget.visibleElements.heading,this.showTemporaryLayerIndicators=this.widget.visibleElements.temporaryLayerIndicators,this.state=this.viewModel.state,this.visibilityAppearance=this.widget.visibilityAppearance,this.arcgisPropertyChange=YFe()("state"),this.arcgisReady=wy(),this.arcgisTriggerAction=Pi(()=>this.widget,"trigger-action")}get catalogLayerList(){return this.widget.catalogLayerList}get operationalItems(){return this.widget.operationalItems}get tableList(){return this.widget.tableList}async destroy(){await this.manager.destroy()}async triggerAction(e,i){var r;(r=this.widget)==null||r.triggerAction(e,i)}};pk.properties={view:0,autoDestroyDisabled:5,catalogLayerList:32,catalogOptions:0,closed:5,collapsed:7,dragEnabled:5,filterPlaceholder:1,filterPredicate:0,filterText:1,headingLevel:9,hideCatalogLayerList:5,hideFlow:5,hideStatusIndicators:5,icon:1,knowledgeGraphOptions:0,label:1,listItemCreatedFunction:0,minDragEnabledItems:9,minFilterItems:9,openedLayers:0,operationalItems:32,position:1,referenceElement:1,selectedItems:0,selectionMode:1,showCloseButton:5,showCollapseButton:5,showErrors:5,showFilter:5,showHeading:5,showTemporaryLayerIndicators:5,state:3,tableList:32,visibilityAppearance:1},pk.styles=RNe;let zP=pk;TJ("arcgis-layer-list",zP);EU("./assets");Qe.assetsPath="./assets";Qe.workers.workerPath="./assets/esri/core/workers/RemoteClient.js";const JS=document.getElementById("viewDiv");if(!(JS instanceof cee))throw new Error("No view element found");JS.addEventListener("arcgisViewReadyChange",()=>{const t=JS.map;if(!t)throw new Error("No map found");const e=JS.view;e.padding={left:49},t.basemap=new sg;const i=new nZ({url:"https://sgx.geodatenzentrum.de/wms_basemapde?REQUEST=GetCapabilities&Version=1.3.0&SERVICE=WMS",title:"basemap.de",sublayers:[{name:"de_basemapde_web_raster_farbe",title:"basemap.de Farbe"}]});t.add(i);const r=[new qt({geometry:new ze({x:693974.509634854,y:532426397189802e-8,spatialReference:{wkid:25832}}),attributes:{INTERNAL_ID:1,ID:290,OBJIDRF:2,GUID:"315a798c-e057-4fdb-8282-78a20a43f98f",AVIFNASDN:null,AVIATSDN:null,BATSDN:null,DESCRIPT:null,BASEINCR:null,WTGTYPE:25,GLOBALID:"308-290",WTGNAME:"WEA 03"}}),new qt({geometry:new ze({x:694394.405334283,y:532426410090483e-8,spatialReference:{wkid:25832}}),attributes:{INTERNAL_ID:2,ID:291,OBJIDRF:2,GUID:"01d50786-917f-4c59-b036-64beb3b71607",AVIFNASDN:null,AVIATSDN:null,BATSDN:null,DESCRIPT:null,BASEINCR:null,WTGTYPE:25,GLOBALID:"308-291",WTGNAME:"WEA 02"}}),new qt({geometry:new ze({x:694189.652073667,y:532392333297824e-8,spatialReference:{wkid:25832}}),attributes:{INTERNAL_ID:3,ID:292,OBJIDRF:2,GUID:"477ee117-a4a5-4ad2-bd2a-216042c87a04",AVIFNASDN:null,AVIATSDN:null,BATSDN:null,DESCRIPT:null,BASEINCR:null,WTGTYPE:25,GLOBALID:"308-292",WTGNAME:"WEA 01"}})],n=new $e({title:"WEA-Positions",objectIdField:"INTERNAL_ID",renderer:{type:"simple",label:"",symbol:{type:"simple-marker",angle:0,xoffset:0,yoffset:0,size:16,style:"cross",outline:{type:"simple-line",color:[0,0,0,255],width:1,style:"solid"}}},labelingInfo:[{labelExpressionInfo:{expression:'$feature["WTGNAME"]',title:""},maxScale:0,minScale:5e4,symbol:{type:"text",color:[0,0,0,255],backgroundColor:[0,0,0,0],font:{family:"arial",size:12},horizontalAlignment:"center",kerning:!1,rotated:!1,text:"",verticalAlignment:"top",xoffset:0,yoffset:0,angle:0,lineWidth:192,lineHeight:1},useCodedValues:!1}],fields:[{alias:"INTERNAL_ID",editable:!0,name:"INTERNAL_ID",nullable:!0,type:"oid"},{alias:"Id",editable:!0,name:"ID",nullable:!0,type:"integer"},{alias:"Windpark",editable:!0,name:"OBJIDRF",nullable:!0,type:"integer"},{alias:"Globale Unique Id",editable:!0,name:"GUID",nullable:!0,type:"guid"},{alias:"Avifaunaabschaltung",editable:!0,name:"AVIFNASDN",nullable:!0,type:"integer"},{alias:"Luftfahrtabschaltung",editable:!0,name:"AVIATSDN",nullable:!0,type:"integer"},{alias:"Fledermausabschaltung",editable:!0,name:"BATSDN",nullable:!0,type:"integer"},{alias:"Beschreibung",editable:!0,length:255,name:"DESCRIPT",nullable:!0,type:"string"},{alias:"Fundamenterhhung",editable:!0,name:"BASEINCR",nullable:!0,type:"single"},{alias:"Anlagentyp",editable:!0,name:"WTGTYPE",nullable:!1,type:"integer"},{alias:"Name",editable:!0,length:50,name:"WTGNAME",nullable:!1,type:"string"}],source:r,geometryType:"point",spatialReference:{wkid:25832}});t.add(n,0),window.map=t,window.view=e,e.extent={spatialReference:{wkid:102100},xmin:1.2909555190065776e6,ymin:611308377274738e-8,xmax:1.2929939625045906e6,ymax:6114153655972953e-9}});export{bwe as $,Bu as A,pt as B,Je as C,Uh as D,jL as E,My as F,NC as G,c_e as H,zi as I,tJ as J,Oye as K,vi as L,ce as M,_r as N,j6e as O,mt as P,q6e as Q,AC as R,Qn as S,Ga as T,Ky as U,Mj as V,B6e as W,gwe as X,eJ as Y,XZ as Z,Q as _,j as a,V as a$,bk as a0,kj as a1,_we as a2,pI as a3,lVe as a4,Ge as a5,Ho as a6,Ft as a7,We as a8,jk as a9,mh as aA,Qe as aB,JP as aC,h9 as aD,Ai as aE,ie as aF,s8e as aG,iBe as aH,Fe as aI,l as aJ,u as aK,E as aL,ze as aM,IIe as aN,Lt as aO,D3e as aP,VI as aQ,l0e as aR,ia as aS,eS as aT,Yze as aU,Cze as aV,qt as aW,ta as aX,ROe as aY,LOe as aZ,FOe as a_,Hi as aa,f0e as ab,Pm as ac,fu as ad,me as ae,LAe as af,bce as ag,FH as ah,Fze as ai,uI as aj,rY as ak,U6e as al,Ze as am,zh as an,Tk as ao,ve as ap,B as aq,I3e as ar,NCe as as,CV as at,PS as au,wqe as av,G3 as aw,Ke as ax,xt as ay,E$ as az,ks as b,Fie as b$,Ki as b0,VY as b1,Pe as b2,dd as b3,Hhe as b4,Zy as b5,Bhe as b6,oge as b7,iW as b8,_L as b9,TRe as bA,_K as bB,hIe as bC,LIe as bD,i3 as bE,Nh as bF,Jk as bG,Xke as bH,e1 as bI,Jhe as bJ,Yhe as bK,Khe as bL,sge as bM,Zq as bN,TIe as bO,tH as bP,Ym as bQ,iH as bR,eH as bS,Yje as bT,Kje as bU,r4e as bV,nz as bW,G4e as bX,fG as bY,HU as bZ,Oy as b_,wge as ba,Z as bb,_qe as bc,OV as bd,Gn as be,Cye as bf,Mye as bg,gh as bh,XTe as bi,de as bj,Xqe as bk,jDe as bl,Hy as bm,wh as bn,el as bo,fn as bp,sRe as bq,aRe as br,lRe as bs,fRe as bt,bRe as bu,GX as bv,qX as bw,BX as bx,vRe as by,$Re as bz,m0e as c,xBe as c$,y$e as c0,xle as c1,Ie as c2,gi as c3,Dh as c4,Eo as c5,v$e as c6,Nd as c7,fx as c8,oe as c9,Kae as cA,KDe as cB,Gu as cC,_y as cD,Sw as cE,Gt as cF,io as cG,rR as cH,Ly as cI,qr as cJ,gt as cK,W6 as cL,Pd as cM,gs as cN,PU as cO,LU as cP,FU as cQ,h5e as cR,l5e as cS,L5e as cT,l7e as cU,b7e as cV,QBe as cW,tGe as cX,eGe as cY,ZBe as cZ,VT as c_,Yr as ca,u5 as cb,hr as cc,FCe as cd,ct as ce,TB as cf,kPe as cg,YDe as ch,V6e as ci,Mle as cj,ld as ck,ale as cl,cxe as cm,lxe as cn,Tw as co,JDe as cp,fh as cq,sle as cr,pq as cs,ph as ct,eze as cu,XDe as cv,ed as cw,QDe as cx,dq as cy,Yae as cz,HN as d,GLe as d$,IBe as d0,MBe as d1,UI as d2,Ue as d3,y5e as d4,OU as d5,o0 as d6,XG as d7,M9e as d8,b2e as d9,Xpe as dA,Mp as dB,Ije as dC,Eje as dD,BE as dE,Qk as dF,dL as dG,pL as dH,PG as dI,OG as dJ,Dpe as dK,Ql as dL,PA as dM,vje as dN,hL as dO,Of as dP,dn as dQ,iDe as dR,CK as dS,Uu as dT,Vn as dU,t0 as dV,X5e as dW,nR as dX,eee as dY,$e as dZ,Ui as d_,Rhe as da,Se as db,yW as dc,Rge as dd,Lge as de,ki as df,W6e as dg,J6e as dh,Z6e as di,Jw as dj,hi as dk,ei as dl,_7e as dm,Ty as dn,iK as dp,GU as dq,gue as dr,zze as ds,VB as dt,Un as du,hn as dv,Yb as dw,O_ as dx,Fje as dy,jY as dz,PAe as e,D8e as e$,An as e0,le as e1,Js as e2,BLe as e3,UTe as e4,qTe as e5,hs as e6,R8 as e7,WLe as e8,sx as e9,PBe as eA,OBe as eB,YPe as eC,JPe as eD,B_e as eE,Es as eF,Hue as eG,Zue as eH,Zze as eI,Jze as eJ,Wue as eK,Jue as eL,EA as eM,Mb as eN,t2e as eO,JUe as eP,st as eQ,KUe as eR,r0 as eS,cd as eT,eI as eU,Kp as eV,Ot as eW,z8e as eX,V8e as eY,u1 as eZ,N8e as e_,FPe as ea,cr as eb,Te as ec,mc as ed,jPe as ee,VPe as ef,eo as eg,C5e as eh,tDe as ei,Ah as ej,r3e as ek,Lh as el,Ece as em,n3e as en,Vqe as eo,Fqe as ep,CH as eq,yb as er,ec as es,qqe as et,Uqe as eu,bb as ev,Ff as ew,zy as ex,Ve as ey,CBe as ez,ra as f,z5e as f$,U8e as f0,j8e as f1,Dy as f2,Wn as f3,xY as f4,FDe as f5,Pk as f6,Tae as f7,gn as f8,so as f9,Wi as fA,c9 as fB,_M as fC,l2e as fD,AU as fE,bW as fF,KW as fG,_l as fH,uO as fI,Qt as fJ,hR as fK,eje as fL,Gs as fM,fK as fN,hK as fO,d1 as fP,hw as fQ,DL as fR,Cue as fS,eL as fT,tL as fU,Oue as fV,Gk as fW,Hk as fX,j5e as fY,Ur as fZ,Wb as f_,gze as fa,Eie as fb,Af as fc,fi as fd,Lx as fe,vue as ff,HB as fg,De as fh,l3 as fi,P2e as fj,LK as fk,db as fl,n1 as fm,YA as fn,Dje as fo,I4e as fp,W4e as fq,pGe as fr,Rh as fs,to as ft,rH as fu,wx as fv,m6e as fw,Pt as fx,Th as fy,wr as fz,yn as g,l1 as g$,Ec as g0,$ie as g1,kie as g2,FLe as g3,IGe as g4,_f as g5,ZOe as g6,Ti as g7,X4e as g8,Y4e as g9,bF as gA,rL as gB,QB as gC,$R as gD,Qae as gE,UDe as gF,uq as gG,VDe as gH,bs as gI,zae as gJ,zDe as gK,Wy as gL,fze as gM,mIe as gN,bK as gO,ase as gP,Is as gQ,E5e as gR,wB as gS,Ba as gT,GR as gU,Gie as gV,bhe as gW,Lze as gX,UCe as gY,EW as gZ,ZW as g_,YBe as ga,no as gb,D9 as gc,B4e as gd,gje as ge,Mue as gf,lGe as gg,cGe as gh,fz as gi,aze as gj,NU as gk,Wq as gl,RRe as gm,yK as gn,tIe as go,eIe as gp,vK as gq,MIe as gr,pze as gs,hd as gt,bIe as gu,Kme as gv,wK as gw,wk as gx,_k as gy,d9 as gz,Uw as h,Nr as h$,qCe as h0,VCe as h1,$W as h2,gye as h3,tn as h4,oIe as h5,aIe as h6,AIe as h7,YW as h8,vye as h9,Qqe as hA,Kt as hB,yce as hC,Pze as hD,MV as hE,qze as hF,Uze as hG,qT as hH,Z9 as hI,mBe as hJ,kDe as hK,Yw as hL,TDe as hM,Xi as hN,Oxe as hO,IDe as hP,Ic as hQ,nd as hR,Bp as hS,e6e as hT,R4e as hU,J4e as hV,_c as hW,wc as hX,Qie as hY,ow as hZ,_G as h_,TW as ha,Mi as hb,Ni as hc,en as hd,er as he,vs as hf,pr as hg,L6e as hh,GSe as hi,Hb as hj,pc as hk,yh as hl,qn as hm,QW as hn,hz as ho,O$ as hp,eG as hq,T0e as hr,TI as hs,TLe as ht,S$ as hu,nt as hv,br as hw,sVe as hx,rw as hy,ti as hz,Ht as i,qI as i$,mi as i0,Vje as i1,uy as i2,uje as i3,kje as i4,Lje as i5,SI as i6,Hde as i7,kTe as i8,NW as i9,A4e as iA,aje as iB,XS as iC,on as iD,c6e as iE,bz as iF,ws as iG,C6e as iH,Zhe as iI,JE as iJ,vqe as iK,$de as iL,Mh as iM,bD as iN,lp as iO,QCe as iP,Ay as iQ,Ry as iR,tr as iS,Au as iT,Hl as iU,Nue as iV,Kue as iW,aG as iX,_6e as iY,Qze as iZ,n$ as i_,TF as ia,f6e as ib,$Ie as ic,u4e as id,EIe as ie,p9 as ig,Mre as ih,xM as ii,Om as ij,Wk as ik,Nx as il,RC as im,zje as io,Fh as ip,KTe as iq,Uje as ir,jje as is,Nje as it,Upe as iu,Zje as iv,Qpe as iw,AA as ix,_9e as iy,U4e as iz,uVe as j,F5e as j$,ZLe as j0,wpe as j1,mze as j2,cpe as j3,wIe as j4,rje as j5,FD as j6,YB as j7,KB as j8,yi as j9,s$e as jA,pS as jB,mn as jC,BW as jD,nhe as jE,Mce as jF,Qa as jG,Qo as jH,R$ as jI,_4e as jJ,w4e as jK,tfe as jL,YG as jM,BL as jN,e1e as jO,gie as jP,of as jQ,oj as jR,lj as jS,wBe as jT,a5e as jU,bBe as jV,Gde as jW,Iz as jX,AW as jY,aw as jZ,ly as j_,efe as ja,tW as jb,dIe as jc,rW as jd,Bme as je,hze as jf,Iue as jg,Nye as jh,Jme as ji,Fye as jj,nI as jk,_Re as jl,LW as jm,o5e as jn,vx as jo,hH as jp,E4e as jq,SR as jr,b5e as js,_Ie as jt,Pxe as ju,I5e as jv,LRe as jw,$c as jx,c$e as jy,a$e as jz,se as k,Ghe as k$,Uo as k0,j3e as k1,hu as k2,Dre as k3,T2e as k4,t7e as k5,RK as k6,a7e as k7,CT as k8,s7e as k9,MB as kA,jR as kB,sje as kC,s0e as kD,EG as kE,dr as kF,dpe as kG,Jm as kH,n5e as kI,YY as kJ,cL as kK,ZU as kL,Yue as kM,Lue as kN,Ja as kO,zTe as kP,SF as kQ,Hje as kR,the as kS,Ppe as kT,Whe as kU,nIe as kV,RIe as kW,FIe as kX,vpe as kY,Eue as kZ,PW as k_,Pb as ka,o7e as kb,N9 as kc,bS as kd,K9e as ke,K8e as kf,IG as kg,lw as kh,RA as ki,ppe as kj,AG as kk,$P as kl,cze as km,P9e as kn,hVe as ko,fZ as kp,nve as kq,I as kr,US as ks,Gy as kt,Ew as ku,PCe as kv,ln as kw,yDe as kx,bAe as ky,ch as kz,tVe as l,g1 as l$,uIe as l0,sIe as l1,mK as l2,aL as l3,oL as l4,F$ as l5,S4e as l6,x4e as l7,Or as l8,L3e as l9,Rb as lA,INe as lB,SNe as lC,ky as lD,UMe as lE,hNe as lF,fNe as lG,Bh as lH,c9e as lI,u9e as lJ,m9e as lK,g9e as lL,d9e as lM,p9e as lN,h9e as lO,f9e as lP,eK as lQ,FY as lR,$y as lS,LY as lT,AI as lU,y1 as lV,ht as lW,M4 as lX,hpe as lY,c5 as lZ,l9e as l_,Hce as la,ZR as lb,F3e as lc,Et as ld,oje as le,yje as lf,qD as lg,Jie as lh,DW as li,Ape as lj,Cqe as lk,m4e as ll,ga as lm,_5e as ln,x5e as lo,w5e as lp,kc as lq,_ce as lr,PL as ls,oN as lt,BT as lu,sNe as lv,Fo as lw,n0 as lx,je as ly,pn as lz,Gce as m,yk as m$,Zm as m0,STe as m1,jce as m2,c7e as m3,QP as m4,S5e as m5,XP as m6,$5e as m7,r1 as m8,yL as m9,xL as mA,M4e as mB,k4e as mC,KD as mD,Aa as mE,Me as mF,wi as mG,Aw as mH,HF as mI,wye as mJ,bye as mK,yye as mL,Cre as mM,rDe as mN,jW as mO,tBe as mP,eBe as mQ,uX as mR,pX as mS,bje as mT,jx as mU,DJ as mV,OA as mW,t1 as mX,mG as mY,Vde as mZ,PJ as m_,_ye as ma,Uk as mb,vh as mc,lLe as md,ZCe as me,nLe as mf,eOe as mg,pLe as mh,oD as mi,tq as mj,ILe as mk,R3e as ml,Xs as mm,lI as mn,Xt as mo,M8 as mp,EC as mq,aI as mr,b1 as ms,HRe as mt,mye as mu,Oa as mv,vLe as mw,Zce as mx,Ik as my,O5e as mz,Bt as n,f3e as n$,vk as n0,ZP as n1,XNe as n2,QNe as n3,KNe as n4,e5e as n5,sie as n6,Qu as n7,rT as n8,fc as n9,Co as nA,nPe as nB,KCe as nC,u3e as nD,cX as nE,w3e as nF,dB as nG,vB as nH,Ny as nI,_s as nJ,Ut as nK,Ri as nL,Qr as nM,_3e as nN,T3e as nO,Yi as nP,fye as nQ,jt as nR,tX as nS,VF as nT,NT as nU,A3e as nV,l3e as nW,c3e as nX,p3e as nY,h3e as nZ,$3e as n_,cVe as na,$ke as nb,Tke as nc,gQ as nd,oze as ne,$Te as nf,gK as ng,Y9e as nh,mde as ni,xde as nj,Zk as nk,nje as nl,sL as nm,vde as nn,Nle as no,Tye as np,oR as nq,cDe as nr,lDe as ns,LSe as nt,Bre as nu,qre as nv,hje as nw,cje as nx,_p as ny,one as nz,Q7e as o,C2 as o$,m3e as o0,g3e as o1,y3e as o2,v3e as o3,b3e as o4,ar as o5,XW as o6,Vze as o7,qw as o8,w7e as o9,x9e as oA,S9e as oB,$9e as oC,v2e as oD,Pqe as oE,Rqe as oF,Oqe as oG,ro as oH,Xu as oI,VMe as oJ,FVe as oK,NVe as oL,qp as oM,vc as oN,Nu as oO,Cie as oP,Hu as oQ,G2e as oR,W2e as oS,Z2e as oT,BU as oU,j8 as oV,hh as oW,U$e as oX,Ide as oY,HG as oZ,Wje as o_,zJ as oa,DVe as ob,A7e as oc,d5 as od,_u as oe,N6e as of,JG as og,Fpe as oh,Mje as oi,Xje as oj,e4e as ok,t4e as ol,Oje as om,Aje as on,Tje as oo,ope as op,Sze as oq,Gje as or,Qje as os,w8e as ot,Gp as ou,H6 as ov,she as ow,rhe as ox,AT as oy,hG as oz,Xa as p,pRe as p$,Hw as p0,Nze as p1,rBe as p2,oye as p3,DT as p4,P6e as p5,M5e as p6,Yk as p7,IVe as p8,kVe as p9,vm as pA,sLe as pB,us as pC,yF as pD,hf as pE,Oie as pF,f5e as pG,DA as pH,yBe as pI,Bqe as pJ,_ke as pK,w9e as pL,Qme as pM,k5e as pN,Qhe as pO,qme as pP,Gme as pQ,an as pR,wu as pS,Bl as pT,xfe as pU,Bi as pV,av as pW,Ake as pX,s9e as pY,dRe as pZ,NRe as p_,wG as pa,vG as pb,zde as pc,rV as pd,zk as pe,sB as pf,oB as pg,un as ph,gNe as pi,dee as pj,oNe as pk,z8 as pl,Nie as pm,jxe as pn,Ize as po,uB as pp,Vk as pq,Oze as pr,$De as ps,Ca as pt,fle as pu,X6e as pv,gX as pw,lR as px,Vf as py,wGe as pz,Mze as q,Nqe as q$,FRe as q0,hRe as q1,Ib as q2,S3e as q3,MDe as q4,O3e as q5,Kqe as q6,Yqe as q7,Wu as q8,Db as q9,qR as qA,age as qB,nge as qC,pIe as qD,rge as qE,sfe as qF,s5e as qG,XJ as qH,S8e as qI,TTe as qJ,$8e as qK,v1e as qL,JZ as qM,TU as qN,dI as qO,e4 as qP,BF as qQ,pOe as qR,IR as qS,jze as qT,X9e as qU,gMe as qV,e7e as qW,Q9e as qX,OK as qY,LF as qZ,QOe as q_,uw as qa,x0e as qb,RU as qc,_B as qd,kze as qe,XB as qf,xD as qg,OB as qh,yMe as qi,Oh as qj,za as qk,dBe as ql,APe as qm,yze as qn,Di as qo,MG as qp,uze as qq,PF as qr,AB as qs,Eze as qt,SO as qu,IL as qv,bL as qw,Qle as qx,T4e as qy,$4e as qz,bi as r,p6e as r$,sn as r0,hO as r1,fpe as r2,U0 as r3,nze as r4,h2e as r5,J9 as r6,EDe as r7,uPe as r8,EBe as r9,r9e as rA,n9e as rB,NY as rC,Na as rD,uL as rE,fDe as rF,s0 as rG,si as rH,aOe as rI,lOe as rJ,wt as rK,yu as rL,IOe as rM,QQ as rN,Bo as rO,Jl as rP,Zo as rQ,y6e as rR,_8e as rS,W2 as rT,N$ as rU,Ss as rV,Zde as rW,P$ as rX,Kze as rY,u6e as rZ,d6e as r_,q9e as ra,_Be as rb,R9e as rc,m8 as rd,M6e as re,bSe as rf,oH as rg,A6e as rh,fs as ri,Yl as rj,xy as rk,sye as rl,JCe as rm,YCe as rn,XCe as ro,QRe as rp,aLe as rq,Ep as rr,Fu as rs,AR as rt,eDe as ru,g5e as rv,JY as rw,KBe as rx,G9e as ry,B9e as rz,zL as s,jre as s$,Ode as s0,g6e as s1,ur as s2,lr as s3,Z4e as s4,zre as s5,V5e as s6,pd as s7,cG as s8,xTe as s9,qMe as sA,UVe as sB,Gr as sC,yqe as sD,mOe as sE,Uie as sF,t$e as sG,F6e as sH,Xze as sI,hc as sJ,nn as sK,z6e as sL,N5e as sM,ETe as sN,UK as sO,T5e as sP,z9e as sQ,j9e as sR,V9e as sS,U9e as sT,k9e as sU,E9e as sV,I9e as sW,H2e as sX,_ue as sY,RVe as sZ,x8e as s_,Jde as sa,Yde as sb,zx as sc,JN as sd,w9 as se,Fde as sf,Nde as sg,cAe as sh,ir as si,OI as sj,Jke as sk,nDe as sl,ZY as sm,KY as sn,nke as so,X8e as sp,hke as sq,eUe as sr,r2e as ss,ihe as st,d5e as su,VU as sv,Hze as sw,Wze as sx,n8e as sy,z$e as sz,kLe as t,ABe as t$,Gue as t0,Bze as t1,Gze as t2,CMe as t3,HJ as t4,c4e as t5,oI as t6,i9e as t7,aGe as t8,AGe as t9,nGe as tA,dje as tB,BBe as tC,qBe as tD,HBe as tE,WBe as tF,y8 as tG,v8 as tH,b8 as tI,VBe as tJ,UBe as tK,T9e as tL,qs as tM,L9e as tN,iGe as tO,rGe as tP,FBe as tQ,kBe as tR,GBe as tS,DBe as tT,XPe as tU,NBe as tV,TP as tW,O9e as tX,QPe as tY,tRe as tZ,C9e as t_,FM as ta,use as tb,Hqe as tc,xhe as td,DDe as te,CDe as tf,RDe as tg,ODe as th,LDe as ti,PDe as tj,NDe as tk,Br as tl,y7e as tm,Wqe as tn,ADe as to,Ype as tp,jBe as tq,qje as tr,ahe as ts,Jje as tt,wke as tu,LBe as tv,RBe as tw,XBe as tx,JBe as ty,Zs as tz,eVe as u,h7e as u$,C2e as u0,A9e as u1,o9e as u2,a9e as u3,N9e as u4,F9e as u5,H9e as u6,W9e as u7,y9e as u8,Z9e as u9,nNe as uA,jye as uB,epe as uC,mje as uD,E8e as uE,hge as uF,bG as uG,cH as uH,y9 as uI,Ob as uJ,pDe as uK,pge as uL,CVe as uM,BPe as uN,fje as uO,txe as uP,G6 as uQ,nde as uR,rde as uS,tje as uT,une as uU,yp as uV,Lu as uW,Mie as uX,u5e as uY,c5e as uZ,Rpe as u_,J9e as ua,y2e as ub,_2e as uc,eQ as ud,dh as ue,D9e as uf,a2e as ug,Aze as uh,mpe as ui,lle as uj,M7e as uk,E7e as ul,Lk as um,Vle as un,ule as uo,ew as up,iw as uq,Xb as ur,P5e as us,BQ as ut,Hle as uu,C7e as uv,pHe as uw,hHe as ux,pAe as uy,fHe as uz,Ms as v,$je as v$,f7e as v0,g7e as v1,m7e as v2,q2e as v3,VK as v4,v9e as v5,b9e as v6,j2e as v7,t9e as v8,r7e as v9,rie as vA,Wve as vB,h1 as vC,OZ as vD,fbe as vE,aF as vF,nF as vG,PZ as vH,AZ as vI,by as vJ,gVe as vK,nS as vL,yVe as vM,vVe as vN,sF as vO,mw as vP,JL as vQ,oF as vR,LZ as vS,uJ as vT,iF as vU,hBe as vV,lpe as vW,wje as vX,Sje as vY,Pje as vZ,_je as v_,n7e as va,lze as vb,i7e as vc,v7e as vd,Lie as ve,PIe as vf,p5e as vg,j4e as vh,V4e as vi,bpe as vj,Sge as vk,xge as vl,lH as vm,WX as vn,Zme as vo,Hme as vp,Wme as vq,lse as vr,cge as vs,_ge as vt,UX as vu,d4e as vv,wTe as vw,ege as vx,Q8e as vy,Y8e as vz,D6e as w,z4e as w$,Rje as w0,Npe as w1,l$ as w2,fBe as w3,gBe as w4,Bje as w5,c0e as w6,PRe as w7,s1 as w8,o1 as w9,hDe as wA,J_ as wB,Fz as wC,i4e as wD,jo as wE,Lqe as wF,vr as wG,SP as wH,B8e as wI,F4e as wJ,jme as wK,TBe as wL,Fm as wM,rfe as wN,sze as wO,g4e as wP,O4e as wQ,dze as wR,qde as wS,ife as wT,f4e as wU,D4e as wV,h4e as wW,p4e as wX,pje as wY,FL as wZ,D5e as w_,a1 as wa,mwe as wb,hZ as wc,vI as wd,hI as we,vve as wf,Mt as wg,qL as wh,w6e as wi,aTe as wj,q8e as wk,kOe as wl,H4e as wm,P4e as wn,N4e as wo,L4e as wp,R5e as wq,s6e as wr,n6e as ws,v5e as wt,C4e as wu,lje as wv,q4e as ww,hSe as wx,Cke as wy,aK as wz,te as x,Yme as x0,Xhe as x1,lge as x2,Y6e as x3,Q6e as x4,aVe as x5,bZ as x6,pVe as x7,FZ as x8,p1e as x9,fVe as xa,wI as xb,mVe as xc,bVe as xd,wVe as xe,x7e as xf,Mqe as xg,Gqe as xh,xGe as xi,dt as y,Vh as z};

import{qG as O}from"./index-C_bK48d2.js";import{A as se,S as le,g as D,l as C,B as ne,D as oe,i as $,a as M,C as W,P as ue,F as he,L as ee,H as te,e as ae,I as fe}from"./Theme-BOQsReFZ.js";class de extends se{constructor(){super(...arguments),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}incrementRef(){}decrementRef(){}_onPush(t){this.processor&&this.processor.processRow(t),super._onPush(t)}_onInsertIndex(t,e){this.processor&&this.processor.processRow(e),super._onInsertIndex(t,e)}_onSetIndex(t,e,i){this.processor&&this.processor.processRow(i),super._onSetIndex(t,e,i)}}class B extends le{constructor(t,e,i){super(i),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dataContext=e,this.component=t,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(t){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,t)}hide(t){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,t)}isHidden(){return!this.get("visible")}}class V extends D{constructor(){super(...arguments),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new de}),Object.defineProperty(this,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:this._dataItems}),Object.defineProperty(this,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(this,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1})}set data(t){t.incrementRef(),this._data.decrementRef(),this._data=t}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll(t=>{const e=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,t.type==="clear")C(e,i=>{i.dispose()}),e.length=0,this._onDataClear();else if(t.type==="push"){const i=new B(this,t.newValue,this._makeDataItem(t.newValue));e.push(i),this.processDataItem(i)}else if(t.type==="setIndex"){const i=e[t.index],s=this._makeDataItem(t.newValue);i.bullets&&i.bullets.length==0&&(i.bullets=void 0),ne(s).forEach(a=>{i.get(a)!=s[a]&&i.animate({key:a,to:s[a],duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})}),i.dataContext=t.newValue}else if(t.type==="insertIndex"){const i=new B(this,t.newValue,this._makeDataItem(t.newValue));e.splice(t.index,0,i),this.processDataItem(i)}else if(t.type==="removeIndex")e[t.index].dispose(),e.splice(t.index,1);else if(t.type==="moveIndex"){const i=e[t.oldIndex];e.splice(t.oldIndex,1),e.splice(t.newIndex,0,i)}else throw new Error("Unknown IStreamEvent type");this._afterDataChange()}))}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},C(this.valueFields,t=>{this.get(t+"Field")&&(this._valueFields.push(t),this._valueFieldsF[t]={fieldKey:t+"Field",workingKey:t+"Working"})})),this.fields&&(this._fields=[],this._fieldsF={},C(this.fields,t=>{this.get(t+"Field")&&(this._fields.push(t),this._fieldsF[t]=t+"Field")}))}get dataItems(){return this._dataItems}processDataItem(t){}_makeDataItem(t){const e={};return this._valueFields&&C(this._valueFields,i=>{const s=this.get(this._valueFieldsF[i].fieldKey);e[i]=t[s],e[this._valueFieldsF[i].workingKey]=e[i]}),this._fields&&C(this._fields,i=>{const s=this.get(this._fieldsF[i]);e[i]=t[s]}),e}makeDataItem(t,e){let i=new B(this,e,t);return this.processDataItem(i),i}pushDataItem(t,e){const i=this.makeDataItem(t,e);return this._mainDataItems.push(i),i}disposeDataItem(t){}showDataItem(t,e){return O(this,void 0,void 0,function*(){t.set("visible",!0)})}hideDataItem(t,e){return O(this,void 0,void 0,function*(){t.set("visible",!1)})}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const t="datavalidated";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this}),this._dataChanged=!1}if(this._valuesDirty){const t="valueschanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}this.inited=!0}markDirtyValues(t){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}getDataItemById(t){return oe(this.dataItems,e=>e.get("id")==t)}}Object.defineProperty(V,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"});Object.defineProperty(V,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:D.classNames.concat([V.className])});function ce(l){return new Promise((t,e)=>{setTimeout(t,l)})}let me={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:365.242/12*864e5,year:31536e6};function k(l,t){return t==null&&(t=1),me[l]*t}function E(l,t,e,i,s,a,n){if(!n||s){let o=0;switch(!s&&t!="millisecond"&&(o=l.getTimezoneOffset(),l.setUTCMinutes(l.getUTCMinutes()-o)),t){case"day":let h=l.getUTCDate();if(e>1){if(a){a=E(a,"day",1);let m=l.getTime()-a.getTime(),r=Math.floor(m/k("day")/e),I=k("day",r*e);l.setTime(a.getTime()+I-o*k("minute"))}}else l.setUTCDate(h);l.setUTCHours(0,0,0,0);break;case"second":let d=l.getUTCSeconds();e>1&&(d=Math.floor(d/e)*e),l.setUTCSeconds(d,0);break;case"millisecond":if(e==1)return l;let u=l.getUTCMilliseconds();u=Math.floor(u/e)*e,l.setUTCMilliseconds(u);break;case"hour":let g=l.getUTCHours();e>1&&(g=Math.floor(g/e)*e),l.setUTCHours(g,0,0,0);break;case"minute":let p=l.getUTCMinutes();e>1&&(p=Math.floor(p/e)*e),l.setUTCMinutes(p,0,0);break;case"month":let b=l.getUTCMonth();e>1&&(e==2||e==3||e==4||e==6)&&(b=Math.floor(b/e)*e),l.setUTCMonth(b,1),l.setUTCHours(0,0,0,0);break;case"year":let v=l.getUTCFullYear();e>1&&(v=Math.floor(v/e)*e),l.setUTCFullYear(v,0,1),l.setUTCHours(0,0,0,0);break;case"week":if(e>1&&a){a=E(a,"week",1);let m=l.getTime()-a.getTime(),r=Math.floor(m/k("week")/e),I=k("week",r*e);l.setTime(a.getTime()+I-o*k("minute"))}let _=l.getUTCDate(),f=l.getUTCDay();$(i)||(i=1),f>=i?_=_-f+i:_=_-(7+f)+i,l.setUTCDate(_),l.setUTCHours(0,0,0,0);break}if(!s&&t!="millisecond"&&(l.setUTCMinutes(l.getUTCMinutes()+o),t=="day"||t=="week"||t=="month"||t=="year")){let h=l.getTimezoneOffset();if(h!=o){let d=h-o;l.setUTCMinutes(l.getUTCMinutes()+d)}}return l}else{if(isNaN(l.getTime()))return l;let o=l.getTime(),h=n.offsetUTC(l),d=l.getTimezoneOffset(),u=n.parseDate(l),g=u.year,p=u.month,b=u.day,v=u.hour,_=u.minute,f=u.second,m=u.millisecond,r=u.weekday,I=h-d;switch(t){case"day":if(e>1&&a){a=E(a,"day",1,i,s,void 0,n);let x=l.getTime()-a.getTime(),R=Math.floor(x/k("day")/e),j=k("day",R*e);l.setTime(a.getTime()+j),u=n.parseDate(l),g=u.year,p=u.month,b=u.day}v=0,_=I,f=0,m=0;break;case"second":_+=I,e>1&&(f=Math.floor(f/e)*e),m=0;break;case"millisecond":_+=I,e>1&&(m=Math.floor(m/e)*e);break;case"hour":e>1&&(v=Math.floor(v/e)*e),_=I,f=0,m=0;break;case"minute":e>1&&(_=Math.floor(_/e)*e),_+=I,f=0,m=0;break;case"month":e>1&&(p=Math.floor(p/e)*e),b=1,v=0,_=I,f=0,m=0;break;case"year":e>1&&(g=Math.floor(g/e)*e),p=0,b=1,v=0,_=I,f=0,m=0;break;case"week":$(i)||(i=1),r>=i?b=b-r+i:b=b-(7+r)+i,v=0,_=I,f=0,m=0;break}l=new Date(g,p,b,v,_,f,m);const P=l.getTime();let T=36e5;t=="hour"&&(T=36e5*e),P+T<=o&&(t=="hour"||t=="minute"||t=="second"||t=="millisecond")&&(l=new Date(P+T));let A=l.getTimezoneOffset(),U=n.offsetUTC(l)-A;return U!=I&&l.setTime(l.getTime()+(U-I)*6e4),l}}class H extends V{constructor(){super(...arguments),Object.defineProperty(this,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_baseSeriesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new se}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:D.new(this._root,{width:M,height:M,position:"absolute"})})}_afterNew(){this.valueFields.push("value","customValue"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll(()=>{this._handleBullets(this.dataItems)}))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let t=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),t)}endIndex(){let t=this.dataItems.length;return Math.max(0,Math.min(this.getPrivate("endIndex",t),t))}_handleBullets(t){C(t,e=>{const i=e.bullets;i&&(C(i,s=>{s.dispose()}),e.bullets=void 0)}),this.markDirtyValues()}_makeBullets(t){this._shouldMakeBullet(t)&&(t.bullets=[],this.bullets.each(e=>{this._makeBullet(t,e)}))}_shouldMakeBullet(t){return!0}_makeBullet(t,e,i){const s=e(this._root,this,t);return s&&(s._index=i,this._makeBulletReal(t,s)),s}_makeBulletReal(t,e){let i=e.get("sprite");i&&(i._setDataItem(t),i.setRaw("position","absolute"),this.bulletsContainer.children.push(i)),e.series=this,t.bullets.push(e)}addBullet(t,e){t.bullets||(t.bullets=[]),e&&this._makeBulletReal(t,e)}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._baseSeriesDirty=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();let t=this.startIndex(),e=this.endIndex();if(this.isDirty("name")&&this.updateLegendValue(),this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const s=this.getPrivate("baseValueSeries");s&&this._disposers.push(s.onPrivate("startIndex",()=>{this._baseSeriesDirty=!0,this.markDirtyValues()}))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0,t!=0&&(this._psi=void 0))),(this._psi!=t||this._pei!=e||this.isPrivateDirty("adjustedStartIndex"))&&!this._selectionAggregatesCalculated&&(t===0&&e===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(t,e),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let s=this.get("tooltip");s&&(s.hide(0),s.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let s;const a=this.get("legendDataItem");if(a&&(s=a.get("markerRectangle"),s&&this.isVisible())){if(this.isDirty("stroke")){let n=this.get("stroke");s.set("stroke",n)}if(this.isDirty("fill")){let n=this.get("fill");s.set("fill",n)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let s=this.startIndex(),a=this.endIndex();a<this.dataItems.length&&a++;for(let n=s;n<a;n++){let o=this.dataItems[n];o.bullets||this._makeBullets(o)}}}_handleRemoved(){}_adjustStartIndex(t){return t}_calculateAggregates(t,e){let i=this._valueFields;if(!i)throw new Error("No value fields are set for the series.");const s=this.get("excludeFromAggregate");s&&(i=i.filter(f=>s.indexOf(f)==-1));const a={},n={},o={},h={},d={},u={},g={},p={},b={};for(let f=0,m=i.length;f<m;f++){let r=i[f];a[r]=0,n[r]=0,o[r]=0}const v=this.dataItems,_=v.length;for(let f=0,m=i.length;f<m;f++){let r=i[f],I=r+"Change",P=r+"ChangePercent",T=r+"ChangePrevious",A=r+"ChangePreviousPercent",Z=r+"ChangeSelection",U=r+"ChangeSelectionPercent",x="valueY";(r==="valueX"||r.endsWith("ValueX"))&&(x="valueX");const R=this.getPrivate("baseValueSeries"),j=this.getPrivate("adjustedStartIndex",t),L=(c,y,w)=>{if(t===0){const Q=u[x],J=y-Q;c.setRaw(I,J),c.setRaw(P,J/Q*100)}const X=y-b[x],Y=y-u[x];c.setRaw(T,X),c.setRaw(A,X/b[x]*100),c.setRaw(Z,Y),c.setRaw(U,Y/u[x]*100),b[w]=y};for(let c=j;c<e;c++){const y=v[c];if(y){let w=y.get(r);if(w!=null){h[r]==null&&(h[r]=w),d[r]==null&&(d[r]=w),u[r]==null&&(u[r]=w,b[r]=w,R&&(u[x]=R._getBase(x)));break}}}for(let c=j;c<e;c++){const y=v[c];if(y){let w=y._settings[r];w!=null&&(o[r]++,a[r]+=w,n[r]+=Math.abs(w),h[r]>w&&(h[r]=w),d[r]<w&&(d[r]=w),g[r]=w,L(y,w,r))}}if(p[r]=a[r]/o[r],e<_){const c=v[e];if(c){let y=c.get(r);y!=null&&L(c,y,r)}}if(e+1<_){const c=v[e+1];if(c){let y=c.get(r);y!=null&&L(c,y,r)}}t>0&&t--,delete b[r];for(let c=t;c<j;c++){const y=v[c];if(y){let w=y.get(r);b[r]==null&&(b[r]=w),w!=null&&L(y,w,r)}}}for(let f=0,m=i.length;f<m;f++){let r=i[f];this.setPrivate(r+"AverageSelection",p[r]),this.setPrivate(r+"CountSelection",o[r]),this.setPrivate(r+"SumSelection",a[r]),this.setPrivate(r+"AbsoluteSumSelection",n[r]),this.setPrivate(r+"LowSelection",h[r]),this.setPrivate(r+"HighSelection",d[r]),this.setPrivate(r+"OpenSelection",u[r]),this.setPrivate(r+"CloseSelection",g[r])}if(t===0&&e===_)for(let f=0,m=i.length;f<m;f++){let r=i[f];this.setPrivate(r+"Average",p[r]),this.setPrivate(r+"Count",o[r]),this.setPrivate(r+"Sum",a[r]),this.setPrivate(r+"AbsoluteSum",n[r]),this.setPrivate(r+"Low",h[r]),this.setPrivate(r+"High",d[r]),this.setPrivate(r+"Open",u[r]),this.setPrivate(r+"Close",g[r])}}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const t=this.get("heatRules");if(this._valuesDirty&&t&&t.length>0&&C(t,e=>{const i=e.minValue||this.getPrivate(e.dataField+"Low")||0,s=e.maxValue||this.getPrivate(e.dataField+"High")||0;C(e.target._entities,a=>{const n=a.dataItem.get(e.dataField);if(!$(n)){e.neutral&&a.set(e.key,e.neutral);const o=a.states;if(o){const h=o.lookup("default");h&&e.neutral&&h.set(e.key,e.neutral)}if(!e.customFunction)return}if(e.customFunction)e.customFunction.call(this,a,i,s,n);else{let o;e.logarithmic?o=(Math.log(n)*Math.LOG10E-Math.log(i)*Math.LOG10E)/(Math.log(s)*Math.LOG10E-Math.log(i)*Math.LOG10E):o=(n-i)/(s-i),$(n)&&(!$(o)||Math.abs(o)==1/0)&&(o=.5);let h;$(e.min)?h=e.min+(e.max-e.min)*o:e.min instanceof W?h=W.interpolate(o,e.min,e.max):e.min instanceof ue&&(h=he(o,e.min,e.max)),a.set(e.key,h);const d=a.states;if(d){const u=d.lookup("default");u&&u.set(e.key,h)}}})}),this.get("visible")){let e=this.dataItems.length,i=this.startIndex(),s=this.endIndex();s<e&&s++,i>0&&i--;for(let a=0;a<i;a++)this._hideBullets(this.dataItems[a]);for(let a=i;a<s;a++)this._positionBullets(this.dataItems[a]);for(let a=s;a<e;a++)this._hideBullets(this.dataItems[a])}}_positionBullets(t){t.bullets&&C(t.bullets,e=>{this._positionBullet(e);const i=e.get("sprite");e.get("dynamic")&&(i&&(i._markDirtyKey("fill"),i.markDirtySize()),i instanceof D&&i.walkChildren(s=>{s._markDirtyKey("fill"),s.markDirtySize(),s instanceof ee&&s.text.markDirtyText()})),i instanceof ee&&i.get("populateText")&&i.text.markDirtyText()})}_hideBullets(t){t.bullets&&C(t.bullets,e=>{let i=e.get("sprite");i&&i.setPrivate("visible",!1)})}_positionBullet(t){}_placeBulletsContainer(t){t.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const t=this.bulletsContainer;t.parent&&t.parent.children.removeValue(t)}disposeDataItem(t){const e=t.bullets;e&&(C(e,i=>{i.dispose()}),t.bullets=void 0)}_getItemReaderLabel(){return""}showDataItem(t,e){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return O(this,void 0,void 0,function*(){const s=[i.showDataItem.call(this,t,e)],a=t.bullets;a&&C(a,n=>{const o=n.get("sprite");o&&s.push(o.show(e))}),yield Promise.all(s)})}hideDataItem(t,e){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return O(this,void 0,void 0,function*(){const s=[i.hideDataItem.call(this,t,e)],a=t.bullets;a&&C(a,n=>{const o=n.get("sprite");o&&s.push(o.hide(e))}),yield Promise.all(s)})}_sequencedShowHide(t,e){return O(this,void 0,void 0,function*(){if(this.get("sequencedInterpolation"))if($(e)||(e=this.get("interpolationDuration",0)),e>0){const i=this.startIndex(),s=this.endIndex();yield Promise.all(te(this.dataItems,(a,n)=>O(this,void 0,void 0,function*(){let o=e||0;(n<i-10||n>s+10)&&(o=0);let h=this.get("sequencedDelay",0)+o/(s-i);yield ce(h*(n-i)),t?yield this.showDataItem(a,o):yield this.hideDataItem(a,o)})))}else yield Promise.all(te(this.dataItems,i=>t?this.showDataItem(i,0):this.hideDataItem(i,0)))})}updateLegendValue(t){if(t){const e=t.get("legendDataItem");if(e){const i=e.get("valueLabel");if(i){const a=i.text;let n="";i._setDataItem(t),n=this.get("legendValueText",a.get("text","")),i.set("text",n),a.markDirtyText()}const s=e.get("label");if(s){const a=s.text;let n="";s._setDataItem(t),n=this.get("legendLabelText",a.get("text","")),s.set("text",n),a.markDirtyText()}}}}updateLegendMarker(t){}_onHide(){super._onHide();const t=this.getTooltip();t&&t.hide()}hoverDataItem(t){}unhoverDataItem(t){}_getBase(t){const e=this.dataItems[this.startIndex()];return e?e.get(t):0}}Object.defineProperty(H,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"});Object.defineProperty(H,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:V.classNames.concat([H.className])});function ie(l,t){for(let e=0,i=t.length;e<i;e++){const s=t[e];if(s.length>0){let a=s[0];if(a.length>0){let n=a[0];l.moveTo(n.x,n.y);for(let o=0,h=s.length;o<h;o++)pe(l,s[o])}}}}function pe(l,t){for(let e=0,i=t.length;e<i;e++){const s=t[e];l.lineTo(s.x,s.y)}}class F extends ae{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const t=this.get("points"),e=this.get("segments");if(t&&t.length>0){let i=t[0];this._display.moveTo(i.x,i.y),ie(this._display,[[t]])}else if(e)ie(this._display,e);else if(!this.get("draw")){let i=this.width(),s=this.height();this._display.moveTo(0,0),this._display.lineTo(i,s)}}}}Object.defineProperty(F,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"});Object.defineProperty(F,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ae.classNames.concat([F.className])});function we(l){return function(){return l}}const G=Math.PI,z=2*G,S=1e-6,be=z-S;function re(l){this._+=l[0];for(let t=1,e=l.length;t<e;++t)this._+=arguments[t]+l[t]}function _e(l){let t=Math.floor(l);if(!(t>=0))throw new Error(`invalid digits: ${l}`);if(t>15)return re;const e=10**t;return function(i){this._+=i[0];for(let s=1,a=i.length;s<a;++s)this._+=Math.round(arguments[s]*e)/e+i[s]}}class ge{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?re:_e(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,s){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,e,i,s,a,n){this._append`C${+t},${+e},${+i},${+s},${this._x1=+a},${this._y1=+n}`}arcTo(t,e,i,s,a){if(t=+t,e=+e,i=+i,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let n=this._x1,o=this._y1,h=i-t,d=s-e,u=n-t,g=o-e,p=u*u+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(p>S)if(!(Math.abs(g*h-d*u)>S)||!a)this._append`L${this._x1=t},${this._y1=e}`;else{let b=i-n,v=s-o,_=h*h+d*d,f=b*b+v*v,m=Math.sqrt(_),r=Math.sqrt(p),I=a*Math.tan((G-Math.acos((_+p-f)/(2*m*r)))/2),P=I/r,T=I/m;Math.abs(P-1)>S&&this._append`L${t+P*u},${e+P*g}`,this._append`A${a},${a},0,0,${+(g*b>u*v)},${this._x1=t+T*h},${this._y1=e+T*d}`}}arc(t,e,i,s,a,n){if(t=+t,e=+e,i=+i,n=!!n,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(s),h=i*Math.sin(s),d=t+o,u=e+h,g=1^n,p=n?s-a:a-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>S||Math.abs(this._y1-u)>S)&&this._append`L${d},${u}`,i&&(p<0&&(p=p%z+z),p>be?this._append`A${i},${i},0,1,${g},${t-o},${e-h}A${i},${i},0,1,${g},${this._x1=d},${this._y1=u}`:p>S&&this._append`A${i},${i},0,${+(p>=G)},${g},${this._x1=t+i*Math.cos(a)},${this._y1=e+i*Math.sin(a)}`)}rect(t,e,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function Ie(l){let t=3;return l.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);t=i}return l},()=>new ge(t)}class N extends D{constructor(){super(...arguments),Object.defineProperty(this,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(D.new(this._root,{width:M,height:M,interactiveChildren:!1}))}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:D.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:M,height:M})})}}Object.defineProperty(N,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"});Object.defineProperty(N,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:D.classNames.concat([N.className])});class q extends N{constructor(){super(...arguments),Object.defineProperty(this,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:D.new(this._root,{width:M,height:M,isMeasured:!1})}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:new fe})}_afterNew(){super._afterNew(),this._disposers.push(this.series);const t=this.seriesContainer.children;this._disposers.push(this.series.events.onAll(e=>{if(e.type==="clear"){C(e.oldValues,a=>{this._removeSeries(a)});const i=this.get("colors");i&&i.reset();const s=this.get("patterns");s&&s.reset()}else if(e.type==="push")t.moveValue(e.newValue),this._processSeries(e.newValue);else if(e.type==="setIndex")t.setIndex(e.index,e.newValue),this._processSeries(e.newValue);else if(e.type==="insertIndex")t.insertIndex(e.index,e.newValue),this._processSeries(e.newValue);else if(e.type==="removeIndex")this._removeSeries(e.oldValue);else if(e.type==="moveIndex")t.moveValue(e.value,e.newIndex),this._processSeries(e.value);else if(e.type==="swap"){const i=e.a,s=e.b,a=this.series.indexOf(i),n=this.series.indexOf(s);t.moveValue(i,n),t.moveValue(s,a),this.series.each(o=>{this._processSeries(o),o.markDirtyValues()})}else throw new Error("Unknown IListEvent type")}))}_processSeries(t){t.chart=this,t._placeBulletsContainer(this)}_removeSeries(t){t._handleRemoved(),t.isDisposed()||(this.seriesContainer.children.removeValue(t),t._removeBulletsContainer())}}Object.defineProperty(q,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"});Object.defineProperty(q,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:N.classNames.concat([q.className])});class K extends F{}Object.defineProperty(K,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"});Object.defineProperty(K,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.classNames.concat([K.className])});export{V as C,B as D,q as S,K as T,H as a,we as c,E as r,Ie as w};

import{ku as B,m8 as Q,m9 as Z,kv as X,aJ as e,aK as t,aL as S,db as ee,gI as k,b2 as O,jx as A,bb as Y,am as _,nQ as te,eb as ie,e1 as oe,ae as re,a$ as ne,qb as ae,ay as se,dZ as pe,a as le,aE as ye}from"./index-C_bK48d2.js";const de=Symbol("isOrientedImageryGraphicOrigin");var G;let ue=class extends B{get[(G=de,Q)](){return this.layer}get[Z](){return this.layer}get[X](){return this.layer}constructor(o){super(),this[G]=!0,this.type="oriented-imagery",this.layer=o}get id(){return this.layer.id}},P=class extends ee{set horizontalWKID(o){o?k({wkid:+o})?this._set("horizontalWKID",+o):this._set("horizontalWKID",o):this._set("horizontalWKID",null)}set verticalWKID(o){o?this._set("verticalWKID",isFinite(o)&&k({wkid:+o})?+o:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:o,focalLength:r,principalOffsetPoint:a,radialDistortionCoefficients:l,tangentialDistortionCoefficients:p}=this;return(o==null?void 0:o.length)>1&&!Number.isNaN(r)&&(a==null?void 0:a.length)>1&&(l==null?void 0:l.length)>1&&(p==null?void 0:p.length)>1}};e([t({json:{write:!0}})],P.prototype,"affineTransformations",void 0),e([t({json:{write:!0}})],P.prototype,"focalLength",void 0),e([t({json:{write:!0}})],P.prototype,"principalOffsetPoint",void 0),e([t({json:{write:!0}})],P.prototype,"radialDistortionCoefficients",void 0),e([t({json:{write:!0}})],P.prototype,"tangentialDistortionCoefficients",void 0),e([t({json:{write:!0}})],P.prototype,"horizontalWKID",null),e([t({json:{write:!0}})],P.prototype,"verticalWKID",null),e([t({json:{write:!0}})],P.prototype,"x",void 0),e([t({json:{write:!0}})],P.prototype,"y",void 0),e([t({json:{write:!0}})],P.prototype,"z",void 0),e([t({json:{write:!0}})],P.prototype,"type",void 0),P=e([S("esri.layers.orientedImagery.core.CameraOrientation")],P);const M=P;let w=class extends O(A(M)){constructor(){super(...arguments),this.type=1}toString(){const{type:o,horizontalWKID:r,verticalWKID:a,x:l,y:p,z:c,heading:y,pitch:f,roll:I,affineTransformations:h,focalLength:N,principalOffsetPoint:m,radialDistortionCoefficients:g,tangentialDistortionCoefficients:v}=this,u=[o,r,a,l,p,c,y,f,I];return this.isAdvanced&&(h==null||h.forEach(s=>u.push(s)),u.push(N),m==null||m.forEach(s=>u.push(s)),g==null||g.forEach(s=>u.push(s)),v==null||v.forEach(s=>u.push(s))),u.map(s=>Number.isNaN(s)?"":s).join("|")}};e([t({json:{write:!0}})],w.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],w.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],w.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],w.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],w.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"heading",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],w.prototype,"z",void 0),w=e([S("esri.layers.orientedImagery.core.CameraOrientationHPR")],w);const ce=w;let D=class extends O(A(M)){constructor(){super(...arguments),this.type=4}toString(){const{type:o,latitude:r,longitude:a,ellipsoidRadius:l,squaredEccentricity:p,properties:c}=this,y=`${c}`.split("|");return y.splice(1,1),`${o}|${r}|${a}|${l}|${p}|${y.join("|")}`}};e([t({json:{write:!0}})],D.prototype,"type",void 0),e([t({json:{write:!0},type:Number})],D.prototype,"latitude",void 0),e([t({json:{write:!0},type:Number})],D.prototype,"longitude",void 0),e([t({json:{write:!0},type:Number})],D.prototype,"ellipsoidRadius",void 0),e([t({json:{write:!0},type:Number})],D.prototype,"squaredEccentricity",void 0),e([t({json:{write:!0}})],D.prototype,"properties",void 0),D=e([S("esri.layers.orientedImagery.core.CameraOrientationLTP")],D);const me=D;let j=class extends O(A(M)){constructor(){super(...arguments),this.type=2}toString(){const{type:o,horizontalWKID:r,verticalWKID:a,x:l,y:p,z:c,omega:y,phi:f,kappa:I,affineTransformations:h,focalLength:N,principalOffsetPoint:m,radialDistortionCoefficients:g,tangentialDistortionCoefficients:v}=this,u=[o,r,a,l,p,c,y,f,I];return this.isAdvanced&&(h==null||h.forEach(s=>u.push(s)),u.push(N),m==null||m.forEach(s=>u.push(s)),g==null||g.forEach(s=>u.push(s)),v==null||v.forEach(s=>u.push(s))),u.map(s=>isNaN(s)?"":s).join("|")}};e([t({json:{write:!0}})],j.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],j.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"omega",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"phi",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"kappa",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],j.prototype,"z",void 0),j=e([S("esri.layers.orientedImagery.core.CameraOrientationOPK")],j);const fe=j;let b=class extends O(A(M)){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:o,focalLength:r,principalOffsetPoint:a,radialDistortionCoefficients:l,tangentialDistortionCoefficients:p}=this;return(o==null?void 0:o.length)>1||!Number.isNaN(r)||(a==null?void 0:a.length)>1||(l==null?void 0:l.length)>1||(p==null?void 0:p.length)>1}toString(){const{type:o,horizontalWKID:r,verticalWKID:a,x:l,y:p,z:c,yaw:y,pitch:f,roll:I,affineTransformations:h,focalLength:N,principalOffsetPoint:m,radialDistortionCoefficients:g,tangentialDistortionCoefficients:v}=this,u=[o,r,a,l,p,c,y,f,I];return this.isAdvanced&&(h==null||h.forEach(s=>u.push(s)),u.push(N),m==null||m.forEach(s=>u.push(s)),m==null||m.forEach(s=>u.push(s)),g==null||g.forEach(s=>u.push(s)),v==null||v.forEach(s=>u.push(s))),u.map(s=>Number.isNaN(s)?"":s).join("|")}};e([t({json:{write:!0}})],b.prototype,"type",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"affineTransformations",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"focalLength",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"principalOffsetPoint",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"radialDistortionCoefficients",void 0),e([t({type:[Number],json:{write:!0}})],b.prototype,"tangentialDistortionCoefficients",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"yaw",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"pitch",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"roll",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"x",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"y",void 0),e([t({type:Number,json:{write:!0}})],b.prototype,"z",void 0),b=e([S("esri.layers.orientedImagery.core.CameraOrientationYPR")],b);const he=b,W=new Map;W.set("2",{desc:"Using Omega Phi Kappa",constructor:fe}),W.set("1",{desc:"Using Heading, Pitch and Roll",constructor:ce}),W.set("3",{desc:"Using Yaw, Pitch and Roll",constructor:he}),W.set("4",{desc:"Using Local Tangent Plane",constructor:me});let x=class extends O(Y){constructor(){super(...arguments),this.url=null}};e([t({type:Number,json:{write:!0}})],x.prototype,"lod",void 0),e([t({type:String,json:{write:!0}})],x.prototype,"rasterFunction",void 0),e([t({type:String,json:{write:!0}})],x.prototype,"url",void 0),x=e([S("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],x);let U=class extends O(Y){constructor(){super(...arguments),this.constantElevation=null}};e([t({type:Number,json:{write:!0}})],U.prototype,"constantElevation",void 0),U=e([S("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],U);const ge=i=>i!=null&&typeof i.constantElevation=="number";function ve(i,o,r){return o&&(i=`${o}${i}`),r&&(i+=`${r}`),i}function we(i,o,r){let{url:a}=i;return a?(a=ve(a,o,r),new x({...i,url:a})):null}function je(i,o,r){return i&&(ge(i)?new U(i):we(i,o,r))}const L=new _({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),R=new _({Feet:"feet",Meter:"meter"}),q=new _({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique",Terrestrial360Video:"terrestrial-360-video",TerrestrialFrameVideo:"terrestrial-frame-video",Aerial360Video:"aerial-360-video",AerialFrameVideo:"aerial-frame-video","":null}),K=new Map;function be(i){const[o,r,a,l,p,c,y,f,I,h,N,m,g,v,u,s,$,T,z,C,E,F]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:a,y:l,z:p,omega:c,phi:y,kappa:f,...H([I,h,N,m,g,v],[s,$],[T,z,C],[E,F],u)}}K.set("1",Ie),K.set("3",Pe),K.set("2",be),K.set("4",Ne);const V=i=>{const o=i.map(r=>parseFloat(r)).filter(r=>!isNaN(r));if(o.length===i.length)return o};function H(i,o,r,a,l){const p=V(i),c=V(o),y=V(r),f=V(a);return{affineTransformations:(p==null?void 0:p.length)===6?p:void 0,focalLength:(p==null?void 0:p.length)===6?parseFloat(l):void 0,principalOffsetPoint:(c==null?void 0:c.length)!==2?[0,0]:c,radialDistortionCoefficients:(y==null?void 0:y.length)!==3?[0,0,0]:y,tangentialDistortionCoefficients:(f==null?void 0:f.length)!==2?[0,0]:f}}function Ie(i){const[o,r,a,l,p,c,y,f,I,h,N,m,g,v,u,s,$,T,z,C,E,F]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:a,y:l,z:p,heading:c,pitch:y,roll:f,...H([I,h,N,m,g,v],[s,$],[T,z,C],[E,F],u)}}function Pe(i){const[o,r,a,l,p,c,y,f,I,h,N,m,g,v,u,s,$,T,z,C,E,F]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:a,y:l,z:p,yaw:c,pitch:y,roll:f,...H([I,h,N,m,g,v],[s,$],[T,z,C],[E,F],u)}}function Ne(i){var I;const[o,r,a,l,p,...c]=i.slice(1),y=K.get(p),f=(I=W.get(p))==null?void 0:I.constructor;return!y||!f?null:{latitude:o,longitude:r,ellipsoidRadius:a,squaredEccentricity:l,properties:new f(y([p,"",...c]))}}function De(i){return Array.isArray(i)&&(i==null?void 0:i.length)>5&&!i.some(isNaN)}function Se(i){for(i=i.slice(0,8);i.length<8;)i.push(0);return i}const xe=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","referenceIDField","sequenceOrderField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),Oe=new Set(["elevationSource"]),J=(i,o)=>!xe.has(o)&&i,$e=(i,o,r)=>{const a=`orientedImageryProperties.${i}`,l={allowNull:Oe.has(i),ignoreOrigin:!0};return{name:a,write:o?{...l,target:a,writer:o}:l,read:r?{ignoreOrigin:!0,source:a,reader:r}:{ignoreOrigin:!0}}};function Te(i){return i.json&&(i.json.origins=i.json.origins??{},i.json.origins["web-scene"]={write:!1,read:!1}),i}function d(i,o,r,a){const{name:l,write:p,read:c}=$e(i,o,r),y={name:l,write:p,read:c,origins:{service:{name:`orientedImageryInfo.${l}`,write:o,read:r},"web-scene":{name:l,write:J(p,i),read:J(c,i)},"web-map":{name:l,write:p,read:c}}};return a&&y.origins&&(y.type=a,y.origins["web-map"].type=a,y.origins["web-scene"].type=a),y}let n=class extends pe{constructor(i){super(i),this.attributeTableTemplate=null,this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.graphicOrigin=new ue(this),this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.referenceIDField="OBJECTID",this.sequenceOrderField="SequenceOrder",this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.virtualCacheDirectory=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:i,demPathPrefix:o,demPathSuffix:r}=this;return je(i,o,r)}set fieldConfigurations(i){}get fieldConfigurations(){}writePopupTemplate(i,o,r,a){i&&(o[r]=i.toJSON(a))}get portalItem(){return super.portalItem}set portalItem(i){super.portalItem=i}async save(i){return this._debouncedSaveOperations(0,i)}async saveAs(i,o){return this._debouncedSaveOperations(1,o,i)}findFirstValidLayerId(i){var o,r;return(r=(o=i.layers)==null?void 0:o.find(a=>this.supportedSourceTypes.has(a.type)))==null?void 0:r.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new le("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};e([t({type:te,json:{write:!1,read:!1}})],n.prototype,"attributeTableTemplate",void 0),e([t({type:Number,json:d("cameraHeading")})],n.prototype,"cameraHeading",void 0),e([t({type:Number,json:d("cameraHeight")})],n.prototype,"cameraHeight",void 0),e([t({type:Number,json:d("cameraPitch")})],n.prototype,"cameraPitch",void 0),e([t({type:Number,json:d("cameraRoll")})],n.prototype,"cameraRoll",void 0),e([t({type:Number,json:d("coveragePercent")})],n.prototype,"coveragePercent",void 0),e([t({type:String,json:d("demPathPrefix")})],n.prototype,"demPathPrefix",void 0),e([t({type:String,json:d("demPathSuffix")})],n.prototype,"demPathSuffix",void 0),e([t({type:String,json:d("depthImagePathPrefix")})],n.prototype,"depthImagePathPrefix",void 0),e([t({type:String,json:d("depthImagePathSuffix")})],n.prototype,"depthImagePathSuffix",void 0),e([t({type:Object,json:d("elevationSource")})],n.prototype,"elevationSource",void 0),e([t({readOnly:!0})],n.prototype,"effectiveElevationSource",null),e([t({type:Number,json:d("farDistance")})],n.prototype,"farDistance",void 0),e([t({json:{write:!1}})],n.prototype,"fieldConfigurations",null),e([t({type:[ie]})],n.prototype,"fields",void 0),e([t()],n.prototype,"geometryType",void 0),e([t({readOnly:!0,clonable:!1})],n.prototype,"graphicOrigin",void 0),e([t({type:Number,json:d("horizontalFieldOfView")})],n.prototype,"horizontalFieldOfView",void 0),e([t({type:String,json:d("horizontalMeasurementUnit")})],n.prototype,"horizontalMeasurementUnit",void 0),e([t({type:String,json:{...d("imageGeometryField"),default:"ImageGeometry"}})],n.prototype,"imageGeometryField",void 0),e([t({type:String,json:d("imagePathPrefix")})],n.prototype,"imagePathPrefix",void 0),e([t({type:String,json:d("imagePathSuffix")})],n.prototype,"imagePathSuffix",void 0),e([t({type:String,json:{...d("imageReferenceField"),default:"OIObjectID"}})],n.prototype,"imageReferenceField",void 0),e([t({type:Number,json:d("imageRotation")})],n.prototype,"imageRotation",void 0),e([t({type:Number,json:d("maximumDistance")})],n.prototype,"maximumDistance",void 0),e([t({type:Number,json:d("nearDistance")})],n.prototype,"nearDistance",void 0),e([t({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],n.prototype,"operationalLayerType",void 0),e([t({json:{...d("orientationAccuracy",(i,o,r)=>{ye(r,i.join(";"),o)},i=>{var r;const o=(r=i==null?void 0:i.split(";"))==null?void 0:r.map(Number);return De(o)?Se(o):[0,0,0,0,0,0,0,0]},String)}})],n.prototype,"orientationAccuracy",void 0),e([t({json:{...d("orientedImageryType",q.write,q.read,q.jsonValues.slice(1))}})],n.prototype,"orientedImageryType",void 0),e([oe("popupTemplate")],n.prototype,"writePopupTemplate",null),e([t({type:String,json:{...d("referenceIDField"),default:"OBJECTID"}})],n.prototype,"referenceIDField",void 0),e([t({type:String,json:{...d("sequenceOrderField"),default:"SequenceOrder"}})],n.prototype,"sequenceOrderField",void 0),e([t({type:re})],n.prototype,"spatialReference",void 0),e([t({json:{read:!1},value:"oriented-imagery",readOnly:!0})],n.prototype,"type",void 0),e([t({type:L.apiValues,json:{...d("timeIntervalUnit",L.write,L.read,L.jsonValues)}})],n.prototype,"timeIntervalUnit",void 0),e([t(Te(ne(ae)))],n.prototype,"useViewTime",void 0),e([t({type:Number,json:d("verticalFieldOfView")})],n.prototype,"verticalFieldOfView",void 0),e([t({type:R.apiValues,json:{...d("verticalMeasurementUnit",R.write,R.read,R.jsonValues)}})],n.prototype,"verticalMeasurementUnit",void 0),e([t({type:String,json:d("videoPathPrefix")})],n.prototype,"videoPathPrefix",void 0),e([t({type:String,json:d("videoPathSuffix")})],n.prototype,"videoPathSuffix",void 0),e([t({type:String,json:{read:!1,write:!1,origins:{service:{name:"orientedImageryInfo.orientedImageryProperties.virtualCacheDirectory",read:!0}}}})],n.prototype,"virtualCacheDirectory",void 0),e([t({type:se,json:{origins:{"web-scene":{write:!1,read:!1}}}})],n.prototype,"visibilityTimeExtent",void 0),n=e([S("esri.layers.OrientedImageryLayer")],n);const Re=n;export{Re as default};
